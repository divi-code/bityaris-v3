import{s as m,a as w,e as M,b as x,w as $,m as P,n as S,af as g,B as a}from"./chunk-a092f8ee.js";import{i as L}from"./chunk-19eee52c.js";import{S as l,B as o,m as u}from"./app-7c71c7a1.js";const b=new l,A=new l,y=new o(p()),d=new o([]);new o(null);new o(null);new o(0);new o(0);const F=new o([]),R=new o([]),T=new o([]),U=new o("--");A.pipe(m(x),w(e=>h(e)),u(J)).subscribe(e=>y.next(e));y.pipe(u(H)).subscribe(e=>U.next(e));d.pipe(u(v)).subscribe(e=>F.next(e));d.pipe(u(C)).subscribe(e=>R.next(e));d.pipe(u(z)).subscribe(e=>T.next(e));M([y,$]).pipe(u(G)).subscribe(e=>d.next(e));async function h(e){b.next(!0);const{data:t,error:i}=await L.getProduct(e);if(b.next(!1),t)return t;if(i)return P.send("toast","error",i),p()}const D=new l,k=new o([]);D.pipe(m(x),w(()=>B())).subscribe(e=>k.next(e));async function B(){const{data:e,error:t}=await S.getTasksList();return e?e.rows:(t&&P.send("toast","error",t),[])}const O=new l,j=new o(p());O.pipe(m(x),w(e=>q(e))).subscribe(e=>j.next(e));async function q(e){const{data:t,error:i}=await L.getProductOnly(e);if(t)return t;if(i)return P.send("toast","error",i),p()}function p(){return{total:0,rows:[]}}new l;new o(V());function V(){return{id:1,name:"activity",productId:202,beginTime:1630944e6,endTime:1631808e6,minUsdtEv:1e10,minBtcEv:3e5,multiplier:100}}function v(e){return e.map(t=>{const{currency:i,rateEr:r,userMinLimitEv:n,userMaxLimitEv:s}=t,c=t.poolMaxLimitEv<t.userMaxLimitEv?t.poolMaxLimitEv:t.userMaxLimitEv;return{...t,coinUrl:g.getUrl(i),rate:a.floor(r,2,6),userMinLimit:i==="USDT"?a.floor(t.userMinLimitEv,0,8):a.parseFloat(n,8,8),calcMaxLimit:i==="USDT"?a.floor(c,0,8):a.parseFloat(c,8,8),calcMaxLimitEv:c}})}function C(e){const i=e.filter(({calculationPeriodMultiplier:r})=>r===1).map(r=>({...r,ladderApyVos:r.ladderApyVos?r.ladderApyVos.map(n=>({...n,lowerAmount:String(a.delimit(a.floor(n.lowerAmountEv,r.valuePrecision,r.valueScale))).split(".")[0],upperAmount:String(a.delimit(a.floor(n.upperAmountEv,r.valuePrecision,r.valueScale))).split(".")[0],ratio:a.floor(n.ratioEr,2,6)})):[]}));return v(i)}function W(e,t){const i={productId:t.productId,calculationPeriodMultiplier:t.calculationPeriodMultiplier,rateEr:t.rateEr,valuePrecision:t.valuePrecision};return(e.calculationPeriodList?[...e.calculationPeriodList,i]:[i]).sort((n,s)=>n.calculationPeriodMultiplier-s.calculationPeriodMultiplier)}function I(e,t,i){if(!e[t.currency]){const r=i.filter(n=>n.currency===t.currency);return r[r.length>1?1:0]}return e[t.currency]}function z(e){const i=e.filter(({calculationPeriodMultiplier:n})=>n!==1).reduce((n,s,c,E)=>{const f=I(n,s,E);return f.calculationPeriodList=W(f,s),{...n,[s.currency]:f}},{}),r=Object.values(i).map(n=>n);return v(r)}function G([e,t]){return e.rows.reduce((i,r,n)=>{const s=t.find(({currency:c})=>c===r.currency);return s?[...i,{...r,valuePrecision:s.valuePrecision,valueScale:s.valueScale,name:s.name}]:i},[])}function H(e){const t=e.rows.map(r=>r.rateEr);if(t.length<1)return"--";const i=Math.max(...t);return a.floor(i,2,6)}function J(e){if(e&&e.rows)return{...e,rows:e.rows.map(t=>({...t,productType:t.calculationPeriodMultiplier===1?1:2}))}}export{R as a,T as d,y as p,A as q};
//# sourceMappingURL=chunk-4fe59fce.js.map

import{a0 as d}from"./chunk-dd975def.js";import{a as f,m as p}from"./app-5c09a141.js";import{$ as A,t as I,x as g,p as m,g as C}from"./chunk-e0c46928.js";import{e as u,H as S,m as D,f as N,P as O}from"./chunk-65793be5.js";import{aD as i}from"./chunk-8016f002.js";import{K as T}from"./chunk-5c669679.js";import"./chunk-2a04b230.js";/* empty css              *//* empty css              *//* empty css              */import{W as y}from"./chunk-81665eeb.js";const R=new f,_=new f,q=K({notifier$:R,loopJudge:U,maxRequestTimes:8}),V=_.pipe(u(t=>l(t)));async function l(t){const{data:e}=await A.getDepositAddress(t);return e&&e.accountType||1}function h(t){const{wrapStatus:e,status:s,cardStatus:a}=t;return s==="FOR_BIND_CARD"&&(a==="WAITING_REVIEW"||!a)?a==="WAITING_REVIEW"||!a:e==="PROCESSING"}function U(t){return h(t)}const Y=Object.freeze({PROCESSING:"PROCESSING",BIND_TRANSCATION_SUCCEED:"BIND_TRANSCATION_SUCCEED",TRANSCATION_SUCCEED:"SUCCEED",BIND_FAILED:"BIND_FAILED",FAILED:"FAILED"}),n=Object.freeze({NO_KYC:100604,NO_JUMIO:100603,JUMIO_PROCESSING:100601,JUMIO_FAIL:100602,AGAIN_KYC:100605});function P(t){const e=t.error;e&&D.send("toast","error",e)}function B(t){const e=window.location.search;return new URLSearchParams(e).get(t)}function K(t){const{notifier$:e,loopJudge:s,maxRequestTimes:a,requestInterver:c=2e3}=t;return e.pipe(u(({orderId:o,channel:r})=>A.getOrderList({orderId:o,side:"buy"})),I(o=>P(o)),p(o=>({loading:!1,data:o.data||{}})),p(o=>({...o,data:o.data.rows&&o.data.rows[0]||{}})),u(o=>s&&a>0&&c>0?S(o).pipe(I(({data:r})=>{if(s(r)){const E=setTimeout(()=>{clearTimeout(E),e.next({orderId:r.orderId,channel:r.channelName})},c)}})):(_.next({digitalCurrency:o.data.digitalCurrency}),S(o))),g(a||1/0))}function L(){const t=d(N);C(t(O.ACCOUNT_VERIFICATION.pathname)+"?popupKycEntry=kyc")}function j(){const t=d(N);C(t(O.ASSETS_OVERVIEW.pathname)+"?tab=spot")}function z(t){const e={[n.NO_KYC]:i.NoKyc,[n.NO_JUMIO]:i.NoAdvance,[n.JUMIO_PROCESSING]:i.Processing,[n.JUMIO_FAIL]:i.Unverified,[n.AGAIN_KYC]:i.NoKyc},{LG:s,kycStatusCode:a}=t,c=e[a],o=a===n.AGAIN_KYC,r=m.create(T,{statusCode:c,passLG:s,isAgain:o});r.$on("finish",function(){r.$destroy(),a!==n.JUMIO_PROCESSING&&L()})}function H(t,e){m.create(y,{LG:t,introduction:e})}export{n as K,Y as O,H as a,B as b,q as c,V as d,j as e,_ as f,K as g,z as o,R as q};
//# sourceMappingURL=chunk-c7fd296c.js.map

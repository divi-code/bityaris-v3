import{b2 as n,b3 as r,as as C,aV as S,aW as v,ar as A,aX as f,az as P,b5 as L,aN as b,b4 as _,B as $}from"./chunk-707a9f2f.js";import{w as T,b as i,m as u,s as g,B as c,S as w}from"./app-7aa7d139.js";import{a as Y}from"./chunk-a567b56a.js";const H={getPredictTopicCategory(t){return n.get(r.PREDICT_TOPIC_CATEGORY,{query:t})},getPredictTopics(t){return n.get(r.PREDICT_TOPICS,{query:t})},getPredictTopicsBuy(t){return n.post(r.PREDICT_TOPICS_BUY,{params:t})},getPredictKycCheck(t){return n.get(r.PREDICT_KYC_CHECK,{query:t})},getPredictMessage(t){return n.get(r.PREDICT_MESSAGE,{query:t})},getAccountPosition(t){return n.get(r.ACCOUNT_POSITION,{query:t})},getOrderHistory(t){return n.get(r.ORDER_HISTORY,{query:t})},getAccountAssets(t){return n.get(r.ACCOUNT_ASSETS,{query:t})},getAccountShares(t){return n.get(r.ACCOUNT_SHARES,{query:t})},getOrderRedeem(t){return n.post(r.ORDER_REDEEM,{params:t})},getRecommend(t){return n.get(r.WEB_RECOMMEND,{query:t})},getRotationBar(){return n.get(r.ROTATION_BAR,{})},getKolInfo(t){return n.get(r.KOL_INFO,{query:t})},getPredictSuccessCount(t){return n.get(r.PREDICT_SUCCESS_COUNT,{query:{categoryLangKey:t}})}},lt=T.pipe(i(t=>t.type==="investment-assets"),u(t=>t.data.assets),g(K()),C(1)),M=T.pipe(i(t=>t.type==="investment"),u(t=>t.data.accounts),g([]),C(1));function K(){return{btcEv:0,btc:0 .toFixed(8),usdEv:0,usd:0 .toFixed(2),money:0 .toFixed(2),usdtEv:0,usdt:0 .toFixed(2)}}const It=T.pipe(i(t=>t.type==="predict-project-assets"),u(t=>t.data.assets),g(V()),C(1)),Q=T.pipe(i(t=>t.type==="predict"),u(t=>t.data.accounts),g([]),C(1));function V(){return{btcEv:0,btc:0 .toFixed(8),usdEv:0,usd:0 .toFixed(2),money:0 .toFixed(2),usdtEv:0,usdt:0 .toFixed(2)}}const D=new c(!0),W=new w,N=new c({total:0,rows:[]}),h=new c({total:0,rows:[]}),j=new w,x=new c({total:0,rows:[]}),k=new c({total:0,rows:[]});W.pipe(S(f),v(()=>q())).subscribe(N);async function q(){const{data:t}=await P.accountInfo();return t||{total:0,rows:[]}}j.pipe(S(f),v(t=>G(t))).subscribe(x);async function G({status:t,offset:e,currencies:o}){const a={status:t,offset:e,currencies:o,limit:10,withCount:!0,hasBonus:!1};D.next(!0);const{data:s}=await P.orderList(a);return D.next(!1),s||{total:0,rows:[]}}const z=new c({demandPendingInterestBalanceEv:0,demandInterestedBalanceEv:0,balanceEv:0,currency:"USDT"});M.pipe(u(t=>t.filter(e=>e.currency==="USDT")[0]),i(Boolean)).subscribe(z);const X=new c({currency:"USD",usdTotalAssetsEv:0,usdTotalAssets:"0.00",usdYesterdayInterestEv:0,usdYesterdayInterest:"0.00",usdTotalInterestEv:0,usdTotalInterest:"0.00"});A([h,Y,Q,L,b]).pipe(u(([t,e,o,a,s])=>J(t,e,o,a,s)),i(Boolean)).subscribe(X);A([N,b]).pipe(u(([t,e])=>Z(t,e)),i(Boolean)).subscribe(t=>h.next(t));A([x,b]).pipe(u(([t,e])=>tt(t,e)),i(Boolean)).subscribe(k);function J(t,e,o,a,s){if(s.length===0||t.total===0)return null;const d=s.find(I=>I.currency==="USD"),{valueFactor:l,valueScale:R}=d;return t.rows.reduce((I,p)=>{const E=s.find(F=>F.currency===p.currency);if(!E)return I;const y=a.get("."+p.currency);if(!y)return I;const m=I.usdTotalInterestEv+_.getBalanceEv(p.totalInterestEv,y.priceEp,E.valueFactor,y.priceFactor,l),O=I.usdYesterdayInterestEv+_.getBalanceEv(p.yesterdayInterestEv,y.priceEp,E.valueFactor,E.priceFactor,l);return{usdTotalInterestEv:m,usdTotalInterest:$.floor(m,2,R),usdYesterdayInterestEv:O,usdYesterdayInterest:$.floor(O,2,R)}},et())}function Z(t,e){const{rows:o,total:a}=t;return o.forEach(s=>{const d=e.find(l=>l.currency===s.currency);d&&(s.name=d.name)}),{rows:o,total:a}}function tt(t,e){const{rows:o,total:a}=t;return o.forEach(s=>{const d=e.find(l=>l.currency===s.currency);s.name=d.name}),{rows:o,total:a}}function et(){return{currency:"USD",usdTotalAssetsEv:0,usdTotalAssets:"0.00",usdYesterdayInterestEv:0,usdYesterdayInterest:"0.00",usdTotalInterestEv:0,usdTotalInterest:"0.00"}}const st=new w,nt=new c({total:0,rows:[]}),U=new c(!1);st.pipe(S(f),v(t=>rt(t))).subscribe(nt);async function rt(t){U.next(!0);const{data:e}=await P.getAccountActivity(t);return U.next(!1),e||{total:0,rows:[]}}const ct=new w,ot=new c({total:0,rows:[]}),B=new c(!1);ct.pipe(S(f),v(t=>at(t))).subscribe(ot);async function at(t){B.next(!0);const{data:e}=await H.getAccountShares(t);return B.next(!1),e||{total:0,rows:[]}}export{h as a,W as i,It as p,j as s,lt as t,X as u};
//# sourceMappingURL=chunk-846f533a.js.map

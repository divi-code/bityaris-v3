import{I as yt,J as we,K as Lt,L as Vt,N as Nt,a as M,E as Qt,A as Fe,D as Ut}from"/trade/js/chunk-e6aba44f.js";import{b as Oe,g as ke,h as Me,m as ht,e as zt,p as Ee,r as Be}from"/trade/js/chunk-48de2933.js";import{c as me,m as Q,b as p,s as Ft,a as bt,B as x,S as Ce,o as qt,g as gt,j as vt,w as Ht,b4 as St,f as N,i as Se,p as Wt,R as jt,b2 as be,b3 as Kt,t as Yt,e as Xt,d as Zt,q as Jt,A as Pt,C as Tt,D as Ct,F as w,G as fe,H as L,I as V,J as de,K as E,L as $,ac as W,P as ye,Q as O,aE as Gt,aF as en,a7 as Ke,a1 as tn,ai as ee,aj as te,T as _t,ak as ce,a8 as Ye,X as xe,a9 as nn,_ as qe,aa as rn,ah as J,av as an,aw as sn,au as on,ad as cn,ae as ln,af as un,ax as fn,ag as dn}from"/trade/js/chunk-fe777520.js";import{F as G,aj as R,an as Z,b as pn,a3 as g,aY as ie,bx as re,by as b,bE as ae,c2 as Ot,M as Pe,dO as kt,dP as mn,dl as yn,dk as hn,bt as bn,ay as Mt,Y as Le,t as gn,dm as pe,bw as Et,d3 as Bt,aA as he,j as Y,dQ as ue,d5 as vn,dR as Sn,av as Pn,bB as X,bF as Ve,b5 as Te,b7 as Dt,S as Tn,ai as Cn,a as _n,dS as On,bM as kn,a6 as Mn,L as En,dT as Ne,cA as Xe,cl as Ze,u as Bn,p as Dn,T as An,U as In,az as $n}from"/trade/js/chunk-10576bff.js";import{p as We}from"/trade/js/chunk-846730ff.js";import{a as xn}from"/trade/js/chunk-25e951b0.js";const le={create(t){return G.post(R.ORDER_LIMIT,{params:t})},createV2(t){return G.post(R.G_ORDER,{params:t})},modify(t){const{type:e,...n}=t;return G.put(e==="PerpetualV2"?R.G_ORDER_MODIFY:R.ORDER_MODIFY,{params:n})},cancel(t){const{type:e,...n}=t;return G.delete(e==="PerpetualV2"?R.G_ORDER_CANCEL:R.ORDER_CANCEL,{query:n})},cancelAll(t){return G.delete(R.G_ORDER_CANCEL_ALL,{query:t})},closeAllPositions(){return G.post(R.POSITION_CLOSE_ALL,{})},getTradingList(t){const{type:e,...n}=t;return G.get(e==="PerpetualV2"?R.CONTRACT_TRADING_LIST_V2:R.CONTRACT_TRADING_LIST,{query:n})},scaledPreview(t){return G.get(R.SCALED_PREVIEW,{query:t})},createScaledOrder(t){const{type:e,...n}=t;return G.post(e==="Perpetual"?R.SCALED_ORDERS:R.SCALED_G_ORDERS,{params:n})}},K={Buy:"f936f2",Sell:"537eb9",Stop:"c7f965",Profit:"792828",Market:"ea5743",OrderSubmittedTitle:"04c7b3",OrderSubmittedContent:"c66ed2",ConditionalOrderSubmittedTitle:"a0ec3d",ConditionalOrderSubmittedContent:"60d23b",ConditionalOrderTriggeredTitle:"6064f2",ConditionalOrderTriggeredContent:"d3970b",OrderPartiallyFilledTitle:"b63ef8",OrderPartiallyFilledContent:"e7b5a5",OrderFilledTitle:"3bb0dc",OrderFilledContent:"4a145d",OrderReplacePriceTitle:"82c834",OrderReplacePriceContent:"b12bcc",OrderReplaceQtyTitle:"23814c",OrderReplaceQtyContent:"f1fcde",OrderReplaceTriggerPriceTitle:"224678",OrderReplaceTriggerPriceContent:"302b8c",OrderCanceledTitle:"241369",OrderCanceledContent:"fa92ab",TakeProfileAcceptedTitle:"e5ad03",TakeProfileAcceptedContent:"7a9858",StopLossAcceptedTitle:"72da21",StopLossAcceptedContent:"756635",TrailingStopAcceptedTitle:"d3ca1d",TrailingStopAcceptedContent:"883902",TrailingProfitAcceptedTitle:"44d143",TrailingProfitAcceptedContent:"a71a53",OrderModify:"801ca2"},Mi=yt("notification-contract-order",Rn);function Rn([t,e]){return t.ID==="OrderError"?{type:t.type,title:e(we[t.Code+"Title"]),content:e(we[t.Code])}:t.ID==="OrderModify"?{title:e(K.OrderReplaceQtyTitle),content:e(K[t.ID])}:K[t.ID+"Title"]?{title:e(K[t.ID+"Title"]),content:e(K[t.ID+"Content"],wn(t,e))}:null}function wn(t,e){return t.Side==="Buy"&&(t.Side=e(K.Buy)),t.Side==="Sell"&&(t.Side=e(K.Sell)),t.StopDirection==="stop"&&(t.StopDirection=e(K.Stop)),t.StopDirection==="profit"&&(t.StopDirection=e(K.Profit)),t.Price==="Market"&&(t.Price=e(K.Market)),t}const Qe={Long:"59623c",Short:"a3b7d1",LeverageModifiedTitle:"c81cf0",LeverageModifiedContent:"094cac",MarginAddedTitle:"4e6c03",MarginAddedContent:"a43a38",MarginRemovedTitle:"0632c4",MarginRemovedContent:"4221b1",RiskLimitModifiedTitle:"b846cb",RiskLimitModifiedContent:"70bd99",PositionLiquidatedTitle:"17e955",PositionLiquidatedContent:"0bcfe8",AutoDeleveragedTitle:"ce64ba",AutoDeleveragedContent:"a554e5"},Ei=yt("notification-position",Ln);function Ln([t,e]){return t.ID==="Error"?{type:"error",title:e(we[t.Code+"Title"]),content:e(we[t.Code])}:{title:e(Qe[t.ID+"Title"]),content:e(Qe[t.ID+"Content"],Vn(t,e))}}function Vn(t,e){return t.Side==="Buy"&&(t.Side=e(Qe.Long)),t.Side==="Sell"&&(t.Side=e(Qe.Short)),Nn(t,e)}function Nn(t,e){if(t.ID==="LeverageModified"){const{OldLeverage:n,Leverage:i,OldIsIsolated:r,IsIsolated:a,...o}=t;return{...o,OldLeverage:`${e(r?Oe.Isolated:Oe.Cross)} ${n}X`,Leverage:`${e(a?Oe.Isolated:Oe.Cross)} ${i}X`}}return t}const Bi=me([Z,pn]).pipe(Q(([t,e])=>{const{type:n,symbol:i,contractSide:r,baseCurrency:a,contractSize:o,quoteCurrency:s}=t,c=e.get(i);if(c){const{openInterestStr:l,openInterest:f}=c;if(n==="PerpetualV2")return`${l} ${a}`;if(r>0)return`${g.delimit(p(f).times(o))} ${a}`;if(r<0)return`${l} ${s}`}return`- ${a}`}),Ft("-"),bt(1)),De=new x(!1),He=new x(ie.readInterval(re));He.subscribe(t=>ie.updateInterval(re,t));const Qn=new x(!1),Di=new x(null);function Ai(t,e,n,i){const{settleCurrency:r,contractSide:a,contractUnderlyingAssets:o}=i;return t===b.Cont?e(n.Cont):t===b.Base?r:a>0&&t===b.Coin?o:""}function Un(t,e){const{settleCurrency:n,contractSide:i,contractUnderlyingAssets:r}=e;return t===n?b.Base:i>0&&t===r?b.Coin:b.Cont}const zn=new Ce,Fn=Wn(zn),qn=new x(!1),Ue=new x(b.Cont),Ii=new x(ae.Open);Fn.subscribe(({kv:t})=>Ot.updateContractStorage(t));Ue.subscribe(t=>Pe.next({type:"contract-qty-type",qtyType:t}));const Hn=new Ce,At=jn(Z,Hn);At.subscribe(({symbol:t,kv:e})=>kt.updateContractSymbolStorage(t,e));function Wn(t){const e=qt(()=>({kv:Ot.readContractStorage()})),n=t.pipe(Q(({kv:r})=>a=>({kv:{...a.kv,...r}})));return gt(e,n).pipe(vt((r,a)=>a(r),{kv:{}}))}function jn(t,e){const n=t.pipe(Q(({symbol:a,contractSide:o,type:s})=>()=>({symbol:a,contractSide:o,kv:{...kt.readContractSymbolStorage(a),...mn.readContractSymbolStorage(s)}}))),i=e.pipe(Ht(t),Q(([{symbol:a,kv:o},s])=>(o.qtyType&&(s.type==="Perpetual"&&yn.next(o.qtyType),s.type==="PerpetualV2"&&hn.next(o.qtyType)),c=>({symbol:a,kv:{...c.kv,...o}}))));return gt(n,i).pipe(vt((a,o)=>o(a),{kv:{}}))}me([Z,Qn]).pipe(Q(([t,e])=>["Listed","Suspend"].indexOf(t.status)>-1&&!e)).subscribe(t=>qn.next(t));me([Z,At]).subscribe(([t,{kv:e}])=>{const{contractSide:n,settleCurrency:i,contractUnderlyingAssets:r}=t,{qtyType:a}=e;let o;a===b.Cont&&(o=a),a===b.Base&&(o=i),a===b.Coin&&(o=n>0?r:i);const s=Un(o,t);Ue.next(s)});const $i=bn.pipe(St("symbol"),Q(t=>t.isCheapCopyToken),N(Boolean),Se(1)),It=new x([]),$t=new x({incremental:!1,aop:ni()}),Kn=new x([]),Yn=new x({close:0,high:0,low:0,open:0});Pe.pipe(N(t=>t.type==="incremental-order")).subscribe(t=>$t.next(t.data));me([Z,$t,Mt]).pipe(N(([t,e,n])=>n),Wt(1e3),N(([t,e])=>{const{incremental:n,aop:i}=e;if(n&&i&&i.orders&&i.orders.closed.length>0){const{leavesQty:r,symbol:a}=i.orders.closed[0];return a===t.symbol&&Number(r)===0}return!n}),Q(([t])=>{const{type:e,settleCurrency:n,symbol:i}=t;return{type:e,currency:n,limit:50,symbol:i,execType:1}})).subscribe(t=>Xn(t));me([Z,It,Ue]).pipe(Q(Zn),N(Boolean),bt(1)).subscribe(t=>Kn.next(t));async function Xn(t){const{data:e,error:n}=await le.getTradingList(t);e&&It.next(e),n&&Le.send("toast","error",n)}function Zn([t,e,n]){return e.map(i=>{if(!t)return null;const{type:r,pricePrecision:a,priceScale:o,settleCurrency:s,pairName:c,valueScale:l,valuePrecision:f}=t,u={transactTime:gn.formatDateTime(i.createdAt),transactTimestamp:i.createdAt,symbol:i.symbol,displaySymbol:`${c} ${s}-Margin`,ordType:Jn(i),execType:i.tradeType===1?"Trade":i.tradeType===6?"Liquidation":"ADL",side:i.side===1?"Buy":"Sell",tradeType:i.tradeType};if(r==="PerpetualV2"){i.priceEp=Number(i.priceRp),i.execPriceEp=Number(i.execPriceRp),i.execValueEv=Number(i.execValueRv),i.execFeeEv=Number(i.execFeeRv);const m=Number(i.execPriceRp)!==0?i.execPriceRp:i.priceRp;return Object.assign(u,{execDisplayQty:Ae(t,i.execQtyRq,m,n),execQty:Ie(t,i.execQtyRq,m,n),execPrice:Je(i,a),orderDisplayQty:Ae(t,i.orderQtyRq,m,n),orderQty:Ie(t,i.orderQtyRq,m,n),orderPrice:et(i,a),execValue:Ge(i,s,0,f),feeRate:g.floor(Number(i.feeRateRr)*100,4)+"%",execFee:tt(i,s,0,f),execPriceEp:i.execPriceEp,price:g.floor(i.priceRp,a)}),u}const d=Gn(i,a,o);return Object.assign(u,{execDisplayQty:(i.side===1?"":"-")+Ae(t,i.execQty,d,n),execQty:(i.side===1?"":"-")+Ie(t,i.execQty,d,n),execPrice:Je(i,a,o),orderDisplayQty:(i.side===1?"":"-")+Ae(t,i.orderQty,d,n),orderQty:(i.side===1?"":"-")+Ie(t,i.orderQty,d,n),orderPrice:et(i,a,o),execValue:Ge(i,s,l,f),feeRate:g.floor(i.feeRateEr,4,6)+"%",execFee:tt(i,s,l,f),execPriceEp:i.execPriceEp,price:g.floor(i.priceEp,a,o)}),u})}function Jn(t){const{ordType:e,tradeType:n}=t;return e===0?ei[n]:ti[e]||"--"}function Gn(t,e,n){const{execPriceEp:i,priceEp:r}=t,a=Number(i)!==0?i:r;return g.floor(a,e,n)}function Je(t,e,n=0){const{execPriceEp:i,priceEp:r,tradeType:a}=t;return Number(g.floor(a===6?r:i,e,n))}function Ge(t,e,n,i){return g.floor(t.execValueEv,i,n)+" "+e}function et(t,e,n=0){const{ordType:i,priceEp:r}=t;return[1,3,5,14].indexOf(i)>-1?"Market":r===0?"--":g.floor(r,e,n)}function tt(t,e,n,i){return g.floor(t.execFeeEv,i,n)+" "+e}const ei={0:"-",1:"Trade",2:"Liq",3:"ADL",4:"Funding",5:"TakeOver",6:"LiqTrade",7:"AdlTrade",8:"Amend",9:"Cancel",10:"Replace",11:"TransferIn",12:"TransferOut",13:"ExchangeIn",14:"ExchangeOut",15:"PositionSettingChange"},ti={0:"-",1:"Market",2:"Limit",3:"Stop",4:"StopLimit",5:"MarketIfTouched",6:"LimitIfTouched",7:"ProtectedMarket",8:"Market",9:"Stop",10:"MarketIfTouched",11:"Bracket",12:"BoTpLimit",13:"BoSlLimit",14:"BoSlMarket","-11":"Liquidation"};function Ae(t,e,n,i){if(!e||!n)return"";const r={[b.Cont]:()=>pe.toCont(t,e),[b.Base]:()=>pe.toValue(t,e,n),[b.Coin]:()=>pe.toCoin(t,e,n)};return r[i]&&r[i]()}function Ie(t,e,n,i){if(!e||!n)return"";const r={[b.Cont]:()=>pe.toContQuantity(t,e),[b.Base]:()=>pe.toValueQuantity(t,e,n),[b.Coin]:()=>pe.toCoinQuantity(t,e,n)};return r[i]&&r[i]()}function ni(){return{accounts:[],events:[],orders:{closed:[],fills:[],open:[]},positions:[],sequence:0,timestamp:Date.now(),type:"incremental",version:1}}const nt=1569859200;class ii{constructor(e,n,i){this.symbol=e,this.resolution=n,this.tradeType=i,this.init()}init(){const{symbol:e,resolution:n}=this;this.dispose$=new Ce,this.realtimeSubscribe$=new Ce,this.incrementalDataCache$=new jt;const i=Pe.pipe(N(r=>r.type==="kline"&&r.data.symbol===e&&r.data.resolution===n));this.snapshotData$=i.pipe(N(r=>r.data.type==="snapshot"),Q(r=>r.data.bars),Se(1),be(this.dispose$)),this.incrementalData$=i.pipe(N(r=>r.data.type==="incremental"),Q(r=>r.data.bars),Kt(),Yt(r=>Yn.next(r)),be(this.dispose$)),this.incrementalData$.pipe(be(this.realtimeSubscribe$)).subscribe(r=>this.incrementalDataCache$.next(r))}createHistoryData$(e,n){const{symbol:i,resolution:r}=this;return Et.pipe(Q(a=>a.find(({symbol:o,markSymbol:s,indexSymbol:c})=>[o,s,c].includes(i))),St("symbol"),N(Boolean),Xt(a=>Lt.getHistoryData({symbol:i,resolution:r,from:e,to:n},a)),N(a=>!!a.data),Se(1),be(this.dispose$))}getHistoryBars({from:e,to:n,firstDataRequest:i},r,a){const o=Math.max(nt,e),s=Math.max(nt,n),{symbol:c,resolution:l}=this,f=l*60*1e3,u=(r==null?void 0:r.length)>0?r[1]:0;if(i){this.subscribeKline(),this.snapshotData$.subscribe(d=>{const m=o*1e3,y=s*1e3;d.filter(S=>S.time>y).forEach(S=>this.incrementalDataCache$.next(S));const C=d.filter(({time:S})=>S>m&&S<y),A=C.length>0?C[0].time/1e3:s;this.createHistoryData$(o,A).subscribe(({data:S,error:D})=>{if(S&&S.symbol===c&&S.resolution===l){const U=[...S.items,...C].filter(({time:B})=>B+f>u);a(U,{noData:S.items.length+C.length<1})}D&&a(C,{noData:!0})})});return}this.createHistoryData$(o,s).subscribe(({data:d})=>{if(d&&d.symbol===c&&d.resolution===l){const m=((d==null?void 0:d.items)||[]).filter(({time:y})=>y+f>u);a(m,{noData:d.items.length<1});return}a([],{noData:!0})})}subscribeRealtimeBars(e){this.realtimeSubscribe$.next(),this.incrementalDataCache$&&(this.incrementalDataCache$.subscribe(n=>e(n)),this.incrementalDataCache$.complete(),this.incrementalDataCache$=null),this.incrementalData$.subscribe(n=>e(n))}dispose(e){this.dispose$.next(),this.incrementalData$=null,this.incrementalDataCache$=null,this.unsubscribeKline(e)}subscribeKline(){me([Bt,Z]).pipe(Se(1),N(([e,{symbol:n,markSymbol:i,indexSymbol:r}])=>e==="Opened"&&[n,i,r].includes(this.symbol))).subscribe(()=>Pe.next({type:"kline-subscribe",symbol:this.symbol,resolution:this.resolution,tradeType:this.tradeType}))}unsubscribeKline(e){Pe.next({type:"kline-unsubscribe",symbol:this.symbol,resolution:this.resolution,tradeType:this.tradeType,shouldNotUnsubscribe:e})}}const xt={D:"1D",W:"1W",M:"1M"},ri={"1D":1440,"1W":10080,"1M":43200};class ai{constructor(){this.cache=new Map}resolve(e,n,i){const r=Rt(n,xt),a=e+"_"+r;if(this.cache.has(a))return this.cache.get(a);const o=si(r,ri),s=new ii(e,o,i);return this.activeKlineChannel=s,this.cache.set(a,s),s}dispose(e){const n=oi(e),[i,r]=e.split("_#_"),a=i===this.activeKlineChannel.symbol&&li(ci(r),this.activeKlineChannel.resolution);this.cache.has(n)&&(this.cache.get(n).dispose(a),this.cache.delete(n))}clear(){this.cache.clear()}}function Rt(t,e){return e[t]||t}function si(t,e){return e[t]||Number(t)}function oi(t){const[e,n]=t.split("_#_");return e+"_"+Rt(n,xt)}function ci(t){return/^\d+$/.test(t)?Number(t):/D$/.test(t)?Number(t.slice(0,-1))*3600*24:/W$/.test(t)?Number(t.slice(0,-1))*3600*24*7:/M$/.test(t)?Number(t.slice(0,-1))*3600*24*7*30:0}function it(t){return{3:1,120:60,180:60,360:60,720:60}[t]||t}function li(t,e){return it(t)===it(e)}const Re=new ai;Bt.subscribe(()=>Re.clear());class xi{onReady(e){setTimeout(()=>e({exchanges:[],symbolsTypes:[],supported_resolutions:["1","3","5","10","15","30","60","120","180","240","360","480","720","D","3D","W","M","3M","12M"],supports_marks:!1,supports_search:!0,supports_time:!0,supports_timescale_marks:!1,has_no_volume:!0}),0)}searchSymbols(e,n,i,r){r([])}resolveSymbol(e,n,i){setTimeout(()=>Et.pipe(Q(r=>r.find(({symbol:a,markSymbol:o,indexSymbol:s})=>[a,o,s].includes(e))),N(Boolean),Q(r=>ui(e,r)),Se(1)).subscribe(r=>n(r),()=>i()))}getBars(e,n,i,r,a){const{symbol:o,timeline:s,tradeType:c}=e;Re.resolve(o,n,c).getHistoryBars(i,s,r)}subscribeBars(e,n,i,r,a){const{symbol:o,tradeType:s}=e;Re.resolve(o,n,s).subscribeRealtimeBars(i)}unsubscribeBars(e){Re.dispose(e)}}function ui(t,e){const{type:n,pairName:i,pricePrecision:r,valuePrecision:a,tickSize:o,status:s,timeline:c}=e,l=Math.pow(10,r);return{ticker:t,symbol:t,name:t,description:i,session:"24x7",timezone:"UTC",pricescale:l,volume_precision:a,minmov:o*l,exchange:"Phemex",has_intraday:!0,has_daily:!0,has_weekly_and_monthly:!0,expired:s==="Suspend",timeline:c,tradeType:n}}class Ri{constructor(){this.symbol=null,this.tv=null,this.remove$=new Ce,De.next(!1),De.pipe(N(Boolean)).subscribe(e=>{He.pipe(Zt(),be(this.remove$)).subscribe(n=>{this.changeInterval(n,e)})})}createOverrides(e,n="",i=null){return Vt({theme:e,background:n,candleStyle:i})}render(e,n,i,r,a,o){}createLoadingScreen(e){return e===he.Light?{backgroundColor:"#ffffff"}:e===he.Dark?{backgroundColor:"#0e1421"}:{}}removeTv(){De.next(!1),this.tv&&(this.tv.remove(),this.tv=null,this.remove$.next())}saveSettings(){this.tv.save(e=>{ie.updateSettings(re,e),ie.updateIsInit(re,!1)})}handleChartReady(){this.tv.subscribe("onAutoSaveNeeded",()=>this.saveSettings());const e=this.tv.chart();if(!e)return;if(e.onIntervalChanged().subscribe(null,r=>{He.next(r),this.saveSettings()}),De.next(!0),ie.readIsInit(re)){this.applyOverrides(this.getTheme());return}const n=this.getTheme(),i=ie.readTheme(re);if(!i){ie.updateTheme(re,n);return}i!==n&&(this.tv.changeTheme(n),this.applyOverrides(n))}watch(e,n){if(this.symbol===e||!n)return;const i=this.tv.chart();if(i){const r=this;i.setSymbol(e,function(){r.symbol=e,r.saveSettings()})}}changeInterval(e,n){if(!n||!this.tv)return;const i=this.tv.chart();i&&i.setResolution(e)}getTheme(){if(!this.tv)return"";const e=this.tv.getTheme(),n=Object.keys(he).find(i=>he[i].toLowerCase()===e.toLowerCase());return he[n]}changeTheme(e){if(!this.tv)return;const n=this.getTheme();e!==n&&(this.tv.changeTheme(e),this.applyOverrides(e))}applyOverrides(e){const{tv:n}=this;setTimeout(()=>{n.applyOverrides(this.createOverrides(e)),this.saveSettings(),ie.updateTheme(re,e)},0)}}const fi=new x([]);Z.subscribe(({tickSizeEp:t,priceScale:e,pricePrecision:n})=>{const i=Nt(t,e,n);fi.next(i)});function se(t,e=!1,n=!1){const{data:i,error:r}=t;return!e&&i?(Le.send("toast","info",{message:"Success"}),!0):!n&&r?(console.warn("error:",r),Le.send("toast","error",r),!1):!0}async function wi(t){return Y.track("submit_request",{action:"set_leverage",symbol:t.symbol,request_data:t,...ue.getValue()}),se(await We.modifyLeverage(t),!0)}async function rt(t,e,n={}){var d;const i=vn.build(),{type:r,...a}=t,{from:o,from_trader_id:s}=Jt.parse(window.location.search),c={};o&&s&&(c.from=o,c.from_trader_id=Number(s));const l=await Sn(a.symbol);if(r==="PerpetualV2"||(l==null?void 0:l.contractSide)<0&&r==="Perpetual"){const m=(d=Pn.getValue())==null?void 0:d.find(y=>Object.prototype.hasOwnProperty.call(y,a.symbol));m&&m[a.symbol]&&(a.slippageRr=m[a.symbol],r==="Perpetual"&&(a.slippageEr=p(m[a.symbol]).times(l.ratioFactor).toNumber()))}const{by:f,goal:u}=e;return Y.track("submit_request",{action:"order_create",action_by:f,action_goal:u,cl_ord_id:i,request_data:t,...ue.getValue(),...c,...n}),a.clOrdID=i,se(r==="PerpetualV2"?await le.createV2(a):await le.create(a),!0)}async function $e(t,e){let n,i,r,a;Array.isArray(t)?(n=t.map(f=>f.orderID),i=t[0].symbol,r=t[0].posSide,a=n.join()):(n=t.orderID,i=t.symbol,r=t.posSide,a=n);const{type:o,by:s,goal:c}=e,l={symbol:i,orderID:n,type:o};return o==="PerpetualV2"&&Object.assign(l,{posSide:r}),Y.track("submit_request",{action:"order_cancel",action_by:s,action_goal:c,symbol:i,order_id:a,request_data:l,...ue.getValue()}),se(await le.cancel(l),!0)}async function at(t,e,n){const{symbol:i,orderID:r}=t,a={orderID:r,symbol:i,...e},{by:o,goal:s}=n;return Y.track("submit_request",{action:"order_replace",action_by:o,action_goal:s,symbol:i,order_id:r,request_data:a,...ue.getValue()}),se(await le.modify(a),!0)}async function Li(t,e){const n={untriggered:t};return e&&(n.symbol=e),Y.track("submit_request",{action:"order_cancel_all",symbol:e,request_data:n,...ue.getValue()}),se(await le.cancelAll(n),!0)}async function Vi(){return se(await le.closeAllPositions(),!0)}const Ni={createTriggerTypesOptions(t,e){return[{value:"ByLastPrice",text:t(e.LastPrice),className:"last-price"},{value:"ByMarkPrice",text:t(e.MarkPrice),className:"mark-price"}]},createQtyOptions(t,e,n){const{settleCurrency:i,contractUnderlyingAssets:r,contractSide:a,type:o}=t,s={text:r.replace(" ",""),value:r};if(o==="Perpetual"){const c=[{text:e(n.Cont),value:b.Cont},{text:i,value:i}];return a>0&&c.push(s),c}if(o==="PerpetualV2")return[s,{text:i,value:i}]},createViewOptions(t,e,n){return[{text:t(e.LimitConditional),value:n.Limit},{text:t(e.MarketConditional),value:n.Market},{text:t(e.ScaledOrder),value:n.ScaledOrder}]}};function Qi(t,e,n,i,r,a,o){if(a>0)return"";const s=Number(ht(n,o)),{settleCurrency:c,settleValuePrecision:l,contractUnderlyingAssets:f,contractSize:u,type:d,qtyStepSize:m}=o;if(d==="Perpetual"){if(e===b.Cont)return i===0?t(M.MinimumQty):"≈ "+zt(o,n,i);if(e===b.Base)return r<s?t(M.MinimumQtyIsCount,{Quantity:g.floor(s,l),SettleCurrency:c}):"≈ "+i+" "+t(M.Cont);if(e===b.Coin)return r<u?t(M.MinimumQtyIsCount,{Quantity:u,SettleCurrency:f.replace(" ","")}):"≈ "+Math.floor(Number(p(r).div(u)))+" "+t(M.Cont)}if(d==="PerpetualV2"){if(e===b.Base){const y=Number(p(n).times(m));return r<y?`Min ${y} ${c}`:"≈ "+i+" "+f}return e===b.Coin?r<m?`Min ${m} ${f} `:"≈ "+Number(p(r).times(s))+" "+c:""}return""}function Ui(t,e,n,i,r,a){const{type:o,contAmount:s,qtyFactor:c,maxOrderQty:l,contTickSizeEv:f,qtyScale:u,contPrecision:d,contractSize:m,contractUnderlyingAssets:y,qtyPrecision:v,tickSizeEv:C,qtyStepSize:A,valuePrecision:S,valueFactor:D,valueScale:U,contractSizePrecision:B,pricePrecision:h,contractSide:z}=i;let I="",k=Number.MAX_SAFE_INTEGER,oe=u,F=c,T=t===b.Cont?f:0,_=d,P=f;return o==="Perpetual"&&(t===b.Cont&&(I=`1${e(n.Cont)}=${s}`,k=l*c,_=d,P=f),t===b.Base&&(I="",k=r,z>0&&(_=h,P=Math.pow(10,u-h)),z<0&&(_=S,P=Math.pow(10,u-S))),t===b.Coin&&(I=m+" "+y.replace(" ","")+" = 1"+e(n.Cont),k=a,_=B,P=Math.pow(10,u-B))),o==="PerpetualV2"&&(t===b.Base&&(I="",k=r,oe=U,F=D,_=S,P=C,T=C),t===b.Coin&&(I="",k=a,oe=u,F=c,_=v,P=A,T=A)),{placeholder:I,maxQuantity:k,minQuantity:T,scale:oe,factor:F,precision:_,tickSizeEx:P}}function di(t){if(t===b.Cont)return"cont";if(t===b.Base)return"settleCurrency";if(t===b.Coin)return"underlyingAssets"}function zi(t,e,n,i,r,a){const{type:o}=t,s=a=="Buy";if(o==="Perpetual")return i(r[s?"Long":"Short"]);if(o==="PerpetualV2"){if(e===X.OneWay)return i(r[s?"Long":"Short"]);if(e===X.Hedge){if(n===ae.Open)return i(r[s?"OpenLong":"OpenShort"]);if(n===ae.Close)return i(r[s?"CloseLong":"CloseShort"])}}return""}function Fi(t,e,n){if(e===X.OneWay)return"Merged";if(e===X.Hedge){if(t===ae.Open)return n==="Buy"?"Long":"Short";if(t===ae.Close)return n==="Buy"?"Short":"Long"}return""}function qi(t,e,n,i){const{type:r}=t,{side:a,posSide:o}=e,s=a==="Buy";if(r==="Perpetual")return n(i[s?"Long":"Short"]);if(r==="PerpetualV2"){if(o==="Long")return n(i[s?"OpenLong":"CloseLong"]);if(o==="Short")return n(i[s?"CloseShort":"OpenShort"]);if(o==="Merged")return n(i[s?"Long":"Short"])}return"-"}function Hi(t,e,n,i){const{type:r}=t;if(r==="Perpetual")return e[0];if(r==="PerpetualV2"){if(n===X.Hedge){if(i==="Buy")return e.find(({posSide:a})=>a==="Long");if(i==="Sell")return e.find(({posSide:a})=>a==="Short")}if(n===X.OneWay)return e.find(({posSide:a})=>a==="Merged")}}function Wi(t,e,n,i,r=""){if(e==="Hedged"){if(n==="Buy"&&i!=="Decrease"||n==="Sell"&&i==="Decrease")return t.find(({posSide:a,symbol:o})=>a==="Short"&&(!r||r===o));if(n==="Sell"&&i!=="Decrease"||n==="Buy"&&i==="Decrease")return t.find(({posSide:a,symbol:o})=>a==="Long"&&(!r||r===o))}return null}function ji(t,e,n,i,r,a){if(i===ae.Close)return{buyQty:0,sellQty:0};const{availableBalanceEv:o}=e,{type:s,symbol:c}=t;if(s==="Perpetual"){const l=n.find(d=>d.symbol===c),f=ke(t,l,o,a),u=Me(t,l,o,a);return{buyQty:f,sellQty:u}}if(s==="PerpetualV2"){if(r===X.OneWay){const l=n.find(({posSide:f})=>f==="Merged");if(l){const f=ke(t,l,o,a),u=Me(t,l,o,a);return{buyQty:f,sellQty:u}}}if(r===X.Hedge){const l=n.find(({posSide:u})=>u==="Short"),f=n.find(({posSide:u})=>u==="Long");if(l&&f){const u=ke(t,l,o,a),d=Me(t,l,o,a),m=ke(t,f,o,a),y=Me(t,f,o,a),v=Math.min(m,y),C=Math.min(u,d);return{buyQty:v,sellQty:C}}}}return{buyQty:0,sellQty:0}}const Ki={averagePrice(t,e,n,i){const{newOrderSize:r,priceEp:a,ordType:o,stopPxEp:s}=e;if(!n)return a;const{size:c,avgEntryPriceEp:l}=n,{contractSide:f,contractSize:u}=i,d=this.genOrderType(n,e);if(["Open","Reverse","Increase"].includes(d)){const m=Ve.isConditionalOrder(o),y=Ve.isMarketOrder(o),v=m&&y&&s?s:a,C=this.genOrderValue(i,r,v),A=this.genOrderValue(i,c,l),S=p(C).plus(A).div(u),D=p(r).plus(c);return S.lte(0)||D.lte(0)?l:Number(f>0?S.div(D):D.div(S))}else return l},genMergeSize(t,e,n){const i=this.genOrderType(e,n);if(e&&n){const r=(n==null?void 0:n.newOrderSize)||0,a=(e==null?void 0:e.size)||0,o=["Open","Increase"].includes(i);return Math.abs(Number(o?p(r).plus(a):p(a).minus(r)))}return 0},genOrderType(t,e){if(!t)return"Open";const{side:n,size:i}=t,{side:r,orderQty:a}=e;return n==="None"?"Open":t.posMode==="OneWay"&&n!==r&&i>0&&a>i?"Reverse":n===r?"Increase":n!==r?"Decrease":"None"},genOrderValue(t,e,n){if(p(e).lte(0)||p(n).lte(0))return p(0);const{contractSide:i,contractSize:r}=t;return i>0?p(e).times(r).times(n):p(e).times(r).div(n)}},Yi={createOrder(t,e,n){new Promise((i,r)=>{const{orderQty:a,timeInForce:o,priceEp:s,ordType:c,iptValue:l,...f}=t,u=di(Ue.getValue()),{pricePrecision:d,priceScale:m}=n;try{Y.track("place_order",{market:"Contract",order_type:c,price:g.floor(s,d,m),iptValue:l,quantity:a,size_type:u,time_in_force:o,...f,...e}),i(0)}catch{r()}})}};function Xi(t,e,n){const{triggerType:i,stopPxEp:r,priceEp:a,quantity:o}=e,{orderType:s,conditionalType:c,availableBalanceEv:l,costEv:f,lastPriceEp:u,markPriceEp:d,contract:m,iptValue:y,qtyType:v,iceberg:C,icebergOrders:A,icebergQty:S,icebergInputType:D}=n;if(s===Te.Conditional){if(r<=0)return t(M.TriggerPriceError);const{tickSizeEp:U}=m;if(i==="ByLastPrice"&&r===g.roundPriceEp(u,U))return t(M.TriggerPriceEqualLastPriceError);if(i==="ByMarkPrice"&&r===g.roundPriceEp(d,U))return t(M.TriggerPriceEqualMarkPriceError)}return s!==Te.Market&&c!==Dt.Market&&a<=0?t(M.PriceError):o<=0&&y<=0?t(M.QtyError):pi(v,m,a,y,o)?t(M.MinOrderQuantity):s!==Te.Conditional&&f>l?t(M.AvailableError):C&&!A&&!S?t(D==="Orders"?M.IcebergQtyError:M.IcebergQtyError):null}function Zi(t,e,n){const{triggerType:i,stopPxEp:r,priceEp:a,quantity:o}=e,{orderType:s,conditionalType:c,lastPriceEp:l,markPriceEp:f,contract:u,closeLongMax:d,closeShortMax:m,side:y}=n;if(s===Te.Conditional){if(r<=0)return t(M.TriggerPriceError);const{tickSizeEp:v}=u;if(i==="ByLastPrice"&&r===g.roundPriceEp(l,v))return t(M.TriggerPriceEqualLastPriceError);if(i==="ByMarkPrice"&&r===g.roundPriceEp(f,v))return t(M.TriggerPriceEqualMarkPriceError)}return(s!==Te.Market||c!==Dt.Market)&&a<=0?t(M.PriceError):y==="Buy"&&d<=0||y==="Sell"&&m<=0?t(M.NoPositionToClose):o<=0?t(M.QtyError):null}function pi(t,e,n,i,r){const{type:a,qtyStepSize:o,contractSize:s}=e,c=Number(a==="Perpetual"?ht(n,e):p(n).times(o)),l=a==="Perpetual"?s:o,u={[b.Cont]:1,[b.Base]:c,[b.Coin]:l}[t];return t===b.Cont?r<u:i<u}const ge=new x({costWU:"",costEv:0}),ve=new x({costWU:"",costEv:0});function Ji(t,e,n,i,r,a){const{type:o,settleCurrency:s,valuePrecision:c,valueScale:l}=t;if(!(!e||e.length===0)){if(o==="Perpetual"){const f=e[0],u=Ee(t,f,n,i),d=g.floor(u,c,l);ge.next({costWU:`${d} ${s}`,costEv:u});const m=Be(t,f,n,i),y=g.floor(m,c,l);ve.next({costWU:`${y} ${s}`,costEv:m})}if(o==="PerpetualV2"){if(r===X.Hedge){const f=e.find(d=>d.posSide==="Long"),u=e.find(d=>d.posSide==="Short");if(a===ae.Open){const d=Ee(t,f,n,i),m=g.floor(d,c,l);ge.next({costWU:`${m} ${s}`,costEv:d});const y=Be(t,u,n,i),v=g.floor(y,c,l);ve.next({costWU:`${v} ${s}`,costEv:y})}if(a===ae.Close){const d=Ee(t,u,n,i),m=g.floor(d,c,l);ge.next({costWU:`${m} ${s}`,costEv:d});const y=Be(t,f,n,i),v=g.floor(y,c,l);ve.next({costWU:`${v} ${s}`,costEv:y})}}if(r===X.OneWay){const f=e.find(v=>v.posSide==="Merged"),u=Ee(t,f,n,i),d=g.floor(u,c,l);ge.next({costWU:`${d} ${s}`,costEv:u});const m=Be(t,f,n,i),y=g.floor(m,c,l);ve.next({costWU:`${y} ${s}`,costEv:m})}}}}Z.subscribe(({settleCurrency:t,valuePrecision:e,valueScale:n})=>{const i=g.floor(0,e,n);ge.next({costWU:`${i} ${t}`,costEv:0}),ve.next({costWU:`${i} ${t}`,costEv:0})});const Gi={createTakeProfitPercents(){return[{value:.05,text:"5%"},{value:.1,text:"10%"},{value:.15,text:"15%"},{value:.2,text:"20%"},{value:.25,text:"25%"},{value:.5,text:"50%"}]},createStopLossPercents(){return[{value:.05,text:"5%"},{value:.1,text:"10%"},{value:.15,text:"15%"},{value:.25,text:"25%"},{value:.5,text:"50%"},{value:.75,text:"75%"}]},createTrailingStopPercents(){return[{value:.05,text:"5%"},{value:.1,text:"10%"},{value:.15,text:"15%"},{value:.2,text:"20%"},{value:.25,text:"25%"},{value:.3,text:"30%"}]}},er=0;function tr({contractSide:t,side:e,priceEp:n,leverage:i,percent:r}){if(!n)return p(0);if(t>0){if(e==="Buy")return p(n).plus(p(n).mul(r).div(i));if(e==="Sell")return p(n).minus(p(n).mul(r).div(i))}if(t<0){if(e==="Buy")return p(n).mul(i).div(p(i).minus(r));if(e==="Sell")return p(n).mul(i).div(p(i).plus(r))}return p(0)}function nr({contractSide:t,side:e,priceEp:n,leverage:i,percent:r}){if(!n)return p(0);if(t>0){if(e==="Buy")return p(n).minus(p(n).mul(r).div(i));if(e==="Sell")return p(n).plus(p(n).mul(r).div(i))}if(t<0){if(e==="Buy")return p(n).mul(i).div(p(i).plus(r));if(e==="Sell")return p(n).mul(i).div(p(i).minus(r))}return p(0)}function ir({contractSide:t,side:e,priceEp:n,targetPriceEp:i,leverage:r}){if(!n||!i)return p(0);if(t>0){if(e==="Buy")return p(i).mul(r).div(n).minus(r);if(e==="Sell")return p(r).minus(p(i).mul(r).div(n))}if(t<0){if(e==="Buy")return p(r).minus(p(n).mul(r).div(i));if(e==="Sell")return p(n).mul(r).div(i).minus(r)}return p(0)}function rr({contractSide:t,side:e,priceEp:n,targetPriceEp:i,leverage:r}){if(!n||!i)return p(0);if(t>0){if(e==="Buy")return p(r).minus(p(i).mul(r).div(n));if(e==="Sell")return p(i).mul(r).div(n).minus(r)}if(t<0){if(e==="Buy")return p(n).mul(r).div(i).minus(r);if(e==="Sell")return p(r).minus(p(n).mul(r).div(i))}return p(0)}function ar(t,e,n,i,r,a,o){if(e<=0||r<=0)return 0;const s=p(e).times(i),c=p(r).div(a);return n>0?t==="Buy"?c.plus(p(o).div(s)):c.minus(p(o).div(s)):t==="Buy"?s.div(s.div(c).minus(o)):s.div(s.div(c).plus(o))}function sr(t,e,n,i,r,a,o){if(e<=0||r<=0)return 0;const s=p(e).times(i),c=p(r).div(a);return n>0?t==="Buy"?p(c).minus(p(o).div(s)):p(c).plus(p(o).div(s)):t==="Buy"?p(s).div(p(s).div(c).plus(o)):p(s).div(p(s).div(c).minus(o))}function st(t,e,n){const i=t.slice();return i[8]=e[n],i[10]=n,i}function ot(t,e){let n,i=e[8].text+"",r,a,o;function s(){return e[6](e[8])}return{key:t,first:null,c(){n=w("div"),r=ee(i),this.h()},l(c){n=L(c,"DIV",{class:!0});var l=V(n);r=te(l,i),l.forEach(E),this.h()},h(){$(n,"class","f1 item tc cp H-1jqi9x6"),W(n,"round-f",e[4]&&e[10]===0),W(n,"round-l",e[4]&&e[10]===e[1].length-1),this.first=n},m(c,l){ye(c,n,l),O(n,r),a||(o=_t(n,"click",s),a=!0)},p(c,l){e=c,l&2&&i!==(i=e[8].text+"")&&ce(r,i),l&18&&W(n,"round-f",e[4]&&e[10]===0),l&18&&W(n,"round-l",e[4]&&e[10]===e[1].length-1)},d(c){c&&E(n),a=!1,o()}}}function ct(t){let e;return{c(){e=w("div"),this.h()},l(n){e=L(n,"DIV",{class:!0,style:!0}),V(e).forEach(E),this.h()},h(){$(e,"class","triangle H-1jqi9x6"),$(e,"style",t[3])},m(n,i){ye(n,e,i)},p(n,i){i&8&&$(e,"style",n[3])},d(n){n&&E(e)}}}function mi(t){let e,n=[],i=new Map,r,a=t[1];const o=c=>c[8].value;for(let c=0;c<a.length;c+=1){let l=st(t,a,c),f=o(l);i.set(f,n[c]=ot(f,l))}let s=(t[2]||t[3])&&ct(t);return{c(){e=w("div");for(let c=0;c<n.length;c+=1)n[c].c();r=fe(),s&&s.c(),this.h()},l(c){e=L(c,"DIV",{class:!0});var l=V(e);for(let f=0;f<n.length;f+=1)n[f].l(l);r=de(l),s&&s.l(l),l.forEach(E),this.h()},h(){$(e,"class","wrap df pr lh24 f12 H-1jqi9x6"),W(e,"disabled",t[0]),W(e,"round",t[4])},m(c,l){ye(c,e,l);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);O(e,r),s&&s.m(e,null)},p(c,[l]){l&50&&(a=c[1],n=Gt(n,l,o,1,c,a,i,e,en,ot,r,st)),c[2]||c[3]?s?s.p(c,l):(s=ct(c),s.c(),s.m(e,null)):s&&(s.d(1),s=null),l&1&&W(e,"disabled",c[0]),l&16&&W(e,"round",c[4])},i:Ke,o:Ke,d(c){c&&E(e);for(let l=0;l<n.length;l+=1)n[l].d();s&&s.d()}}}function yi(t,e,n){const i=tn();let{disabled:r=!1}=e,{percents:a=[]}=e,{triangle:o=!1}=e,{triangleStyle:s=""}=e,{round:c=!1}=e;function l(u){i("change",{value:u.value})}const f=u=>l(u);return t.$$set=u=>{"disabled"in u&&n(0,r=u.disabled),"percents"in u&&n(1,a=u.percents),"triangle"in u&&n(2,o=u.triangle),"triangleStyle"in u&&n(3,s=u.triangleStyle),"round"in u&&n(4,c=u.round)},[r,a,o,s,c,l,f]}let or=class extends Pt{constructor(e){super(),Tt(this,e,yi,mi,Ct,{disabled:0,percents:1,triangle:2,triangleStyle:3,round:4})}};function lr(t,e,n,i){return e-(t==="ByLastPrice"?n:i)}function ur(t){return t>0?"Set Buy Stop":"Take Profit Buy"}function fr(t){return t<0?"Set Sell Stop":"Take Profit Sell"}const j={UseCryptoFees:"e08063",Discount:"7c516b",PTBalance:"d0ea46",BalanceIsZeroTip:"cb660f",TransferCrypto:"f248e8"};function lt(t){let e,n,i,r,a,o=t[5](j.UseCryptoFees)+"",s,c,l,f,u=t[5](j.Discount,{Discount:Ne})+"",d,m,y,v=t[5](j.PTBalance)+"",C,A,S=t[2].accountBalance+"",D,U,B,h,z,I=Xe(t[2].accountBalanceEv,0),k;function oe(_){t[12](_)}let F={disabled:!t[6]};t[1]!==void 0&&(F.checked=t[1]),B=new xn({props:F}),an.push(()=>sn(B,"checked",oe)),B.$on("changeCheck",function(){on(Ze(t[7],!t[1]))&&Ze(t[7],!t[1]).apply(this,arguments)});let T=I&&ut(t);return{c(){e=w("div"),n=w("div"),i=w("div"),r=w("div"),a=w("span"),s=ee(o),c=ee(" "),l=fe(),f=w("span"),d=ee(u),m=fe(),y=w("div"),C=ee(v),A=ee(" "),D=ee(S),U=fe(),cn(B.$$.fragment),z=fe(),T&&T.c(),this.h()},l(_){e=L(_,"DIV",{class:!0});var P=V(e);n=L(P,"DIV",{class:!0});var q=V(n);i=L(q,"DIV",{class:!0});var H=V(i);r=L(H,"DIV",{});var ne=V(r);a=L(ne,"SPAN",{class:!0});var ze=V(a);s=te(ze,o),c=te(ze," "),ze.forEach(E),l=de(ne),f=L(ne,"SPAN",{class:!0});var je=V(f);d=te(je,u),je.forEach(E),ne.forEach(E),m=de(H),y=L(H,"DIV",{class:!0});var _e=V(y);C=te(_e,v),A=te(_e," "),D=te(_e,S),_e.forEach(E),H.forEach(E),U=de(q),ln(B.$$.fragment,q),q.forEach(E),z=de(P),T&&T.l(P),P.forEach(E),this.h()},h(){$(a,"class","f12 fw2 xs:f16 H-1ueo9dt"),$(f,"class","discount f12 fw3 H-1ueo9dt"),$(y,"class","mt4 lh12 f12 T3 xs:f14 H-1ueo9dt"),$(i,"class","f1 lh18 T1"),$(n,"class","df jcsb mt12"),$(e,"class","wrap H-1ueo9dt"),W(e,"h5",t[0]),W(e,"dark",t[4])},m(_,P){ye(_,e,P),O(e,n),O(n,i),O(i,r),O(r,a),O(a,s),O(a,c),O(r,l),O(r,f),O(f,d),O(i,m),O(i,y),O(y,C),O(y,A),O(y,D),O(n,U),un(B,n,null),O(e,z),T&&T.m(e,null),k=!0},p(_,P){t=_,(!k||P&32)&&o!==(o=t[5](j.UseCryptoFees)+"")&&ce(s,o),(!k||P&32)&&u!==(u=t[5](j.Discount,{Discount:Ne})+"")&&ce(d,u),(!k||P&32)&&v!==(v=t[5](j.PTBalance)+"")&&ce(C,v),(!k||P&4)&&S!==(S=t[2].accountBalance+"")&&ce(D,S);const q={};P&64&&(q.disabled=!t[6]),!h&&P&2&&(h=!0,q.checked=t[1],fn(()=>h=!1)),B.$set(q),P&4&&(I=Xe(t[2].accountBalanceEv,0)),I?T?T.p(t,P):(T=ut(t),T.c(),T.m(e,null)):T&&(T.d(1),T=null),(!k||P&1)&&W(e,"h5",t[0]),(!k||P&16)&&W(e,"dark",t[4])},i(_){k||(xe(B.$$.fragment,_),k=!0)},o(_){qe(B.$$.fragment,_),k=!1},d(_){_&&E(e),dn(B),T&&T.d()}}}function ut(t){let e,n,i=t[5](j.BalanceIsZeroTip,{Discount:Ne})+"",r,a,o,s=t[5](j.TransferCrypto,{Currency:"PT"})+"",c,l,f;return{c(){e=w("div"),n=w("div"),r=ee(i),a=fe(),o=w("div"),c=ee(s),this.h()},l(u){e=L(u,"DIV",{class:!0});var d=V(e);n=L(d,"DIV",{class:!0});var m=V(n);r=te(m,i),m.forEach(E),a=de(d),o=L(d,"DIV",{class:!0});var y=V(o);c=te(y,s),y.forEach(E),d.forEach(E),this.h()},h(){$(n,"class","T3"),$(o,"class","link mt4 tr BLUE tdud cp H-1ueo9dt"),$(e,"class","tip mt12 lh14 f12 xs:f14 H-1ueo9dt")},m(u,d){ye(u,e,d),O(e,n),O(n,r),O(e,a),O(e,o),O(o,c),l||(f=_t(o,"click",t[8]),l=!0)},p(u,d){d&32&&i!==(i=u[5](j.BalanceIsZeroTip,{Discount:Ne})+"")&&ce(r,i),d&32&&s!==(s=u[5](j.TransferCrypto,{Currency:"PT"})+"")&&ce(c,s)},d(u){u&&E(e),l=!1,f()}}}function hi(t){let e,n,i=t[3]&&lt(t);return{c(){i&&i.c(),e=Ye()},l(r){i&&i.l(r),e=Ye()},m(r,a){i&&i.m(r,a),ye(r,e,a),n=!0},p(r,[a]){r[3]?i?(i.p(r,a),a&8&&xe(i,1)):(i=lt(r),i.c(),xe(i,1),i.m(e.parentNode,e)):i&&(nn(),qe(i,1,1,()=>{i=null}),rn())},i(r){n||(xe(i),n=!0)},o(r){qe(i),n=!1},d(r){i&&i.d(r),r&&E(e)}}}const wt="PT";function bi(t){const e=t.find(n=>n.currency===wt);return e?{accountBalanceEv:e.accountBalanceEv,accountBalance:e.accountBalance}:{accountBalanceEv:0,accountBalance:"0"}}function gi(t,e,n){let i,r,a,o,s,c,l,f,u,d;J(t,Tn,h=>n(14,r=h)),J(t,Cn,h=>n(15,a=h)),J(t,_n,h=>n(16,o=h)),J(t,Z,h=>n(9,s=h)),J(t,On,h=>n(10,c=h)),J(t,kn,h=>n(11,l=h)),J(t,Mn,h=>n(4,f=h)),J(t,En,h=>n(5,u=h)),J(t,Mt,h=>n(6,d=h));var m=this&&this.__awaiter||function(h,z,I,k){function oe(F){return F instanceof I?F:new I(function(T){T(F)})}return new(I||(I=Promise))(function(F,T){function _(H){try{q(k.next(H))}catch(ne){T(ne)}}function P(H){try{q(k.throw(H))}catch(ne){T(ne)}}function q(H){H.done?F(H.value):oe(H.value).then(_,P)}q((k=k.apply(h,z||[])).next())})};let{isH5:y=!1}=e,v=!1,C=!1,A={accountBalanceEv:0,accountBalance:"0"};function S(h){h!==v&&n(1,v=h)}function D(h){return m(this,void 0,void 0,function*(){if(C)return;C=!0,Y.track("contract_pt_discount_state_change",{state:h});const{error:z}=yield Bn.switchContractPtDiscount({currency:"PT",status:h?1:2});if(C=!1,z){Le.send("toast","error",z),Y.track("contract_pt_discount_state_change_error",{state:h,error:z});return}n(1,v=h)})}function U(){if(o==="Login"){Dn.create(Qt,{currency:wt,fromAccount:a?Fe.UtaFundAccount:Fe.SpotWallet,toAccount:Fe.ContractsAccount,convertType:Ut.ContractAccount});return}const h=$n?"LOGIN":"REGISTER";An.gotoLogin(r(In[h]))}function B(h){v=h,n(1,v)}return t.$$set=h=>{"isH5"in h&&n(0,y=h.isH5)},t.$$.update=()=>{t.$$.dirty&2048&&n(2,A=bi(l)),t.$$.dirty&1024&&S(c),t.$$.dirty&512&&n(3,i=s.settleCurrency==="USDT")},[y,v,A,i,f,u,d,D,U,s,c,l,B]}class dr extends Pt{constructor(e){super(),Tt(this,e,gi,hi,Ct,{isH5:0})}}const ft={Symbol:"94bccc",Size:"3ffd7a",Value:"ce404c",EntryPrice:"8ea200",MarkPrice:"6702fd",LastPrice:"493857",LiqPrice:"77900e",LiqPrice2:"fcccc2",Margin:"d2000c",UnrealisedPNL:"8bd9cf",RealisedPNL:"8f3d1b",TPSLTrailing:"114ae5",ClosePosition:"8326b5",CloseAllPosition:"e4b0d2",Cancel:"18d3ee",Limit:"659689",Market:"9e5f47",CloseAt:"b66852",AccountBalance:"044e1d",TrailingStop:"048e87",ActivationPrice:"982830",ActPrice:"098798",TPSL:"ef7e2e",ADL:"ba818e",RiskLimit:"a6b62a",CloseByLimit:"1fbe0a",CloseByMarket:"282167",TotalSize:"b3907b",ClosedPNL:"d69421",ExchangeFeePaid:"c214f7",FundingFeePaid:"0d03ad",OpenedTime:"ec595e",OpenPrice:"10290a",ClosePrice:"10091d",CloseTime:"1eaeca",ROI:"313dd4",ConfirmToCloseAll:"1eb449",Price:"9eaec3",EstimatedPNL:"347477",PriceSelectionBasis:"504d85",UnrealizedMarkPrice:"f66f75",UnrealizedLastPrice:"4666f3",CurrentPrice:"4d8947",MarginLevel:"99c18d"},dt={canModify(t,e){return t.ordType===e.ordType&&t.timeInForce===e.timeInForce},async handleTakeProfit(t,e,n,i,{type:r,pricePrecision:a},o){if(n&&!i)return await $e(n,{type:r,by:"position",goal:"cancel_tp"});if(n&&i){if(dt.canModify(n,i)){const c=mt(n,i,{type:r,pricePrecision:a});return await at(n,c,{by:"position",goal:"replace_tp"})}await $e(n,{type:r,by:"position",goal:"cancel_tp_typeChange"})}if(i&&i.stopPxEp>0){const{ordType:s,triggerType:c,stopPxEp:l,priceEp:f,orderQty:u=0,timeInForce:d}=i,m=pt({symbol:e.symbol,side:e.side==="Buy"?"Sell":"Buy",ordType:s,triggerType:c,stopPxEp:l,priceEp:f||t.closeEp,orderQty:u,type:r,posSide:e.posSide,pricePrecision:a,timeInForce:d});return await rt(m,{by:o,goal:"create_tp"})}return!0},async handleStopLoss(t,e,n,i,{type:r,pricePrecision:a},o){if(n&&!i)return await $e(n,{type:r,by:"position",goal:"cancel_sl"});if(n&&i){if(dt.canModify(n,i)){const c=mt(n,i,{type:r,pricePrecision:a});return await at(n,c,{by:"position",goal:"replace_sl"})}await $e(n,{type:r,by:"position",goal:"cancel_sl_typeChange"})}if(i&&i.stopPxEp>0){const{ordType:s,triggerType:c,stopPxEp:l,priceEp:f,orderQty:u=0,timeInForce:d}=i,m=pt({symbol:e.symbol,side:e.side==="Buy"?"Sell":"Buy",ordType:s,triggerType:c,stopPxEp:l,priceEp:f||t.closeEp,orderQty:u,type:r,posSide:e.posSide,pricePrecision:a,timeInForce:d});return await rt(m,{by:o,goal:"create_sl"})}return!0},displayTPSL(t,e){return[t&&t.stopPxEp!==0?t.stopPx:"-",e&&e.stopPxEp!==0?e.stopPx:"-"].join(" / ")},convertTpSlKey(t){return{TakeProfit:"tp",StopLoss:"sl"}[t]}};function pt({symbol:t,side:e,ordType:n,triggerType:i,stopPxEp:r,priceEp:a=0,type:o,posSide:s,pricePrecision:c,timeInForce:l="ImmediateOrCancel",orderQty:f=0}){const u={actionBy:"FromPosition",symbol:t,side:e,ordType:n,triggerType:i,closeOnTrigger:!0,timeInForce:l,type:o};return o==="Perpetual"&&Object.assign(u,{orderQty:f,priceEp:a,stopPxEp:r}),o==="PerpetualV2"&&Object.assign(u,{orderQtyRq:f.toString(),priceRp:a.toString(),stopPxRp:g.floor(r,c),posSide:s}),u}function mt({symbol:t,posSide:e},{triggerType:n,stopPxEp:i,priceEp:r=0,timeInForce:a="ImmediateOrCancel",orderQty:o=0},{type:s,pricePrecision:c}){const l={type:s,symbol:t,triggerType:n,timeInForce:a};return s==="Perpetual"&&Object.assign(l,{orderQty:o,priceEp:r,stopPxEp:i}),s==="PerpetualV2"&&Object.assign(l,{orderQtyRq:o.toString(),priceRp:r.toString(),stopPxRp:g.floor(i,c),posSide:e}),l}function pr(t,e){return Ve.isMarketOrder(t.ordType)?e(ft.Market):`${e(ft.Limit)} ${t.price}`}function mr(t,e){const n=Ve.isActivation(e.ordStatus,e.pegPriceType);return`${e.triggerType} ${e.stopDirection} ${vi(e,n)} ${Si(t,e,n)}`}function vi(t,e){return e?t.activationPrice:t.stopPx}function Si(t,e,n){return n?"":["TrailingTakeProfitPeg","TrailingStopPeg"].includes(e.pegPriceType)?`(${Math.abs(e.pegOffsetValueEp/t.priceFactor)} Trail)`:["TrailingTakeProfitByProportionPeg","TrailingStopByProportionPeg"].includes(e.pegPriceType)?`(${e.pegOffsetProportion} Trail)`:""}function yr(t,e,n=!0){return n?g.abbreviateNumber(e)+" "+t.settleCurrency:g.abbreviateNumber(e)}function hr(t,e){if(!t||!e)return"--X";const{ratioFactor:n,maxLeverage:i}=t,r=Number(p(1).times(n).div(e).toFixed(2));return Math.min(r,i)+"X"}function br(t,e){if(!t||!e)return"--%";const{ratioFactor:n,maxLeverage:i}=t;if(Number(p(1).times(n).div(e.initialMarginEr).toFixed(2))<i)return e.initialMargin;const a=p(1).div(i).times(100).toNumber();return g.trimEnd0(g.floor(a,2))+"%"}async function gr(t,e,n){const{symbol:i,type:r}=t,a={symbol:i,type:r};return r==="Perpetual"&&Object.assign(a,{riskLimitEv:e}),r==="PerpetualV2"&&Object.assign(a,{riskLimitRv:e,posSide:n}),Y.track("submit_request",{action:"set_risk_limit",symbol:i,request_data:a,...ue.getValue()}),se(await We.modifyRiskLimit(a))}const vr={AdjustRiskLimit:"143a0b",RiskLimit:"663c16",DifferentRiskLimits:"1194f8",MaintenanceMargin:"4c5a3f",InitialMargin:"9ac101",MaxLeverage:"7aa430",Current:"ce8b05",New:"cb68fa"};async function Sr(t,e,n){const{symbol:i,type:r}=t,a={symbol:i,type:r};if(r==="Perpetual"&&Object.assign(a,{posBalanceEv:e}),r==="PerpetualV2"){const o=g.floor(e,t.valuePrecision,t.valueScale);Object.assign(a,{posBalanceRv:o,posSide:n})}return Y.track("submit_request",{action:"set_margin",symbol:i,request_data:a,...ue.getValue()}),se(await We.modifyMargin(a),!0)}const Pr={PositionMargin:"c62d18",Action:"740b95",Add:"c67b21",Remove:"90cbe1",Amount:"cec2db",AvailableBalance:"6b38e5",CurrentlyAssignedMargin:"adea80",AdjustedMargin:"ece4b7",EstimatedLiquidationPrice:"f607e5",MaxRemovable:"f8d35f"},Tr={CloseByLimit:"7dcdf3",CloseByMarket:"55f486",LimitPrice:"1409be",Cont:"0a0aef",MinimumAmount:"194066",MinPositionWillClose:"1d04ae"},Cr={AmendOrder:"89eba0",Cont:"02f1ea",Avail:"e34779",Value:"af8560"},_r={Summary:"2d3f95",CancelAll:"7c67c9",Symbol:"07e094",OrderPrice:"b1e982",RealisedPNL:"cc9c06",FeePaid:"e399e0",TriggerActivationPrice:"10c3d1",ActivationPrice:"d2c333",TriggerPrice:"84548a",TriggeringPriceDistance:"a252f4",LastPriceDistance:"0e068b",MarkPriceDistance:"e0e644",FillPrice:"b9c2b4",ExecPrice:"c120cb",FilledRemaining:"2ae8d7",OrderValue:"2d8e9d",TPSL:"58b98e",Type:"648e98",Status:"8e9176",Time:"157a07",ExecSize:"47f525",Action:"d2ff5f",Edit:"d0abfa",Cancel:"47ba65",Remove:"6d42f7",IcebergQty:"2cea12"},Or={OrderAmendMay:"887d5a",AmendingYourTrigger:"e9c65d",PleaseConfirmYour:"6bfd44"};export{Ki as $,fr as A,lr as B,or as C,xi as D,Hi as E,dr as F,ft as G,yr as H,vr as I,br as J,hr as K,gr as L,Pr as M,Sr as N,Tr as O,dt as P,Li as Q,Cr as R,qi as S,er as T,_r as U,at as V,Ri as W,$e as X,Or as Y,Un as Z,Ui as _,Bi as a,Fn as a0,zn as a1,Ue as a2,ar as a3,sr as a4,ir as a5,rr as a6,ji as a7,Qi as a8,Di as a9,Zi as aa,Ai as ab,Wi as ac,le as ad,mr as ae,pr as af,Yn as ag,Kn as ah,Vi as ai,$i as b,De as c,wi as d,Gi as e,tr as f,nr as g,zi as h,He as i,Ii as j,qn as k,At as l,ve as m,ge as n,Mi as o,Ei as p,Ji as q,Qn as r,fi as s,Fi as t,Hn as u,Yi as v,rt as w,Xi as x,Ni as y,ur as z};
//# sourceMappingURL=chunk-8a0ac5f2.js.map

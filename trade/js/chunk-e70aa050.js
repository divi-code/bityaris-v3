import{A as tt,C as nt,D as et,E as Br,F as y,G as q,H as k,I as S,J as M,K as m,L as E,P as G,Q as u,U as Ar,V as zr,W as Qr,X as Q,_ as j,ai as B,aj as A,ak as W,ac as Te,aT as Wt,au as Tt,b6 as Dd,at as hn,T as We,a7 as rt,a0 as jt,ah as J,av as De,aw as qe,ad as te,ae as re,af as ne,ax as Me,ag as ie,az as pn,aR as dn,aS as mn,a2 as Lt,b as Re,a9 as ot,aa as at,b7 as Vd,Y as jn,ao as hi,a1 as Kt,as as wn,a8 as ut,aP as Od,aQ as Ld,B as Jn,u as Rr,Z as Ts,aq as Yu,$ as ws,a4 as Ol,m as Cn,s as Fr,c as gr,f as qn,S as jr,a5 as os,a6 as as,ar as Jt,aE as Si,aF as Ju,b8 as $d,ab as $i,q as qd,aI as Md,a as Zu,h as Nd,x as Hd,w as xu,aK as lr,aO as Bd,aH as Zn,aN as Wl,i as hs,R as Is,b0 as ni,aD as ep,an as Ad,d as zd,al as go,g as Gl,b1 as Qd,ap as tp,j as np,e as Rd}from"/trade/js/chunk-fe777520.js";import{c4 as Xn,by as we,a3 as xe,L as dt,bz as Ni,bH as vr,bG as Ds,an as Xt,bC as vo,bK as ui,bL as Ki,df as Vs,d9 as Fd,cj as ip,ck as ll,bF as ii,cl as Ll,bD as un,dg as sr,dh as dl,br as Hi,di as jd,w as rp,v as Bi,aE as _n,bI as Sn,c2 as vn,b5 as Ot,bt as or,b7 as qt,p as en,cK as Oi,ai as lp,bB as Ct,ay as Yn,bE as Ut,dj as Ln,bT as Tn,dk as An,dl as zn,dm as Qt,j as pi,b as ri,dn as br,Y as Pt,dp as Kl,dq as sp,b0 as Ci,bv as Er,ac as xn,bs as Ai,dr as Ud,e as zi,cD as _s,cB as $l,ds as Wd,b2 as ql,ag as ar,dt as Li,aW as bo,$ as Ur,S as Qi,a as yr,T as Xl,az as Os,U as cn,bJ as Ls,bA as Gd,a7 as $s,du as Kd,D as qs,cG as kl,cH as sl,cI as op,dv as Xd,aT as Pl,X as xi,bu as ap,a0 as Yl,dw as Ms,bw as Ri,A as Ns,t as gs,ah as Yd,aJ as bi,aF as ml,Z as hl,_ as Jd,aC as Zd,aG as xd,bU as _l,aD as cp,M as cl,c$ as cs,d0 as e1,aA as fp,b9 as Wn,aB as Vr,bx as Hs,ab as up,aS as pp,aY as t1,i as n1,dx as Ml,dy as Nl,dz as fl,o as dp,cL as i1,bP as Bs,dA as r1,cO as vs,aQ as l1,dB as Ei,cP as s1,cQ as dr,R as bs,dC as Eo,dD as o1,ap as yo,ar as a1,bM as mp,bN as fi,bO as hp,dE as c1,dF as f1,dG as u1,dH as p1,as as d1,bV as er,aq as m1,dI as h1,dJ as _1,ba as g1,dK as ko,dL as As,cS as Hl,dM as v1,bW as b1,dN as Bt,ad as E1,cZ as Po,aV as y1,aM as k1}from"/trade/js/chunk-10576bff.js";import{C as Un,a as Kn,b as mr}from"/trade/js/chunk-41eedcde.js";import{F as P1,g as yn,o as _p,e as S1,C as Pn,f as C1,G as gp,H as zs,I as Qs,l as Xi,d as T1,b as Rs,c as w1,h as I1,A as D1,q as V1,r as So,t as O1,u as L1,v as $1,w as Co,x as q1,i as zt,j as vp,J as bp,k as M1,K as N1,n as H1,m as B1,L as Ep,M as Jl,p as A1,y as z1,z as Q1,B as R1,D as F1,E as j1}from"/trade/js/chunk-39a0475d.js";import{C as gn}from"/trade/js/chunk-7089fff5.js";import{y as rn,Z as Fi,_ as ei,$ as yi,E as Bn,b as U1,a0 as W1,a1 as To,a2 as an,F as G1,f as K1,g as X1,a3 as Y1,a4 as J1,a5 as Z1,a6 as x1,P as di,G as yt,e as Es,C as yp,m as Wr,n as Gr,j as kn,a7 as hr,a8 as Or,h as sn,k as Kr,l as cr,z as kp,A as Pp,u as Pi,B as Di,v as Bl,a9 as qi,x as Fs,aa as js,ab as Lr,t as kr,ac as em,r as Sl,w as fr,ad as Sp,H as Yi,I as Vn,J as wr,K as Cl,L as tm,d as Cp,a as Tp,X as Mi,s as nm,U as bt,V as Gi,ae as $r,af as qr,ag as im,W as rm,D as lm,ah as sm,i as wo,c as fs,ai as om,M as On,N as am,O as ul,Q as wp,Y as Al,R as Io,S as tr,o as cm,p as fm}from"/trade/js/chunk-8a0ac5f2.js";import{t as Gt,P as Ip,a as Ye,o as Dp,b as ji,A as Ir,D as um,e as Vp,Q as pm,l as gi,F as Vi,G as dm,i as mm,d as hm}from"/trade/js/chunk-e6aba44f.js";import{i as In,j as Dn,k as Op,d as Xr,b as on,l as vt,m as _r,c as Je,n as li,o as si,q as Lp,p as $p,r as qp,f as Mr,C as Mp,a as zl}from"/trade/js/chunk-48de2933.js";import{c as He,C as Ht,a as bn,g as _m}from"/trade/js/app-3b2e47c2.js";import{C as Pr}from"/trade/js/chunk-25e951b0.js";import{b as Yr,a as Vt,l as Do,m as Vo}from"/trade/js/chunk-03b4702d.js";import{l as gm,p as vm}from"/trade/js/chunk-846730ff.js";import{l as Tl}from"/trade/js/chunk-106d5fb5.js";function bm(n){let e,t;return{c(){e=y("span"),t=B(n[0]),this.h()},l(i){e=k(i,"SPAN",{class:!0});var r=S(e);t=A(r,n[0]),r.forEach(m),this.h()},h(){E(e,"class","T3")},m(i,r){G(i,e,r),u(e,t)},p(i,r){r&1&&W(t,i[0])},d(i){i&&m(e)}}}function Em(n){let e,t,i,r,l;return{c(){e=y("span"),t=B(n[0]),this.h()},l(s){e=k(s,"SPAN",{class:!0});var o=S(e);t=A(o,n[0]),o.forEach(m),this.h()},h(){E(e,"class","T3"),Te(e,"ch",n[3]),Te(e,"tdud",n[3])},m(s,o){G(s,e,o),u(e,t),r||(l=Wt(i=Gt.call(null,e,{text:n[3]})),r=!0)},p(s,o){o&1&&W(t,s[0]),i&&Tt(i.update)&&o&8&&i.update.call(null,{text:s[3]}),o&8&&Te(e,"ch",s[3]),o&8&&Te(e,"tdud",s[3])},d(s){s&&m(e),r=!1,l()}}}function ym(n){let e,t;return{c(){e=y("span"),t=B(n[1]),this.h()},l(i){e=k(i,"SPAN",{class:!0});var r=S(e);t=A(r,n[1]),r.forEach(m),this.h()},h(){E(e,"class","f1 tr T1")},m(i,r){G(i,e,r),u(e,t)},p(i,r){r&2&&W(t,i[1])},d(i){i&&m(e)}}}function km(n){let e,t,i;function r(f,p){return f[3]?Em:bm}let l=r(n),s=l(n);const o=n[5].default,a=Br(o,n,n[4],null),c=a||ym(n);return{c(){e=y("div"),s.c(),t=q(),c&&c.c(),this.h()},l(f){e=k(f,"DIV",{class:!0,style:!0});var p=S(e);s.l(p),t=M(p),c&&c.l(p),p.forEach(m),this.h()},h(){E(e,"class","df jcsb f1 ph16 lh24 f12 H-5vavcf"),E(e,"style",n[2])},m(f,p){G(f,e,p),s.m(e,null),u(e,t),c&&c.m(e,null),i=!0},p(f,[p]){l===(l=r(f))&&s?s.p(f,p):(s.d(1),s=l(f),s&&(s.c(),s.m(e,t))),a?a.p&&(!i||p&16)&&Ar(a,o,f,f[4],i?Qr(o,f[4],p,null):zr(f[4]),null):c&&c.p&&(!i||p&2)&&c.p(f,i?p:-1),(!i||p&4)&&E(e,"style",f[2])},i(f){i||(Q(c,f),i=!0)},o(f){j(c,f),i=!1},d(f){f&&m(e),s.d(),c&&c.d(f)}}}function Pm(n,e,t){let{$$slots:i={},$$scope:r}=e,{label:l=""}=e,{info:s=""}=e,{style:o=""}=e,{tooltips:a=""}=e;return n.$$set=c=>{"label"in c&&t(0,l=c.label),"info"in c&&t(1,s=c.info),"style"in c&&t(2,o=c.style),"tooltips"in c&&t(3,a=c.tooltips),"$$scope"in c&&t(4,r=c.$$scope)},[l,s,o,a,r,i]}let Hn=class extends tt{constructor(e){super(),nt(this,e,Pm,km,et,{label:0,info:1,style:2,tooltips:3})}};function Sm(n){let e,t,i,r=!1,l,s,o,a,c,f,p,d,h;const _=n[5].default,v=Br(_,n,n[4],null);return p=Dd(n[7][0]),{c(){e=y("label"),t=y("div"),i=y("input"),l=q(),s=y("img"),a=q(),v&&v.c(),this.h()},l(g){e=k(g,"LABEL",{disabled:!0,class:!0});var b=S(e);t=k(b,"DIV",{class:!0});var P=S(t);i=k(P,"INPUT",{class:!0,type:!0}),l=M(P),s=k(P,"IMG",{class:!0,src:!0,alt:!0}),a=M(P),v&&v.l(P),P.forEach(m),b.forEach(m),this.h()},h(){E(i,"class","dn"),E(i,"type","radio"),i.__value=n[2],i.value=i.__value,E(s,"class","mr4"),hn(s.src,o=Xn[n[0]===n[2]?"CIRCLE_RIGHT_CHECKED":"CIRCLE_RIGHT"])||E(s,"src",o),E(s,"alt",""),E(t,"class","df aic"),E(e,"disabled",n[3]),E(e,"class",c="dib f14 T2 "+n[1]),p.p(i)},m(g,b){G(g,e,b),u(e,t),u(t,i),i.checked=i.__value===n[0],u(t,l),u(t,s),u(t,a),v&&v.m(t,null),f=!0,d||(h=We(i,"change",n[6]),d=!0)},p(g,[b]){(!f||b&4)&&(i.__value=g[2],i.value=i.__value,r=!0),(r||b&1)&&(i.checked=i.__value===g[0]),(!f||b&5&&!hn(s.src,o=Xn[g[0]===g[2]?"CIRCLE_RIGHT_CHECKED":"CIRCLE_RIGHT"]))&&E(s,"src",o),v&&v.p&&(!f||b&16)&&Ar(v,_,g,g[4],f?Qr(_,g[4],b,null):zr(g[4]),null),(!f||b&8)&&E(e,"disabled",g[3]),(!f||b&2&&c!==(c="dib f14 T2 "+g[1]))&&E(e,"class",c)},i(g){f||(Q(v,g),f=!0)},o(g){j(v,g),f=!1},d(g){g&&m(e),v&&v.d(g),p.r(),d=!1,h()}}}function Cm(n,e,t){let{$$slots:i={},$$scope:r}=e,{class:l=""}=e,{group:s=""}=e,{value:o=""}=e,{disabled:a=!1}=e;const c=[[]];function f(){s=this.__value,t(0,s)}return n.$$set=p=>{"class"in p&&t(1,l=p.class),"group"in p&&t(0,s=p.group),"value"in p&&t(2,o=p.value),"disabled"in p&&t(3,a=p.disabled),"$$scope"in p&&t(4,r=p.$$scope)},[s,l,o,a,r,i,f,c]}let ki=class extends tt{constructor(e){super(),nt(this,e,Cm,Sm,et,{class:1,group:0,value:2,disabled:3})}};var $n=(n=>(n.ProfitLoss="ProfitLoss",n.TargetPrice="TargetPrice",n.LiquidationPrice="LiquidationPrice",n))($n||{});function Np(n,e,t,i){const{type:r,qtyPrecision:l,qtyScale:s,contPrecision:o,settleValuePrecision:a,valuePrecision:c,valueScale:f}=i;let p=0,d=0;r==="Perpetual"&&(p=e===we.Cont?o:a,d=s),r==="PerpetualV2"&&(p=e===we.Base?c:l,d=e===we.Base?f:s);const h=Number(xe.floor(n,p,d));return{[we.Cont]:h,[we.Base]:Number(In(h,t,i)),[we.Coin]:Number(Dn(h,i,t))}[e]}const wt={ProfitLoss:"312b8e",TargetPrice:"7845d5",LiquidationPrice:"cded4d",Cont:"fd67ab",EntryPrice:"6fe033",ExitPrice:"10c4a1",Calculator:"fd512d",PositionSize:"a0c60a",Contract:"c4cbb8",Margin:"57cccc",EntryValue:"2ca8a8",ExitValue:"998e2d",Roe:"5590db",UnableToReach:"fcdc19",MarginBalance:"056b8c",Buy:"e71415",Sell:"10e7b5",LiqTips:"307698"};function Tm(n){let e,t,i=n[3](wt.PositionSize)+"",r,l,s,o,a,c,f=n[3](wt.EntryPrice)+"",p,d,h,_,v,g,b=n[3](wt.Contract)+"",P,I,T,C=n[0].pairName+"",V,O,w=n[3](He.CurrencyMargin,{Currency:n[0].settleCurrency})+"",D,L,$;return{c(){e=y("div"),t=y("div"),r=B(i),l=B(": "),s=y("span"),o=B(n[1]),a=q(),c=y("div"),p=B(f),d=B(": "),h=y("span"),_=B(n[2]),v=q(),g=y("div"),P=B(b),I=B(": "),T=y("span"),V=B(C),O=q(),D=B(w),this.h()},l(N){e=k(N,"DIV",{class:!0});var z=S(e);t=k(z,"DIV",{});var H=S(t);r=A(H,i),l=A(H,": "),s=k(H,"SPAN",{class:!0});var R=S(s);o=A(R,n[1]),R.forEach(m),H.forEach(m),a=M(z),c=k(z,"DIV",{});var F=S(c);p=A(F,f),d=A(F,": "),h=k(F,"SPAN",{class:!0});var U=S(h);_=A(U,n[2]),U.forEach(m),F.forEach(m),v=M(z),g=k(z,"DIV",{});var K=S(g);P=A(K,b),I=A(K,": "),T=k(K,"SPAN",{class:!0});var Y=S(T);V=A(Y,C),O=M(Y),D=A(Y,w),Y.forEach(m),K.forEach(m),z.forEach(m),this.h()},h(){E(s,"class","cp BLUE"),E(h,"class","cp BLUE"),E(T,"class","contract T2"),E(e,"class","row df aic jcsb ph16 B1 T3 H-9x9qig")},m(N,z){G(N,e,z),u(e,t),u(t,r),u(t,l),u(t,s),u(s,o),u(e,a),u(e,c),u(c,p),u(c,d),u(c,h),u(h,_),u(e,v),u(e,g),u(g,P),u(g,I),u(g,T),u(T,V),u(T,O),u(T,D),L||($=[We(s,"click",n[4]),We(h,"click",n[5])],L=!0)},p(N,[z]){z&8&&i!==(i=N[3](wt.PositionSize)+"")&&W(r,i),z&2&&W(o,N[1]),z&8&&f!==(f=N[3](wt.EntryPrice)+"")&&W(p,f),z&4&&W(_,N[2]),z&8&&b!==(b=N[3](wt.Contract)+"")&&W(P,b),z&1&&C!==(C=N[0].pairName+"")&&W(V,C),z&9&&w!==(w=N[3](He.CurrencyMargin,{Currency:N[0].settleCurrency})+"")&&W(D,w)},i:rt,o:rt,d(N){N&&m(e),L=!1,jt($)}}}function wm(n,e,t){let i;J(n,dt,h=>t(3,i=h));let{contract:r=null}=e,{position:l=null}=e,{quantity:s=0}=e,{entryPriceEp:o=0}=e,a="--",c="--";function f(h){if(h&&h.size>0){const{pricePrecision:_,priceScale:v}=r;t(1,a=h.size),t(2,c=xe.floor(h.avgEntryPriceEp,_,v));return}t(1,a="--"),t(2,c="--")}function p(){l&&l.size>0&&t(6,s=l.size)}function d(){l&&l.avgEntryPriceEp>0&&t(7,o=l.avgEntryPriceEp)}return n.$$set=h=>{"contract"in h&&t(0,r=h.contract),"position"in h&&t(8,l=h.position),"quantity"in h&&t(6,s=h.quantity),"entryPriceEp"in h&&t(7,o=h.entryPriceEp)},n.$$.update=()=>{n.$$.dirty&256&&f(l)},[r,a,c,i,p,d,s,o,l]}let Us=class extends tt{constructor(e){super(),nt(this,e,wm,Tm,et,{contract:0,position:8,quantity:6,entryPriceEp:7})}};function Im(n){let e,t,i=n[1](wt.Buy)+"",r,l,s,o=n[1](wt.Sell)+"",a,c,f;return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("span"),a=B(o),this.h()},l(p){e=k(p,"DIV",{class:!0});var d=S(e);t=k(d,"SPAN",{class:!0});var h=S(t);r=A(h,i),h.forEach(m),l=M(d),s=k(d,"SPAN",{class:!0});var _=S(s);a=A(_,o),_.forEach(m),d.forEach(m),this.h()},h(){E(t,"class","f1 tc cp H-1g58g6y"),Te(t,"active",n[0]==="Buy"),E(s,"class","f1 tc cp H-1g58g6y"),Te(s,"active",n[0]==="Sell"),E(e,"class","wrap df T2 lh28 f12 H-1g58g6y")},m(p,d){G(p,e,d),u(e,t),u(t,r),u(e,l),u(e,s),u(s,a),c||(f=[We(t,"click",n[2]),We(s,"click",n[3])],c=!0)},p(p,[d]){d&2&&i!==(i=p[1](wt.Buy)+"")&&W(r,i),d&1&&Te(t,"active",p[0]==="Buy"),d&2&&o!==(o=p[1](wt.Sell)+"")&&W(a,o),d&1&&Te(s,"active",p[0]==="Sell")},i:rt,o:rt,d(p){p&&m(e),c=!1,jt(f)}}}function Dm(n,e,t){let i;J(n,dt,o=>t(1,i=o));let{tab:r="Buy"}=e;const l=()=>t(0,r="Buy"),s=()=>t(0,r="Sell");return n.$$set=o=>{"tab"in o&&t(0,r=o.tab)},[r,i,l,s]}let Ws=class extends tt{constructor(e){super(),nt(this,e,Dm,Im,et,{tab:0})}};function Vm(n){let e,t,i,r,l,s,o;return{c(){e=y("div"),t=y("span"),i=B(n[0]),r=B(":"),l=q(),s=y("span"),o=B(n[1]),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=S(e);t=k(c,"SPAN",{class:!0});var f=S(t);i=A(f,n[0]),r=A(f,":"),f.forEach(m),l=M(c),s=k(c,"SPAN",{class:!0});var p=S(s);o=A(p,n[1]),p.forEach(m),c.forEach(m),this.h()},h(){E(t,"class","title T3"),E(s,"class","value T2"),E(e,"class","wrap df jcsb ph16 lh26")},m(a,c){G(a,e,c),u(e,t),u(t,i),u(t,r),u(e,l),u(e,s),u(s,o)},p(a,[c]){c&1&&W(i,a[0]),c&2&&W(o,a[1])},i:rt,o:rt,d(a){a&&m(e)}}}function Om(n,e,t){let{title:i=""}=e,{value:r="--"}=e;return n.$$set=l=>{"title"in l&&t(0,i=l.title),"value"in l&&t(1,r=l.value)},[i,r]}let pr=class extends tt{constructor(e){super(),nt(this,e,Om,Vm,et,{title:0,value:1})}};function Lm(n){let e,t,i,r,l;function s(a){n[9](a)}let o={visible:!0,formatDisplay:n[3],options:n[2]};return n[0]!==void 0&&(o.value=n[0]),t=new P1({props:o}),De.push(()=>qe(t,"value",s)),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=S(e);re(t.$$.fragment,c),c.forEach(m),this.h()},h(){E(e,"class",r="wrap pt30 "+n[1]+" H-1hka1lx")},m(a,c){G(a,e,c),ne(t,e,null),l=!0},p(a,[c]){const f={};c&4&&(f.options=a[2]),!i&&c&1&&(i=!0,f.value=a[0],Me(()=>i=!1)),t.$set(f),(!l||c&2&&r!==(r="wrap pt30 "+a[1]+" H-1hka1lx"))&&E(e,"class",r)},i(a){l||(Q(t.$$.fragment,a),l=!0)},o(a){j(t.$$.fragment,a),l=!1},d(a){a&&m(e),ie(t)}}}function $m(n,e,t){let i,r,l,s,o;J(n,Ni,b=>t(5,r=b)),J(n,vr,b=>t(6,l=b)),J(n,Ds,b=>t(7,s=b)),J(n,Xt,b=>t(8,o=b));let{class:a=""}=e,{leverageEr:c=0}=e,{position:f=null}=e,p=null,d=[];function h(b){b&&b.symbol!==p&&b.leverageEr>0&&(p=b.symbol,t(0,c=b.leverageEr))}function _(b){return vo.leverageErToLeverage(b,i)}function v(b,P,I,T){const V=ui.createRawRiskLimitOptions(b,I)[0],O=Ki(b,{value:0},P,V,T);t(2,d=vo.convertSlideOptions(O))}function g(b){c=b,t(0,c)}return n.$$set=b=>{"class"in b&&t(1,a=b.class),"leverageEr"in b&&t(0,c=b.leverageEr),"position"in b&&t(4,f=b.position)},n.$$.update=()=>{n.$$.dirty&256&&(i=o.ratioScale),n.$$.dirty&480&&v(o,s,l,r),n.$$.dirty&16&&h(f)},[c,a,d,_,f,r,l,s,o,g]}let Gs=class extends tt{constructor(e){super(),nt(this,e,$m,Lm,et,{class:1,leverageEr:0,position:4})}};function qm(n){let e=n[6](wt.Calculator)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&64&&e!==(e=i[6](wt.Calculator)+"")&&W(t,e)},d(i){i&&m(t)}}}function Mm(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,V,O,w,D,L,$,N,z,H,R,F,U,K,Y,X,ee,Z,ue,ce,pe;function me(de){n[19](de)}let oe={};n[0]!==void 0&&(oe.tab=n[0]),r=new Ws({props:oe}),De.push(()=>qe(r,"tab",me));function ke(de){n[20](de)}let Le={position:n[1]};n[12]!==void 0&&(Le.leverageEr=n[12]),a=new Gs({props:Le}),De.push(()=>qe(a,"leverageEr",ke));const ge=[{class:"limit-quantity"},{isInline:!1},{operation:!1},{isDropdown:!0},{label:n[6](He.Size)},{options:rn.createQtyOptions(n[2],n[6],wt)},n[15]];function ae(de){n[21](de)}function x(de){n[22](de)}let le={};for(let de=0;de<ge.length;de+=1)le=pn(le,ge[de]);n[3]!==void 0&&(le.quantity=n[3]),n[5]!==void 0&&(le.qtyType=n[5]),d=new Un({props:le}),De.push(()=>qe(d,"quantity",ae)),De.push(()=>qe(d,"qtyType",x));function fe(de){n[23](de)}let Se={isInline:!1,label:n[6](wt.EntryPrice),tickSizeEp:n[2].tickSizeEp,precision:n[2].pricePrecision,scale:n[2].priceScale,factor:n[2].priceFactor,maxPriceEp:n[2].maxPriceEp};n[4]!==void 0&&(Se.priceEp=n[4]),b=new yn({props:Se}),De.push(()=>qe(b,"priceEp",fe));function Pe(de){n[24](de)}let Ce={isInline:!1,label:n[6](wt.ExitPrice),tickSizeEp:n[2].tickSizeEp,precision:n[2].pricePrecision,scale:n[2].priceScale,factor:n[2].priceFactor,maxPriceEp:n[2].maxPriceEp};n[14]!==void 0&&(Ce.priceEp=n[14]),C=new yn({props:Ce}),De.push(()=>qe(C,"priceEp",Pe)),D=new Ht({props:{class:"confirm-btn db wp100",type:"primary",disabled:n[13]<=0||n[4]<=0||n[14]<=0,$$slots:{default:[qm]},$$scope:{ctx:n}}}),D.$on("click",n[16]),N=new pr({props:{title:n[6](wt.Margin),value:n[7]}}),H=new pr({props:{title:n[6](wt.EntryValue),value:n[8]}}),F=new pr({props:{title:n[6](wt.ExitValue),value:n[9]}}),K=new pr({props:{title:n[6](wt.ProfitLoss),value:n[10]}}),X=new pr({props:{title:n[6](wt.Roe),value:n[11]}});function Ee(de){n[25](de)}function Ie(de){n[26](de)}let ve={contract:n[2],position:n[1]};return n[13]!==void 0&&(ve.quantity=n[13]),n[4]!==void 0&&(ve.entryPriceEp=n[4]),Z=new Us({props:ve}),De.push(()=>qe(Z,"quantity",Ee)),De.push(()=>qe(Z,"entryPriceEp",Ie)),{c(){e=y("div"),t=y("div"),i=y("div"),te(r.$$.fragment),s=q(),o=y("div"),te(a.$$.fragment),f=q(),p=y("div"),te(d.$$.fragment),v=q(),g=y("div"),te(b.$$.fragment),I=q(),T=y("div"),te(C.$$.fragment),O=q(),w=y("div"),te(D.$$.fragment),L=q(),$=y("div"),te(N.$$.fragment),z=q(),te(H.$$.fragment),R=q(),te(F.$$.fragment),U=q(),te(K.$$.fragment),Y=q(),te(X.$$.fragment),ee=q(),te(Z.$$.fragment),this.h()},l(de){e=k(de,"DIV",{class:!0});var se=S(e);t=k(se,"DIV",{class:!0});var he=S(t);i=k(he,"DIV",{class:!0});var _e=S(i);re(r.$$.fragment,_e),s=M(_e),o=k(_e,"DIV",{class:!0});var be=S(o);re(a.$$.fragment,be),be.forEach(m),f=M(_e),p=k(_e,"DIV",{class:!0});var Ve=S(p);re(d.$$.fragment,Ve),Ve.forEach(m),v=M(_e),g=k(_e,"DIV",{class:!0});var Be=S(g);re(b.$$.fragment,Be),Be.forEach(m),I=M(_e),T=k(_e,"DIV",{class:!0});var Fe=S(T);re(C.$$.fragment,Fe),Fe.forEach(m),O=M(_e),w=k(_e,"DIV",{class:!0});var $e=S(w);re(D.$$.fragment,$e),$e.forEach(m),_e.forEach(m),L=M(he),$=k(he,"DIV",{class:!0});var Ae=S($);re(N.$$.fragment,Ae),z=M(Ae),re(H.$$.fragment,Ae),R=M(Ae),re(F.$$.fragment,Ae),U=M(Ae),re(K.$$.fragment,Ae),Y=M(Ae),re(X.$$.fragment,Ae),Ae.forEach(m),he.forEach(m),ee=M(se),re(Z.$$.fragment,se),se.forEach(m),this.h()},h(){E(o,"class","mt16"),E(p,"class","mt16"),E(g,"class","mt16"),E(T,"class","mt16"),E(w,"class","mt24"),E(i,"class","f1 mr8"),E($,"class","result-wrap f1 ml8 pv16 H-1sjvham"),E(t,"class","body df p16 pb20"),E(e,"class","wrap H-1sjvham")},m(de,se){G(de,e,se),u(e,t),u(t,i),ne(r,i,null),u(i,s),u(i,o),ne(a,o,null),u(i,f),u(i,p),ne(d,p,null),u(i,v),u(i,g),ne(b,g,null),u(i,I),u(i,T),ne(C,T,null),u(i,O),u(i,w),ne(D,w,null),u(t,L),u(t,$),ne(N,$,null),u($,z),ne(H,$,null),u($,R),ne(F,$,null),u($,U),ne(K,$,null),u($,Y),ne(X,$,null),u(e,ee),ne(Z,e,null),pe=!0},p(de,[se]){const he={};!l&&se&1&&(l=!0,he.tab=de[0],Me(()=>l=!1)),r.$set(he);const _e={};se&2&&(_e.position=de[1]),!c&&se&4096&&(c=!0,_e.leverageEr=de[12],Me(()=>c=!1)),a.$set(_e);const be=se&32836?dn(ge,[ge[0],ge[1],ge[2],ge[3],se&64&&{label:de[6](He.Size)},se&68&&{options:rn.createQtyOptions(de[2],de[6],wt)},se&32768&&mn(de[15])]):{};!h&&se&8&&(h=!0,be.quantity=de[3],Me(()=>h=!1)),!_&&se&32&&(_=!0,be.qtyType=de[5],Me(()=>_=!1)),d.$set(be);const Ve={};se&64&&(Ve.label=de[6](wt.EntryPrice)),se&4&&(Ve.tickSizeEp=de[2].tickSizeEp),se&4&&(Ve.precision=de[2].pricePrecision),se&4&&(Ve.scale=de[2].priceScale),se&4&&(Ve.factor=de[2].priceFactor),se&4&&(Ve.maxPriceEp=de[2].maxPriceEp),!P&&se&16&&(P=!0,Ve.priceEp=de[4],Me(()=>P=!1)),b.$set(Ve);const Be={};se&64&&(Be.label=de[6](wt.ExitPrice)),se&4&&(Be.tickSizeEp=de[2].tickSizeEp),se&4&&(Be.precision=de[2].pricePrecision),se&4&&(Be.scale=de[2].priceScale),se&4&&(Be.factor=de[2].priceFactor),se&4&&(Be.maxPriceEp=de[2].maxPriceEp),!V&&se&16384&&(V=!0,Be.priceEp=de[14],Me(()=>V=!1)),C.$set(Be);const Fe={};se&24592&&(Fe.disabled=de[13]<=0||de[4]<=0||de[14]<=0),se&268435520&&(Fe.$$scope={dirty:se,ctx:de}),D.$set(Fe);const $e={};se&64&&($e.title=de[6](wt.Margin)),se&128&&($e.value=de[7]),N.$set($e);const Ae={};se&64&&(Ae.title=de[6](wt.EntryValue)),se&256&&(Ae.value=de[8]),H.$set(Ae);const Ne={};se&64&&(Ne.title=de[6](wt.ExitValue)),se&512&&(Ne.value=de[9]),F.$set(Ne);const Ge={};se&64&&(Ge.title=de[6](wt.ProfitLoss)),se&1024&&(Ge.value=de[10]),K.$set(Ge);const Xe={};se&64&&(Xe.title=de[6](wt.Roe)),se&2048&&(Xe.value=de[11]),X.$set(Xe);const ye={};se&4&&(ye.contract=de[2]),se&2&&(ye.position=de[1]),!ue&&se&8192&&(ue=!0,ye.quantity=de[13],Me(()=>ue=!1)),!ce&&se&16&&(ce=!0,ye.entryPriceEp=de[4],Me(()=>ce=!1)),Z.$set(ye)},i(de){pe||(Q(r.$$.fragment,de),Q(a.$$.fragment,de),Q(d.$$.fragment,de),Q(b.$$.fragment,de),Q(C.$$.fragment,de),Q(D.$$.fragment,de),Q(N.$$.fragment,de),Q(H.$$.fragment,de),Q(F.$$.fragment,de),Q(K.$$.fragment,de),Q(X.$$.fragment,de),Q(Z.$$.fragment,de),pe=!0)},o(de){j(r.$$.fragment,de),j(a.$$.fragment,de),j(d.$$.fragment,de),j(b.$$.fragment,de),j(C.$$.fragment,de),j(D.$$.fragment,de),j(N.$$.fragment,de),j(H.$$.fragment,de),j(F.$$.fragment,de),j(K.$$.fragment,de),j(X.$$.fragment,de),j(Z.$$.fragment,de),pe=!1},d(de){de&&m(e),ie(r),ie(a),ie(d),ie(b),ie(C),ie(D),ie(N),ie(H),ie(F),ie(K),ie(X),ie(Z)}}}function Nm(n,e,t,i,r){return e<=0||t<=0||i<=0?0:Number(Re(e).times(Re(n.ratioFactor).div(t)).plus(Re(e+i).times(r)))}function Oo(n,e,t){if(e<=0||t<=0)return 0;const{contractSide:i,contractSize:r,priceFactor:l,valueFactor:s}=n;return i>0?e*r*t*s/l:i<0?e*r*s*l/t:0}function Hm(n,e,t,i){if(t<=0||i<=0)return 0;const{contractSide:r}=n;return r>0?e==="Buy"?i-t:t-i:r<0?e==="Buy"?t-i:i-t:0}function Bm(n,e){return n===0||e<=0?0:n/e}const Am=6e-4;function zm(n,e,t){let i,r,l,s;J(n,dt,R=>t(6,l=R)),J(n,Xt,R=>t(18,s=R));let{side:o="Buy"}=e,{position:a}=e,c=null,f="--",p="--",d="--",h="--",_="--",v=0,g=0,b=0,P=0,I=0,T;Lt(()=>{const R=rn.createQtyOptions(c,l,wt);t(5,T=R[0].value)});function C(){if(g<=0||P<=0||I<=0)return;const{settleCurrency:R,valuePrecision:F,valueScale:U}=c,K=Oo(c,g,P);t(8,p=K===0?"--":xe.floor(K,F,U)+" "+R);const Y=Oo(c,g,I);t(9,d=Y===0?"--":xe.floor(Y,F,U)+" "+R);const X=Nm(c,K,v,Y,Am);t(7,f=X===0?"--":xe.floor(X,F,U)+" "+R);const ee=Hm(c,o,K,Y);t(10,h=ee===0?"--":xe.floor(ee,F,U)),t(11,_=ee===0?"--":xe.floor(Bm(ee,X),2,-2)+"%")}function V(){t(7,f="--"),t(8,p="--"),t(9,d="--"),t(10,h="--"),t(11,_="--")}function O(R){o=R,t(0,o)}function w(R){v=R,t(12,v)}function D(R){b=R,t(3,b)}function L(R){T=R,t(5,T)}function $(R){P=R,t(4,P)}function N(R){I=R,t(14,I)}function z(R){g=R,t(13,g),t(3,b),t(17,i),t(4,P),t(2,c),t(5,T),t(18,s)}function H(R){P=R,t(4,P)}return n.$$set=R=>{"side"in R&&t(0,o=R.side),"position"in R&&t(1,a=R.position)},n.$$.update=()=>{n.$$.dirty&262144&&t(2,c=s),n.$$.dirty&4&&V(c.symbol),n.$$.dirty&36&&t(17,i=Fi(T,c)),n.$$.dirty&131140&&t(15,r=ei(i,l,wt,c,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)),n.$$.dirty&131100&&t(13,g=Np(b,i,P,c))},[o,a,c,b,P,T,l,f,p,d,h,_,v,g,I,r,C,i,s,O,w,D,L,$,N,z,H]}let Qm=class extends tt{constructor(e){super(),nt(this,e,zm,Mm,et,{side:0,position:1})}};function Rm(n){let e,t,i,r;function l(a){n[13](a)}function s(a){n[14](a)}let o={isInline:n[10],label:n[7],placeholder:n[8],unit:n[9],factor:n[2],scale:n[3],precision:n[5],disabled:n[6],minEx:n[11],maxEx:n[12],tickSizeEx:n[4]};return n[1]!==void 0&&(o.valueEx=n[1]),n[0]!==void 0&&(o.input=n[0]),e=new Pr({props:o}),De.push(()=>qe(e,"valueEx",l)),De.push(()=>qe(e,"input",s)),{c(){te(e.$$.fragment)},l(a){re(e.$$.fragment,a)},m(a,c){ne(e,a,c),r=!0},p(a,[c]){const f={};c&1024&&(f.isInline=a[10]),c&128&&(f.label=a[7]),c&256&&(f.placeholder=a[8]),c&512&&(f.unit=a[9]),c&4&&(f.factor=a[2]),c&8&&(f.scale=a[3]),c&32&&(f.precision=a[5]),c&64&&(f.disabled=a[6]),c&2048&&(f.minEx=a[11]),c&4096&&(f.maxEx=a[12]),c&16&&(f.tickSizeEx=a[4]),!t&&c&2&&(t=!0,f.valueEx=a[1],Me(()=>t=!1)),!i&&c&1&&(i=!0,f.input=a[0],Me(()=>i=!1)),e.$set(f)},i(a){r||(Q(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){ie(e,a)}}}function Fm(n,e,t){let{input:i=null}=e,{factor:r=1e6}=e,{scale:l=6}=e,{tickSizeEr:s=1e4}=e,{precision:o=2}=e,{ratioEr:a=0}=e,{disabled:c=!1}=e,{label:f=""}=e,{placeholder:p=""}=e,{unit:d=""}=e,{isInline:h=!0}=e,{minRatioEr:_=0}=e,{maxRatioEr:v=1e12}=e;function g(P){a=P,t(1,a)}function b(P){i=P,t(0,i)}return n.$$set=P=>{"input"in P&&t(0,i=P.input),"factor"in P&&t(2,r=P.factor),"scale"in P&&t(3,l=P.scale),"tickSizeEr"in P&&t(4,s=P.tickSizeEr),"precision"in P&&t(5,o=P.precision),"ratioEr"in P&&t(1,a=P.ratioEr),"disabled"in P&&t(6,c=P.disabled),"label"in P&&t(7,f=P.label),"placeholder"in P&&t(8,p=P.placeholder),"unit"in P&&t(9,d=P.unit),"isInline"in P&&t(10,h=P.isInline),"minRatioEr"in P&&t(11,_=P.minRatioEr),"maxRatioEr"in P&&t(12,v=P.maxRatioEr)},[i,a,r,l,s,o,c,f,p,d,h,_,v,g,b]}let jm=class extends tt{constructor(e){super(),nt(this,e,Fm,Rm,et,{input:0,factor:2,scale:3,tickSizeEr:4,precision:5,ratioEr:1,disabled:6,label:7,placeholder:8,unit:9,isInline:10,minRatioEr:11,maxRatioEr:12})}};function Lo(n){let e,t=n[8](wt.UnableToReach)+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","error mt8 H-nkdx0v")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&256&&t!==(t=r[8](wt.UnableToReach)+"")&&W(i,t)},d(r){r&&m(e)}}}function Um(n){let e=n[8](wt.Calculator)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&256&&e!==(e=i[8](wt.Calculator)+"")&&W(t,e)},d(i){i&&m(t)}}}function Wm(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,V,O,w,D,L,$,N;function z(ce){n[11](ce)}let H={};n[0]!==void 0&&(H.tab=n[0]),r=new Ws({props:H}),De.push(()=>qe(r,"tab",z));function R(ce){n[12](ce)}let F={position:n[1]};n[4]!==void 0&&(F.leverageEr=n[4]),a=new Gs({props:F}),De.push(()=>qe(a,"leverageEr",R));function U(ce){n[13](ce)}let K={isInline:!1,label:n[8](wt.EntryPrice),tickSizeEp:n[2].tickSizeEp,precision:n[2].pricePrecision,scale:n[2].priceScale,factor:n[2].priceFactor,maxPriceEp:n[2].maxPriceEp};n[5]!==void 0&&(K.priceEp=n[5]),d=new yn({props:K}),De.push(()=>qe(d,"priceEp",U));function Y(ce){n[14](ce)}let X={isInline:!1,label:n[8](wt.Roe),unit:"%",scale:n[2].ratioScale-2,factor:Number(Re(10).pow(n[2].ratioScale-2)),tickSizeEr:Number(Re(10).pow(n[2].ratioScale-4))};n[6]!==void 0&&(X.ratioEr=n[6]),g=new jm({props:X}),De.push(()=>qe(g,"ratioEr",Y));let ee=n[7]&&Lo(n);C=new Ht({props:{class:"confirm-btn db wp100",type:"primary",disabled:n[5]<=0||!n[6],$$slots:{default:[Um]},$$scope:{ctx:n}}}),C.$on("click",n[9]),w=new pr({props:{title:n[8](wt.TargetPrice),value:n[3]}});function Z(ce){n[15](ce)}let ue={position:n[1],contract:n[2]};return n[5]!==void 0&&(ue.entryPriceEp=n[5]),L=new Us({props:ue}),De.push(()=>qe(L,"entryPriceEp",Z)),{c(){e=y("div"),t=y("div"),i=y("div"),te(r.$$.fragment),s=q(),o=y("div"),te(a.$$.fragment),f=q(),p=y("div"),te(d.$$.fragment),_=q(),v=y("div"),te(g.$$.fragment),P=q(),ee&&ee.c(),I=q(),T=y("div"),te(C.$$.fragment),V=q(),O=y("div"),te(w.$$.fragment),D=q(),te(L.$$.fragment),this.h()},l(ce){e=k(ce,"DIV",{class:!0});var pe=S(e);t=k(pe,"DIV",{class:!0});var me=S(t);i=k(me,"DIV",{class:!0});var oe=S(i);re(r.$$.fragment,oe),s=M(oe),o=k(oe,"DIV",{class:!0});var ke=S(o);re(a.$$.fragment,ke),ke.forEach(m),f=M(oe),p=k(oe,"DIV",{class:!0});var Le=S(p);re(d.$$.fragment,Le),Le.forEach(m),_=M(oe),v=k(oe,"DIV",{class:!0});var ge=S(v);re(g.$$.fragment,ge),P=M(ge),ee&&ee.l(ge),ge.forEach(m),I=M(oe),T=k(oe,"DIV",{class:!0});var ae=S(T);re(C.$$.fragment,ae),ae.forEach(m),oe.forEach(m),V=M(me),O=k(me,"DIV",{class:!0});var x=S(O);re(w.$$.fragment,x),x.forEach(m),me.forEach(m),D=M(pe),re(L.$$.fragment,pe),pe.forEach(m),this.h()},h(){E(o,"class","mt16"),E(p,"class","mt16"),E(v,"class","mt16"),E(T,"class","mt24"),E(i,"class","f1 mr8"),E(O,"class","result-wrap f1 ml8 pv16 H-nkdx0v"),E(t,"class","body df p16 pb10"),E(e,"class","wrap H-nkdx0v")},m(ce,pe){G(ce,e,pe),u(e,t),u(t,i),ne(r,i,null),u(i,s),u(i,o),ne(a,o,null),u(i,f),u(i,p),ne(d,p,null),u(i,_),u(i,v),ne(g,v,null),u(v,P),ee&&ee.m(v,null),u(i,I),u(i,T),ne(C,T,null),u(t,V),u(t,O),ne(w,O,null),u(e,D),ne(L,e,null),N=!0},p(ce,[pe]){const me={};!l&&pe&1&&(l=!0,me.tab=ce[0],Me(()=>l=!1)),r.$set(me);const oe={};pe&2&&(oe.position=ce[1]),!c&&pe&16&&(c=!0,oe.leverageEr=ce[4],Me(()=>c=!1)),a.$set(oe);const ke={};pe&256&&(ke.label=ce[8](wt.EntryPrice)),pe&4&&(ke.tickSizeEp=ce[2].tickSizeEp),pe&4&&(ke.precision=ce[2].pricePrecision),pe&4&&(ke.scale=ce[2].priceScale),pe&4&&(ke.factor=ce[2].priceFactor),pe&4&&(ke.maxPriceEp=ce[2].maxPriceEp),!h&&pe&32&&(h=!0,ke.priceEp=ce[5],Me(()=>h=!1)),d.$set(ke);const Le={};pe&256&&(Le.label=ce[8](wt.Roe)),pe&4&&(Le.scale=ce[2].ratioScale-2),pe&4&&(Le.factor=Number(Re(10).pow(ce[2].ratioScale-2))),pe&4&&(Le.tickSizeEr=Number(Re(10).pow(ce[2].ratioScale-4))),!b&&pe&64&&(b=!0,Le.ratioEr=ce[6],Me(()=>b=!1)),g.$set(Le),ce[7]?ee?ee.p(ce,pe):(ee=Lo(ce),ee.c(),ee.m(v,null)):ee&&(ee.d(1),ee=null);const ge={};pe&96&&(ge.disabled=ce[5]<=0||!ce[6]),pe&131328&&(ge.$$scope={dirty:pe,ctx:ce}),C.$set(ge);const ae={};pe&256&&(ae.title=ce[8](wt.TargetPrice)),pe&8&&(ae.value=ce[3]),w.$set(ae);const x={};pe&2&&(x.position=ce[1]),pe&4&&(x.contract=ce[2]),!$&&pe&32&&($=!0,x.entryPriceEp=ce[5],Me(()=>$=!1)),L.$set(x)},i(ce){N||(Q(r.$$.fragment,ce),Q(a.$$.fragment,ce),Q(d.$$.fragment,ce),Q(g.$$.fragment,ce),Q(C.$$.fragment,ce),Q(w.$$.fragment,ce),Q(L.$$.fragment,ce),N=!0)},o(ce){j(r.$$.fragment,ce),j(a.$$.fragment,ce),j(d.$$.fragment,ce),j(g.$$.fragment,ce),j(C.$$.fragment,ce),j(w.$$.fragment,ce),j(L.$$.fragment,ce),N=!1},d(ce){ce&&m(e),ie(r),ie(a),ie(d),ie(g),ee&&ee.d(),ie(C),ie(w),ie(L)}}}function Gm(n,e,t,i,r){const{contractSide:l}=n;if(l>0){if(e==="Buy")return i*(1+r/t);if(e==="Sell")return i*(1-r/t)}if(l<0){if(e==="Buy")return i*t/(t-r);if(e==="Sell")return i*t/(t+r)}return 0}function Km(n,e,t){let i,r;J(n,Xt,T=>t(10,i=T)),J(n,dt,T=>t(8,r=T));let{side:l="Buy"}=e,{position:s=null}=e,o=null,a="--",c=0,f=0,p=0,d=!1;function h(){if(f<=0||p<=0)return;if(t(7,d=_(o,l,c,p)),d){t(3,a="--");return}const T=Gm(o,l,c,f,p),{tickSizeEp:C,pricePrecision:V,priceScale:O}=o;t(3,a=xe.floor(xe.roundPriceEp(T,C),V,O))}function _(T,C,V,O){const{contractSide:w}=T;return w>0&&C==="Sell"||w<0&&C==="Buy"?V<=O:!1}function v(T){l=T,t(0,l)}function g(T){c=T,t(4,c)}function b(T){f=T,t(5,f)}function P(T){p=T,t(6,p)}function I(T){f=T,t(5,f)}return n.$$set=T=>{"side"in T&&t(0,l=T.side),"position"in T&&t(1,s=T.position)},n.$$.update=()=>{n.$$.dirty&1024&&t(2,o=i)},[l,s,o,a,c,f,p,d,r,h,i,v,g,b,P,I]}let Xm=class extends tt{constructor(e){super(),nt(this,e,Km,Wm,et,{side:0,position:1})}};const gl="logLiq";function vl(n,...e){window[n]&&console.log(`[${n}]`,...e)}function Hp(n,e){if(n){const t=e.has(n.symbol)?e.get(n.symbol):[];return t.find(i=>i.riskLimitEv===n.riskLimitEv)||t[0]}return null}function Bp(n,e,t=0,i=0){const{contractSide:r,contractSize:l,priceFactor:s}=n,{side:o,ordType:a,orderQty:c,priceEp:f,stopPxEp:p}=e;if(!f)return 0;const d=c*l,h=o==="Buy",_=o==="Sell";if(ii.isConditionalOrder(a)){const b=ii.isLimitOrder(a),P=ii.isMarketOrder(a);if(r<0){if(b){if(h)return d*s/Math.min(f,p);if(_)return d*s/f}if(P)return d*s/p}if(r>0){if(b){if(h)return d*f/s;if(_)return d*Math.max(f,p)/s}if(P)return d*p/s}}const g=[f];if(t&&g.push(t),i&&g.push(i),r<0){const b=d*s;return h?b/Math.min(...g):b/f}if(r>0){const b=d/s;return h?b*f:b*Math.max(...g)}return 0}function pl(n,e,t){const{contractSide:i,contractSize:r,priceFactor:l}=n;if(!n||!e||isNaN(e)||!t||isNaN(t))return 0;const s=e*r;return i<0?s*l/t:i>0?s*t/l:0}function Ks(n,e,t,i,r,l){if(vl(gl,"liq formula params:","contractSide",n,"side",e,"marginEv",t,"maintenanceMarginEv",i,"newPosValue",r,"defaultTakerFeeRateEr",l),n<0){if(e==="Buy")return ll(r+t-i,1+l);if(e==="Sell")return ll(r-t+i,1-l)}if(n>0){if(e==="Buy")return ll(r-t+i,1-l);if(e==="Sell")return ll(r+t-i,1+l)}return 0}function Ym(n,e,t,i,r,l,s,o,a,c=!1){const{assignedPosBalanceEv:f,buyValueToCostEr:p,sellValueToCostEr:d,takerFeeRateEr:h}=e,{side:_,orderQty:v,newOrderSize:g=0,priceEp:b,posSide:P}=i,I=Ap(v,t),T=pl(n,I,b),C=pl(n,g,b);vl(gl,"liq formula2 params:","order",i,"assignedPosBalanceEv",f,"buyValueToCostEr",p,"sellValueToCostEr",d,"mma",r,"mmr",l,"account",s,"crossRiskUnit",o);const V=_==="Buy"?p:d,O=h>0?h:a,w=Re(C).times(O);let D;if(e.isIsolated&&e.posMode==="OneWay"&&e.side!==_)D=Re(T).times(V).minus(w);else{let L=eh({...e,markPriceEp:b},n);if(e.isIsolated)D=Re(C).times(V).plus(f).plus(L).minus(w);else{const $=Re(s.availableBalance).sub(s.bonusBalance);D=Re($).plus(f).minus(o&&o.fixedUsedRv||0).plus(L).minus(w)}}return P==="Buy"?Re(T).minus(D).minus(r).div(Re(1).minus(a).minus(l)).toNumber():P==="Sell"?Re(T).plus(D).plus(r).div(Re(1).plus(a).plus(l)).toNumber():0}function Jm(n,e,t,i){const{markPriceEp:r,size:l,side:s,assignedPosBalanceEv:o,unrealisedPnlEvByMarkPrice:a}=n,c=r*l,f=o+Number(a);return vl(gl,"liq formula3 params:","size",l,"side",s,"markPriceEp",r,"assignedPosBalanceEv",o,"unrealisedPnlEvByMarkPrice",a,"assignedPosBalanceEv",o,"mma",e,"mmr",t),s==="Buy"?(c-f-e)/(1-i-t):s==="Sell"?(c+f+e)/(1+i+t):0}function Zl(n,e,t){const{contractSide:i,contractSize:r,tickSizeEp:l,priceFactor:s,valueFactor:o}=n;return i<0?t<0?1e10:e*r*o*s/t:i>0?t<0?l:t*s/(e*r*o):0}function ys(n,e,t,i,r,l,s,o,a,c,f,p={accountBalanceRv:"0",totalOrdUsedBalanceRv:"0",fixedUsedRv:"0"},d=!1){const{marginBalanceEv:h}=i;if((e?e.leverageEr:1)===0&&h===0)return null;const v=Hp(e,r);if(!v)return null;const g=s.get(n.symbol);if(!g)return null;const{type:b,contractSide:P,pricePrecision:I,priceScale:T,valueFactor:C,ratioFactor:V}=n,{side:O,orderQty:w}=l;if(!w)return null;vl(gl,"liq info params:","account",i,"position",e,"orderParams",l);const D=yi.genOrderType(e,{...l,orderQty:l.newOrderSize});let L;if(e.isIsolated&&D==="Decrease")L=e.liquidationPriceEp;else{const R=Op(l,o.ask1Ep,o.bid1Ep,g.markPriceEp),F=pl(n,w,R),U=F*C,K=O==="Buy"?U-e.assignedPosBalanceEv:U+e.assignedPosBalanceEv,{maintenanceMarginRateRr:Y,maintenanceAmountRv:X}=Vs(n,e,a,K),ee=b==="Perpetual",Z=ee?v.maintenanceMarginEr:Y,ue=ee?0:X||0,ce=b==="PerpetualV2"&&c,pe=["Open","Reverse"].includes(D)?l.side:e.side;if(ce)L=th(n,e,t,i,{...l,priceEp:R,posSide:pe},{maintenanceAmount:ue,maintenanceMarginRate:Z},p,D,f,d);else{const me=Re(U||0).times(Z||1).minus(ue).div(V).toNumber(),oe=Zm(n,e,l,i,D,R,F,f,d),ke=["Open","Increase"].includes(D)?Re(e.valueEv).plus(pl(n,l.newOrderSize,R)*C).toNumber():U;L=Zl(n,w,Ks(P,pe,oe,me,ke,f))}}if(L===null)return null;const $=+xe.floor(L,I),N=Number($)>1e10?1e10:$,z=xm(g.markPriceEp,N),H=xe.floor(z,I,T);return{markPrice:g.markPrice,liqPrice:Number($)>1e10?1e6:xe.floor($,I,T),liqDistance:H}}function Zm(n,e,t,i,r,l,s,o,a=!1){const{buyValueToCostEr:c,sellValueToCostEr:f,takerFeeRateEr:p}=e,d=t.side==="Buy"?c:f,h=pl(n,t.newOrderSize,l);if(!e||e.isCross){const v=p>0?p:o,g=Re(h).times(v);return Re(i.accountBalanceEv).plus(e.marginEv).minus(i.totalUsedBalanceEv).minus(g).toNumber()}return r==="Reverse"?Re(s).times(d).toNumber():Re(h).times(d).plus(e.marginEv).toNumber()}function xm(n,e){return Math.abs(n-e)}function eh(n,e){if(!n)return 0;const{side:t,size:i,avgEntryPriceEp:r}=n;if(!e)return 0;const{contractSide:l,contractSize:s,valueFactor:o,priceFactor:a}=e;return Xr({side:t,contractSide:l,contractSize:s,qty:i,entryPriceEp:r,exitPriceEp:n.markPriceEp,factor:o,priceFactor:a})}function th(n,e,t,i,r,{maintenanceAmount:l,maintenanceMarginRate:s},o,a,c,f){if(e.isIsolated&&a==="Decrease"||e.isCross&&nh(e,t,r.orderQty))return e.liquidationPriceEp;if(e.isCross&&rh(e,t,r.orderQty))return n.tickSizeEp;if(e.isCross&&ih(e,t,r.orderQty))return null;const p=Ym(n,e,t,r,l,s,i,o,c,f),d=Ap(r.orderQty,t);return Zl(n,d,p)}function nh(n,e,t){return n.posMode==="Hedged"&&(n==null?void 0:n.size)<(e==null?void 0:e.size)&&t<(e==null?void 0:e.size)}function ih(n,e,t){return n.posMode==="Hedged"&&(n==null?void 0:n.size)<(e==null?void 0:e.size)&&t>=(e==null?void 0:e.size)}function rh(n,e,t){return n.posMode==="Hedged"&&(n==null?void 0:n.size)>(e==null?void 0:e.size)&&t<=(e==null?void 0:e.size)}function Ap(n,e){return e&&e.isCross&&e.posMode==="Hedged"?Fd(ip(n,e.size)):n}function $o(n){let e,t,i,r;function l(o){n[27](o)}let s={isInline:!1,label:n[6](wt.MarginBalance),tickSizeEv:n[2].tickSizeEv,factor:n[2].valueFactor,scale:n[2].valueScale,precision:n[2].valuePrecision,maxValueEv:5e14};return n[11]!==void 0&&(s.valueEv=n[11]),t=new Ip({props:s}),De.push(()=>qe(t,"valueEv",l)),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=S(e);re(t.$$.fragment,a),a.forEach(m),this.h()},h(){E(e,"class","mt16")},m(o,a){G(o,e,a),ne(t,e,null),r=!0},p(o,a){const c={};a[0]&64&&(c.label=o[6](wt.MarginBalance)),a[0]&4&&(c.tickSizeEv=o[2].tickSizeEv),a[0]&4&&(c.factor=o[2].valueFactor),a[0]&4&&(c.scale=o[2].valueScale),a[0]&4&&(c.precision=o[2].valuePrecision),!i&&a[0]&2048&&(i=!0,c.valueEv=o[11],Me(()=>i=!1)),t.$set(c)},i(o){r||(Q(t.$$.fragment,o),r=!0)},o(o){j(t.$$.fragment,o),r=!1},d(o){o&&m(e),ie(t)}}}function lh(n){let e=n[6](wt.Calculator)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[0]&64&&e!==(e=i[6](wt.Calculator)+"")&&W(t,e)},d(i){i&&m(t)}}}function sh(n){let e,t,i,r,l,s,o,a,c=n[6](on.Cross)+"",f,p,d,h=n[6](on.Isolated)+"",_,v,g,b,P,I,T,C,V,O,w,D,L,$,N,z,H,R,F,U,K,Y,X,ee=n[6](wt.LiqTips)+"",Z,ue,ce,pe,me,oe,ke,Le;function ge(_e){n[22](_e)}let ae={};n[0]!==void 0&&(ae.tab=n[0]),r=new Ws({props:ae}),De.push(()=>qe(r,"tab",ge));function x(_e){n[23](_e)}let le={class:"mt16",position:n[1]};n[7]!==void 0&&(le.leverageEr=n[7]),g=new Gs({props:le}),De.push(()=>qe(g,"leverageEr",x));const fe=[{class:"limit-quantity"},{isInline:!1},{operation:!1},{isDropdown:!0},{label:n[6](He.Size)},{options:rn.createQtyOptions(n[2],n[6],wt)},n[12]];function Se(_e){n[24](_e)}function Pe(_e){n[25](_e)}let Ce={};for(let _e=0;_e<fe.length;_e+=1)Ce=pn(Ce,fe[_e]);n[3]!==void 0&&(Ce.quantity=n[3]),n[5]!==void 0&&(Ce.qtyType=n[5]),T=new Un({props:Ce}),De.push(()=>qe(T,"quantity",Se)),De.push(()=>qe(T,"qtyType",Pe));function Ee(_e){n[26](_e)}let Ie={isInline:!1,label:n[6](wt.EntryPrice),tickSizeEp:n[2].tickSizeEp,precision:n[2].pricePrecision,scale:n[2].priceScale,factor:n[2].priceFactor,maxPriceEp:n[2].maxPriceEp};n[4]!==void 0&&(Ie.priceEp=n[4]),D=new yn({props:Ie}),De.push(()=>qe(D,"priceEp",Ee));let ve=n[10]&&$o(n);H=new Ht({props:{class:"confirm-btn db wp100",type:"primary",disabled:n[8]<=0||n[4]<=0,$$slots:{default:[lh]},$$scope:{ctx:n}}}),H.$on("click",n[14]),U=new pr({props:{title:n[6](wt.LiquidationPrice),value:n[9]}});function de(_e){n[28](_e)}function se(_e){n[29](_e)}let he={position:n[1],contract:n[2]};return n[8]!==void 0&&(he.quantity=n[8]),n[4]!==void 0&&(he.entryPriceEp=n[4]),ce=new Us({props:he}),De.push(()=>qe(ce,"quantity",de)),De.push(()=>qe(ce,"entryPriceEp",se)),{c(){e=y("div"),t=y("div"),i=y("div"),te(r.$$.fragment),s=q(),o=y("div"),a=y("span"),f=B(c),p=q(),d=y("span"),_=B(h),v=q(),te(g.$$.fragment),P=q(),I=y("div"),te(T.$$.fragment),O=q(),w=y("div"),te(D.$$.fragment),$=q(),ve&&ve.c(),N=q(),z=y("div"),te(H.$$.fragment),R=q(),F=y("div"),te(U.$$.fragment),K=q(),Y=y("div"),X=B("* "),Z=B(ee),ue=q(),te(ce.$$.fragment),this.h()},l(_e){e=k(_e,"DIV",{class:!0});var be=S(e);t=k(be,"DIV",{class:!0});var Ve=S(t);i=k(Ve,"DIV",{class:!0});var Be=S(i);re(r.$$.fragment,Be),s=M(Be),o=k(Be,"DIV",{class:!0});var Fe=S(o);a=k(Fe,"SPAN",{class:!0});var $e=S(a);f=A($e,c),$e.forEach(m),p=M(Fe),d=k(Fe,"SPAN",{class:!0});var Ae=S(d);_=A(Ae,h),Ae.forEach(m),Fe.forEach(m),v=M(Be),re(g.$$.fragment,Be),P=M(Be),I=k(Be,"DIV",{class:!0});var Ne=S(I);re(T.$$.fragment,Ne),Ne.forEach(m),O=M(Be),w=k(Be,"DIV",{class:!0});var Ge=S(w);re(D.$$.fragment,Ge),Ge.forEach(m),$=M(Be),ve&&ve.l(Be),N=M(Be),z=k(Be,"DIV",{class:!0});var Xe=S(z);re(H.$$.fragment,Xe),Xe.forEach(m),Be.forEach(m),R=M(Ve),F=k(Ve,"DIV",{class:!0});var ye=S(F);re(U.$$.fragment,ye),K=M(ye),Y=k(ye,"DIV",{class:!0});var Ke=S(Y);X=A(Ke,"* "),Z=A(Ke,ee),Ke.forEach(m),ye.forEach(m),Ve.forEach(m),ue=M(be),re(ce.$$.fragment,be),be.forEach(m),this.h()},h(){E(a,"class","db br4 ph12 lh24 f14 T1 cp H-13393ws"),Te(a,"active",n[10]),E(d,"class","db ml8 br4 ph12 lh24 f14 T1 cp H-13393ws"),Te(d,"active",!n[10]),E(o,"class","leverage-type df aic mt20 H-13393ws"),E(I,"class","mt16"),E(w,"class","mt16"),E(z,"class","mt24"),E(i,"class","f1 mr8"),E(Y,"class","tips mt ph16 lh20 T3 H-13393ws"),E(F,"class","result-wrap f1 ml8 pv16 H-13393ws"),E(t,"class","body df p16 pb20"),E(e,"class","wrap H-13393ws")},m(_e,be){G(_e,e,be),u(e,t),u(t,i),ne(r,i,null),u(i,s),u(i,o),u(o,a),u(a,f),u(o,p),u(o,d),u(d,_),u(i,v),ne(g,i,null),u(i,P),u(i,I),ne(T,I,null),u(i,O),u(i,w),ne(D,w,null),u(i,$),ve&&ve.m(i,null),u(i,N),u(i,z),ne(H,z,null),u(t,R),u(t,F),ne(U,F,null),u(F,K),u(F,Y),u(Y,X),u(Y,Z),u(e,ue),ne(ce,e,null),oe=!0,ke||(Le=[We(a,"click",Ll(n[15],un.Cross)),We(d,"click",Ll(n[15],un.Isolated))],ke=!0)},p(_e,be){const Ve={};!l&&be[0]&1&&(l=!0,Ve.tab=_e[0],Me(()=>l=!1)),r.$set(Ve),(!oe||be[0]&64)&&c!==(c=_e[6](on.Cross)+"")&&W(f,c),(!oe||be[0]&1024)&&Te(a,"active",_e[10]),(!oe||be[0]&64)&&h!==(h=_e[6](on.Isolated)+"")&&W(_,h),(!oe||be[0]&1024)&&Te(d,"active",!_e[10]);const Be={};be[0]&2&&(Be.position=_e[1]),!b&&be[0]&128&&(b=!0,Be.leverageEr=_e[7],Me(()=>b=!1)),g.$set(Be);const Fe=be[0]&4164?dn(fe,[fe[0],fe[1],fe[2],fe[3],be[0]&64&&{label:_e[6](He.Size)},be[0]&68&&{options:rn.createQtyOptions(_e[2],_e[6],wt)},be[0]&4096&&mn(_e[12])]):{};!C&&be[0]&8&&(C=!0,Fe.quantity=_e[3],Me(()=>C=!1)),!V&&be[0]&32&&(V=!0,Fe.qtyType=_e[5],Me(()=>V=!1)),T.$set(Fe);const $e={};be[0]&64&&($e.label=_e[6](wt.EntryPrice)),be[0]&4&&($e.tickSizeEp=_e[2].tickSizeEp),be[0]&4&&($e.precision=_e[2].pricePrecision),be[0]&4&&($e.scale=_e[2].priceScale),be[0]&4&&($e.factor=_e[2].priceFactor),be[0]&4&&($e.maxPriceEp=_e[2].maxPriceEp),!L&&be[0]&16&&(L=!0,$e.priceEp=_e[4],Me(()=>L=!1)),D.$set($e),_e[10]?ve?(ve.p(_e,be),be[0]&1024&&Q(ve,1)):(ve=$o(_e),ve.c(),Q(ve,1),ve.m(i,N)):ve&&(ot(),j(ve,1,1,()=>{ve=null}),at());const Ae={};be[0]&272&&(Ae.disabled=_e[8]<=0||_e[4]<=0),be[0]&64|be[1]&128&&(Ae.$$scope={dirty:be,ctx:_e}),H.$set(Ae);const Ne={};be[0]&64&&(Ne.title=_e[6](wt.LiquidationPrice)),be[0]&512&&(Ne.value=_e[9]),U.$set(Ne),(!oe||be[0]&64)&&ee!==(ee=_e[6](wt.LiqTips)+"")&&W(Z,ee);const Ge={};be[0]&2&&(Ge.position=_e[1]),be[0]&4&&(Ge.contract=_e[2]),!pe&&be[0]&256&&(pe=!0,Ge.quantity=_e[8],Me(()=>pe=!1)),!me&&be[0]&16&&(me=!0,Ge.entryPriceEp=_e[4],Me(()=>me=!1)),ce.$set(Ge)},i(_e){oe||(Q(r.$$.fragment,_e),Q(g.$$.fragment,_e),Q(T.$$.fragment,_e),Q(D.$$.fragment,_e),Q(ve),Q(H.$$.fragment,_e),Q(U.$$.fragment,_e),Q(ce.$$.fragment,_e),oe=!0)},o(_e){j(r.$$.fragment,_e),j(g.$$.fragment,_e),j(T.$$.fragment,_e),j(D.$$.fragment,_e),j(ve),j(H.$$.fragment,_e),j(U.$$.fragment,_e),j(ce.$$.fragment,_e),oe=!1},d(_e){_e&&m(e),ie(r),ie(g),ie(T),ie(D),ve&&ve.d(),ie(H),ie(U),ie(ce),ke=!1,jt(Le)}}}function oh(n,e,t){return t*e/n}function ah(n){return n?n.availableBalanceEv:0}function ch(n,e,t){let i,r,l,s,o,a,c,f,p=rt,d=()=>(p(),p=Vd(l,oe=>t(33,f=oe)),l),h,_,v,g,b;J(n,sr,oe=>t(32,c=oe)),J(n,Ni,oe=>t(34,h=oe)),J(n,dt,oe=>t(6,_=oe)),J(n,dl,oe=>t(19,v=oe)),J(n,Hi,oe=>t(20,g=oe)),J(n,Xt,oe=>t(21,b=oe)),n.$$.on_destroy.push(()=>p());let{side:P="Buy"}=e,{position:I=null}=e,T=null,C=0,V=0,O=0,w=0,D="--",L=0,$=un.Cross,N="",z;Lt(()=>{const oe=rn.createQtyOptions(T,_,wt);t(5,z=oe[0].value)});function H(){if(O<=0||w<=0||!f)return;const{type:oe,contractSide:ke,pricePrecision:Le,priceScale:ge,valueFactor:ae,ratioFactor:x}=T,le={side:P,ordType:"Limit",orderQty:O,newOrderSize:O,priceEp:w,stopPxEp:0},fe=Bp(T,le)*ae,{maintenanceMarginRateRr:Se,maintenanceAmountRv:Pe}=Vs(T,I,h,fe),Ce=oe==="Perpetual"?f.maintenanceMarginEr:Se,Ee=oe==="Perpetual"?0:Pe,Ie=Re(fe).times(Ce).minus(Ee).div(x).toNumber(),ve=r?i:oh(C,x,fe);if(oe==="PerpetualV2"&&c&&!r){const se=R(le,C,Ce,Ee);t(9,D=xe.floor(se,Le,ge))}else{const se=Ks(ke,P,ve,Ie,fe,a),he=xe.floor(Zl(T,O,se),Le);t(9,D=xe.floor(he,Le,ge))}}function R(oe,ke,Le,ge){const{side:ae,newOrderSize:x,priceEp:le}=oe,fe=Re(1).div(ke);return vl(gl,"calc params:","orderParams",oe,"mmr",Le,"mma",ge,"leverage",ke),ae==="Buy"?Re(le).mul(Re(1).minus(fe).mul(Re(1).minus(a))).minus(Re(ge).div(x)).div(Re(1).minus(Le).minus(a)).toNumber():Re(le).mul(Re(1).plus(fe).mul(Re(1).plus(a))).plus(Re(ge).div(x)).div(Re(1).plus(Le).plus(a)).toNumber()}function F(oe){t(16,L=ah(oe))}function U(oe){t(17,$=oe)}function K(oe){oe&&N!==oe.symbol&&(N=oe.symbol,t(17,$=oe.isCross?un.Cross:un.Isolated))}function Y(oe){P=oe,t(0,P)}function X(oe){C=oe,t(7,C)}function ee(oe){V=oe,t(3,V)}function Z(oe){z=oe,t(5,z)}function ue(oe){w=oe,t(4,w)}function ce(oe){i=oe,t(11,i),t(16,L)}function pe(oe){O=oe,t(8,O),t(3,V),t(18,s),t(4,w),t(2,T),t(5,z),t(21,b)}function me(oe){w=oe,t(4,w)}return n.$$set=oe=>{"side"in oe&&t(0,P=oe.side),"position"in oe&&t(1,I=oe.position)},n.$$.update=()=>{n.$$.dirty[0]&2097152&&t(2,T=b),n.$$.dirty[0]&1048576&&F(g),n.$$.dirty[0]&65536&&t(11,i=L),n.$$.dirty[0]&2&&K(I),n.$$.dirty[0]&131072&&t(10,r=$===un.Cross),n.$$.dirty[0]&2&&d(t(13,l=jd(I.posSide))),n.$$.dirty[0]&36&&t(18,s=Fi(z,T)),n.$$.dirty[0]&262212&&t(12,o=ei(s,_,wt,T,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)),n.$$.dirty[0]&262172&&t(8,O=Np(V,s,w,T)),n.$$.dirty[0]&524288&&(a=v)},[P,I,T,V,w,z,_,C,O,D,r,i,o,l,H,U,L,$,s,v,g,b,Y,X,ee,Z,ue,ce,pe,me]}let fh=class extends tt{constructor(e){super(),nt(this,e,ch,sh,et,{side:0,position:1},null,[-1,-1])}};function uh(n){let e=n[7](wt.ProfitLoss)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&128&&e!==(e=i[7](wt.ProfitLoss)+"")&&W(t,e)},d(i){i&&m(t)}}}function ph(n){let e=n[7](wt.TargetPrice)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&128&&e!==(e=i[7](wt.TargetPrice)+"")&&W(t,e)},d(i){i&&m(t)}}}function dh(n){let e=n[7](wt.LiquidationPrice)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&128&&e!==(e=i[7](wt.LiquidationPrice)+"")&&W(t,e)},d(i){i&&m(t)}}}function mh(n){let e,t,i,r,l,s,o,a,c,f,p,d,h;return t=new Kn({props:{active:n[0]===$n.ProfitLoss,$$slots:{default:[uh]},$$scope:{ctx:n}}}),t.$on("click",n[16]),r=new Kn({props:{active:n[0]===$n.TargetPrice,$$slots:{default:[ph]},$$scope:{ctx:n}}}),r.$on("click",n[17]),s=new Kn({props:{active:n[0]===$n.LiquidationPrice,$$slots:{default:[dh]},$$scope:{ctx:n}}}),s.$on("click",n[18]),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),l=q(),te(s.$$.fragment),o=q(),a=y("div"),c=y("i"),f=B(""),this.h()},l(_){e=k(_,"DIV",{class:!0});var v=S(e);re(t.$$.fragment,v),i=M(v),re(r.$$.fragment,v),l=M(v),re(s.$$.fragment,v),v.forEach(m),o=M(_),a=k(_,"DIV",{class:!0});var g=S(a);c=k(g,"I",{class:!0});var b=S(c);f=A(b,""),b.forEach(m),g.forEach(m),this.h()},h(){E(e,"class","df"),E(c,"class","cp iconfont"),E(a,"class","f1 tr")},m(_,v){G(_,e,v),ne(t,e,null),u(e,i),ne(r,e,null),u(e,l),ne(s,e,null),G(_,o,v),G(_,a,v),u(a,c),u(c,f),p=!0,d||(h=We(c,"click",n[8]),d=!0)},p(_,v){const g={};v&1&&(g.active=_[0]===$n.ProfitLoss),v&134217856&&(g.$$scope={dirty:v,ctx:_}),t.$set(g);const b={};v&1&&(b.active=_[0]===$n.TargetPrice),v&134217856&&(b.$$scope={dirty:v,ctx:_}),r.$set(b);const P={};v&1&&(P.active=_[0]===$n.LiquidationPrice),v&134217856&&(P.$$scope={dirty:v,ctx:_}),s.$set(P)},i(_){p||(Q(t.$$.fragment,_),Q(r.$$.fragment,_),Q(s.$$.fragment,_),p=!0)},o(_){j(t.$$.fragment,_),j(r.$$.fragment,_),j(s.$$.fragment,_),p=!1},d(_){_&&m(e),ie(t),ie(r),ie(s),_&&m(o),_&&m(a),d=!1,h()}}}function hh(n){let e,t,i;function r(s){n[20](s)}let l={position:n[6]};return n[5]!==void 0&&(l.side=n[5]),e=new Qm({props:l}),De.push(()=>qe(e,"side",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o&64&&(a.position=s[6]),!t&&o&32&&(t=!0,a.side=s[5],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function _h(n){let e,t,i;function r(s){n[21](s)}let l={position:n[6]};return n[5]!==void 0&&(l.side=n[5]),e=new Xm({props:l}),De.push(()=>qe(e,"side",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o&64&&(a.position=s[6]),!t&&o&32&&(t=!0,a.side=s[5],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function gh(n){let e,t,i;function r(s){n[22](s)}let l={position:n[6]};return n[5]!==void 0&&(l.side=n[5]),e=new fh({props:l}),De.push(()=>qe(e,"side",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o&64&&(a.position=s[6]),!t&&o&32&&(t=!0,a.side=s[5],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function vh(n){let e,t,i,r,l,s,o,a,c,f,p,d,h;return r=new _p({props:{style:"display:flex; background: var(--B2);",$$slots:{default:[mh]},$$scope:{ctx:n}}}),o=new gn({props:{active:n[0]===$n.ProfitLoss,$$slots:{default:[hh]},$$scope:{ctx:n}}}),c=new gn({props:{active:n[0]===$n.TargetPrice,$$slots:{default:[_h]},$$scope:{ctx:n}}}),p=new gn({props:{active:n[0]===$n.LiquidationPrice,$$slots:{default:[gh]},$$scope:{ctx:n}}}),{c(){e=y("div"),t=y("div"),i=y("div"),te(r.$$.fragment),l=q(),s=y("div"),te(o.$$.fragment),a=q(),te(c.$$.fragment),f=q(),te(p.$$.fragment),this.h()},l(_){e=k(_,"DIV",{class:!0});var v=S(e);t=k(v,"DIV",{class:!0});var g=S(t);i=k(g,"DIV",{class:!0});var b=S(i);re(r.$$.fragment,b),b.forEach(m),l=M(g),s=k(g,"DIV",{class:!0});var P=S(s);re(o.$$.fragment,P),a=M(P),re(c.$$.fragment,P),f=M(P),re(p.$$.fragment,P),P.forEach(m),g.forEach(m),v.forEach(m),this.h()},h(){E(i,"class","header pr16 H-12lyw39"),E(s,"class","f1 pr B2"),E(t,"class","main br12 H-12lyw39"),jn(()=>n[24].call(t)),E(e,"class","wrap H-12lyw39")},m(_,v){G(_,e,v),u(e,t),u(t,i),ne(r,i,null),n[19](i),u(t,l),u(t,s),ne(o,s,null),u(s,a),ne(c,s,null),u(s,f),ne(p,s,null),n[23](t),d=hi(t,n[24].bind(t)),h=!0},p(_,[v]){const g={};v&134217857&&(g.$$scope={dirty:v,ctx:_}),r.$set(g);const b={};v&1&&(b.active=_[0]===$n.ProfitLoss),v&134217824&&(b.$$scope={dirty:v,ctx:_}),o.$set(b);const P={};v&1&&(P.active=_[0]===$n.TargetPrice),v&134217824&&(P.$$scope={dirty:v,ctx:_}),c.$set(P);const I={};v&1&&(I.active=_[0]===$n.LiquidationPrice),v&134217824&&(I.$$scope={dirty:v,ctx:_}),p.$set(I)},i(_){h||(Q(r.$$.fragment,_),Q(o.$$.fragment,_),Q(c.$$.fragment,_),Q(p.$$.fragment,_),h=!0)},o(_){j(r.$$.fragment,_),j(o.$$.fragment,_),j(c.$$.fragment,_),j(p.$$.fragment,_),h=!1},d(_){_&&m(e),ie(r),n[19](null),ie(o),ie(c),ie(p),n[23](null),d()}}}function bh(n,e,t,i){const r=(n-t)/2,l=(e-i)/2;return{x:r,y:l}}function Eh(n,e,t,i,r,l,s,o){const a=n-e,c=t-i;let f,p;return a>=r-s?f=r-s:a<=0?f=0:f=a,c>=l-o?p=l-o:c<=0?p=0:p=c,{x:f,y:p}}function yh(n,e,t){let i,r,l,s,o,a;J(n,rp,H=>t(11,i=H)),J(n,Bi,H=>t(12,r=H)),J(n,_n,H=>t(13,l=H)),J(n,Sn,H=>t(14,s=H)),J(n,Xt,H=>t(15,o=H)),J(n,dt,H=>t(7,a=H));const c=Kt();let f=vn.readContractStorage().calculatorTabType,p=vn.readContractStorage().calculatorDialogPos,d=!0,h=!1,_,v,g,b,P="Buy",I=null;function T(){c("close"),t(9,d=!0),t(10,h=!1)}const C=()=>t(0,f=$n.ProfitLoss),V=()=>t(0,f=$n.TargetPrice),O=()=>t(0,f=$n.LiquidationPrice);function w(H){De[H?"unshift":"push"](()=>{v=H,t(2,v),t(1,_),t(12,r),t(11,i),t(3,g),t(4,b),t(9,d),t(26,p),t(10,h)})}function D(H){P=H,t(5,P)}function L(H){P=H,t(5,P)}function $(H){P=H,t(5,P)}function N(H){De[H?"unshift":"push"](()=>{_=H,t(1,_),t(2,v),t(12,r),t(11,i),t(3,g),t(4,b),t(9,d),t(26,p),t(10,h)})}function z(){g=this.offsetWidth,b=this.offsetHeight,t(3,g),t(4,b)}return n.$$.update=()=>{if(n.$$.dirty&57376&&t(6,I=Bn(o,s,l,P)),n.$$.dirty&1&&vn.updateContractStorage({calculatorTabType:f}),n.$$.dirty&6174&&v&&_&&(t(2,v.onmousedown=H=>{if(H.button===2)return;const R=H.pageX||H.clientX+document.documentElement.scrollLeft,F=H.pageY||H.clientY+document.documentElement.scrollTop,U=R-_.offsetLeft,K=F-_.offsetTop;document.onmousemove=Y=>{t(10,h=!0);const X=Y.pageX||Y.clientX+document.documentElement.scrollLeft,ee=Y.pageY||Y.clientY+document.documentElement.scrollTop,{x:Z,y:ue}=Eh(X,U,ee,K,r,i,g,b);t(1,_.style.left=Z+"px",_),t(1,_.style.top=ue+"px",_),vn.updateContractStorage({calculatorDialogPos:{x:Z,y:ue}})}},v),document.onmouseup=()=>{document.onmousemove=null}),n.$$.dirty&7710){if(v&&_&&d){t(9,d=!1);const{x:H,y:R}=bh(r,i,g,b);t(1,_.style.left=H+"px",_),t(1,_.style.top=R+"px",_)}p&&v&&_&&!h&&(t(1,_.style.left=p.x+"px",_),t(1,_.style.top=p.y+"px",_),t(10,h=!1))}},[f,_,v,g,b,P,I,a,T,d,h,i,r,l,s,o,C,V,O,w,D,L,$,N,z]}let kh=class extends tt{constructor(e){super(),nt(this,e,yh,vh,et,{})}};function qo(n,e,t){const i=n.slice();return i[23]=e[t],i}function Mo(n){let e,t=n[23].text+"",i,r,l;return{c(){e=y("div"),i=B(t),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);i=A(o,t),o.forEach(m),this.h()},h(){E(e,"class","lh30 cp f12 H-1yf4zcb")},m(s,o){G(s,e,o),u(e,i),r||(l=We(e,"click",function(){Tt(n[7](n[23]))&&n[7](n[23]).apply(this,arguments)}),r=!0)},p(s,o){n=s,o&4&&t!==(t=n[23].text+"")&&W(i,t)},d(s){s&&m(e),r=!1,l()}}}function No(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g=n[2],b=[];for(let P=0;P<g.length;P+=1)b[P]=Mo(qo(n,g,P));return{c(){e=y("div"),t=y("div"),i=y("span"),r=B(n[5]),s=q(),o=y("div"),a=y("i"),c=B(""),f=q(),p=y("div"),d=y("div");for(let P=0;P<b.length;P+=1)b[P].c();this.h()},l(P){e=k(P,"DIV",{class:!0});var I=S(e);t=k(I,"DIV",{class:!0});var T=S(t);i=k(T,"SPAN",{class:!0});var C=S(i);r=A(C,n[5]),C.forEach(m),s=M(T),o=k(T,"DIV",{class:!0});var V=S(o);a=k(V,"I",{class:!0});var O=S(a);c=A(O,""),O.forEach(m),V.forEach(m),T.forEach(m),f=M(I),p=k(I,"DIV",{class:!0});var w=S(p);d=k(w,"DIV",{class:!0});var D=S(d);for(let L=0;L<b.length;L+=1)b[L].l(D);D.forEach(m),w.forEach(m),I.forEach(m),this.h()},h(){E(i,"class","ooo"),E(a,"class","iconfont f12 cp"),E(o,"class","arrow-box ml4 H-1yf4zcb"),Te(o,"animation",n[4]),E(t,"class","ovh df aic"),E(d,"class","dropdown ovh br4 H-1yf4zcb"),E(p,"class","dropdown-wrap pa H-1yf4zcb"),p.hidden=h=!n[4],E(e,"class","tab df aic wsn f12 pr H-1yf4zcb"),Te(e,"active",n[1]===Ot.Conditional)},m(P,I){G(P,e,I),u(e,t),u(t,i),u(i,r),u(t,s),u(t,o),u(o,a),u(a,c),u(e,f),u(e,p),u(p,d);for(let T=0;T<b.length;T+=1)b[T]&&b[T].m(d,null);_||(v=[Wt(l=Gt.call(null,i,{text:n[9](n[0],n[3]),showDelay:800})),We(p,"mouseover",n[14]),We(p,"mouseleave",n[15]),We(e,"click",n[6](Ot.Conditional)),We(e,"mouseover",n[16]),We(e,"mouseleave",n[17])],_=!0)},p(P,I){if(I&32&&W(r,P[5]),l&&Tt(l.update)&&I&9&&l.update.call(null,{text:P[9](P[0],P[3]),showDelay:800}),I&16&&Te(o,"animation",P[4]),I&132){g=P[2];let T;for(T=0;T<g.length;T+=1){const C=qo(P,g,T);b[T]?b[T].p(C,I):(b[T]=Mo(C),b[T].c(),b[T].m(d,null))}for(;T<b.length;T+=1)b[T].d(1);b.length=g.length}I&16&&h!==(h=!P[4])&&(p.hidden=h),I&2&&Te(e,"active",P[1]===Ot.Conditional)},d(P){P&&m(e),wn(b,P),_=!1,jt(v)}}}function Ph(n){let e,t,i,r,l=n[3](Ye.Limit)+"",s,o,a,c,f=n[3](Ye.Market)+"",p,d,h,_=n[0],v,g,b,P,I,T=No(n);return{c(){e=y("div"),t=y("div"),i=y("div"),r=y("div"),s=B(l),a=q(),c=y("div"),p=B(f),h=q(),T.c(),v=q(),g=y("i"),b=B(""),this.h()},l(C){e=k(C,"DIV",{class:!0});var V=S(e);t=k(V,"DIV",{class:!0});var O=S(t);i=k(O,"DIV",{class:!0});var w=S(i);r=k(w,"DIV",{class:!0});var D=S(r);s=A(D,l),D.forEach(m),a=M(w),c=k(w,"DIV",{class:!0});var L=S(c);p=A(L,f),L.forEach(m),h=M(w),T.l(w),w.forEach(m),O.forEach(m),v=M(V),g=k(V,"I",{class:!0});var $=S(g);b=A($,""),$.forEach(m),V.forEach(m),this.h()},h(){E(r,"class","tab wsn f12 H-1yf4zcb"),Te(r,"active",n[1]===Ot.Limit),E(c,"class","tab wsn f12 H-1yf4zcb"),Te(c,"active",n[1]===Ot.Market),E(i,"class","order-header df H-1yf4zcb"),E(t,"class","tab-box df aic H-1yf4zcb"),E(g,"class","calc-icon iconfont ml4 fw2 T3 cp H-1yf4zcb"),E(e,"class","wrap df aic jcsb mt8 H-1yf4zcb")},m(C,V){G(C,e,V),u(e,t),u(t,i),u(i,r),u(r,s),u(i,a),u(i,c),u(c,p),u(i,h),T.m(i,null),u(e,v),u(e,g),u(g,b),P||(I=[We(r,"click",n[6](Ot.Limit)),Wt(o=Gt.call(null,r,{text:n[3](vt.LimitOrder),showDelay:800})),We(c,"click",n[6](Ot.Market)),Wt(d=Gt.call(null,c,{text:n[3](vt.MarketOrder),showDelay:800})),We(g,"click",n[8])],P=!0)},p(C,[V]){V&8&&l!==(l=C[3](Ye.Limit)+"")&&W(s,l),o&&Tt(o.update)&&V&8&&o.update.call(null,{text:C[3](vt.LimitOrder),showDelay:800}),V&2&&Te(r,"active",C[1]===Ot.Limit),V&8&&f!==(f=C[3](Ye.Market)+"")&&W(p,f),d&&Tt(d.update)&&V&8&&d.update.call(null,{text:C[3](vt.MarketOrder),showDelay:800}),V&2&&Te(c,"active",C[1]===Ot.Market),V&1&&et(_,_=C[0])?(T.d(1),T=No(C),T.c(),T.m(i,null)):T.p(C,V)},i:rt,o:rt,d(C){C&&m(e),T.d(C),P=!1,jt(I)}}}function Sh(n,e,t){let i,r,l,s,o,a,c,f,p;J(n,U1,L=>t(11,a=L)),J(n,dt,L=>t(3,c=L)),J(n,W1,L=>t(12,f=L)),J(n,or,L=>t(13,p=L));let{tabType:d=""}=e,{conditionalType:h=qt.Limit}=e,_=!1;function v(L){return function(){To.next({kv:{[r]:L}})}}function g(L){return function(){t(1,d=Ot.Conditional),t(0,h=L.value),t(4,_=!_),To.next({kv:{[r]:Ot.Conditional,[l]:h}})}}function b(){en.create(kh)}function P(L,$){const N=L.find(z=>z.value===$);return N?N.text:""}function I(L){const{kv:$}=L;t(1,d=$[r]),t(0,h=$[l])}function T(L){L&&v(Ot.Limit)()}function C(L,$){return[qt.ScaledOrder].includes(L)?$(vt.ScaledOrder):$(vt.ConditionalOrder)}const V=()=>t(4,_=!0),O=()=>t(4,_=!1),w=()=>t(4,_=!0),D=()=>t(4,_=!1);return n.$$set=L=>{"tabType"in L&&t(1,d=L.tabType),"conditionalType"in L&&t(0,h=L.conditionalType)},n.$$.update=()=>{n.$$.dirty&8192&&t(10,i=p.isCheapCopyToken),n.$$.dirty&1024&&(r=i?"cheapCopyPlaceOrderTabType":"placeOrderTabType"),n.$$.dirty&1024&&(l=i?"cheapCopyConditionalType":"conditionalType"),n.$$.dirty&12288&&I(f),n.$$.dirty&8&&t(2,s=rn.createViewOptions(c,Ye,qt)),n.$$.dirty&5&&t(5,o=P(s,h)),n.$$.dirty&2048&&T(a)},[h,d,s,c,_,o,v,g,b,C,i,a,f,p,V,O,w,D]}let Ch=class extends tt{constructor(e){super(),nt(this,e,Sh,Ph,et,{tabType:1,conditionalType:0})}};function Jr(n,e,t,i,r,l){if(!n)return 0;if(i<=0)return r;const{settleCurrency:s,contractUnderlyingAssets:o,contractSize:a,qtyFactor:c,qtyPrecision:f,valuePrecision:p}=n,d=Re(l).times(i).div(100).times(c);if(e===we.Cont)return Oi(d);if(e===s){const h=_r(t,n);return Oi(Re(d).times(h),p)}return e===o?Oi(Re(d).times(a),f):0}function Zr(n,e,t,i){const{type:r,qtyPrecision:l,qtyScale:s,contPrecision:o,settleValuePrecision:a,valuePrecision:c,valueScale:f}=n;let p=0,d=0;r==="Perpetual"&&(p=e===we.Cont?o:a,d=s),r==="PerpetualV2"&&(p=e===we.Base?c:l,d=e===we.Base?f:s);const h=Number(xe.floor(i,p,d));return e===we.Cont?{quantity:h,iptValue:0}:e===we.Base?{quantity:Number(In(h,t,n)),iptValue:h}:e===we.Coin?{quantity:Number(Dn(h,n,t)),iptValue:h}:{}}function Th(n){let e,t,i,r=n[4](Ye.Buy)+"",l,s,o,a=(n[0]>0?n[1]:"--")+"",c,f,p,d,h,_,v=n[4](Ye.Sell)+"",g,b,P,I=(n[0]>0?n[2]:"--")+"",T,C,V;return{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),s=q(),o=y("span"),c=B(a),f=q(),p=B(n[3]),d=q(),h=y("div"),_=y("span"),g=B(v),b=q(),P=y("span"),T=B(I),C=q(),V=B(n[3]),this.h()},l(O){e=k(O,"DIV",{class:!0});var w=S(e);t=k(w,"DIV",{class:!0});var D=S(t);i=k(D,"SPAN",{class:!0});var L=S(i);l=A(L,r),L.forEach(m),s=M(D),o=k(D,"SPAN",{class:!0});var $=S(o);c=A($,a),f=M($),p=A($,n[3]),$.forEach(m),D.forEach(m),d=M(w),h=k(w,"DIV",{class:!0});var N=S(h);_=k(N,"SPAN",{class:!0});var z=S(_);g=A(z,v),z.forEach(m),b=M(N),P=k(N,"SPAN",{class:!0});var H=S(P);T=A(H,I),C=M(H),V=A(H,n[3]),H.forEach(m),N.forEach(m),w.forEach(m),this.h()},h(){E(i,"class","T3"),E(o,"class","ml4"),E(t,"class","df fdr aic T1"),E(_,"class","T3"),E(P,"class","ml4"),E(h,"class","df fdr aic T1"),E(e,"class","df fdr jcsb aic f12 mt10")},m(O,w){G(O,e,w),u(e,t),u(t,i),u(i,l),u(t,s),u(t,o),u(o,c),u(o,f),u(o,p),u(e,d),u(e,h),u(h,_),u(_,g),u(h,b),u(h,P),u(P,T),u(P,C),u(P,V)},p(O,[w]){w&16&&r!==(r=O[4](Ye.Buy)+"")&&W(l,r),w&3&&a!==(a=(O[0]>0?O[1]:"--")+"")&&W(c,a),w&8&&W(p,O[3]),w&16&&v!==(v=O[4](Ye.Sell)+"")&&W(g,v),w&5&&I!==(I=(O[0]>0?O[2]:"--")+"")&&W(T,I),w&8&&W(V,O[3])},i:rt,o:rt,d(O){O&&m(e)}}}function wh(n,e,t){let i,r,l,s;J(n,dt,v=>t(4,r=v)),J(n,an,v=>t(8,l=v)),J(n,Xt,v=>t(9,s=v));let{percent:o=0}=e,{priceEp:a=0}=e,{maxQty:c={buyQty:0,sellQty:0}}=e,f=0,p=0,d="";function h(v,g,b,P){const{contractSize:I,type:T}=v,C=_r(b,v);let{buyQty:V,sellQty:O}=P;return g===we.Base&&(V=Number(Re(C).times(V)),O=Number(Re(C).times(O))),g===we.Coin&&T==="Perpetual"&&(V=Number(Re(V).times(I)),O=Number(Re(O).times(I))),{buyQty:V,sellQty:O}}function _(v,g,b,P){const{qtyPrecision:I,contPrecision:T,contractSizePrecision:C,valuePrecision:V,pricePrecision:O,contractUnderlyingAssets:w,settleCurrency:D,contractSide:L,type:$}=v;let{buyQty:N,sellQty:z}=P;const H={[we.Cont]:T,[we.Base]:L>0?O:V,[we.Coin]:C};g===we.Cont&&t(3,d=r(Ye.Cont)),g===we.Base&&t(3,d=D),g===we.Coin&&t(3,d=w);const R=$==="Perpetual"?H[g]:I;t(1,f=xe.floor(N*b/100,R)),t(2,p=xe.floor(z*b/100,R))}return n.$$set=v=>{"percent"in v&&t(0,o=v.percent),"priceEp"in v&&t(5,a=v.priceEp),"maxQty"in v&&t(6,c=v.maxQty)},n.$$.update=()=>{n.$$.dirty&864&&t(7,i=h(s,l,a,c)),n.$$.dirty&897&&_(s,l,o,i)},[o,f,p,d,r,a,c,i,l,s]}let Xs=class extends tt{constructor(e){super(),nt(this,e,wh,Th,et,{percent:0,priceEp:5,maxQty:6})}};function Ho(n){let e,t;return e=new G1({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Ih(n){let e,t,i=!n[0]&&Ho();return{c(){i&&i.c(),e=ut()},l(r){i&&i.l(r),e=ut()},m(r,l){i&&i.m(r,l),G(r,e,l),t=!0},p(r,l){r[0]?i&&(ot(),j(i,1,1,()=>{i=null}),at()):i?l&1&&Q(i,1):(i=Ho(),i.c(),Q(i,1),i.m(e.parentNode,e))},i(r){t||(Q(i),t=!0)},o(r){j(i),t=!1},d(r){i&&i.d(r),r&&m(e)}}}function Dh(n){let e,t;return e=new S1({props:{type:"Contract",$$slots:{default:[Ih]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&3&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Vh(n,e,t){let i;return J(n,lp,r=>t(0,i=r)),[i]}let xr=class extends tt{constructor(e){super(),nt(this,e,Vh,Dh,et,{})}};function Bo(n){let e,t=n[1](Ye.TheLargeAmount)+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","wrap mv10 lh16 f12 H-1d65whd")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&2&&t!==(t=r[1](Ye.TheLargeAmount)+"")&&W(i,t)},d(r){r&&m(e)}}}function Oh(n){let e,t=n[0]&&Bo(n);return{c(){t&&t.c(),e=ut()},l(i){t&&t.l(i),e=ut()},m(i,r){t&&t.m(i,r),G(i,e,r)},p(i,[r]){i[0]?t?t.p(i,r):(t=Bo(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:rt,o:rt,d(i){t&&t.d(i),i&&m(e)}}}function Lh(n,e,t){let i,r;J(n,Xt,a=>t(3,i=a)),J(n,dt,a=>t(1,r=a));let{quantity:l=0}=e,s=!1;function o(a,c){a&&t(0,s=c>=a.tipOrderQty&&a.status==="Listed")}return n.$$set=a=>{"quantity"in a&&t(2,l=a.quantity)},n.$$.update=()=>{n.$$.dirty&12&&o(i,l)},[s,r,l,i]}let zp=class extends tt{constructor(e){super(),nt(this,e,Lh,Oh,et,{quantity:2})}};function $h(n){let e,t=n[6](Ye.Iceberg)+"",i,r,l,s;return{c(){e=y("span"),i=B(t),this.h()},l(o){e=k(o,"SPAN",{class:!0});var a=S(e);i=A(a,t),a.forEach(m),this.h()},h(){E(e,"class","bo usn tdud f12 pl2")},m(o,a){G(o,e,a),u(e,i),l||(s=Wt(r=Gt.call(null,e,{text:n[6](Ye.IcebergTip),showDelay:800})),l=!0)},p(o,a){a&64&&t!==(t=o[6](Ye.Iceberg)+"")&&W(i,t),r&&Tt(r.update)&&a&64&&r.update.call(null,{text:o[6](Ye.IcebergTip),showDelay:800})},d(o){o&&m(e),l=!1,s()}}}function Ao(n){let e,t,i,r,l;const s=[{options:n[3]},{isInline:!1},{operation:!1},{disabled:!n[0]},{placeholder:n[7](n[1],{max:n[5].maxQuantity,min:n[5].minQuantity},n[3])},n[5]];function o(p){n[18](p)}function a(p){n[19](p)}function c(p){n[20](p)}let f={};for(let p=0;p<s.length;p+=1)f=pn(f,s[p]);return n[2]!==void 0&&(f.input=n[2]),n[1]!==void 0&&(f.qtyType=n[1]),n[4]!==void 0&&(f.quantity=n[4]),e=new Un({props:f}),De.push(()=>qe(e,"input",o)),De.push(()=>qe(e,"qtyType",a)),De.push(()=>qe(e,"quantity",c)),{c(){te(e.$$.fragment)},l(p){re(e.$$.fragment,p)},m(p,d){ne(e,p,d),l=!0},p(p,d){const h=d&171?dn(s,[d&8&&{options:p[3]},s[1],s[2],d&1&&{disabled:!p[0]},d&170&&{placeholder:p[7](p[1],{max:p[5].maxQuantity,min:p[5].minQuantity},p[3])},d&32&&mn(p[5])]):{};!t&&d&4&&(t=!0,h.input=p[2],Me(()=>t=!1)),!i&&d&2&&(i=!0,h.qtyType=p[1],Me(()=>i=!1)),!r&&d&16&&(r=!0,h.quantity=p[4],Me(()=>r=!1)),e.$set(h)},i(p){l||(Q(e.$$.fragment,p),l=!0)},o(p){j(e.$$.fragment,p),l=!1},d(p){ie(e,p)}}}function qh(n){let e,t,i,r,l,s,o;function a(p){n[17](p)}let c={class:"select-none cp",$$slots:{default:[$h]},$$scope:{ctx:n}};n[0]!==void 0&&(c.checked=n[0]),t=new Pn({props:c}),De.push(()=>qe(t,"checked",a));let f=n[0]&&Ao(n);return{c(){e=y("div"),te(t.$$.fragment),r=q(),f&&f.c(),this.h()},l(p){e=k(p,"DIV",{class:!0});var d=S(e);re(t.$$.fragment,d),r=M(d),f&&f.l(d),d.forEach(m),this.h()},h(){E(e,"class","iceberg df fdc gap-16px H-rjqa57")},m(p,d){G(p,e,d),ne(t,e,null),u(e,r),f&&f.m(e,null),l=!0,s||(o=We(e,"click",n[8]),s=!0)},p(p,[d]){const h={};d&268435520&&(h.$$scope={dirty:d,ctx:p}),!i&&d&1&&(i=!0,h.checked=p[0],Me(()=>i=!1)),t.$set(h),p[0]?f?(f.p(p,d),d&1&&Q(f,1)):(f=Ao(p),f.c(),Q(f,1),f.m(e,null)):f&&(ot(),j(f,1,1,()=>{f=null}),at())},i(p){l||(Q(t.$$.fragment,p),Q(f),l=!0)},o(p){j(t.$$.fragment,p),j(f),l=!1},d(p){p&&m(e),ie(t),f&&f.d(),s=!1,o()}}}function Mh(n,e,t){let i,r,l,s;J(n,dt,H=>t(6,l=H)),J(n,an,H=>t(16,s=H));let{contract:o}=e,{qty:a=0}=e,{iceberg:c=!1}=e,{splitOrdersTotal:f}=e,{inputType:p="Orders"}=e,{priceEp:d=0}=e,{icebergQty:h=0}=e,{icebergOrders:_=0}=e,v,g=[],b="";function P(H,R,F){if(H==="Orders"){t(9,h=0),t(10,_=R!==""?Number(R):0);return}t(10,_=0),t(9,h=C(R,F,o,d))}function I(H,R){R&&(R==null||R.setAttribute("tabindex",!H&&R?"-1":"0")),H||t(4,b="")}function T(H,R){(R==null?void 0:R.length)>0&&!R.find(F=>F.value===H)&&t(1,p=R[0].value)}function C(H,R,F,U){return H===""?0:R===we.Base?Number(In(H,U,F)):R===we.Coin?Number(Dn(H,F,U)):Number(H)}function V(H,R){const{type:F}=H,U=[{text:l(Ye.Orders),value:"Orders"}];if(F==="Perpetual"){if(R===we.Cont)return U.push({text:l(Ye.Cont),value:R}),U;U.push({text:H.baseCurrency,value:H.baseCurrency})}return F==="PerpetualV2"&&(R===we.Base&&U.push({text:H.quoteCurrency,value:H.quoteCurrency}),R===we.Coin&&U.push({text:H.baseCurrency,value:H.baseCurrency})),U}function O(H,R,F){const{type:U,qtyScale:K,qtyFactor:Y,qtyPrecision:X,tickSizeEp:ee,contractSide:Z,contPrecision:ue,contTickSizeEv:ce,pricePrecision:pe,valuePrecision:me,contractSizePrecision:oe,valueScale:ke,valueFactor:Le,tickSizeEv:ge,qtyStepSize:ae,settleValuePrecision:x}=o;let le=K,fe=Y,Se=X,Pe=ee;U==="Perpetual"&&(Se=F===we.Cont?ue:x,le=K,fe=1,F===we.Cont&&(Se=ue,Pe=1),F===we.Base&&(Z>0&&(Se=pe,Pe=Re(10).pow(-Se).toNumber()),Z<0&&(Se=me,Pe=Re(10).pow(-Se).toNumber())),F===we.Coin&&(Se=oe,Pe=Re(10).pow(-Se).toNumber())),U==="PerpetualV2"&&(F===we.Base&&(le=ke,fe=Le,Se=me,Pe=ge),F===we.Coin&&(le=K,fe=Y,Se=X,Pe=ae));const Ce=Re(R).times(Math.pow(10,-le)).toString();let Ee=Re(Ce).div(50).toNumber();if(U==="Perpetual"&&(F===we.Cont&&(Ee=Re(Ce).div(50).round(Se,3).toNumber()),F===we.Base&&(Ee=Re(Ce).div(50).round(Se,3).toNumber())),U==="PerpetualV2"&&(F===we.Base&&(Ee=Re(d).times(ae).toNumber(),Ee=Math.max(Ee,Re(Ce).div(50).toNumber())),F===we.Coin&&(Ee=Re(Ce).div(50).round(Se,3).toNumber(),Ee=Math.max(Ee,ae))),H==="Orders"){const Ie=Ee?Re(Ce).div(Ee).round(0,0).toNumber():50;return{scale:0,factor:1,precision:0,tickSizeEx:1,minQuantity:1,maxQuantity:R?Math.min(Ie,50):50}}return{scale:le,factor:fe,precision:Se,tickSizeEx:Pe,maxQuantity:Ce,minQuantity:Math.max(Ee,Pe)}}function w(H,{max:R,min:F},U){if(H==="Orders")return`${l(Ye.NoOfSplitOrders)}(1-${R})`;const K=U.find(Y=>Y.value===H).text;return`${l(Ye.IcebergQty)}. (≥${F}${K})`}function D(){c||setTimeout(()=>{t(0,c=!0),v.focus()},0)}function L(H){c=H,t(0,c)}function $(H){v=H,t(2,v)}function N(H){p=H,t(1,p)}function z(H){b=H,t(4,b)}return n.$$set=H=>{"contract"in H&&t(11,o=H.contract),"qty"in H&&t(12,a=H.qty),"iceberg"in H&&t(0,c=H.iceberg),"splitOrdersTotal"in H&&t(13,f=H.splitOrdersTotal),"inputType"in H&&t(1,p=H.inputType),"priceEp"in H&&t(14,d=H.priceEp),"icebergQty"in H&&t(9,h=H.icebergQty),"icebergOrders"in H&&t(10,_=H.icebergOrders)},n.$$.update=()=>{n.$$.dirty&65536&&t(15,i=s),n.$$.dirty&34816&&t(3,g=V(o,i)),n.$$.dirty&10&&T(p,g),n.$$.dirty&36866&&t(5,r=O(p,a,i)),n.$$.dirty&5&&I(c,v),n.$$.dirty&32786&&P(p,b,i)},[c,p,v,g,b,r,l,w,D,h,_,o,a,f,d,i,s,L,$,N,z]}let Qp=class extends tt{constructor(e){super(),nt(this,e,Mh,qh,et,{contract:11,qty:12,iceberg:0,splitOrdersTotal:13,inputType:1,priceEp:14,icebergQty:9,icebergOrders:10})}};function Nh(n){let e,t,i=(n[8]===Ot.Limit||n[8]===Ot.Conditional&&n[9]===qt.Limit)&&zo(n);return{c(){i&&i.c(),e=ut()},l(r){i&&i.l(r),e=ut()},m(r,l){i&&i.m(r,l),G(r,e,l),t=!0},p(r,l){r[8]===Ot.Limit||r[8]===Ot.Conditional&&r[9]===qt.Limit?i?(i.p(r,l),l[0]&768&&Q(i,1)):(i=zo(r),i.c(),Q(i,1),i.m(e.parentNode,e)):i&&(ot(),j(i,1,1,()=>{i=null}),at())},i(r){t||(Q(i),t=!0)},o(r){j(i),t=!1},d(r){i&&i.d(r),r&&m(e)}}}function Hh(n){let e=[Ot.Limit,Ot.Conditional].indexOf(n[8])>-1,t,i,r=e&&Qo(n);return{c(){r&&r.c(),t=ut()},l(l){r&&r.l(l),t=ut()},m(l,s){r&&r.m(l,s),G(l,t,s),i=!0},p(l,s){s[0]&256&&(e=[Ot.Limit,Ot.Conditional].indexOf(l[8])>-1),e?r?(r.p(l,s),s[0]&256&&Q(r,1)):(r=Qo(l),r.c(),Q(r,1),r.m(t.parentNode,t)):r&&(ot(),j(r,1,1,()=>{r=null}),at())},i(l){i||(Q(r),i=!0)},o(l){j(r),i=!1},d(l){r&&r.d(l),l&&m(t)}}}function zo(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b;function P($){n[26]($)}let I={class:"f12",$$slots:{default:[Bh]},$$scope:{ctx:n}};n[0]!==void 0&&(I.checked=n[0]),t=new Pn({props:I}),De.push(()=>qe(t,"checked",P));function T($){n[27]($)}let C={class:"select f12",options:Dp.createTimeInForceOptions(),disabled:n[13],active:n[1]!=="GoodTillCancel"};n[1]!==void 0&&(C.value=n[1]),s=new Yr({props:C}),De.push(()=>qe(s,"value",T));function V($){n[28]($)}function O($){n[29]($)}function w($){n[30]($)}function D($){n[31]($)}let L={priceEp:n[11],contract:n[14],qty:n[10]};return n[2]!==void 0&&(L.iceberg=n[2]),n[6]!==void 0&&(L.icebergQty=n[6]),n[7]!==void 0&&(L.icebergOrders=n[7]),n[5]!==void 0&&(L.inputType=n[5]),f=new Qp({props:L}),De.push(()=>qe(f,"iceberg",V)),De.push(()=>qe(f,"icebergQty",O)),De.push(()=>qe(f,"icebergOrders",w)),De.push(()=>qe(f,"inputType",D)),{c(){e=y("div"),te(t.$$.fragment),r=q(),l=y("div"),te(s.$$.fragment),c=q(),te(f.$$.fragment),this.h()},l($){e=k($,"DIV",{class:!0});var N=S(e);re(t.$$.fragment,N),r=M(N),l=k(N,"DIV",{class:!0});var z=S(l);re(s.$$.fragment,z),z.forEach(m),N.forEach(m),c=M($),re(f.$$.fragment,$),this.h()},h(){E(l,"class","time-in-force H-1y357wl"),E(e,"class","main df aic jcsb H-1y357wl")},m($,N){G($,e,N),ne(t,e,null),u(e,r),u(e,l),ne(s,l,null),G($,c,N),ne(f,$,N),v=!0,g||(b=Wt(a=Gt.call(null,l,{text:n[16](n[15]),showDelay:800,hideDelay:500})),g=!0)},p($,N){const z={};N[0]&32768|N[1]&16&&(z.$$scope={dirty:N,ctx:$}),!i&&N[0]&1&&(i=!0,z.checked=$[0],Me(()=>i=!1)),t.$set(z);const H={};N[0]&8192&&(H.disabled=$[13]),N[0]&2&&(H.active=$[1]!=="GoodTillCancel"),!o&&N[0]&2&&(o=!0,H.value=$[1],Me(()=>o=!1)),s.$set(H),a&&Tt(a.update)&&N[0]&32768&&a.update.call(null,{text:$[16]($[15]),showDelay:800,hideDelay:500});const R={};N[0]&2048&&(R.priceEp=$[11]),N[0]&16384&&(R.contract=$[14]),N[0]&1024&&(R.qty=$[10]),!p&&N[0]&4&&(p=!0,R.iceberg=$[2],Me(()=>p=!1)),!d&&N[0]&64&&(d=!0,R.icebergQty=$[6],Me(()=>d=!1)),!h&&N[0]&128&&(h=!0,R.icebergOrders=$[7],Me(()=>h=!1)),!_&&N[0]&32&&(_=!0,R.inputType=$[5],Me(()=>_=!1)),f.$set(R)},i($){v||(Q(t.$$.fragment,$),Q(s.$$.fragment,$),Q(f.$$.fragment,$),v=!0)},o($){j(t.$$.fragment,$),j(s.$$.fragment,$),j(f.$$.fragment,$),v=!1},d($){$&&m(e),ie(t),ie(s),$&&m(c),ie(f,$),g=!1,b()}}}function Bh(n){let e,t=n[15](Ye.PostOnly)+"",i,r,l,s;return{c(){e=y("span"),i=B(t),this.h()},l(o){e=k(o,"SPAN",{class:!0});var a=S(e);i=A(a,t),a.forEach(m),this.h()},h(){E(e,"class","post-only bo usn tdud f12 H-1y357wl")},m(o,a){G(o,e,a),u(e,i),l||(s=Wt(r=Gt.call(null,e,{text:n[15](vt.PostOnly),showDelay:800})),l=!0)},p(o,a){a[0]&32768&&t!==(t=o[15](Ye.PostOnly)+"")&&W(i,t),r&&Tt(r.update)&&a[0]&32768&&r.update.call(null,{text:o[15](vt.PostOnly),showDelay:800})},d(o){o&&m(e),l=!1,s()}}}function Qo(n){let e,t,i,r,l,s,o,a,c;const f=[zh,Ah],p=[];function d(g,b){return g[8]===Ot.Limit?0:1}i=d(n),r=p[i]=f[i](n);let h=(n[8]===Ot.Limit||n[8]===Ot.Conditional&&n[9]===qt.Limit)&&Ro(n),_=(n[8]===Ot.Limit||n[8]===Ot.Conditional&&n[9]===qt.Limit)&&Fo(n),v=(n[8]===Ot.Limit||n[8]===Ot.Conditional&&n[9]===qt.Limit)&&jo(n);return{c(){e=y("div"),t=y("div"),r.c(),l=q(),h&&h.c(),s=q(),_&&_.c(),o=q(),v&&v.c(),a=ut(),this.h()},l(g){e=k(g,"DIV",{class:!0});var b=S(e);t=k(b,"DIV",{class:!0});var P=S(t);r.l(P),l=M(P),h&&h.l(P),P.forEach(m),s=M(b),_&&_.l(b),b.forEach(m),o=M(g),v&&v.l(g),a=ut(),this.h()},h(){E(t,"class","df aic"),E(e,"class","main df aic jcsb H-1y357wl"),Te(e,"pb10",n[9]===qt.Market)},m(g,b){G(g,e,b),u(e,t),p[i].m(t,null),u(t,l),h&&h.m(t,null),u(e,s),_&&_.m(e,null),G(g,o,b),v&&v.m(g,b),G(g,a,b),c=!0},p(g,b){let P=i;i=d(g),i===P?p[i].p(g,b):(ot(),j(p[P],1,1,()=>{p[P]=null}),at(),r=p[i],r?r.p(g,b):(r=p[i]=f[i](g),r.c()),Q(r,1),r.m(t,l)),g[8]===Ot.Limit||g[8]===Ot.Conditional&&g[9]===qt.Limit?h?(h.p(g,b),b[0]&768&&Q(h,1)):(h=Ro(g),h.c(),Q(h,1),h.m(t,null)):h&&(ot(),j(h,1,1,()=>{h=null}),at()),g[8]===Ot.Limit||g[8]===Ot.Conditional&&g[9]===qt.Limit?_?(_.p(g,b),b[0]&768&&Q(_,1)):(_=Fo(g),_.c(),Q(_,1),_.m(e,null)):_&&(ot(),j(_,1,1,()=>{_=null}),at()),(!c||b[0]&512)&&Te(e,"pb10",g[9]===qt.Market),g[8]===Ot.Limit||g[8]===Ot.Conditional&&g[9]===qt.Limit?v?(v.p(g,b),b[0]&768&&Q(v,1)):(v=jo(g),v.c(),Q(v,1),v.m(a.parentNode,a)):v&&(ot(),j(v,1,1,()=>{v=null}),at())},i(g){c||(Q(r),Q(h),Q(_),Q(v),c=!0)},o(g){j(r),j(h),j(_),j(v),c=!1},d(g){g&&m(e),p[i].d(),h&&h.d(),_&&_.d(),g&&m(o),v&&v.d(g),g&&m(a)}}}function Ah(n){let e,t,i;function r(s){n[19](s)}let l={class:"mr10 cp "+(n[9]===qt.Market?"pt10":""),$$slots:{default:[Qh]},$$scope:{ctx:n}};return n[4]!==void 0&&(l.checked=n[4]),e=new Pn({props:l}),De.push(()=>qe(e,"checked",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o[0]&512&&(a.class="mr10 cp "+(s[9]===qt.Market?"pt10":"")),o[0]&32768|o[1]&16&&(a.$$scope={dirty:o,ctx:s}),!t&&o[0]&16&&(t=!0,a.checked=s[4],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function zh(n){let e,t,i;function r(s){n[18](s)}let l={class:"reduce-only mr10 cp",$$slots:{default:[Rh]},$$scope:{ctx:n}};return n[3]!==void 0&&(l.checked=n[3]),e=new Pn({props:l}),De.push(()=>qe(e,"checked",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o[0]&32768|o[1]&16&&(a.$$scope={dirty:o,ctx:s}),!t&&o[0]&8&&(t=!0,a.checked=s[3],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function Qh(n){let e,t=n[15](Ye.CloseOnTrigger)+"",i,r,l,s;return{c(){e=y("span"),i=B(t),this.h()},l(o){e=k(o,"SPAN",{class:!0});var a=S(e);i=A(a,t),a.forEach(m),this.h()},h(){E(e,"class","bo usn tdud f12 H-1y357wl")},m(o,a){G(o,e,a),u(e,i),l||(s=Wt(r=Gt.call(null,e,{text:n[15](vt.CloseOnTrigger),showDelay:800})),l=!0)},p(o,a){a[0]&32768&&t!==(t=o[15](Ye.CloseOnTrigger)+"")&&W(i,t),r&&Tt(r.update)&&a[0]&32768&&r.update.call(null,{text:o[15](vt.CloseOnTrigger),showDelay:800})},d(o){o&&m(e),l=!1,s()}}}function Rh(n){let e,t=n[15](Ye.ReduceOnly)+"",i,r,l,s;return{c(){e=y("span"),i=B(t),this.h()},l(o){e=k(o,"SPAN",{class:!0});var a=S(e);i=A(a,t),a.forEach(m),this.h()},h(){E(e,"class","reduce-only bo usn tdud f12 H-1y357wl")},m(o,a){G(o,e,a),u(e,i),l||(s=Wt(r=Gt.call(null,e,{text:n[15](vt.ReduceOnly),showDelay:800})),l=!0)},p(o,a){a[0]&32768&&t!==(t=o[15](Ye.ReduceOnly)+"")&&W(i,t),r&&Tt(r.update)&&a[0]&32768&&r.update.call(null,{text:o[15](vt.ReduceOnly),showDelay:800})},d(o){o&&m(e),l=!1,s()}}}function Ro(n){let e,t,i;function r(s){n[20](s)}let l={class:"cp",$$slots:{default:[Fh]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.checked=n[0]),e=new Pn({props:l}),De.push(()=>qe(e,"checked",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o[0]&32768|o[1]&16&&(a.$$scope={dirty:o,ctx:s}),!t&&o[0]&1&&(t=!0,a.checked=s[0],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function Fh(n){let e,t=n[15](Ye.PostOnly)+"",i,r,l,s;return{c(){e=y("span"),i=B(t),this.h()},l(o){e=k(o,"SPAN",{class:!0});var a=S(e);i=A(a,t),a.forEach(m),this.h()},h(){E(e,"class","post-only bo usn tdud f12 H-1y357wl")},m(o,a){G(o,e,a),u(e,i),l||(s=Wt(r=Gt.call(null,e,{text:n[15](vt.PostOnly),showDelay:800})),l=!0)},p(o,a){a[0]&32768&&t!==(t=o[15](Ye.PostOnly)+"")&&W(i,t),r&&Tt(r.update)&&a[0]&32768&&r.update.call(null,{text:o[15](vt.PostOnly),showDelay:800})},d(o){o&&m(e),l=!1,s()}}}function Fo(n){let e,t,i,r,l,s,o;function a(f){n[21](f)}let c={class:"select f12",options:Dp.createTimeInForceOptions(),disabled:n[13],active:n[1]!=="GoodTillCancel"};return n[1]!==void 0&&(c.value=n[1]),t=new Yr({props:c}),De.push(()=>qe(t,"value",a)),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=S(e);re(t.$$.fragment,p),p.forEach(m),this.h()},h(){E(e,"class","time-in-force H-1y357wl")},m(f,p){G(f,e,p),ne(t,e,null),l=!0,s||(o=Wt(r=Gt.call(null,e,{text:n[16](n[15]),showDelay:800,hideDelay:500})),s=!0)},p(f,p){const d={};p[0]&8192&&(d.disabled=f[13]),p[0]&2&&(d.active=f[1]!=="GoodTillCancel"),!i&&p[0]&2&&(i=!0,d.value=f[1],Me(()=>i=!1)),t.$set(d),r&&Tt(r.update)&&p[0]&32768&&r.update.call(null,{text:f[16](f[15]),showDelay:800,hideDelay:500})},i(f){l||(Q(t.$$.fragment,f),l=!0)},o(f){j(t.$$.fragment,f),l=!1},d(f){f&&m(e),ie(t),s=!1,o()}}}function jo(n){let e,t,i,r,l,s;function o(d){n[22](d)}function a(d){n[23](d)}function c(d){n[24](d)}function f(d){n[25](d)}let p={priceEp:n[11],contract:n[14],qty:n[10]};return n[2]!==void 0&&(p.iceberg=n[2]),n[6]!==void 0&&(p.icebergQty=n[6]),n[7]!==void 0&&(p.icebergOrders=n[7]),n[5]!==void 0&&(p.inputType=n[5]),e=new Qp({props:p}),De.push(()=>qe(e,"iceberg",o)),De.push(()=>qe(e,"icebergQty",a)),De.push(()=>qe(e,"icebergOrders",c)),De.push(()=>qe(e,"inputType",f)),{c(){te(e.$$.fragment)},l(d){re(e.$$.fragment,d)},m(d,h){ne(e,d,h),s=!0},p(d,h){const _={};h[0]&2048&&(_.priceEp=d[11]),h[0]&16384&&(_.contract=d[14]),h[0]&1024&&(_.qty=d[10]),!t&&h[0]&4&&(t=!0,_.iceberg=d[2],Me(()=>t=!1)),!i&&h[0]&64&&(i=!0,_.icebergQty=d[6],Me(()=>i=!1)),!r&&h[0]&128&&(r=!0,_.icebergOrders=d[7],Me(()=>r=!1)),!l&&h[0]&32&&(l=!0,_.inputType=d[5],Me(()=>l=!1)),e.$set(_)},i(d){s||(Q(e.$$.fragment,d),s=!0)},o(d){j(e.$$.fragment,d),s=!1},d(d){ie(e,d)}}}function jh(n){let e,t,i,r;const l=[Hh,Nh],s=[];function o(a,c){return a[14].type==="Perpetual"||a[14].type==="PerpetualV2"&&Ct.OneWay===a[12]?0:a[14].type==="PerpetualV2"&&a[12]===Ct.Hedge?1:-1}return~(t=o(n))&&(i=s[t]=l[t](n)),{c(){e=y("div"),i&&i.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=S(e);i&&i.l(c),c.forEach(m),this.h()},h(){E(e,"class","wrap T3 H-1y357wl")},m(a,c){G(a,e,c),~t&&s[t].m(e,null),r=!0},p(a,c){let f=t;t=o(a),t===f?~t&&s[t].p(a,c):(i&&(ot(),j(s[f],1,1,()=>{s[f]=null}),at()),~t?(i=s[t],i?i.p(a,c):(i=s[t]=l[t](a),i.c()),Q(i,1),i.m(e,null)):i=null)},i(a){r||(Q(i),r=!0)},o(a){j(i),r=!1},d(a){a&&m(e),~t&&s[t].d()}}}function Uh(n,e,t){let i,r,l;J(n,_n,Z=>t(12,i=Z)),J(n,Xt,Z=>t(14,r=Z)),J(n,dt,Z=>t(15,l=Z));let{tabType:s="Limit"}=e,{qtyType:o}=e,{conditionalType:a="Limit"}=e,{postOnly:c=!1}=e,{reduceOnly:f=!1}=e,{closeOnTrigger:p=!1}=e,{timeInForce:d="GoodTillCancel"}=e,{quantity:h=0}=e,{icebergInputType:_="Orders"}=e,{priceEp:v=0}=e,{iceberg:g=!1}=e,{icebergQty:b=0}=e,{icebergOrders:P=0}=e,I;function T(Z){return"GTC: "+Z(Ye.GTCExplain)+'</br><div class="mt10">IOC: '+Z(Ye.IOCExplain)+'</div><div class="mt10">FOK: '+Z(Ye.FOKExplain)+"</div>"}function C(Z){Z===Ct.Hedge&&(t(4,p=!1),t(3,f=!1))}function V(Z){Z&&(t(0,c=!1),t(1,d="GoodTillCancel"))}function O(Z,ue){if(Z){t(2,g=!1);return}if(ue!=="GoodTillCancel"){t(2,g=!1);return}}function w(Z){f=Z,t(3,f)}function D(Z){p=Z,t(4,p)}function L(Z){c=Z,t(0,c)}function $(Z){d=Z,t(1,d)}function N(Z){g=Z,t(2,g)}function z(Z){b=Z,t(6,b)}function H(Z){P=Z,t(7,P)}function R(Z){_=Z,t(5,_)}function F(Z){c=Z,t(0,c)}function U(Z){d=Z,t(1,d)}function K(Z){g=Z,t(2,g)}function Y(Z){b=Z,t(6,b)}function X(Z){P=Z,t(7,P)}function ee(Z){_=Z,t(5,_)}return n.$$set=Z=>{"tabType"in Z&&t(8,s=Z.tabType),"qtyType"in Z&&t(17,o=Z.qtyType),"conditionalType"in Z&&t(9,a=Z.conditionalType),"postOnly"in Z&&t(0,c=Z.postOnly),"reduceOnly"in Z&&t(3,f=Z.reduceOnly),"closeOnTrigger"in Z&&t(4,p=Z.closeOnTrigger),"timeInForce"in Z&&t(1,d=Z.timeInForce),"quantity"in Z&&t(10,h=Z.quantity),"icebergInputType"in Z&&t(5,_=Z.icebergInputType),"priceEp"in Z&&t(11,v=Z.priceEp),"iceberg"in Z&&t(2,g=Z.iceberg),"icebergQty"in Z&&t(6,b=Z.icebergQty),"icebergOrders"in Z&&t(7,P=Z.icebergOrders)},n.$$.update=()=>{n.$$.dirty[0]&5&&t(13,I=c||g),n.$$.dirty[0]&4096&&C(i),n.$$.dirty[0]&3&&O(c,d),n.$$.dirty[0]&4&&V(g)},[c,d,g,f,p,_,b,P,s,a,h,v,i,I,r,l,T,o,w,D,L,$,N,z,H,R,F,U,K,Y,X,ee]}let xl=class extends tt{constructor(e){super(),nt(this,e,Uh,jh,et,{tabType:8,qtyType:17,conditionalType:9,postOnly:0,reduceOnly:3,closeOnTrigger:4,timeInForce:1,quantity:10,icebergInputType:5,priceEp:11,iceberg:2,icebergQty:6,icebergOrders:7},null,[-1,-1])}};function Wh(n){let e,t;return e=new C1({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p:rt,i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Gh(n){let e,t,i,r,l,s,o,a,c,f,p,d;return{c(){e=y("div"),t=y("button"),i=y("div"),r=B(n[1]),s=q(),o=y("button"),a=y("div"),c=B(n[2]),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=S(e);t=k(_,"BUTTON",{class:!0,"data-gac":!0,"data-gaa":!0,"data-gal":!0});var v=S(t);i=k(v,"DIV",{class:!0});var g=S(i);r=A(g,n[1]),g.forEach(m),v.forEach(m),s=M(_),o=k(_,"BUTTON",{class:!0,"data-gac":!0,"data-gaa":!0,"data-gal":!0});var b=S(o);a=k(b,"DIV",{class:!0});var P=S(a);c=A(P,n[2]),P.forEach(m),b.forEach(m),_.forEach(m),this.h()},h(){E(i,"class","rectangle wp100 ph8 f14 fw2 tc wsn ooo usn H-r7q4f"),E(t,"class",l="buy-btn df cp ga "+n[3]+"-buy H-r7q4f"),E(t,"data-gac","order.contract"),E(t,"data-gaa","link_click"),E(t,"data-gal","contract.place_order"),Te(t,"can-buy-btn",n[7].indexOf(n[4])>-1),Te(t,"close",n[5]),Te(t,"disabled-buy-btn",n[7].indexOf(n[4])<0),Te(t,"disabled",n[0]),E(a,"class","rectangle wp100 ph8 f14 fw2 tc wsn ooo usn H-r7q4f"),E(o,"class",f="sell-btn df cp ga "+n[3]+"-sell H-r7q4f"),E(o,"data-gac","order.contract"),E(o,"data-gaa","link_click"),E(o,"data-gal","contract.place_order"),Te(o,"can-sell-btn",n[7].indexOf(n[4])>-1),Te(o,"close",n[5]),Te(o,"disabled-sell-btn",n[7].indexOf(n[4])<0),Te(o,"disabled",n[0]),E(e,"class","wrap df H-r7q4f")},m(h,_){G(h,e,_),u(e,t),u(t,i),u(i,r),u(e,s),u(e,o),u(o,a),u(a,c),p||(d=[We(t,"click",n[8]),We(o,"click",n[9])],p=!0)},p(h,_){_&2&&W(r,h[1]),_&8&&l!==(l="buy-btn df cp ga "+h[3]+"-buy H-r7q4f")&&E(t,"class",l),_&152&&Te(t,"can-buy-btn",h[7].indexOf(h[4])>-1),_&40&&Te(t,"close",h[5]),_&152&&Te(t,"disabled-buy-btn",h[7].indexOf(h[4])<0),_&9&&Te(t,"disabled",h[0]),_&4&&W(c,h[2]),_&8&&f!==(f="sell-btn df cp ga "+h[3]+"-sell H-r7q4f")&&E(o,"class",f),_&152&&Te(o,"can-sell-btn",h[7].indexOf(h[4])>-1),_&40&&Te(o,"close",h[5]),_&152&&Te(o,"disabled-sell-btn",h[7].indexOf(h[4])<0),_&9&&Te(o,"disabled",h[0])},i:rt,o:rt,d(h){h&&m(e),p=!1,jt(d)}}}function Kh(n){let e,t,i,r;const l=[Gh,Wh],s=[];function o(a,c){return a[6]?0:1}return e=o(n),t=s[e]=l[e](n),{c(){t.c(),i=ut()},l(a){t.l(a),i=ut()},m(a,c){s[e].m(a,c),G(a,i,c),r=!0},p(a,[c]){let f=e;e=o(a),e===f?s[e].p(a,c):(ot(),j(s[f],1,1,()=>{s[f]=null}),at(),t=s[e],t?t.p(a,c):(t=s[e]=l[e](a),t.c()),Q(t,1),t.m(i.parentNode,i))},i(a){r||(Q(t),r=!0)},o(a){j(t),r=!1},d(a){s[e].d(a),a&&m(i)}}}function Xh(n,e,t){let i,r,l;J(n,Xt,b=>t(11,r=b)),J(n,Yn,b=>t(6,l=b));let{disabled:s=!1}=e,{buyText:o=""}=e,{sellText:a=""}=e,{type:c=""}=e,{placeOrderMode:f=Ut.Open}=e;const p=Kt(),d=["Listed","Suspend"];let h="Listed";function _(){!s&&p("buy")}function v(){!s&&p("sell")}function g(b){t(4,h=b.status)}return n.$$set=b=>{"disabled"in b&&t(0,s=b.disabled),"buyText"in b&&t(1,o=b.buyText),"sellText"in b&&t(2,a=b.sellText),"type"in b&&t(3,c=b.type),"placeOrderMode"in b&&t(10,f=b.placeOrderMode)},n.$$.update=()=>{n.$$.dirty&2048&&g(r),n.$$.dirty&1024&&t(5,i=f===Ut.Close)},[s,o,a,c,h,i,l,d,_,v,f,r]}let Sr=class extends tt{constructor(e){super(),nt(this,e,Xh,Kh,et,{disabled:0,buyText:1,sellText:2,type:3,placeOrderMode:10})}};const Ji={createStopTypesOptions(n,e){return[{value:"Limit",text:n(e.Limit)},{value:"Market",text:n(e.Market)}]},createTriggerOptions(n,e,t){return[{value:"ByLastPrice",text:n(e.LastPrice),className:t+"-last-price"},{value:"ByMarkPrice",text:n(e.MarkPrice),className:t+"-mark-price"}]},createShortTriggerOptions(n,e){return[{value:"ByLastPrice",text:n(e.LastPrice),displayText:n(e.Last)},{value:"ByMarkPrice",text:n(e.MarkPrice),displayText:n(e.Mark)}]},createTrailingStopOptions(n,e){return[{value:"value",text:n(e.Value)},{value:"ratio",text:n(e.Ratio)}]}};function Yh(n,e){if(n==="TakeProfit"){if(e==="Limit")return"LimitIfTouched";if(e==="Market")return"MarketIfTouched"}if(n==="StopLoss"){if(e==="Limit")return"StopLimit";if(e==="Market")return"Stop"}return""}const Uo={wRoi(n,e,t,i){const{leverageEr:r,avgEntryPriceEp:l,side:s}=i,{contractSide:o,ratioFactor:a}=t;return(n==="TakeProfit"?K1:X1)({side:s,percent:e,leverage:Re(r).div(a),contractSide:o,priceEp:l})},wPriceChange(n,e,t){const{side:i,avgEntryPriceEp:r}=t,l=Re(r).times(e);return n==="TakeProfit"?i==="Buy"?Re(r).plus(l):Re(r).minus(l):i==="Buy"?Re(r).minus(l):Re(r).plus(l)},wPnl(n,e,t,i){const{side:r,size:l,avgEntryPriceEp:s}=t,{contractSide:o,contractSize:a,priceFactor:c,valuePrecision:f,valueScale:p}=e;if(l<=0||i<=0)return s;const d=xe.floor(i,f,p),h=(n==="TakeProfit"?Y1:J1)(r,l,o,a,s,c,d);return h>0?Re(h).times(c):0},calcTriggerPrice(n,e,t,i,r){if(!t)return 0;const l={[Ln.Roi]:this.wRoi(n,t,e,i),[Ln.Pnl]:this.wPnl(n,e,i,t),[Ln.PriceChange]:this.wPriceChange(n,t,i)},s=di.convertTpSlKey(n),o=r[s],a=l[o],c=xe.roundPriceEp(a,e.tickSizeEp);return c>0?c:0},percentWRoi(n,e,t,i,r){const{contractSide:l,ratioFactor:s}=t,{leverageEr:o,avgEntryPriceEp:a,side:c}=i;if(e<=0||a<=0)return 0;const f=(n==="TakeProfit"?Z1:x1)({side:c,contractSide:l,targetPriceEp:e,priceEp:a,leverage:Number(Re(o).div(s))});return Re(f).times(r).round(0,1).abs()},percentWPnl(n,e,t){const{contractSide:i,contractSize:r,valueFactor:l,priceFactor:s,valuePrecision:o,valueScale:a}=n,{side:c,avgEntryPriceEp:f,size:p}=t,d=Xr({side:c,contractSide:i,contractSize:r,qty:p,entryPriceEp:f,exitPriceEp:e,factor:l,priceFactor:s});return Math.abs(d)},percentWPriceChange(n,e,t,i){const{avgEntryPriceEp:r}=e;if(!r||t<=0)return 0;const l=n==="TakeProfit"?(t-r)/r:(r-t)/r;return Re(l).times(i).round(1,1).abs()},calcPercent(n,e,t,i,r,l){if(!e)return 0;const s={[Ln.Roi]:this.percentWRoi(n,e,t,i,l),[Ln.Pnl]:this.percentWPnl(t,e,i),[Ln.PriceChange]:this.percentWPriceChange(n,i,e,l)},o=di.convertTpSlKey(n),a=r[o];return s[a]}};function Wo(n){let e;function t(l,s){return l[0]==="onOrder"?Zh:Jh}let i=t(n),r=i(n);return{c(){r.c(),e=ut()},l(l){r.l(l),e=ut()},m(l,s){r.m(l,s),G(l,e,s)},p(l,s){i===(i=t(l))&&r?r.p(l,s):(r.d(1),r=i(l),r&&(r.c(),r.m(e.parentNode,e)))},d(l){r.d(l),l&&m(e)}}}function Jh(n){let e,t,i=n[10](Je.TpslInfo,n[11](n[1],n[2],n[3],n[9],n[4],n[5],n[6],n[7],n[10]))+"",r,l,s,o=n[10](Je.ROI2)+"",a,c,f=n[8].roi+"",p,d;return{c(){e=y("div"),t=new Od(!1),r=q(),l=y("span"),s=B("("),a=B(o),c=B(": "),p=B(f),d=B(")"),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=S(e);t=Ld(_,!1),r=M(_),l=k(_,"SPAN",{class:!0});var v=S(l);s=A(v,"("),a=A(v,o),c=A(v,": "),p=A(v,f),d=A(v,")"),v.forEach(m),_.forEach(m),this.h()},h(){t.a=r,E(l,"class","roi"),Te(l,"buy",n[8].roiEr>0),Te(l,"sell",n[8].roiEr<0),E(e,"class","tip lh16 f12 fw2 T4")},m(h,_){G(h,e,_),t.m(i,e),u(e,r),u(e,l),u(l,s),u(l,a),u(l,c),u(l,p),u(l,d)},p(h,_){_&1790&&i!==(i=h[10](Je.TpslInfo,h[11](h[1],h[2],h[3],h[9],h[4],h[5],h[6],h[7],h[10]))+"")&&t.p(i),_&1024&&o!==(o=h[10](Je.ROI2)+"")&&W(a,o),_&256&&f!==(f=h[8].roi+"")&&W(p,f),_&256&&Te(l,"buy",h[8].roiEr>0),_&256&&Te(l,"sell",h[8].roiEr<0)},d(h){h&&m(e)}}}function Zh(n){let e,t=n[12](n[1],n[2],n[3],!1,0,n[5],n[6],n[7],n[10])+"";return{c(){e=y("div"),this.h()},l(i){e=k(i,"DIV",{class:!0});var r=S(e);r.forEach(m),this.h()},h(){E(e,"class","lh14 f12 fw2 T4 H-8ctxb0")},m(i,r){G(i,e,r),e.innerHTML=t},p(i,r){r&1262&&t!==(t=i[12](i[1],i[2],i[3],!1,0,i[5],i[6],i[7],i[10])+"")&&(e.innerHTML=t)},d(i){i&&m(e)}}}function xh(n){let e,t=(n[9]&&n[4]>0||!n[9]&&n[3]>0)&&Wo(n);return{c(){t&&t.c(),e=ut()},l(i){t&&t.l(i),e=ut()},m(i,r){t&&t.m(i,r),G(i,e,r)},p(i,[r]){i[9]&&i[4]>0||!i[9]&&i[3]>0?t?t.p(i,r):(t=Wo(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:rt,o:rt,d(i){t&&t.d(i),i&&m(e)}}}function e0(n,e,t){let i,r;J(n,dt,V=>t(10,r=V));let{styleType:l=""}=e,{type:s="TakeProfit"}=e,{contract:o=null}=e,{targetPosition:a=null}=e,{stopPxEp:c=0}=e,{limitStopPxEp:f=0}=e,{stopType:p}=e,{triggerType:d}=e,{percent:h=1}=e,{costEv:_=0}=e,{source:v}=e,g=0,b={roi:"-",roiEr:0};function P(V,O,w){const{contractSide:D,contractSize:L,valueFactor:$,priceFactor:N}=V,{side:z,avgEntryPriceEp:H,size:R}=O;return Xr({side:z,contractSide:D,contractSize:L,qty:R,entryPriceEp:H,exitPriceEp:w,factor:$,priceFactor:N})}function I(V,O,w,D,L,$,N,z,H){const{settleCurrency:R,valuePrecision:F,tickSizeEp:U,pricePrecision:K,priceScale:Y,valueScale:X}=V;t(16,g=P(V,O,D?L:w));const ee=Re(Math.abs(g)).mul(z),Z=xe.floor(ee,F,X);return{TriggerPriceType:H(N==="ByLastPrice"?Je.LastPrice:Je.MarkPrice),Direction:H(O.avgEntryPriceEp>w?Je.GoesDown:Je.GoesUp),Price:xe.floor(xe.roundPriceEp(w,U),K,Y),TPSL:H(s==="TakeProfit"?Je.TakeProfit:Je.StopLoss),OrderType:H($==="Limit"?Je.LimitOrder:Je.MarketOrder),ProfitLoss:H(g>0?Je.Profit:Je.Loss),Value:`<span class=${g>0?"up":"down"}>${Z}</span>`,Currency:R}}function T(V,O,w,D,L,$,N,z,H){const R=I(V,O,w,D,L,$,N,z,H);return`${H(s==="TakeProfit"?Je.TakeProfit:Je.StopLoss)+" "+H(s==="TakeProfit"?Je.EstimatedProfit:Je.EstimatedLoss)} ${R.Value} ${R.Currency}`}function C(V,O,w,D,L){const{assignedPosBalanceEv:$=0,value:N=0,leverageEr:z}=w,H=Re(z).div(L.ratioFactor),F={preOrder:D,order:N?N/H:0,position:$}[V]||0;if(F<=0)return;const U=O/F;t(8,b={roi:`${xe.floor(U,2,-2)}%`,roiEr:U})}return n.$$set=V=>{"styleType"in V&&t(0,l=V.styleType),"type"in V&&t(13,s=V.type),"contract"in V&&t(1,o=V.contract),"targetPosition"in V&&t(2,a=V.targetPosition),"stopPxEp"in V&&t(3,c=V.stopPxEp),"limitStopPxEp"in V&&t(4,f=V.limitStopPxEp),"stopType"in V&&t(5,p=V.stopType),"triggerType"in V&&t(6,d=V.triggerType),"percent"in V&&t(7,h=V.percent),"costEv"in V&&t(14,_=V.costEv),"source"in V&&t(15,v=V.source)},n.$$.update=()=>{n.$$.dirty&32&&t(9,i=p==="Limit"),n.$$.dirty&114694&&C(v,g,a,_,o)},[l,o,a,c,f,p,d,h,b,i,r,I,T,s,_,v,g]}let es=class extends tt{constructor(e){super(),nt(this,e,e0,xh,et,{styleType:0,type:13,contract:1,targetPosition:2,stopPxEp:3,limitStopPxEp:4,stopType:5,triggerType:6,percent:7,costEv:14,source:15})}};function t0(n){let e,t,i,r,l,s,o,a;function c(d){n[8](d)}function f(d){n[9](d)}let p={class:"limit-price f1",operation:!1,isInline:!1,options:Ji.createShortTriggerOptions(n[7],Je),label:n[7](n[6]?Je.TP:Je.SL),factor:n[2].priceFactor,maxPriceEp:n[2].maxPriceEp,precision:n[2].pricePrecision,scale:n[2].priceScale,tickSizeEp:n[2].tickSizeEp};return n[0]!==void 0&&(p.priceEp=n[0]),n[5]!==void 0&&(p.selectValue=n[5]),t=new yn({props:p}),De.push(()=>qe(t,"priceEp",c)),De.push(()=>qe(t,"selectValue",f)),o=new es({props:{styleType:"onOrder",contract:n[2],type:n[1],stopPxEp:n[0],targetPosition:n[3],triggerType:n[5]}}),{c(){e=y("div"),te(t.$$.fragment),s=q(),te(o.$$.fragment),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=S(e);re(t.$$.fragment,h),h.forEach(m),s=M(d),re(o.$$.fragment,d),this.h()},h(){E(e,"class",l="df mb8 "+n[4])},m(d,h){G(d,e,h),ne(t,e,null),G(d,s,h),ne(o,d,h),a=!0},p(d,[h]){const _={};h&128&&(_.options=Ji.createShortTriggerOptions(d[7],Je)),h&192&&(_.label=d[7](d[6]?Je.TP:Je.SL)),h&4&&(_.factor=d[2].priceFactor),h&4&&(_.maxPriceEp=d[2].maxPriceEp),h&4&&(_.precision=d[2].pricePrecision),h&4&&(_.scale=d[2].priceScale),h&4&&(_.tickSizeEp=d[2].tickSizeEp),!i&&h&1&&(i=!0,_.priceEp=d[0],Me(()=>i=!1)),!r&&h&32&&(r=!0,_.selectValue=d[5],Me(()=>r=!1)),t.$set(_),(!a||h&16&&l!==(l="df mb8 "+d[4]))&&E(e,"class",l);const v={};h&4&&(v.contract=d[2]),h&2&&(v.type=d[1]),h&1&&(v.stopPxEp=d[0]),h&8&&(v.targetPosition=d[3]),h&32&&(v.triggerType=d[5]),o.$set(v)},i(d){a||(Q(t.$$.fragment,d),Q(o.$$.fragment,d),a=!0)},o(d){j(t.$$.fragment,d),j(o.$$.fragment,d),a=!1},d(d){d&&m(e),ie(t),d&&m(s),ie(o,d)}}}function n0(n,e,t){let i,r;J(n,dt,v=>t(7,r=v));let{type:l="TakeProfit"}=e,{contract:s}=e,{targetPosition:o}=e,{stopPxEp:a=0}=e;const c=Kt();let f="ByMarkPrice",{class:p=""}=e;function d(v,g,b){if(g===0){c("change",{});return}c("change",{[v?"takeProfitEp":"stopLossEp"]:g,[v?"tpTrigger":"slTrigger"]:b})}function h(v){a=v,t(0,a)}function _(v){f=v,t(5,f)}return n.$$set=v=>{"type"in v&&t(1,l=v.type),"contract"in v&&t(2,s=v.contract),"targetPosition"in v&&t(3,o=v.targetPosition),"stopPxEp"in v&&t(0,a=v.stopPxEp),"class"in v&&t(4,p=v.class)},n.$$.update=()=>{n.$$.dirty&2&&t(6,i=l==="TakeProfit"),n.$$.dirty&97&&d(i,a,f)},[a,l,s,o,p,f,i,r,h,_]}let Go=class extends tt{constructor(e){super(),nt(this,e,n0,t0,et,{type:1,contract:2,targetPosition:3,stopPxEp:0,class:4})}};function i0(n){let e,t,i,r=n[2](yt.EntryPrice)+"",l,s,o,a,c,f,p,d=n[2](yt.LiqPrice)+"",h,_,v,g;return{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),s=q(),o=y("span"),a=B(n[1]),c=q(),f=y("div"),p=y("span"),h=B(d),_=q(),v=y("span"),g=B(n[0]),this.h()},l(b){e=k(b,"DIV",{class:!0});var P=S(e);t=k(P,"DIV",{class:!0});var I=S(t);i=k(I,"SPAN",{class:!0});var T=S(i);l=A(T,r),T.forEach(m),s=M(I),o=k(I,"SPAN",{class:!0});var C=S(o);a=A(C,n[1]),C.forEach(m),I.forEach(m),c=M(P),f=k(P,"DIV",{class:!0});var V=S(f);p=k(V,"SPAN",{class:!0});var O=S(p);h=A(O,d),O.forEach(m),_=M(V),v=k(V,"SPAN",{class:!0});var w=S(v);g=A(w,n[0]),w.forEach(m),V.forEach(m),P.forEach(m),this.h()},h(){E(i,"class","price-label ooo H-9gxoc1"),E(o,"class","price-box T1 tr H-9gxoc1"),E(t,"class","df aic"),E(p,"class","price-label ooo H-9gxoc1"),E(v,"class","price-box T1 tr H-9gxoc1"),E(f,"class","df aic"),E(e,"class","df jcsb aic f12 T3 lh20 ")},m(b,P){G(b,e,P),u(e,t),u(t,i),u(i,l),u(t,s),u(t,o),u(o,a),u(e,c),u(e,f),u(f,p),u(p,h),u(f,_),u(f,v),u(v,g)},p(b,[P]){P&4&&r!==(r=b[2](yt.EntryPrice)+"")&&W(l,r),P&2&&W(a,b[1]),P&4&&d!==(d=b[2](yt.LiqPrice)+"")&&W(h,d),P&1&&W(g,b[0])},i:rt,o:rt,d(b){b&&m(e)}}}function r0(n,e,t){let i,r;J(n,Xt,f=>t(5,i=f)),J(n,dt,f=>t(2,r=f));let{from:l="pos"}=e,{position:s=null}=e,{liqPrice:o="--"}=e,{entryPrice:a="--"}=e;function c(f,p,d){f==="pos"&&(t(1,a=d.avgEntryPrice),t(0,o=Tn(d.liquidationPrice,p.tickSize)))}return n.$$set=f=>{"from"in f&&t(3,l=f.from),"position"in f&&t(4,s=f.position),"liqPrice"in f&&t(0,o=f.liqPrice),"entryPrice"in f&&t(1,a=f.entryPrice)},n.$$.update=()=>{n.$$.dirty&56&&s&&c(l,i,s)},[o,a,r,l,s,i]}let ts=class extends tt{constructor(e){super(),nt(this,e,r0,i0,et,{from:3,position:4,liqPrice:0,entryPrice:1})}};const Nr=new Jn(l0());Nr.subscribe(n=>vn.updateContractStorage({tpSl:n}));function l0(){const n=vn.readContractStorage();return n&&n.tpSl?n.tpSl:{tp:Ln.Roi,sl:Ln.Roi}}function s0(n){let e,t=n[1](Je.ROI)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","T1")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&2&&t!==(t=r[1](Je.ROI)+"")&&W(i,t)},d(r){r&&m(e)}}}function o0(n){let e,t=n[1](Je.Pnl)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","T1")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&2&&t!==(t=r[1](Je.Pnl)+"")&&W(i,t)},d(r){r&&m(e)}}}function a0(n){let e,t=n[1](Je.PriceChange)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","T1")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&2&&t!==(t=r[1](Je.PriceChange)+"")&&W(i,t)},d(r){r&&m(e)}}}function c0(n){let e,t,i,r,l,s,o=n[1](Je.SetTriggerPriceRoi)+"",a,c,f,p,d,h,_,v=n[1](Je.SetTriggerPricePnl)+"",g,b,P,I,T,C,V,O=n[1](Je.SetTriggerPriceChange)+"",w,D;function L(F){n[6](F)}let $={class:"fw3 f16 T1 cp usn",value:Ln.Roi,$$slots:{default:[s0]},$$scope:{ctx:n}};n[0]!==void 0&&($.group=n[0]),i=new ki({props:$}),De.push(()=>qe(i,"group",L));function N(F){n[7](F)}let z={class:"fw3 f16 T1 cp usn",value:Ln.Pnl,$$slots:{default:[o0]},$$scope:{ctx:n}};n[0]!==void 0&&(z.group=n[0]),p=new ki({props:z}),De.push(()=>qe(p,"group",N));function H(F){n[8](F)}let R={class:"fw3 f16 T1 cp usn",value:Ln.PriceChange,$$slots:{default:[a0]},$$scope:{ctx:n}};return n[0]!==void 0&&(R.group=n[0]),I=new ki({props:R}),De.push(()=>qe(I,"group",H)),{c(){e=y("div"),t=y("div"),te(i.$$.fragment),l=q(),s=y("div"),a=B(o),c=q(),f=y("div"),te(p.$$.fragment),h=q(),_=y("div"),g=B(v),b=q(),P=y("div"),te(I.$$.fragment),C=q(),V=y("div"),w=B(O),this.h()},l(F){e=k(F,"DIV",{class:!0});var U=S(e);t=k(U,"DIV",{});var K=S(t);re(i.$$.fragment,K),l=M(K),s=k(K,"DIV",{class:!0});var Y=S(s);a=A(Y,o),Y.forEach(m),K.forEach(m),c=M(U),f=k(U,"DIV",{class:!0});var X=S(f);re(p.$$.fragment,X),h=M(X),_=k(X,"DIV",{class:!0});var ee=S(_);g=A(ee,v),ee.forEach(m),X.forEach(m),b=M(U),P=k(U,"DIV",{class:!0});var Z=S(P);re(I.$$.fragment,Z),C=M(Z),V=k(Z,"DIV",{class:!0});var ue=S(V);w=A(ue,O),ue.forEach(m),Z.forEach(m),U.forEach(m),this.h()},h(){E(s,"class","ml24 mt4 f T2"),E(_,"class","ml24 mt4 T2"),E(f,"class","mt24"),E(V,"class","ml24 mt4 T2"),E(P,"class","mt24"),E(e,"class","body ph24")},m(F,U){G(F,e,U),u(e,t),ne(i,t,null),u(t,l),u(t,s),u(s,a),u(e,c),u(e,f),ne(p,f,null),u(f,h),u(f,_),u(_,g),u(e,b),u(e,P),ne(I,P,null),u(P,C),u(P,V),u(V,w),D=!0},p(F,U){const K={};U&2050&&(K.$$scope={dirty:U,ctx:F}),!r&&U&1&&(r=!0,K.group=F[0],Me(()=>r=!1)),i.$set(K),(!D||U&2)&&o!==(o=F[1](Je.SetTriggerPriceRoi)+"")&&W(a,o);const Y={};U&2050&&(Y.$$scope={dirty:U,ctx:F}),!d&&U&1&&(d=!0,Y.group=F[0],Me(()=>d=!1)),p.$set(Y),(!D||U&2)&&v!==(v=F[1](Je.SetTriggerPricePnl)+"")&&W(g,v);const X={};U&2050&&(X.$$scope={dirty:U,ctx:F}),!T&&U&1&&(T=!0,X.group=F[0],Me(()=>T=!1)),I.$set(X),(!D||U&2)&&O!==(O=F[1](Je.SetTriggerPriceChange)+"")&&W(w,O)},i(F){D||(Q(i.$$.fragment,F),Q(p.$$.fragment,F),Q(I.$$.fragment,F),D=!0)},o(F){j(i.$$.fragment,F),j(p.$$.fragment,F),j(I.$$.fragment,F),D=!1},d(F){F&&m(e),ie(i),ie(p),ie(I)}}}function f0(n){let e,t,i=n[1](Je.PriceSetting)+"",r,l,s,o,a,c;return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("i"),o=B(""),this.h()},l(f){e=k(f,"DIV",{class:!0,slot:!0});var p=S(e);t=k(p,"SPAN",{class:!0});var d=S(t);r=A(d,i),d.forEach(m),l=M(p),s=k(p,"I",{class:!0});var h=S(s);o=A(h,""),h.forEach(m),p.forEach(m),this.h()},h(){E(t,"class","b T1"),E(s,"class","iconfont cp f20 T3"),E(e,"class","p24 df aic jcsb f20"),E(e,"slot","header")},m(f,p){G(f,e,p),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),a||(c=We(s,"click",n[2]),a=!0)},p(f,p){p&2&&i!==(i=f[1](Je.PriceSetting)+"")&&W(r,i)},d(f){f&&m(e),a=!1,c()}}}function u0(n){let e,t=n[1](He.Cancel)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","fw3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&2&&t!==(t=r[1](He.Cancel)+"")&&W(i,t)},d(r){r&&m(e)}}}function p0(n){let e,t=n[1](He.Confirm)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","fw3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&2&&t!==(t=r[1](He.Confirm)+"")&&W(i,t)},d(r){r&&m(e)}}}function d0(n){let e,t,i,r,l;return t=new Ht({props:{class:"fw3",$$slots:{default:[u0]},$$scope:{ctx:n}}}),t.$on("click",n[2]),r=new Ht({props:{type:"primary",$$slots:{default:[p0]},$$scope:{ctx:n}}}),r.$on("click",n[3]),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);re(t.$$.fragment,o),i=M(o),re(r.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","p24 df aic jcfe mt8"),E(e,"slot","footer")},m(s,o){G(s,e,o),ne(t,e,null),u(e,i),ne(r,e,null),l=!0},p(s,o){const a={};o&2050&&(a.$$scope={dirty:o,ctx:s}),t.$set(a);const c={};o&2050&&(c.$$scope={dirty:o,ctx:s}),r.$set(c)},i(s){l||(Q(t.$$.fragment,s),Q(r.$$.fragment,s),l=!0)},o(s){j(t.$$.fragment,s),j(r.$$.fragment,s),l=!1},d(s){s&&m(e),ie(t),ie(r)}}}function m0(n){let e,t;return e=new bn({props:{style:"width:480px; max-width: 480px;",$$slots:{footer:[d0],header:[f0],default:[c0]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&2051&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function h0(n,e,t){let i,r;J(n,Nr,_=>t(5,i=_)),J(n,dt,_=>t(1,r=_));const l=Kt();let{type:s}=e,o="ROI";function a(){l("close")}function c(){const _=di.convertTpSlKey(s),v=Object.assign(Object.assign({},i),{[_]:o});Nr.next(v),vn.updateContractStorage({tpSl:v}),l("close")}function f(_,v){const g=di.convertTpSlKey(_);t(0,o=v[g])}function p(_){o=_,t(0,o)}function d(_){o=_,t(0,o)}function h(_){o=_,t(0,o)}return n.$$set=_=>{"type"in _&&t(4,s=_.type)},n.$$.update=()=>{n.$$.dirty&48&&f(s,i)},[o,r,a,c,s,i,p,d,h]}let _0=class extends tt{constructor(e){super(),nt(this,e,h0,m0,et,{type:4})}};function g0(n){let e,t,i,r,l,s,o,a,c,f,p,d;return{c(){e=y("div"),t=y("span"),i=B("-"),r=q(),l=y("div"),s=y("span"),o=B(n[1]),a=q(),c=y("i"),f=B(""),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=S(e);t=k(_,"SPAN",{});var v=S(t);i=A(v,"-"),v.forEach(m),r=M(_),l=k(_,"DIV",{class:!0});var g=S(l);s=k(g,"SPAN",{class:!0});var b=S(s);o=A(b,n[1]),b.forEach(m),a=M(g),c=k(g,"I",{class:!0});var P=S(c);f=A(P,""),P.forEach(m),g.forEach(m),_.forEach(m),this.h()},h(){E(s,"class","ml4"),E(c,"class","iconfont T2 fw2"),E(l,"class","price-setting"),E(e,"class","df aic ml8 T1 cp")},m(h,_){G(h,e,_),u(e,t),u(t,i),u(e,r),u(e,l),u(l,s),u(s,o),u(l,a),u(l,c),u(c,f),p||(d=We(l,"click",function(){Tt(n[2](n[0]))&&n[2](n[0]).apply(this,arguments)}),p=!0)},p(h,[_]){n=h,_&2&&W(o,n[1])},i:rt,o:rt,d(h){h&&m(e),p=!1,d()}}}function v0(n,e,t){let i,r;J(n,dt,c=>t(3,i=c)),J(n,Nr,c=>t(4,r=c));let{type:l}=e,s="-";function o(c,f,p){const d=di.convertTpSlKey(f);t(1,s=p(Je[c[d]]))}function a(c){return function(){en.create(_0,{type:c})}}return n.$$set=c=>{"type"in c&&t(0,l=c.type)},n.$$.update=()=>{n.$$.dirty&25&&o(r,l,i)},[l,s,a,i,r]}let b0=class extends tt{constructor(e){super(),nt(this,e,v0,g0,et,{type:0})}};function E0(n){let e,t,i;const r=[{class:"tpsl-percent ml12"},{disabled:!n[1]},{operation:!1},n[2]];function l(o){n[8](o)}let s={};for(let o=0;o<r.length;o+=1)s=pn(s,r[o]);return n[0]!==void 0&&(s.valueEx=n[0]),e=new Pr({props:s}),De.push(()=>qe(e,"valueEx",l)),e.$on("valueChange",n[3]),{c(){te(e.$$.fragment)},l(o){re(e.$$.fragment,o)},m(o,a){ne(e,o,a),i=!0},p(o,[a]){const c=a&6?dn(r,[r[0],a&2&&{disabled:!o[1]},r[2],a&4&&mn(o[2])]):{};!t&&a&1&&(t=!0,c.valueEx=o[0],Me(()=>t=!1)),e.$set(c)},i(o){i||(Q(e.$$.fragment,o),i=!0)},o(o){j(e.$$.fragment,o),i=!1},d(o){ie(e,o)}}}function y0(n,e,t){let i,r;J(n,dt,_=>t(6,i=_)),J(n,Nr,_=>t(7,r=_));let{type:l}=e,{contract:s}=e,{checked:o}=e,{percent:a=0}=e;const c=Kt();let f={precision:0,scale:0,factor:1,minEx:0,unit:"%",placeholder:"",tickSizeEx:1};function p(){c("percent-change",a)}function d(_,v,g,b){const P=di.convertTpSlKey(_),I=g[P];if(I===Ln.Roi&&t(2,f={precision:0,scale:0,factor:1,minEx:0,unit:"%",placeholder:"ROI",tickSizeEx:1}),I===Ln.Pnl){const{settleCurrency:T,valuePrecision:C,valueFactor:V,valueScale:O}=v,w=Number(Re(10).pow(-C).times(V));t(2,f={precision:C,scale:O,factor:V,minEx:0,tickSizeEx:w,unit:T,placeholder:"Pnl"})}I===Ln.PriceChange&&t(2,f={precision:2,scale:0,factor:1,minEx:0,tickSizeEx:.01,unit:"%",placeholder:b(Je[P==="tp"?"Increase":"Decrease"])})}function h(_){a=_,t(0,a)}return n.$$set=_=>{"type"in _&&t(4,l=_.type),"contract"in _&&t(5,s=_.contract),"checked"in _&&t(1,o=_.checked),"percent"in _&&t(0,a=_.percent)},n.$$.update=()=>{n.$$.dirty&240&&d(l,s,r,i)},[a,o,f,p,l,s,i,r,h]}let k0=class extends tt{constructor(e){super(),nt(this,e,y0,E0,et,{type:4,contract:5,checked:1,percent:0})}};function P0(n){let e,t=n[17](n[1]==="TakeProfit"?Je.TakeProfit:Je.StopLoss)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ml8 T1")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&131074&&t!==(t=r[17](r[1]==="TakeProfit"?Je.TakeProfit:Je.StopLoss)+"")&&W(i,t)},d(r){r&&m(e)}}}function Ko(n){let e,t,i;return t=new yp({props:{disabled:!n[9],percents:n[22],round:!0,triangle:!0}}),t.$on("change",n[27]),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);re(t.$$.fragment,l),l.forEach(m),this.h()},h(){E(e,"class","mt12 pr")},m(r,l){G(r,e,l),ne(t,e,null),i=!0},p(r,l){const s={};l[0]&512&&(s.disabled=!r[9]),t.$set(s)},i(r){i||(Q(t.$$.fragment,r),i=!0)},o(r){j(t.$$.fragment,r),i=!1},d(r){r&&m(e),ie(t)}}}function Xo(n){let e,t,i,r,l,s,o;const a=[{disabled:!n[9]},{label:n[17](He.Size)},{class:"quantity mt12"},{isInline:!1},{operation:!1},{unit:n[21]},n[20]];function c(h){n[49](h)}let f={};for(let h=0;h<a.length;h+=1)f=pn(f,a[h]);n[14]!==void 0&&(f.valueEx=n[14]),e=new Pr({props:f}),De.push(()=>qe(e,"valueEx",c)),e.$on("valueChange",n[29]);function p(h){n[50](h)}let d={type:"quantity",disabled:!n[9]};return n[19]!==void 0&&(d.value=n[19]),l=new ji({props:d}),De.push(()=>qe(l,"value",p)),l.$on("change",n[30]),{c(){te(e.$$.fragment),i=q(),r=y("div"),te(l.$$.fragment),this.h()},l(h){re(e.$$.fragment,h),i=M(h),r=k(h,"DIV",{class:!0});var _=S(r);re(l.$$.fragment,_),_.forEach(m),this.h()},h(){E(r,"class","mt32 H-1kjy096")},m(h,_){ne(e,h,_),G(h,i,_),G(h,r,_),ne(l,r,null),o=!0},p(h,_){const v=_[0]&3277312?dn(a,[_[0]&512&&{disabled:!h[9]},_[0]&131072&&{label:h[17](He.Size)},a[2],a[3],a[4],_[0]&2097152&&{unit:h[21]},_[0]&1048576&&mn(h[20])]):{};!t&&_[0]&16384&&(t=!0,v.valueEx=h[14],Me(()=>t=!1)),e.$set(v);const g={};_[0]&512&&(g.disabled=!h[9]),!s&&_[0]&524288&&(s=!0,g.value=h[19],Me(()=>s=!1)),l.$set(g)},i(h){o||(Q(e.$$.fragment,h),Q(l.$$.fragment,h),o=!0)},o(h){j(e.$$.fragment,h),j(l.$$.fragment,h),o=!1},d(h){ie(e,h),h&&m(i),h&&m(r),ie(l)}}}function Yo(n){let e,t,i,r,l;const s=[C0,S0],o=[];function a(f,p){return f[11]==="Limit"?0:1}t=a(n),i=o[t]=s[t](n);let c=n[4]==="Partial"&&Jo(n);return{c(){e=y("div"),i.c(),r=q(),c&&c.c(),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=S(e);i.l(p),r=M(p),c&&c.l(p),p.forEach(m),this.h()},h(){E(e,"class","df jcsb aic mt16")},m(f,p){G(f,e,p),o[t].m(e,null),u(e,r),c&&c.m(e,null),l=!0},p(f,p){let d=t;t=a(f),t===d?o[t].p(f,p):(ot(),j(o[d],1,1,()=>{o[d]=null}),at(),i=o[t],i?i.p(f,p):(i=o[t]=s[t](f),i.c()),Q(i,1),i.m(e,r)),f[4]==="Partial"?c?c.p(f,p):(c=Jo(f),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(f){l||(Q(i),l=!0)},o(f){j(i),l=!1},d(f){f&&m(e),o[t].d(),c&&c.d()}}}function S0(n){let e;return{c(){e=y("div")},l(t){e=k(t,"DIV",{}),S(e).forEach(m)},m(t,i){G(t,e,i)},p:rt,i:rt,o:rt,d(t){t&&m(e)}}}function C0(n){let e,t,i;function r(s){n[51](s)}let l={class:"f12",disabled:!n[9],$$slots:{default:[T0]},$$scope:{ctx:n}};return n[13]!==void 0&&(l.checked=n[13]),e=new Pn({props:l}),De.push(()=>qe(e,"checked",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o[0]&512&&(a.disabled=!s[9]),o[0]&131072|o[2]&32&&(a.$$scope={dirty:o,ctx:s}),!t&&o[0]&8192&&(t=!0,a.checked=s[13],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function T0(n){let e,t=n[17](Ye.PostOnly)+"",i,r,l,s;return{c(){e=y("span"),i=B(t),this.h()},l(o){e=k(o,"SPAN",{class:!0});var a=S(e);i=A(a,t),a.forEach(m),this.h()},h(){E(e,"class","ml8 fw2 T1 tdud")},m(o,a){G(o,e,a),u(e,i),l||(s=Wt(r=Gt.call(null,e,{text:n[17](vt.PostOnly),showDelay:800})),l=!0)},p(o,a){a[0]&131072&&t!==(t=o[17](Ye.PostOnly)+"")&&W(i,t),r&&Tt(r.update)&&a[0]&131072&&r.update.call(null,{text:o[17](vt.PostOnly),showDelay:800})},d(o){o&&m(e),l=!1,s()}}}function Jo(n){let e,t=n[17](Je.AvailableSize)+"",i,r,l,s,o,a;return{c(){e=y("span"),i=B(t),r=q(),l=y("span"),s=B(n[16]),o=q(),a=B(n[21]),this.h()},l(c){e=k(c,"SPAN",{class:!0});var f=S(e);i=A(f,t),r=M(f),l=k(f,"SPAN",{class:!0});var p=S(l);s=A(p,n[16]),o=M(p),a=A(p,n[21]),p.forEach(m),f.forEach(m),this.h()},h(){E(l,"class","T1"),E(e,"class","f12")},m(c,f){G(c,e,f),u(e,i),u(e,r),u(e,l),u(l,s),u(l,o),u(l,a)},p(c,f){f[0]&131072&&t!==(t=c[17](Je.AvailableSize)+"")&&W(i,t),f[0]&65536&&W(s,c[16]),f[0]&2097152&&W(a,c[21])},d(c){c&&m(e)}}}function w0(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,V,O,w,D,L,$,N,z,H,R,F;function U(x){n[43](x)}let K={disabled:n[5],class:n[1]==="TakeProfit"?"take-profit-checkbox":"stop-loss-checkbox",$$slots:{default:[P0]},$$scope:{ctx:n}};n[9]!==void 0&&(K.checked=n[9]),r=new Pn({props:K}),De.push(()=>qe(r,"checked",U)),r.$on("change",n[28]),o=new b0({props:{type:n[1]}});function Y(x){n[44](x)}let X={disabled:n[5],options:Ji.createTriggerOptions(n[17],Je,n[1]==="TakeProfit"?"take-profit":"stop-loss")};n[10]!==void 0&&(X.value=n[10]),c=new gp({props:X}),De.push(()=>qe(c,"value",Y));function ee(x){n[45](x)}let Z={class:"limit-price auto-grow",disabled:!n[9],factor:n[2].priceFactor,label:n[17](n[1]==="TakeProfit"?Je.TP:Je.SL)+" "+n[17](Je.TriggerPrice),maxPriceEp:n[2].maxPriceEp,operation:!1,precision:n[2].pricePrecision,scale:n[2].priceScale,tickSizeEp:n[2].tickSizeEp,unit:n[2].quoteCurrency};n[0]!==void 0&&(Z.priceEp=n[0]),h=new yn({props:Z}),De.push(()=>qe(h,"priceEp",ee)),h.$on("valueChange",n[24]);function ue(x){n[46](x)}let ce={type:n[1],contract:n[2],checked:n[9]};n[18]!==void 0&&(ce.percent=n[18]),g=new k0({props:ce}),De.push(()=>qe(g,"percent",ue)),g.$on("percent-change",n[26]);let pe=n[15]&&Ko(n);function me(x){n[47](x)}let oe={class:"limit-price auto-grow",disabled:!n[9]||n[11]==="Market",factor:n[2].priceFactor,label:n[17](n[1]==="TakeProfit"?Je.TP:Je.SL)+" "+n[17](Je.OrderPrice),maxPriceEp:n[2].maxPriceEp,operation:!1,precision:n[2].pricePrecision,scale:n[2].priceScale,tickSizeEp:n[2].tickSizeEp,unit:n[11]==="Market"?n[17](Ye.Market):n[2].quoteCurrency};n[12]!==void 0&&(oe.priceEp=n[12]),C=new yn({props:oe}),De.push(()=>qe(C,"priceEp",me)),C.$on("valueChange",n[25]);function ke(x){n[48](x)}let Le={class:"order-type ml12 "+(n[1]==="TakeProfit"?"take-profit-select":"stop-loss-select"),disabled:!n[9],options:Ji.createStopTypesOptions(n[17],Ye,n[1]==="TakeProfit"?"take-profit":"stop-loss")};n[11]!==void 0&&(Le.value=n[11]),w=new Yr({props:Le}),De.push(()=>qe(w,"value",ke)),w.$on("change",n[23]);let ge=n[4]==="Partial"&&Xo(n),ae=(n[11]==="Limit"||n[4]==="Partial")&&Yo(n);return H=new es({props:{contract:n[2],costEv:n[6],source:n[7],limitStopPxEp:n[12],percent:n[4]==="Partial"?n[19]/100:1,stopPxEp:n[0],stopType:n[11],targetPosition:n[3],triggerType:n[10],type:n[1]}}),{c(){e=y("div"),t=y("div"),i=y("div"),te(r.$$.fragment),s=q(),te(o.$$.fragment),a=q(),te(c.$$.fragment),p=q(),d=y("div"),te(h.$$.fragment),v=q(),te(g.$$.fragment),P=q(),pe&&pe.c(),I=q(),T=y("div"),te(C.$$.fragment),O=q(),te(w.$$.fragment),L=q(),ge&&ge.c(),$=q(),ae&&ae.c(),N=q(),z=y("div"),te(H.$$.fragment),this.h()},l(x){e=k(x,"DIV",{class:!0});var le=S(e);t=k(le,"DIV",{class:!0});var fe=S(t);i=k(fe,"DIV",{class:!0});var Se=S(i);re(r.$$.fragment,Se),s=M(Se),re(o.$$.fragment,Se),Se.forEach(m),a=M(fe),re(c.$$.fragment,fe),fe.forEach(m),p=M(le),d=k(le,"DIV",{class:!0});var Pe=S(d);re(h.$$.fragment,Pe),v=M(Pe),re(g.$$.fragment,Pe),Pe.forEach(m),P=M(le),pe&&pe.l(le),I=M(le),T=k(le,"DIV",{class:!0});var Ce=S(T);re(C.$$.fragment,Ce),O=M(Ce),re(w.$$.fragment,Ce),Ce.forEach(m),L=M(le),ge&&ge.l(le),$=M(le),ae&&ae.l(le),N=M(le),z=k(le,"DIV",{class:!0});var Ee=S(z);re(H.$$.fragment,Ee),Ee.forEach(m),le.forEach(m),this.h()},h(){E(i,"class","df aic fw3"),E(t,"class","df jcsb"),E(d,"class","row-wrap tp mt12 H-1kjy096"),E(T,"class","row-wrap mt12 H-1kjy096"),E(z,"class","mt12"),E(e,"class",R="tpsl-form T3 "+n[8]+" H-1kjy096")},m(x,le){G(x,e,le),u(e,t),u(t,i),ne(r,i,null),u(i,s),ne(o,i,null),u(t,a),ne(c,t,null),u(e,p),u(e,d),ne(h,d,null),u(d,v),ne(g,d,null),u(e,P),pe&&pe.m(e,null),u(e,I),u(e,T),ne(C,T,null),u(T,O),ne(w,T,null),u(e,L),ge&&ge.m(e,null),u(e,$),ae&&ae.m(e,null),u(e,N),u(e,z),ne(H,z,null),F=!0},p(x,le){const fe={};le[0]&32&&(fe.disabled=x[5]),le[0]&2&&(fe.class=x[1]==="TakeProfit"?"take-profit-checkbox":"stop-loss-checkbox"),le[0]&131074|le[2]&32&&(fe.$$scope={dirty:le,ctx:x}),!l&&le[0]&512&&(l=!0,fe.checked=x[9],Me(()=>l=!1)),r.$set(fe);const Se={};le[0]&2&&(Se.type=x[1]),o.$set(Se);const Pe={};le[0]&32&&(Pe.disabled=x[5]),le[0]&131074&&(Pe.options=Ji.createTriggerOptions(x[17],Je,x[1]==="TakeProfit"?"take-profit":"stop-loss")),!f&&le[0]&1024&&(f=!0,Pe.value=x[10],Me(()=>f=!1)),c.$set(Pe);const Ce={};le[0]&512&&(Ce.disabled=!x[9]),le[0]&4&&(Ce.factor=x[2].priceFactor),le[0]&131074&&(Ce.label=x[17](x[1]==="TakeProfit"?Je.TP:Je.SL)+" "+x[17](Je.TriggerPrice)),le[0]&4&&(Ce.maxPriceEp=x[2].maxPriceEp),le[0]&4&&(Ce.precision=x[2].pricePrecision),le[0]&4&&(Ce.scale=x[2].priceScale),le[0]&4&&(Ce.tickSizeEp=x[2].tickSizeEp),le[0]&4&&(Ce.unit=x[2].quoteCurrency),!_&&le[0]&1&&(_=!0,Ce.priceEp=x[0],Me(()=>_=!1)),h.$set(Ce);const Ee={};le[0]&2&&(Ee.type=x[1]),le[0]&4&&(Ee.contract=x[2]),le[0]&512&&(Ee.checked=x[9]),!b&&le[0]&262144&&(b=!0,Ee.percent=x[18],Me(()=>b=!1)),g.$set(Ee),x[15]?pe?(pe.p(x,le),le[0]&32768&&Q(pe,1)):(pe=Ko(x),pe.c(),Q(pe,1),pe.m(e,I)):pe&&(ot(),j(pe,1,1,()=>{pe=null}),at());const Ie={};le[0]&2560&&(Ie.disabled=!x[9]||x[11]==="Market"),le[0]&4&&(Ie.factor=x[2].priceFactor),le[0]&131074&&(Ie.label=x[17](x[1]==="TakeProfit"?Je.TP:Je.SL)+" "+x[17](Je.OrderPrice)),le[0]&4&&(Ie.maxPriceEp=x[2].maxPriceEp),le[0]&4&&(Ie.precision=x[2].pricePrecision),le[0]&4&&(Ie.scale=x[2].priceScale),le[0]&4&&(Ie.tickSizeEp=x[2].tickSizeEp),le[0]&133124&&(Ie.unit=x[11]==="Market"?x[17](Ye.Market):x[2].quoteCurrency),!V&&le[0]&4096&&(V=!0,Ie.priceEp=x[12],Me(()=>V=!1)),C.$set(Ie);const ve={};le[0]&2&&(ve.class="order-type ml12 "+(x[1]==="TakeProfit"?"take-profit-select":"stop-loss-select")),le[0]&512&&(ve.disabled=!x[9]),le[0]&131074&&(ve.options=Ji.createStopTypesOptions(x[17],Ye,x[1]==="TakeProfit"?"take-profit":"stop-loss")),!D&&le[0]&2048&&(D=!0,ve.value=x[11],Me(()=>D=!1)),w.$set(ve),x[4]==="Partial"?ge?(ge.p(x,le),le[0]&16&&Q(ge,1)):(ge=Xo(x),ge.c(),Q(ge,1),ge.m(e,$)):ge&&(ot(),j(ge,1,1,()=>{ge=null}),at()),x[11]==="Limit"||x[4]==="Partial"?ae?(ae.p(x,le),le[0]&2064&&Q(ae,1)):(ae=Yo(x),ae.c(),Q(ae,1),ae.m(e,N)):ae&&(ot(),j(ae,1,1,()=>{ae=null}),at());const de={};le[0]&4&&(de.contract=x[2]),le[0]&64&&(de.costEv=x[6]),le[0]&128&&(de.source=x[7]),le[0]&4096&&(de.limitStopPxEp=x[12]),le[0]&524304&&(de.percent=x[4]==="Partial"?x[19]/100:1),le[0]&1&&(de.stopPxEp=x[0]),le[0]&2048&&(de.stopType=x[11]),le[0]&8&&(de.targetPosition=x[3]),le[0]&1024&&(de.triggerType=x[10]),le[0]&2&&(de.type=x[1]),H.$set(de),(!F||le[0]&256&&R!==(R="tpsl-form T3 "+x[8]+" H-1kjy096"))&&E(e,"class",R)},i(x){F||(Q(r.$$.fragment,x),Q(o.$$.fragment,x),Q(c.$$.fragment,x),Q(h.$$.fragment,x),Q(g.$$.fragment,x),Q(pe),Q(C.$$.fragment,x),Q(w.$$.fragment,x),Q(ge),Q(ae),Q(H.$$.fragment,x),F=!0)},o(x){j(r.$$.fragment,x),j(o.$$.fragment,x),j(c.$$.fragment,x),j(h.$$.fragment,x),j(g.$$.fragment,x),j(pe),j(C.$$.fragment,x),j(w.$$.fragment,x),j(ge),j(ae),j(H.$$.fragment,x),F=!1},d(x){x&&m(e),ie(r),ie(o),ie(c),ie(h),ie(g),pe&&pe.d(),ie(C),ie(w),ge&&ge.d(),ae&&ae.d(),ie(H)}}}function I0(n,e,t){let i,r,l,s,o,a,c,f,p,d,h;J(n,Nr,ye=>t(40,f=ye)),J(n,dt,ye=>t(17,p=ye)),J(n,An,ye=>t(41,d=ye)),J(n,zn,ye=>t(42,h=ye));let{type:_}=e,{contract:v}=e,{market:g}=e,{targetPosition:b}=e,{order:P=null}=e,{closeMode:I="Partial"}=e,{availableSize:T}=e,{form:C}=e,{disabled:V=!1}=e,{trackWhenSubmit:O=()=>{pi.track("tpsl_slider_submit",{type:_,percent:K})}}=e,{costEv:w=0}=e,{source:D}=e,{stopPxEp:L=0}=e;const $=_==="TakeProfit"?Es.createTakeProfitPercents():Es.createStopLossPercents(),N=Kt();let{class:z=""}=e,H=!V,R="ByMarkPrice",F="Limit",U=0,K=0,Y=!1,X=0,ee=100,Z=!1,ue=100,ce=0;function pe(ye,Ke,Qe,ze){return!Qe||!ze?0:Number(Qt.convert(ye,Ke,Qe,ze.avgEntryPrice))}function me(ye){x(F,L,U,ye)}function oe(ye){if(!ye){t(11,F="Market"),t(18,K=0),D!=="tv"&&t(0,L=0),t(12,U=0),t(14,X=Re(ce).times(r)),t(19,ee=ce===0?0:100);return}t(9,H=!0),t(11,F=ii.isMarketOrder(ye.ordType)?"Market":"Limit"),t(0,L=ye.stopPxEp||0),t(10,R=["ByMarkPrice","ByMarkPriceLimit"].includes(ye.trigger)?"ByMarkPrice":"ByLastPrice"),ge({detail:L}),t(12,U=F==="Limit"?ye.priceEp:0),t(14,X=Number(Qt.convert(v,i,ye.orderQty||0,b.avgEntryPrice))*r),t(19,ee=ce===0?0:100),t(13,Y=ye.timeInForce==="PostOnly"),ve()}function ke(ye){ye==="Market"&&t(13,Y=!1)}function Le(ye){t(12,U=ye.detail==="Limit"?L:0)}function ge(ye){t(0,L=ye.detail),x(F,L,U,f)}function ae(ye){t(12,U=ye.detail),x(F,L,U,f)}function x(ye,Ke,Qe,ze){const Ue=ye==="Limit"?Qe:Ke;t(18,K=Uo.calcPercent(_,Ue,v,b,ze,ue))}function le(ye){try{const Ke=Uo.calcTriggerPrice(_,v,ye,b,f),Qe=Ke>0?Ke:0;if(F==="Limit"?t(12,U=Qe):t(0,L=Qe),L<0)throw new Error("less than zero")}catch{t(0,L=0)}}function fe(ye,Ke,Qe,ze,Ue,st,Oe){ze.type==="Perpetual"&&ze.contractSide<0&&(ye=ye===we.Cont?we.Cont:we.Base);const it=ei(ye,Ke,Qe,ze,Ue,st);return Object.assign(Object.assign({},it),{maxEx:Number(Re(Oe).mul(r)),placeholder:""})}function Se(ye,Ke){let Qe;return ye.type==="Perpetual"&&(Qe=ye.qtyScale),ye.type==="PerpetualV2"&&(Qe=Ke===we.Base?ye.valueScale:ye.qtyScale),Math.pow(10,Qe)}function Pe(ye){const Ke=ye.detail/ue;le(Ke)}function Ce(ye){const Ke=ye.detail.value;t(18,K=Ke*ue),le(Ke),se(K)}function Ee(ye,Ke,Qe,ze,Ue,st,Oe,it,ct){if(!ye||!Qe){t(31,C=null);return}const ft=_e(Ue,st),_t={triggerType:it,stopPxEp:Qe,ordType:Yh(Ke,Oe),orderQty:I==="Entire"?0:ft,timeInForce:Oe==="Market"?"ImmediateOrCancel":"GoodTillCancel",type:Ke,percent:K,qtyPercentValue:ee,rawAvailableSizeWQtyType:ce};Oe==="Limit"&&(_t.priceEp=ze),ct&&(_t.timeInForce="PostOnly"),t(31,C=_t),setTimeout(()=>N("change",C),0)}function Ie(){oe(),t(31,C=null),N("change",C)}function ve(){t(19,ee=ce===0?0:Math.floor(Number(Re(X).div(r).div(ce).times(100))))}function de(){const ye=T===0?0:Re(ee).div(100).times(T).toNumber();t(14,X=Re(Qt.convert(v,i,ye,b.avgEntryPrice)).times(r))}function se(ye){pi.track("tpsl_slider_click",{type:_,percent:ye})}function he(ye,Ke){const Qe=di.convertTpSlKey(ye);t(15,Z=[Ln.Roi,Ln.PriceChange].includes(Ke[Qe]))}function _e(ye,Ke){const Qe=Re(ce).times(r).toNumber();return Ke>=Qe?ye:Lp(Ke,i,b.avgEntryPriceEp,v,!0)}function be(ye){H=ye,t(9,H)}function Ve(ye){R=ye,t(10,R)}function Be(ye){L=ye,t(0,L)}function Fe(ye){K=ye,t(18,K)}function $e(ye){U=ye,t(12,U)}function Ae(ye){F=ye,t(11,F)}function Ne(ye){X=ye,t(14,X)}function Ge(ye){ee=ye,t(19,ee)}function Xe(ye){Y=ye,t(13,Y)}return n.$$set=ye=>{"type"in ye&&t(1,_=ye.type),"contract"in ye&&t(2,v=ye.contract),"market"in ye&&t(32,g=ye.market),"targetPosition"in ye&&t(3,b=ye.targetPosition),"order"in ye&&t(33,P=ye.order),"closeMode"in ye&&t(4,I=ye.closeMode),"availableSize"in ye&&t(34,T=ye.availableSize),"form"in ye&&t(31,C=ye.form),"disabled"in ye&&t(5,V=ye.disabled),"trackWhenSubmit"in ye&&t(35,O=ye.trackWhenSubmit),"costEv"in ye&&t(6,w=ye.costEv),"source"in ye&&t(7,D=ye.source),"stopPxEp"in ye&&t(0,L=ye.stopPxEp),"class"in ye&&t(8,z=ye.class)},n.$$.update=()=>{n.$$.dirty[0]&4|n.$$.dirty[1]&3072&&t(36,i=v.type==="Perpetual"?h:d),n.$$.dirty[0]&4|n.$$.dirty[1]&32&&(r=Se(v,i)),n.$$.dirty[0]&12|n.$$.dirty[1]&40&&t(16,ce=pe(v,i,T,b)),n.$$.dirty[1]&4&&oe(P),n.$$.dirty[0]&2048&&ke(F),n.$$.dirty[0]&32259|n.$$.dirty[1]&8&&Ee(H,_,L,U,T,X,F,R,Y),n.$$.dirty[1]&2&&t(39,l=g.closeEp),n.$$.dirty[0]&4|n.$$.dirty[1]&256&&t(38,s=li(v,l)),n.$$.dirty[0]&4&&t(37,o=si(v)),n.$$.dirty[0]&4|n.$$.dirty[1]&32&&t(21,a=Qt.getUnit(v,i)),n.$$.dirty[0]&196612|n.$$.dirty[1]&224&&t(20,c=fe(i,p,Je,v,s,o,ce)),n.$$.dirty[0]&2|n.$$.dirty[1]&512&&he(_,f),n.$$.dirty[0]&32768&&(ue=Z?100:1),n.$$.dirty[1]&512&&me(f)},[L,_,v,b,I,V,w,D,z,H,R,F,U,Y,X,Z,ce,p,K,ee,c,a,$,Le,ge,ae,Pe,Ce,Ie,ve,de,C,g,P,T,O,i,o,s,l,f,d,h,be,Ve,Be,Fe,$e,Ae,Ne,Ge,Xe]}let nr=class extends tt{constructor(e){super(),nt(this,e,I0,w0,et,{type:1,contract:2,market:32,targetPosition:3,order:33,closeMode:4,availableSize:34,form:31,disabled:5,trackWhenSubmit:35,costEv:6,source:7,stopPxEp:0,class:8},null,[-1,-1,-1])}};function D0(n){let e,t,i,r,l=n[17](Je.LastPrice)+"",s,o,a,c,f,p,d,h=n[17](Je.MarkPrice)+"",_,v,g,b,P,I,T,C,V,O,w,D,L;I=new ts({props:{position:n[1],liqPrice:n[4],entryPrice:n[12],from:"place-order"}});function $(R){n[27](R)}let N={class:"mt20",type:"TakeProfit",contract:n[0],market:n[5],costEv:n[2],source:n[3],targetPosition:n[1],order:n[6],closeMode:"Entire",availableSize:n[14]};n[8]!==void 0&&(N.form=n[8]),C=new nr({props:N}),De.push(()=>qe(C,"form",$)),C.$on("change",n[28]);function z(R){n[29](R)}let H={class:"mt20",type:"StopLoss",contract:n[0],market:n[5],costEv:n[2],source:n[3],targetPosition:n[1],order:n[7],closeMode:"Entire",availableSize:n[13]};return n[10]!==void 0&&(H.form=n[10]),w=new nr({props:H}),De.push(()=>qe(w,"form",z)),w.$on("change",n[30]),{c(){e=y("div"),t=y("div"),i=y("div"),r=y("span"),s=B(l),o=q(),a=y("span"),c=B(n[16]),f=q(),p=y("div"),d=y("span"),_=B(h),v=q(),g=y("span"),b=B(n[15]),P=q(),te(I.$$.fragment),T=q(),te(C.$$.fragment),O=q(),te(w.$$.fragment),this.h()},l(R){e=k(R,"DIV",{class:!0});var F=S(e);t=k(F,"DIV",{class:!0});var U=S(t);i=k(U,"DIV",{class:!0});var K=S(i);r=k(K,"SPAN",{class:!0});var Y=S(r);s=A(Y,l),Y.forEach(m),o=M(K),a=k(K,"SPAN",{class:!0});var X=S(a);c=A(X,n[16]),X.forEach(m),K.forEach(m),f=M(U),p=k(U,"DIV",{class:!0});var ee=S(p);d=k(ee,"SPAN",{class:!0});var Z=S(d);_=A(Z,h),Z.forEach(m),v=M(ee),g=k(ee,"SPAN",{class:!0});var ue=S(g);b=A(ue,n[15]),ue.forEach(m),ee.forEach(m),U.forEach(m),P=M(F),re(I.$$.fragment,F),T=M(F),re(C.$$.fragment,F),O=M(F),re(w.$$.fragment,F),F.forEach(m),this.h()},h(){E(r,"class","price-label ooo H-1euhqhh"),E(a,"class","price-box tr T1 H-1euhqhh"),E(i,"class","df aic"),E(d,"class","price-label H-1euhqhh"),E(g,"class","price-box tr T1 H-1euhqhh"),E(p,"class","df aic"),E(t,"class","df jcsb T3 lh20 f12"),E(e,"class","body H-1euhqhh")},m(R,F){G(R,e,F),u(e,t),u(t,i),u(i,r),u(r,s),u(i,o),u(i,a),u(a,c),u(t,f),u(t,p),u(p,d),u(d,_),u(p,v),u(p,g),u(g,b),u(e,P),ne(I,e,null),u(e,T),ne(C,e,null),u(e,O),ne(w,e,null),L=!0},p(R,F){(!L||F[0]&131072)&&l!==(l=R[17](Je.LastPrice)+"")&&W(s,l),(!L||F[0]&65536)&&W(c,R[16]),(!L||F[0]&131072)&&h!==(h=R[17](Je.MarkPrice)+"")&&W(_,h),(!L||F[0]&32768)&&W(b,R[15]);const U={};F[0]&2&&(U.position=R[1]),F[0]&16&&(U.liqPrice=R[4]),F[0]&4096&&(U.entryPrice=R[12]),I.$set(U);const K={};F[0]&1&&(K.contract=R[0]),F[0]&32&&(K.market=R[5]),F[0]&4&&(K.costEv=R[2]),F[0]&8&&(K.source=R[3]),F[0]&2&&(K.targetPosition=R[1]),F[0]&64&&(K.order=R[6]),F[0]&16384&&(K.availableSize=R[14]),!V&&F[0]&256&&(V=!0,K.form=R[8],Me(()=>V=!1)),C.$set(K);const Y={};F[0]&1&&(Y.contract=R[0]),F[0]&32&&(Y.market=R[5]),F[0]&4&&(Y.costEv=R[2]),F[0]&8&&(Y.source=R[3]),F[0]&2&&(Y.targetPosition=R[1]),F[0]&128&&(Y.order=R[7]),F[0]&8192&&(Y.availableSize=R[13]),!D&&F[0]&1024&&(D=!0,Y.form=R[10],Me(()=>D=!1)),w.$set(Y)},i(R){L||(Q(I.$$.fragment,R),Q(C.$$.fragment,R),Q(w.$$.fragment,R),L=!0)},o(R){j(I.$$.fragment,R),j(C.$$.fragment,R),j(w.$$.fragment,R),L=!1},d(R){R&&m(e),ie(I),ie(C),ie(w)}}}function V0(n){let e,t,i=n[17](Je.TPSL2)+"",r,l,s,o,a,c;return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),s=y("i"),o=B(""),this.h()},l(f){e=k(f,"DIV",{class:!0,slot:!0});var p=S(e);t=k(p,"DIV",{class:!0});var d=S(t);r=A(d,i),d.forEach(m),l=M(p),s=k(p,"I",{class:!0});var h=S(s);o=A(h,""),h.forEach(m),p.forEach(m),this.h()},h(){E(t,"class","df aic jcc wsn fw3"),E(s,"class","iconfont cp f18"),E(e,"class","tpsl-header p24 lh24 df jcsb f20 T1 H-1euhqhh"),E(e,"slot","header")},m(f,p){G(f,e,p),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),a||(c=We(s,"click",n[19]),a=!0)},p(f,p){p[0]&131072&&i!==(i=f[17](Je.TPSL2)+"")&&W(r,i)},d(f){f&&m(e),a=!1,c()}}}function O0(n){let e,t=n[17](He.Cancel)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","f16 fw3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&131072&&t!==(t=r[17](He.Cancel)+"")&&W(i,t)},d(r){r&&m(e)}}}function L0(n){let e,t=n[17](He.Confirm)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","f16 fw3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&131072&&t!==(t=r[17](He.Confirm)+"")&&W(i,t)},d(r){r&&m(e)}}}function $0(n){let e,t,i,r,l;return t=new Ht({props:{$$slots:{default:[O0]},$$scope:{ctx:n}}}),t.$on("click",n[18]),r=new Ht({props:{type:"primary",$$slots:{default:[L0]},$$scope:{ctx:n}}}),r.$on("click",n[20]),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);re(t.$$.fragment,o),i=M(o),re(r.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","p24 tr"),E(e,"slot","footer")},m(s,o){G(s,e,o),ne(t,e,null),u(e,i),ne(r,e,null),l=!0},p(s,o){const a={};o[0]&131072|o[1]&128&&(a.$$scope={dirty:o,ctx:s}),t.$set(a);const c={};o[0]&131072|o[1]&128&&(c.$$scope={dirty:o,ctx:s}),r.$set(c)},i(s){l||(Q(t.$$.fragment,s),Q(r.$$.fragment,s),l=!0)},o(s){j(t.$$.fragment,s),j(r.$$.fragment,s),l=!1},d(s){s&&m(e),ie(t),ie(r)}}}function q0(n){let e,t;return e=new bn({props:{style:"width:520px;max-width:520px;",$$slots:{footer:[$0],header:[V0],default:[D0]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&262143|r[1]&128&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function M0(n,e,t){let i,r,l,s,o,a,c,f,p;J(n,dt,ce=>t(17,c=ce)),J(n,ri,ce=>t(25,f=ce)),J(n,br,ce=>t(26,p=ce));let{contract:d}=e,{position:h}=e,{closeMode:_="None"}=e,{submit:v=ce=>{}}=e,{formData:g=null}=e,{orderParams:b=null}=e,{costEv:P=0}=e,{source:I}=e,{liqPrice:T=""}=e;const C=Kt();let V=null,O=null,w=null,D=null,L=!1,$=null,N=!1;Lt(U);function z(ce,pe){let me=Re(0);const oe=Re(ce.size),ke=i[pe].Partial;if(i[pe].Entire.length===0){const ge=ke.reduce((ae,x)=>ae.plus(x.orderQty),Re(0));me=oe.minus(ge)}return me<0?0:me}function H(ce,pe){if(pe&&pe.has(ce.symbol)){t(5,w=pe.get(ce.symbol));return}t(5,w=null)}function R(){C("close")}function F(){C("close")}function U(){g&&(t(6,V={ordType:g.tpPxRp?"Limit":"Market",stopPxEp:g.takeProfitEp,priceEp:g.tpPxRp,trigger:g.tpTrigger,timeInForce:g.tpTimeInForce}),t(7,O={ordType:g.slPxRp?"Limit":"Market",stopPxEp:g.stopLossEp,priceEp:g.slPxRp,trigger:g.slTrigger,timeInForce:g.slTimeInForce}))}async function K(){if(!Y())return;const ce=Object.assign({},D?{takeProfitEp:D.stopPxEp,tpTrigger:D.triggerType,tpTimeInForce:D.timeInForce,tpPxRp:D.priceEp}:{},$?{stopLossEp:$.stopPxEp,slTrigger:$.triggerType,slTimeInForce:$.timeInForce,slPxRp:$.priceEp}:{});v(ce),C("close")}function Y(){return D&&(D.stopPxEp===0||["LimitIfTouched","StopLimit"].includes(D.ordType)&&!D.priceEp)?(Pt.send("toast","error",{message:c(Je.IncorrectTakeProfit)}),!1):$&&($.stopPxEp===0||["LimitIfTouched","StopLimit"].includes($.ordType)&&!$.priceEp)?(Pt.send("toast","error",{message:c(Je.IncorrectStopLoss)}),!1):!0}function X(ce){D=ce,t(8,D)}const ee=()=>t(9,L=!0);function Z(ce){$=ce,t(10,$)}const ue=()=>t(11,N=!0);return n.$$set=ce=>{"contract"in ce&&t(0,d=ce.contract),"position"in ce&&t(1,h=ce.position),"closeMode"in ce&&t(21,_=ce.closeMode),"submit"in ce&&t(22,v=ce.submit),"formData"in ce&&t(23,g=ce.formData),"orderParams"in ce&&t(24,b=ce.orderParams),"costEv"in ce&&t(2,P=ce.costEv),"source"in ce&&t(3,I=ce.source),"liqPrice"in ce&&t(4,T=ce.liqPrice)},n.$$.update=()=>{n.$$.dirty[0]&67108867&&(i=p(d.symbol,h.posSide)),n.$$.dirty[0]&33554433&&H(d,f),n.$$.dirty[0]&32&&t(16,r=w?w.close:0),n.$$.dirty[0]&32&&t(15,l=w?w.markPrice:0),n.$$.dirty[0]&2&&t(14,s=z(h,"tp")),n.$$.dirty[0]&2&&t(13,o=z(h,"sl")),n.$$.dirty[0]&16777217&&t(12,a=xe.floor(b.priceEp,d.pricePrecision,d.priceScale))},[d,h,P,I,T,w,V,O,D,L,$,N,a,o,s,l,r,c,R,F,K,_,v,g,b,f,p,X,ee,Z,ue]}let N0=class extends tt{constructor(e){super(),nt(this,e,M0,q0,et,{contract:0,position:1,closeMode:21,submit:22,formData:23,orderParams:24,costEv:2,source:3,liqPrice:4},null,[-1,-1])}};function Zo(n){let e,t,i,r,l=n[9](Je.TPSL2)+"",s,o,a,c,f,p,d,h,_,v,g=n[4]&&xo(n),b=n[5]&&ea(n),P=n[3].type==="PerpetualV2"&&ta(n),I=(n[0]||n[1])&&na(n);return{c(){e=y("div"),t=y("div"),i=y("div"),r=y("span"),s=B(l),o=q(),a=y("div"),g&&g.c(),c=q(),b&&b.c(),p=q(),P&&P.c(),d=q(),I&&I.c(),this.h()},l(T){e=k(T,"DIV",{});var C=S(e);t=k(C,"DIV",{class:!0});var V=S(t);i=k(V,"DIV",{class:!0});var O=S(i);r=k(O,"SPAN",{class:!0});var w=S(r);s=A(w,l),w.forEach(m),o=M(O),a=k(O,"DIV",{class:!0});var D=S(a);g&&g.l(D),c=M(D),b&&b.l(D),D.forEach(m),O.forEach(m),p=M(V),P&&P.l(V),V.forEach(m),d=M(C),I&&I.l(C),C.forEach(m),this.h()},h(){E(r,"class","f12"),E(a,"class","df ml12"),E(i,"class","df aic"),E(t,"class","df aic jcsb T3")},m(T,C){G(T,e,C),u(e,t),u(t,i),u(i,r),u(r,s),u(i,o),u(i,a),g&&g.m(a,null),u(a,c),b&&b.m(a,null),u(t,p),P&&P.m(t,null),u(e,d),I&&I.m(e,null),h=!0,_||(v=Wt(f=Gt.call(null,a,{text:n[9](Je.TheTpslWill),placement:"top"})),_=!0)},p(T,C){(!h||C[0]&512)&&l!==(l=T[9](Je.TPSL2)+"")&&W(s,l),T[4]?g?(g.p(T,C),C[0]&16&&Q(g,1)):(g=xo(T),g.c(),Q(g,1),g.m(a,c)):g&&(ot(),j(g,1,1,()=>{g=null}),at()),T[5]?b?(b.p(T,C),C[0]&32&&Q(b,1)):(b=ea(T),b.c(),Q(b,1),b.m(a,null)):b&&(ot(),j(b,1,1,()=>{b=null}),at()),f&&Tt(f.update)&&C[0]&512&&f.update.call(null,{text:T[9](Je.TheTpslWill),placement:"top"}),T[3].type==="PerpetualV2"?P?P.p(T,C):(P=ta(T),P.c(),P.m(t,null)):P&&(P.d(1),P=null),T[0]||T[1]?I?(I.p(T,C),C[0]&3&&Q(I,1)):(I=na(T),I.c(),Q(I,1),I.m(e,null)):I&&(ot(),j(I,1,1,()=>{I=null}),at())},i(T){h||(Q(g),Q(b),Q(I),h=!0)},o(T){j(g),j(b),j(I),h=!1},d(T){T&&m(e),g&&g.d(),b&&b.d(),P&&P.d(),I&&I.d(),_=!1,v()}}}function xo(n){let e,t,i;function r(s){n[28](s)}let l={class:"usn T4 mr16",$$slots:{default:[H0]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.checked=n[0]),e=new Pn({props:l}),De.push(()=>qe(e,"checked",r)),e.$on("change",n[10]),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o[0]&512|o[1]&8192&&(a.$$scope={dirty:o,ctx:s}),!t&&o[0]&1&&(t=!0,a.checked=s[0],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function H0(n){let e,t=n[9](Je.Long)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ml4 T3 f12 tdud")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&512&&t!==(t=r[9](Je.Long)+"")&&W(i,t)},d(r){r&&m(e)}}}function ea(n){let e,t,i;function r(s){n[29](s)}let l={class:"usn T4",$$slots:{default:[B0]},$$scope:{ctx:n}};return n[1]!==void 0&&(l.checked=n[1]),e=new Pn({props:l}),De.push(()=>qe(e,"checked",r)),e.$on("change",n[11]),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o[0]&512|o[1]&8192&&(a.$$scope={dirty:o,ctx:s}),!t&&o[0]&2&&(t=!0,a.checked=s[1],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function B0(n){let e,t=n[9](Je.Short)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ml4 T3 f12 tdud")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&512&&t!==(t=r[9](Je.Short)+"")&&W(i,t)},d(r){r&&m(e)}}}function ta(n){let e,t=n[9](Je.Advanced)+"",i,r,l;return{c(){e=y("span"),i=B(t),this.h()},l(s){e=k(s,"SPAN",{class:!0});var o=S(e);i=A(o,t),o.forEach(m),this.h()},h(){E(e,"class","BLUE cp f12 H-7kp0l9"),Te(e,"disabled",!(n[0]||n[1]))},m(s,o){G(s,e,o),u(e,i),r||(l=We(e,"click",n[14]),r=!0)},p(s,o){o[0]&512&&t!==(t=s[9](Je.Advanced)+"")&&W(i,t),o[0]&3&&Te(e,"disabled",!(s[0]||s[1]))},d(s){s&&m(e),r=!1,l()}}}function na(n){let e,t,i,r;const l=[z0,A0],s=[];function o(a,c){return a[2]?1:0}return e=o(n),t=s[e]=l[e](n),{c(){t.c(),i=ut()},l(a){t.l(a),i=ut()},m(a,c){s[e].m(a,c),G(a,i,c),r=!0},p(a,c){let f=e;e=o(a),e===f?s[e].p(a,c):(ot(),j(s[f],1,1,()=>{s[f]=null}),at(),t=s[e],t?t.p(a,c):(t=s[e]=l[e](a),t.c()),Q(t,1),t.m(i.parentNode,i))},i(a){r||(Q(t),r=!0)},o(a){j(t),r=!1},d(a){s[e].d(a),a&&m(i)}}}function A0(n){let e,t,i,r=n[2].tpTrigger&&ia(n),l=n[2].slTrigger&&ra(n);return{c(){r&&r.c(),e=q(),l&&l.c(),t=ut()},l(s){r&&r.l(s),e=M(s),l&&l.l(s),t=ut()},m(s,o){r&&r.m(s,o),G(s,e,o),l&&l.m(s,o),G(s,t,o),i=!0},p(s,o){s[2].tpTrigger?r?(r.p(s,o),o[0]&4&&Q(r,1)):(r=ia(s),r.c(),Q(r,1),r.m(e.parentNode,e)):r&&(ot(),j(r,1,1,()=>{r=null}),at()),s[2].slTrigger?l?(l.p(s,o),o[0]&4&&Q(l,1)):(l=ra(s),l.c(),Q(l,1),l.m(t.parentNode,t)):l&&(ot(),j(l,1,1,()=>{l=null}),at())},i(s){i||(Q(r),Q(l),i=!0)},o(s){j(r),j(l),i=!1},d(s){r&&r.d(s),s&&m(e),l&&l.d(s),s&&m(t)}}}function z0(n){let e,t,i,r,l,s;function o(p){n[30](p)}let a={class:"mt8",type:"TakeProfit",contract:n[3],targetPosition:n[8]};n[6]!==void 0&&(a.stopPxEp=n[6]),e=new Go({props:a}),De.push(()=>qe(e,"stopPxEp",o)),e.$on("change",n[12]);function c(p){n[31](p)}let f={class:"mt12",type:"StopLoss",contract:n[3],targetPosition:n[8]};return n[7]!==void 0&&(f.stopPxEp=n[7]),r=new Go({props:f}),De.push(()=>qe(r,"stopPxEp",c)),r.$on("change",n[13]),{c(){te(e.$$.fragment),i=q(),te(r.$$.fragment)},l(p){re(e.$$.fragment,p),i=M(p),re(r.$$.fragment,p)},m(p,d){ne(e,p,d),G(p,i,d),ne(r,p,d),s=!0},p(p,d){const h={};d[0]&8&&(h.contract=p[3]),d[0]&256&&(h.targetPosition=p[8]),!t&&d[0]&64&&(t=!0,h.stopPxEp=p[6],Me(()=>t=!1)),e.$set(h);const _={};d[0]&8&&(_.contract=p[3]),d[0]&256&&(_.targetPosition=p[8]),!l&&d[0]&128&&(l=!0,_.stopPxEp=p[7],Me(()=>l=!1)),r.$set(_)},i(p){s||(Q(e.$$.fragment,p),Q(r.$$.fragment,p),s=!0)},o(p){j(e.$$.fragment,p),j(r.$$.fragment,p),s=!1},d(p){ie(e,p),p&&m(i),ie(r,p)}}}function ia(n){let e,t,i,r=n[9](Je.TPTrigger)+"",l,s,o=n[2].takeProfitEp+"",a,c,f,p,d=n[9](Je.TPOrder)+"",h,_,v=Ql(n[2].tpPxRp)+"",g,b,P,I,T;return I=new es({props:{contract:n[3],stopPxEp:n[2].tpPxRp||n[2].takeProfitEp,styleType:"onOrder",targetPosition:n[8],triggerType:n[2].tpTrigger}}),{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),s=y("span"),a=B(o),c=q(),f=y("div"),p=y("span"),h=B(d),_=y("span"),g=B(v),b=q(),P=y("div"),te(I.$$.fragment),this.h()},l(C){e=k(C,"DIV",{class:!0});var V=S(e);t=k(V,"DIV",{class:!0});var O=S(t);i=k(O,"SPAN",{class:!0});var w=S(i);l=A(w,r),w.forEach(m),s=k(O,"SPAN",{class:!0});var D=S(s);a=A(D,o),D.forEach(m),O.forEach(m),c=M(V),f=k(V,"DIV",{class:!0});var L=S(f);p=k(L,"SPAN",{class:!0});var $=S(p);h=A($,d),$.forEach(m),_=k(L,"SPAN",{class:!0});var N=S(_);g=A(N,v),N.forEach(m),L.forEach(m),V.forEach(m),b=M(C),P=k(C,"DIV",{class:!0});var z=S(P);re(I.$$.fragment,z),z.forEach(m),this.h()},h(){E(i,"class","T3"),E(s,"class","T1"),E(t,"class","df aic jcsb"),E(p,"class","T3"),E(_,"class","T1"),E(f,"class","df aic jcsb"),E(e,"class","tpsl-info H-7kp0l9"),E(P,"class","mt4")},m(C,V){G(C,e,V),u(e,t),u(t,i),u(i,l),u(t,s),u(s,a),u(e,c),u(e,f),u(f,p),u(p,h),u(f,_),u(_,g),G(C,b,V),G(C,P,V),ne(I,P,null),T=!0},p(C,V){(!T||V[0]&512)&&r!==(r=C[9](Je.TPTrigger)+"")&&W(l,r),(!T||V[0]&4)&&o!==(o=C[2].takeProfitEp+"")&&W(a,o),(!T||V[0]&512)&&d!==(d=C[9](Je.TPOrder)+"")&&W(h,d),(!T||V[0]&4)&&v!==(v=Ql(C[2].tpPxRp)+"")&&W(g,v);const O={};V[0]&8&&(O.contract=C[3]),V[0]&4&&(O.stopPxEp=C[2].tpPxRp||C[2].takeProfitEp),V[0]&256&&(O.targetPosition=C[8]),V[0]&4&&(O.triggerType=C[2].tpTrigger),I.$set(O)},i(C){T||(Q(I.$$.fragment,C),T=!0)},o(C){j(I.$$.fragment,C),T=!1},d(C){C&&m(e),C&&m(b),C&&m(P),ie(I)}}}function ra(n){let e,t,i,r=n[9](Je.SLTrigger)+"",l,s,o=n[2].stopLossEp+"",a,c,f,p,d=n[9](Je.SLOrder)+"",h,_,v=Ql(n[2].slPxRp)+"",g,b,P,I,T;return I=new es({props:{contract:n[3],stopPxEp:n[2].slPxRp||n[2].stopLossEp,styleType:"onOrder",targetPosition:n[8],triggerType:n[2].slTrigger,type:"StopLoss"}}),{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),s=y("span"),a=B(o),c=q(),f=y("div"),p=y("span"),h=B(d),_=y("span"),g=B(v),b=q(),P=y("div"),te(I.$$.fragment),this.h()},l(C){e=k(C,"DIV",{class:!0});var V=S(e);t=k(V,"DIV",{class:!0});var O=S(t);i=k(O,"SPAN",{class:!0});var w=S(i);l=A(w,r),w.forEach(m),s=k(O,"SPAN",{class:!0});var D=S(s);a=A(D,o),D.forEach(m),O.forEach(m),c=M(V),f=k(V,"DIV",{class:!0});var L=S(f);p=k(L,"SPAN",{class:!0});var $=S(p);h=A($,d),$.forEach(m),_=k(L,"SPAN",{class:!0});var N=S(_);g=A(N,v),N.forEach(m),L.forEach(m),V.forEach(m),b=M(C),P=k(C,"DIV",{class:!0});var z=S(P);re(I.$$.fragment,z),z.forEach(m),this.h()},h(){E(i,"class","T3"),E(s,"class","T1"),E(t,"class","df aic jcsb"),E(p,"class","T3"),E(_,"class","T1"),E(f,"class","df aic jcsb"),E(e,"class","tpsl-info H-7kp0l9"),E(P,"class","mt4")},m(C,V){G(C,e,V),u(e,t),u(t,i),u(i,l),u(t,s),u(s,a),u(e,c),u(e,f),u(f,p),u(p,h),u(f,_),u(_,g),G(C,b,V),G(C,P,V),ne(I,P,null),T=!0},p(C,V){(!T||V[0]&512)&&r!==(r=C[9](Je.SLTrigger)+"")&&W(l,r),(!T||V[0]&4)&&o!==(o=C[2].stopLossEp+"")&&W(a,o),(!T||V[0]&512)&&d!==(d=C[9](Je.SLOrder)+"")&&W(h,d),(!T||V[0]&4)&&v!==(v=Ql(C[2].slPxRp)+"")&&W(g,v);const O={};V[0]&8&&(O.contract=C[3]),V[0]&4&&(O.stopPxEp=C[2].slPxRp||C[2].stopLossEp),V[0]&256&&(O.targetPosition=C[8]),V[0]&4&&(O.triggerType=C[2].slTrigger),I.$set(O)},i(C){T||(Q(I.$$.fragment,C),T=!0)},o(C){j(I.$$.fragment,C),T=!1},d(C){C&&m(e),C&&m(b),C&&m(P),ie(I)}}}function Q0(n){let e,t,i=(n[4]||n[5])&&Zo(n);return{c(){i&&i.c(),e=ut()},l(r){i&&i.l(r),e=ut()},m(r,l){i&&i.m(r,l),G(r,e,l),t=!0},p(r,l){r[4]||r[5]?i?(i.p(r,l),l[0]&48&&Q(i,1)):(i=Zo(r),i.c(),Q(i,1),i.m(e.parentNode,e)):i&&(ot(),j(i,1,1,()=>{i=null}),at())},i(r){t||(Q(i),t=!0)},o(r){j(i),t=!1},d(r){i&&i.d(r),r&&m(e)}}}function R0(n,e){return n?"Buy":e?"Sell":""}function Ql(n){return n||"Market"}function F0(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v;J(n,Wr,ae=>t(32,o=ae)),J(n,Gr,ae=>t(33,a=ae)),J(n,Kl,ae=>t(34,c=ae)),J(n,_n,ae=>t(23,f=ae)),J(n,Sn,ae=>t(24,p=ae)),J(n,kn,ae=>t(25,d=ae)),J(n,Hi,ae=>t(26,h=ae)),J(n,Xt,ae=>t(27,_=ae)),J(n,dt,ae=>t(9,v=ae));let{priceEp:g=0}=e,{size:b=0}=e,{percent:P=0}=e,{liqPrice:I={long:"-",short:""}}=e;const T=Kt();let C=!1,V=!1,O=!0,w=!0,D={},L={},$=0,N=0,z=null;Lt(()=>{Pt.subscribe("tpsl-place-order","reset",F)});function H(){C&&(t(1,V=!1),U())}function R(){V&&(t(0,C=!1),U())}function F(){t(0,C=!1),t(1,V=!1),U()}function U(){t(6,$=0),t(7,N=0),t(19,D={}),t(20,L={}),t(2,z=null),T("change",{})}function K(ae,x){if(ae.type==="Perpetual"){const le=x.length===0||x[0].size<=0;t(4,O=le),t(5,w=le);return}ae.type==="PerpetualV2"&&(t(4,O=!0),t(5,w=!0))}function Y(ae,x,le,fe,Se,Pe){const Ce=Bn(ae,x,le,fe);return Object.assign({},Ce,{side:fe,avgEntryPriceEp:Se,size:Pe})}function X(ae){t(19,D=ae.detail)}function ee(ae){t(20,L=ae.detail)}function Z(ae,x,le){const fe=le?Object.assign({},le):Object.assign({},ae,x);if(Object.keys(fe).length>0){const Se=c(i.symbol,s.posSide);fe.tpslCloseMode=Se==="None"?"Entire":Se}T("change",fe)}function ue(ae,x){if(ae){T("sideChange","Buy");return}if(x){T("sideChange","Sell");return}T("sideChange","")}function ce(ae,x,le,fe,Se,Pe,Ce,Ee,Ie){if(Ee<=0)return Ce;const{buyQty:ve,sellQty:de}=hr(ae,x,le,fe,Se,Pe);return Ie==="Buy"?Number(Re(ve).times(Ee).div(100)):Ie==="Sell"?Number(Re(de).times(Ee).div(100)):0}function pe(){en.create(N0,{contract:i,closeMode:c(i.symbol,s.posSide),position:s,submit:me,formData:z,orderParams:{priceEp:g,orderQty:l,side:r,orderType:"Decrease"},costEv:r==="Buy"?a==null?void 0:a.costEv:o==null?void 0:o.costEv,source:"preOrder",liqPrice:r==="Buy"?I.long:I.short})}function me(ae){t(2,z=ae)}function oe(ae){C=ae,t(0,C)}function ke(ae){V=ae,t(1,V)}function Le(ae){$=ae,t(6,$)}function ge(ae){N=ae,t(7,N)}return n.$$set=ae=>{"priceEp"in ae&&t(15,g=ae.priceEp),"size"in ae&&t(16,b=ae.size),"percent"in ae&&t(17,P=ae.percent),"liqPrice"in ae&&t(18,I=ae.liqPrice)},n.$$.update=()=>{n.$$.dirty[0]&134217728&&t(3,i=_),n.$$.dirty[0]&3&&t(21,r=R0(C,V)),n.$$.dirty[0]&16777224&&K(i,p),n.$$.dirty[0]&262373376&&t(22,l=ce(_,h,p,d,f,g,b,P,r)),n.$$.dirty[0]&31490056&&t(8,s=Y(i,p,f,r,g,l)),n.$$.dirty[0]&1572868&&Z(D,L,z),n.$$.dirty[0]&3&&ue(C,V),n.$$.dirty[0]&8&&F()},[C,V,z,i,O,w,$,N,s,v,H,R,X,ee,pe,g,b,P,I,D,L,r,l,f,p,d,h,_,oe,ke,Le,ge]}let Ys=class extends tt{constructor(e){super(),nt(this,e,F0,Q0,et,{priceEp:15,size:16,percent:17,liqPrice:18},null,[-1,-1])}};function la(n){let e,t,i,r=n[3](Ye.Cost)+"",l,s,o,a=n[2].buyCost+"",c,f,p,d,h=n[3](Ye.Cost)+"",_,v,g,b=n[2].sellCost+"",P,I,T;return{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),o=q(),c=B(a),f=q(),p=y("div"),d=y("span"),_=B(h),g=q(),P=B(b),this.h()},l(C){e=k(C,"DIV",{class:!0});var V=S(e);t=k(V,"DIV",{class:!0});var O=S(t);i=k(O,"SPAN",{class:!0});var w=S(i);l=A(w,r),w.forEach(m),o=M(O),c=A(O,a),O.forEach(m),f=M(V),p=k(V,"DIV",{class:!0});var D=S(p);d=k(D,"SPAN",{class:!0});var L=S(d);_=A(L,h),L.forEach(m),g=M(D),P=A(D,b),D.forEach(m),V.forEach(m),this.h()},h(){E(i,"class","tdud ch T3"),E(t,"class","f1 lh18 f12 T1"),E(d,"class","tdud ch T3"),E(p,"class","h18 f12 T1"),E(e,"class","df mt8")},m(C,V){G(C,e,V),u(e,t),u(t,i),u(i,l),u(t,o),u(t,c),u(e,f),u(e,p),u(p,d),u(d,_),u(p,g),u(p,P),I||(T=[Wt(s=Gt.call(null,i,{text:n[3](vt.Cost),showDelay:800})),Wt(v=Gt.call(null,d,{text:n[3](vt.Cost),showDelay:800}))],I=!0)},p(C,V){V&8&&r!==(r=C[3](Ye.Cost)+"")&&W(l,r),s&&Tt(s.update)&&V&8&&s.update.call(null,{text:C[3](vt.Cost),showDelay:800}),V&4&&a!==(a=C[2].buyCost+"")&&W(c,a),V&8&&h!==(h=C[3](Ye.Cost)+"")&&W(_,h),v&&Tt(v.update)&&V&8&&v.update.call(null,{text:C[3](vt.Cost),showDelay:800}),V&4&&b!==(b=C[2].sellCost+"")&&W(P,b)},d(C){C&&m(e),I=!1,jt(T)}}}function j0(n){let e,t=(n[1].type==="Perpetual"||n[1].type==="PerpetualV2"&&n[0]===Ut.Open)&&la(n);return{c(){t&&t.c(),e=ut()},l(i){t&&t.l(i),e=ut()},m(i,r){t&&t.m(i,r),G(i,e,r)},p(i,[r]){i[1].type==="Perpetual"||i[1].type==="PerpetualV2"&&i[0]===Ut.Open?t?t.p(i,r):(t=la(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:rt,o:rt,d(i){t&&t.d(i),i&&m(e)}}}function U0(n,e,t){let i,r,l,s,o,a,c;J(n,kn,b=>t(0,r=b)),J(n,_n,b=>t(9,l=b)),J(n,Sn,b=>t(10,s=b)),J(n,Xt,b=>t(1,o=b)),J(n,an,b=>t(11,a=b)),J(n,dt,b=>t(3,c=b));let{quantity:f=0}=e,{percent:p=0}=e,{priceEp:d=0}=e,{maxQty:h={buyQty:0,sellQty:0}}=e,_={buyCostEv:0,buyCost:"0",sellCostEv:0,sellCost:"0"};function v(b,P,I,T,C){if(I<=0)return{buy:C,sell:C};const{qtyPrecision:V,contPrecision:O,contractSizePrecision:w,valuePrecision:D,pricePrecision:L,contractSide:$,type:N}=b;let{buyQty:z,sellQty:H}=T;const R={[we.Cont]:O,[we.Base]:$>0?L:D,[we.Coin]:w},F=N==="Perpetual"?R[P]:V;return{buy:Number(xe.floor(z*I/100,F)),sell:Number(xe.floor(H*I/100,F))}}function g(b,P,I,T,C,V){const{type:O,settleCurrency:w,valuePrecision:D,valueScale:L}=b;if(!P||P.length===0)return;let $=null,N=null;if(O==="Perpetual"&&($=N=P[0]),O==="PerpetualV2"&&(T===Ct.Hedge&&(C===Ut.Open&&($=P.find(z=>z.posSide==="Long"),N=P.find(z=>z.posSide==="Short")),C===Ut.Close&&($=P.find(z=>z.posSide==="Short"),N=P.find(z=>z.posSide==="Long"))),T===Ct.OneWay&&($=N=P.find(z=>z.posSide==="Merged"))),$&&N){const z=$p(b,$,I,V.buy),H=xe.floor(z,D,L),R=qp(b,N,I,V.sell),F=xe.floor(R,D,L);Gr.next({costWU:`${H} ${w}`,costEv:z}),Wr.next({costWU:`${F} ${w}`,costEv:R}),t(2,_={buyCostEv:z,buyCost:`${H} ${w}`,sellCostEv:R,sellCost:`${F} ${w}`})}}return n.$$set=b=>{"quantity"in b&&t(4,f=b.quantity),"percent"in b&&t(5,p=b.percent),"priceEp"in b&&t(6,d=b.priceEp),"maxQty"in b&&t(7,h=b.maxQty)},n.$$.update=()=>{n.$$.dirty&2226&&t(8,i=v(o,a,p,h,f)),n.$$.dirty&1859&&g(o,s,d,l,r,i)},[r,o,_,c,f,p,d,h,i,l,s,a]}let Js=class extends tt{constructor(e){super(),nt(this,e,U0,j0,et,{quantity:4,percent:5,priceEp:6,maxQty:7})}};function W0(n){let e,t,i,r=n[1](Ye.EstLiqPrice)+"",l,s,o,a,c=n[0].long+"",f,p,d,h,_=n[1](Ye.EstLiqPrice)+"",v,g,b,P,I=n[0].short+"",T,C,V;return{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),o=q(),a=y("span"),f=B(c),p=q(),d=y("div"),h=y("span"),v=B(_),b=q(),P=y("span"),T=B(I),this.h()},l(O){e=k(O,"DIV",{class:!0});var w=S(e);t=k(w,"DIV",{class:!0});var D=S(t);i=k(D,"SPAN",{class:!0});var L=S(i);l=A(L,r),L.forEach(m),o=M(D),a=k(D,"SPAN",{class:!0});var $=S(a);f=A($,c),$.forEach(m),D.forEach(m),p=M(w),d=k(w,"DIV",{class:!0});var N=S(d);h=k(N,"SPAN",{class:!0});var z=S(h);v=A(z,_),z.forEach(m),b=M(N),P=k(N,"SPAN",{class:!0});var H=S(P);T=A(H,I),H.forEach(m),N.forEach(m),w.forEach(m),this.h()},h(){E(i,"class","tdud ch T3"),E(a,"class","T1"),E(t,"class","f1 lh18 f12"),E(h,"class","tdud ch T3"),E(P,"class","T1"),E(d,"class","h18 f12"),E(e,"class","df mt5")},m(O,w){G(O,e,w),u(e,t),u(t,i),u(i,l),u(t,o),u(t,a),u(a,f),u(e,p),u(e,d),u(d,h),u(h,v),u(d,b),u(d,P),u(P,T),C||(V=[Wt(s=Gt.call(null,i,{text:n[1](vt.LiqPrice2),showDelay:800})),Wt(g=Gt.call(null,h,{text:n[1](vt.LiqPrice2),showDelay:800}))],C=!0)},p(O,[w]){w&2&&r!==(r=O[1](Ye.EstLiqPrice)+"")&&W(l,r),s&&Tt(s.update)&&w&2&&s.update.call(null,{text:O[1](vt.LiqPrice2),showDelay:800}),w&1&&c!==(c=O[0].long+"")&&W(f,c),w&2&&_!==(_=O[1](Ye.EstLiqPrice)+"")&&W(v,_),g&&Tt(g.update)&&w&2&&g.update.call(null,{text:O[1](vt.LiqPrice2),showDelay:800}),w&1&&I!==(I=O[0].short+"")&&W(T,I)},i:rt,o:rt,d(O){O&&m(e),C=!1,jt(V)}}}function sa(n,e){return e?n?"MarketIfTouched":"StopLimit":n?"Market":"Limit"}function G0(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P;J(n,dl,U=>t(18,c=U)),J(n,sp,U=>t(19,f=U)),J(n,vr,U=>t(20,p=U)),J(n,an,U=>t(21,d=U)),J(n,Ni,U=>t(22,h=U)),J(n,ri,U=>t(23,_=U)),J(n,Sn,U=>t(25,g=U)),J(n,sr,U=>t(26,b=U)),J(n,dt,U=>t(1,P=U));let{contract:I}=e,{account:T}=e,{posMode:C}=e,{priceEp:V=0}=e,{quantity:O=0}=e,{ordMode:w}=e,{percentValue:D}=e,{maxQty:L={buyQty:0,sellQty:0}}=e,{liq:$={long:"-",short:""}}=e,{isMarket:N=!1}=e,{isConditional:z=!1}=e;const H=Ci.pipe(Rr(500));J(n,H,U=>t(24,v=U));function R(U,K,Y,X,ee,Z,ue,ce,pe,me,oe,ke,Le,ge,ae,x,le){const fe={priceEp:oe,isMarket:x,isConditional:le},Se=Le>0?ge.buy:ke,Pe=Le>0?ge.sell:ke,Ce=Object.assign(Object.assign({},fe),{side:"Buy",newOrderSize:Se,orderQty:Se}),Ee=Object.assign(Object.assign({},fe),{side:"Sell",newOrderSize:Pe,orderQty:Pe}),Ie=Bn(U,K,X,"Buy"),ve=yi.genMergeSize(U,Ie,Ce),de=yi.averagePrice(ee,Ce,Ie,U),se=Bn(U,K,X,"Sell"),he=yi.genMergeSize(U,se,Ee),_e=yi.averagePrice(ee,Ee,se,U),be=ys(U,Ie,se,Y,Z,Object.assign(Object.assign({},Ce),{avgPriceEp:de,orderQty:ve,ordType:sa(x,le)}),ue,ce,pe,i,ae,me),Ve=ys(U,se,Ie,Y,Z,Object.assign(Object.assign({},Ee),{avgPriceEp:_e,orderQty:he,ordType:sa(x,le)}),ue,ce,pe,i,ae,me),{tickSize:Be}=U;t(0,$={long:Tn(String(be&&be.liqPrice||0),Be),short:Tn(String(Ve&&Ve.liqPrice||0),Be)})}function F(U,K,Y,X,ee){if(Y<=0)return{buy:ee,sell:ee};const{qtyPrecision:Z,contPrecision:ue,contractSizePrecision:ce,valuePrecision:pe,pricePrecision:me,contractSide:oe,type:ke}=U;let{buyQty:Le,sellQty:ge}=X;const ae={[we.Cont]:ue,[we.Base]:oe>0?me:pe,[we.Coin]:ce},x=ke==="Perpetual"?ae[K]:Z;return{buy:Number(xe.floor(Le*Y/100,x)),sell:Number(xe.floor(ge*Y/100,x))}}return n.$$set=U=>{"contract"in U&&t(3,I=U.contract),"account"in U&&t(4,T=U.account),"posMode"in U&&t(5,C=U.posMode),"priceEp"in U&&t(6,V=U.priceEp),"quantity"in U&&t(7,O=U.quantity),"ordMode"in U&&t(8,w=U.ordMode),"percentValue"in U&&t(9,D=U.percentValue),"maxQty"in U&&t(10,L=U.maxQty),"liq"in U&&t(0,$=U.liq),"isMarket"in U&&t(11,N=U.isMarket),"isConditional"in U&&t(12,z=U.isConditional)},n.$$.update=()=>{n.$$.dirty&67108864&&(i=b),n.$$.dirty&33554432&&t(17,r=g),n.$$.dirty&16777216&&t(15,l=v),n.$$.dirty&8388608&&t(16,s=_),n.$$.dirty&4194304&&t(14,o=h),n.$$.dirty&2098824&&t(13,a=F(I,d,D,L,O)),n.$$.dirty&2096120&&R(I,r,T,C,w,p,s,l,o,f,V,O,D,a,c,N,z)},[$,P,H,I,T,C,V,O,w,D,L,N,z,a,o,l,s,r,c,f,p,d,h,_,v,g,b]}let Zs=class extends tt{constructor(e){super(),nt(this,e,G0,W0,et,{contract:3,account:4,posMode:5,priceEp:6,quantity:7,ordMode:8,percentValue:9,maxQty:10,liq:0,isMarket:11,isConditional:12})}};function K0(n){let e,t,i,r,l=n[0](He.Last)+"",s,o,a,c;const f=n[3].default,p=Br(f,n,n[2],null);return{c(){e=y("div"),t=y("div"),p&&p.c(),i=q(),r=y("div"),s=B(l),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=S(e);t=k(h,"DIV",{class:!0});var _=S(t);p&&p.l(_),_.forEach(m),i=M(h),r=k(h,"DIV",{class:!0});var v=S(r);s=A(v,l),v.forEach(m),h.forEach(m),this.h()},h(){E(t,"class","f1"),E(r,"class","last-btn ml4 usn br4 f12 fw2 T1 cp H-1bmd4h9"),E(e,"class","wrap mt16 df jcsb H-1bmd4h9")},m(d,h){G(d,e,h),u(e,t),p&&p.m(t,null),u(e,i),u(e,r),u(r,s),o=!0,a||(c=We(r,"click",n[1]),a=!0)},p(d,[h]){p&&p.p&&(!o||h&4)&&Ar(p,f,d,d[2],o?Qr(f,d[2],h,null):zr(d[2]),null),(!o||h&1)&&l!==(l=d[0](He.Last)+"")&&W(s,l)},i(d){o||(Q(p,d),o=!0)},o(d){j(p,d),o=!1},d(d){d&&m(e),p&&p.d(d),a=!1,c()}}}function X0(n,e,t){let i,r;J(n,Er,a=>t(4,i=a)),J(n,dt,a=>t(0,r=a));let{$$slots:l={},$$scope:s}=e;function o(){Pt.send("global","price-click",{price:i.close,onlyLimitPrice:!0})}return n.$$set=a=>{"$$scope"in a&&t(2,s=a.$$scope)},[r,o,s,l]}let ns=class extends tt{constructor(e){super(),nt(this,e,X0,K0,et,{})}};function oa(n){let e,t;return e=new ns({props:{$$slots:{default:[Y0]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&73731|r[2]&536870912&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Y0(n){let e,t,i,r;function l(a){n[54](a)}function s(a){n[55](a)}let o={class:"trigger-limit-price f1",isInline:!1,operation:!1,label:n[13](Ye.LimitPrice),unit:n[1].quoteCurrency,tickSizeEp:n[1].tickSizeEp,precision:n[1].pricePrecision,maxPriceEp:n[1].maxPriceEp,factor:n[1].priceFactor,scale:n[1].priceScale};return n[16]!==void 0&&(o.input=n[16]),n[0]!==void 0&&(o.priceEp=n[0]),e=new yn({props:o}),De.push(()=>qe(e,"input",l)),De.push(()=>qe(e,"priceEp",s)),{c(){te(e.$$.fragment)},l(a){re(e.$$.fragment,a)},m(a,c){ne(e,a,c),r=!0},p(a,c){const f={};c[0]&8192&&(f.label=a[13](Ye.LimitPrice)),c[0]&2&&(f.unit=a[1].quoteCurrency),c[0]&2&&(f.tickSizeEp=a[1].tickSizeEp),c[0]&2&&(f.precision=a[1].pricePrecision),c[0]&2&&(f.maxPriceEp=a[1].maxPriceEp),c[0]&2&&(f.factor=a[1].priceFactor),c[0]&2&&(f.scale=a[1].priceScale),!t&&c[0]&65536&&(t=!0,f.input=a[16],Me(()=>t=!1)),!i&&c[0]&1&&(i=!0,f.priceEp=a[0],Me(()=>i=!1)),e.$set(f)},i(a){r||(Q(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){ie(e,a)}}}function aa(n){let e,t,i;return t=new Ys({props:{priceEp:n[23],size:n[20],percent:n[11],liqPrice:n[24]}}),t.$on("change",n[36]),t.$on("sideChange",n[37]),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);re(t.$$.fragment,l),l.forEach(m),this.h()},h(){E(e,"class","tp-sl H-kigw0q")},m(r,l){G(r,e,l),ne(t,e,null),i=!0},p(r,l){const s={};l[0]&8388608&&(s.priceEp=r[23]),l[0]&1048576&&(s.size=r[20]),l[0]&2048&&(s.percent=r[11]),l[0]&16777216&&(s.liqPrice=r[24]),t.$set(s)},i(r){i||(Q(t.$$.fragment,r),i=!0)},o(r){j(t.$$.fragment,r),i=!1},d(r){r&&m(e),ie(t)}}}function ca(n){let e,t;return e=new zp({props:{quantity:n[20]}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&1048576&&(l.quantity=i[20]),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function J0(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,V,O,w,D,L,$,N,z,H,R,F,U=n[13](Ye.Trigger)+"",K,Y,X,ee,Z,ue,ce,pe,me=n[13](Ye.Trigger)+"",oe,ke,Le,ge,ae,x,le,fe,Se,Pe,Ce,Ee,Ie,ve,de,se,he,_e,be,Ve,Be,Fe;function $e(je){n[51](je)}function Ae(je){n[52](je)}function Ne(je){n[53](je)}let Ge={class:"trigger-price",isInline:!1,operation:!1,label:n[13](Ye.TriggerPrice)+" ("+n[1].quoteCurrency+")",tickSizeEp:n[1].tickSizeEp,precision:n[1].pricePrecision,maxPriceEp:n[1].maxPriceEp,factor:n[1].priceFactor,scale:n[1].priceScale,options:rn.createTriggerTypesOptions(n[13],Ye)};n[15]!==void 0&&(Ge.input=n[15]),n[6]!==void 0&&(Ge.selectValue=n[6]),n[5]!==void 0&&(Ge.priceEp=n[5]),i=new yn({props:Ge}),De.push(()=>qe(i,"input",$e)),De.push(()=>qe(i,"selectValue",Ae)),De.push(()=>qe(i,"priceEp",Ne));let Xe=n[3]===qt.Limit&&oa(n);const ye=[{class:"conditional-quantity"},{isInline:!1},{operation:!1},{label:n[13](Ye.Size)},{options:rn.createQtyOptions(n[1],n[13],Ye)},{placeholder:Or(n[13],n[14],n[23],n[20],n[21],n[11],n[1])},n[22]];function Ke(je){n[56](je)}function Qe(je){n[57](je)}function ze(je){n[58](je)}let Ue={};for(let je=0;je<ye.length;je+=1)Ue=pn(Ue,ye[je]);n[17]!==void 0&&(Ue.input=n[17]),n[7]!==void 0&&(Ue.quantity=n[7]),n[12]!==void 0&&(Ue.qtyType=n[12]),f=new Un({props:Ue}),De.push(()=>qe(f,"input",Ke)),De.push(()=>qe(f,"quantity",Qe)),De.push(()=>qe(f,"qtyType",ze)),f.$on("change",n[38]),f.$on("focus",n[39]),b=new zs({props:{label:n[13](Ye.Available),value:Mr(n[1],n[2])}});function st(je){n[60](je)}let Oe={type:"conditional",showTip:!1};n[11]!==void 0&&(Oe.value=n[11]),T=new ji({props:Oe}),De.push(()=>qe(T,"value",st)),T.$on("input",n[40]),O=new Xs({props:{percent:n[11],maxQty:n[4],priceEp:n[23]}});let it=n[31]===Ut.Open&&aa(n);L=new Sr({props:{type:"conditional",disabled:!n[33],buyText:sn(n[1],n[32],n[31],n[13],He,"Buy"),sellText:sn(n[1],n[32],n[31],n[13],He,"Sell")}}),L.$on("buy",n[34]),L.$on("sell",n[35]),N=new Js({props:{percent:n[11],quantity:n[20],maxQty:n[4],priceEp:n[23]}});function ct(je){n[61](je)}let ft={contract:n[1],posMode:n[32],ordMode:n[31],isMarket:n[3]===qt.Limit,isConditional:!0,account:n[2],priceEp:n[0],quantity:n[20],percentValue:n[11],maxQty:n[4]};n[24]!==void 0&&(ft.liq=n[24]),le=new Zs({props:ft}),De.push(()=>qe(le,"liq",ct)),Ce=new xr({});let _t=n[3]===qt.Market&&ca(n);function Et(je){n[62](je)}function gt(je){n[63](je)}function Dt(je){n[64](je)}function It(je){n[65](je)}function pt(je){n[66](je)}function mt(je){n[67](je)}function Nt(je){n[68](je)}let Rt={tabType:Ot.Conditional,conditionalType:n[3],quantity:n[7],priceEp:n[0],qtyType:n[12]};return n[8]!==void 0&&(Rt.postOnly=n[8]),n[9]!==void 0&&(Rt.closeOnTrigger=n[9]),n[10]!==void 0&&(Rt.timeInForce=n[10]),n[25]!==void 0&&(Rt.iceberg=n[25]),n[26]!==void 0&&(Rt.icebergQty=n[26]),n[27]!==void 0&&(Rt.icebergOrders=n[27]),n[28]!==void 0&&(Rt.icebergInputType=n[28]),ve=new xl({props:Rt}),De.push(()=>qe(ve,"postOnly",Et)),De.push(()=>qe(ve,"closeOnTrigger",gt)),De.push(()=>qe(ve,"timeInForce",Dt)),De.push(()=>qe(ve,"iceberg",It)),De.push(()=>qe(ve,"icebergQty",pt)),De.push(()=>qe(ve,"icebergOrders",mt)),De.push(()=>qe(ve,"icebergInputType",Nt)),{c(){e=y("div"),t=y("div"),te(i.$$.fragment),o=q(),Xe&&Xe.c(),a=q(),c=y("div"),te(f.$$.fragment),v=q(),g=y("div"),te(b.$$.fragment),P=q(),I=y("div"),te(T.$$.fragment),V=q(),te(O.$$.fragment),w=q(),it&&it.c(),D=q(),te(L.$$.fragment),$=q(),te(N.$$.fragment),z=q(),H=y("div"),R=y("div"),F=y("span"),K=B(U),Y=q(),X=B(n[30]),ee=q(),Z=B(n[19]),ue=q(),ce=y("div"),pe=y("span"),oe=B(me),ke=q(),Le=B(n[29]),ge=q(),ae=B(n[19]),x=q(),te(le.$$.fragment),Se=q(),Pe=y("div"),te(Ce.$$.fragment),Ee=q(),_t&&_t.c(),Ie=q(),te(ve.$$.fragment),this.h()},l(je){e=k(je,"DIV",{class:!0});var lt=S(e);t=k(lt,"DIV",{class:!0});var Yt=S(t);re(i.$$.fragment,Yt),Yt.forEach(m),o=M(lt),Xe&&Xe.l(lt),a=M(lt),c=k(lt,"DIV",{class:!0,"data-percent":!0});var tn=S(c);re(f.$$.fragment,tn),tn.forEach(m),v=M(lt),g=k(lt,"DIV",{class:!0});var Ze=S(g);re(b.$$.fragment,Ze),Ze.forEach(m),P=M(lt),I=k(lt,"DIV",{class:!0});var St=S(I);re(T.$$.fragment,St),St.forEach(m),V=M(lt),re(O.$$.fragment,lt),w=M(lt),it&&it.l(lt),D=M(lt),re(L.$$.fragment,lt),$=M(lt),re(N.$$.fragment,lt),z=M(lt),H=k(lt,"DIV",{class:!0});var kt=S(H);R=k(kt,"DIV",{class:!0});var $t=S(R);F=k($t,"SPAN",{class:!0});var ht=S(F);K=A(ht,U),ht.forEach(m),Y=M($t),X=A($t,n[30]),ee=M($t),Z=A($t,n[19]),$t.forEach(m),ue=M(kt),ce=k(kt,"DIV",{class:!0});var At=S(ce);pe=k(At,"SPAN",{class:!0});var Mt=S(pe);oe=A(Mt,me),Mt.forEach(m),ke=M(At),Le=A(At,n[29]),ge=M(At),ae=A(At,n[19]),At.forEach(m),kt.forEach(m),x=M(lt),re(le.$$.fragment,lt),Se=M(lt),Pe=k(lt,"DIV",{class:!0});var fn=S(Pe);re(Ce.$$.fragment,fn),fn.forEach(m),Ee=M(lt),_t&&_t.l(lt),Ie=M(lt),re(ve.$$.fragment,lt),lt.forEach(m),this.h()},h(){E(t,"class","mt16"),E(c,"class","pr mt16 percent-label"),E(c,"data-percent",_=n[11]>0?`${n[11]}%`:""),E(g,"class","mt10"),E(I,"class","mt16"),E(F,"class","T3"),E(R,"class","T1"),E(pe,"class","T3"),E(ce,"class","T1"),E(H,"class","df aic jcsb mt5 f12"),E(Pe,"class","mt15 mb20"),E(e,"class","wrap H-kigw0q")},m(je,lt){G(je,e,lt),u(e,t),ne(i,t,null),u(e,o),Xe&&Xe.m(e,null),u(e,a),u(e,c),ne(f,c,null),n[59](c),u(e,v),u(e,g),ne(b,g,null),u(e,P),u(e,I),ne(T,I,null),u(e,V),ne(O,e,null),u(e,w),it&&it.m(e,null),u(e,D),ne(L,e,null),u(e,$),ne(N,e,null),u(e,z),u(e,H),u(H,R),u(R,F),u(F,K),u(R,Y),u(R,X),u(R,ee),u(R,Z),u(H,ue),u(H,ce),u(ce,pe),u(pe,oe),u(ce,ke),u(ce,Le),u(ce,ge),u(ce,ae),u(e,x),ne(le,e,null),u(e,Se),u(e,Pe),ne(Ce,Pe,null),u(e,Ee),_t&&_t.m(e,null),u(e,Ie),ne(ve,e,null),Fe=!0},p(je,lt){const Yt={};lt[0]&8194&&(Yt.label=je[13](Ye.TriggerPrice)+" ("+je[1].quoteCurrency+")"),lt[0]&2&&(Yt.tickSizeEp=je[1].tickSizeEp),lt[0]&2&&(Yt.precision=je[1].pricePrecision),lt[0]&2&&(Yt.maxPriceEp=je[1].maxPriceEp),lt[0]&2&&(Yt.factor=je[1].priceFactor),lt[0]&2&&(Yt.scale=je[1].priceScale),lt[0]&8192&&(Yt.options=rn.createTriggerTypesOptions(je[13],Ye)),!r&&lt[0]&32768&&(r=!0,Yt.input=je[15],Me(()=>r=!1)),!l&&lt[0]&64&&(l=!0,Yt.selectValue=je[6],Me(()=>l=!1)),!s&&lt[0]&32&&(s=!0,Yt.priceEp=je[5],Me(()=>s=!1)),i.$set(Yt),je[3]===qt.Limit?Xe?(Xe.p(je,lt),lt[0]&8&&Q(Xe,1)):(Xe=oa(je),Xe.c(),Q(Xe,1),Xe.m(e,a)):Xe&&(ot(),j(Xe,1,1,()=>{Xe=null}),at());const tn=lt[0]&15755266?dn(ye,[ye[0],ye[1],ye[2],lt[0]&8192&&{label:je[13](Ye.Size)},lt[0]&8194&&{options:rn.createQtyOptions(je[1],je[13],Ye)},lt[0]&11560962&&{placeholder:Or(je[13],je[14],je[23],je[20],je[21],je[11],je[1])},lt[0]&4194304&&mn(je[22])]):{};!p&&lt[0]&131072&&(p=!0,tn.input=je[17],Me(()=>p=!1)),!d&&lt[0]&128&&(d=!0,tn.quantity=je[7],Me(()=>d=!1)),!h&&lt[0]&4096&&(h=!0,tn.qtyType=je[12],Me(()=>h=!1)),f.$set(tn),(!Fe||lt[0]&2048&&_!==(_=je[11]>0?`${je[11]}%`:""))&&E(c,"data-percent",_);const Ze={};lt[0]&8192&&(Ze.label=je[13](Ye.Available)),lt[0]&6&&(Ze.value=Mr(je[1],je[2])),b.$set(Ze);const St={};!C&&lt[0]&2048&&(C=!0,St.value=je[11],Me(()=>C=!1)),T.$set(St);const kt={};lt[0]&2048&&(kt.percent=je[11]),lt[0]&16&&(kt.maxQty=je[4]),lt[0]&8388608&&(kt.priceEp=je[23]),O.$set(kt),je[31]===Ut.Open?it?(it.p(je,lt),lt[1]&1&&Q(it,1)):(it=aa(je),it.c(),Q(it,1),it.m(e,D)):it&&(ot(),j(it,1,1,()=>{it=null}),at());const $t={};lt[1]&4&&($t.disabled=!je[33]),lt[0]&8194|lt[1]&3&&($t.buyText=sn(je[1],je[32],je[31],je[13],He,"Buy")),lt[0]&8194|lt[1]&3&&($t.sellText=sn(je[1],je[32],je[31],je[13],He,"Sell")),L.$set($t);const ht={};lt[0]&2048&&(ht.percent=je[11]),lt[0]&1048576&&(ht.quantity=je[20]),lt[0]&16&&(ht.maxQty=je[4]),lt[0]&8388608&&(ht.priceEp=je[23]),N.$set(ht),(!Fe||lt[0]&8192)&&U!==(U=je[13](Ye.Trigger)+"")&&W(K,U),(!Fe||lt[0]&1073741824)&&W(X,je[30]),(!Fe||lt[0]&524288)&&W(Z,je[19]),(!Fe||lt[0]&8192)&&me!==(me=je[13](Ye.Trigger)+"")&&W(oe,me),(!Fe||lt[0]&536870912)&&W(Le,je[29]),(!Fe||lt[0]&524288)&&W(ae,je[19]);const At={};lt[0]&2&&(At.contract=je[1]),lt[1]&2&&(At.posMode=je[32]),lt[1]&1&&(At.ordMode=je[31]),lt[0]&8&&(At.isMarket=je[3]===qt.Limit),lt[0]&4&&(At.account=je[2]),lt[0]&1&&(At.priceEp=je[0]),lt[0]&1048576&&(At.quantity=je[20]),lt[0]&2048&&(At.percentValue=je[11]),lt[0]&16&&(At.maxQty=je[4]),!fe&&lt[0]&16777216&&(fe=!0,At.liq=je[24],Me(()=>fe=!1)),le.$set(At),je[3]===qt.Market?_t?(_t.p(je,lt),lt[0]&8&&Q(_t,1)):(_t=ca(je),_t.c(),Q(_t,1),_t.m(e,Ie)):_t&&(ot(),j(_t,1,1,()=>{_t=null}),at());const Mt={};lt[0]&8&&(Mt.conditionalType=je[3]),lt[0]&128&&(Mt.quantity=je[7]),lt[0]&1&&(Mt.priceEp=je[0]),lt[0]&4096&&(Mt.qtyType=je[12]),!de&&lt[0]&256&&(de=!0,Mt.postOnly=je[8],Me(()=>de=!1)),!se&&lt[0]&512&&(se=!0,Mt.closeOnTrigger=je[9],Me(()=>se=!1)),!he&&lt[0]&1024&&(he=!0,Mt.timeInForce=je[10],Me(()=>he=!1)),!_e&&lt[0]&33554432&&(_e=!0,Mt.iceberg=je[25],Me(()=>_e=!1)),!be&&lt[0]&67108864&&(be=!0,Mt.icebergQty=je[26],Me(()=>be=!1)),!Ve&&lt[0]&134217728&&(Ve=!0,Mt.icebergOrders=je[27],Me(()=>Ve=!1)),!Be&&lt[0]&268435456&&(Be=!0,Mt.icebergInputType=je[28],Me(()=>Be=!1)),ve.$set(Mt)},i(je){Fe||(Q(i.$$.fragment,je),Q(Xe),Q(f.$$.fragment,je),Q(b.$$.fragment,je),Q(T.$$.fragment,je),Q(O.$$.fragment,je),Q(it),Q(L.$$.fragment,je),Q(N.$$.fragment,je),Q(le.$$.fragment,je),Q(Ce.$$.fragment,je),Q(_t),Q(ve.$$.fragment,je),Fe=!0)},o(je){j(i.$$.fragment,je),j(Xe),j(f.$$.fragment,je),j(b.$$.fragment,je),j(T.$$.fragment,je),j(O.$$.fragment,je),j(it),j(L.$$.fragment,je),j(N.$$.fragment,je),j(le.$$.fragment,je),j(Ce.$$.fragment,je),j(_t),j(ve.$$.fragment,je),Fe=!1},d(je){je&&m(e),ie(i),Xe&&Xe.d(),ie(f),n[59](null),ie(b),ie(T),ie(O),it&&it.d(),ie(L),ie(N),ie(le),ie(Ce),_t&&_t.d(),ie(ve)}}}const Mn={symbol:"",priceEp:0,stopPxEp:0};function Z0(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C;J(n,Kr,Ze=>t(33,h=Ze)),J(n,dt,Ze=>t(13,_=Ze)),J(n,an,Ze=>t(14,v=Ze)),J(n,Wr,Ze=>t(74,g=Ze)),J(n,Gr,Ze=>t(75,b=Ze)),J(n,_n,Ze=>t(48,P=Ze)),J(n,Sn,Ze=>t(76,I=Ze)),J(n,cr,Ze=>t(49,T=Ze)),J(n,kn,Ze=>t(50,C=Ze));let{contract:V=null}=e,{market:O=null}=e,{account:w=null}=e,{conditionalType:D=qt.Limit}=e,{priceEp:L=Mn.symbol===V.symbol?Mn.priceEp:0}=e,{maxQty:$={buyQty:0,sellQty:0}}=e,N=null,z=null,H=null,R=null,F=!1,U=!1,K=Mn.symbol===V.symbol?Mn.stopPxEp:0,Y=0 .toFixed(V.pricePrecision),X="ByLastPrice",ee=0,Z=0,ue=!1,ce=!1,pe="GoodTillCancel",me=0,oe=V.contractSide>0?V.contractUnderlyingAssets:V.settleCurrency,ke=0,Le="",ge={},ae={},x=0,le={long:"-",short:""},fe=!1,Se=0,Pe=0,Ce="Orders";Lt(()=>()=>{Mn.symbol=V.symbol,Mn.priceEp=L,Mn.stopPxEp=K}),Lt(()=>Pt.subscribe("global","price-click",Ze=>{const St=xe.roundPriceEp(xe.priceToEp(Ze.price,V.priceScale),V.tickSizeEp);if(Ze.onlyLimitPrice){t(0,L=St),z.focus();return}t(5,K=St),t(0,L=St),N&&N.focus()})),Lt(()=>Pt.subscribe("global","quantity-click",Ze=>{t(7,Z=Number(Re(Ze.quantity).times(V.qtyFactor))),H&&H.focus()}));function Ee(Ze,St){const{symbol:kt,contractSide:$t,settleCurrency:ht,contractUnderlyingAssets:At}=Ze;if(kt!==St.symbol)return;const{kv:Mt}=St;t(6,X=Mt.triggerType),t(7,Z=Mt.quantityEv),t(8,ue=Mt.postOnly),t(9,ce=Mt.closeOnTrigger),t(10,pe=Mt.timeInForce);const{qtyType:fn}=Mt;fn===we.Cont&&t(12,oe=fn),fn===we.Base&&t(12,oe=ht),fn===we.Coin&&t(12,oe=$t>0?At:ht)}function Ie(Ze,St,kt,$t,ht,At,Mt,fn){const{type:oi,symbol:Ti,contractSide:ti,settleCurrency:Qn,contractUnderlyingAssets:ai}=Ze;let Rn;fn===we.Cont&&(Rn=oi==="PerpetualV2"?we.Base:we.Cont),fn===Qn&&(Rn=ti>0?we.Base:we.Coin),ti>0&&fn===ai&&(Rn=we.Coin),Pi.next({symbol:Ti,kv:{conditionalType:St,triggerType:kt,quantityEv:$t,postOnly:ht,closeOnTrigger:At,timeInForce:Mt,qtyType:Rn}})}function ve(Ze){F=!1,U=!1;const{symbol:St}=Ze;Mn.symbol!==St&&(Mn.symbol=St,Mn.priceEp=0,Mn.stopPxEp=0,t(0,L=0),t(5,K=0),t(11,me=0))}function de(Ze,St){if(F||L!==0||St.closeEp===0)return;const{symbol:kt}=Ze;St.symbol===kt&&(Mn.symbol===kt&&Mn.priceEp!==0||(t(0,L=St.closeEp),F=!0))}function se(Ze,St){if(U||K!==0||St.closeEp===0)return;const{symbol:kt}=Ze;St.symbol===kt&&(Mn.symbol===kt&&Mn.stopPxEp!==0||(t(5,K=St.closeEp),U=!0))}function he(Ze,St){t(19,Y=xe.floor(St,Ze.pricePrecision,Ze.priceScale))}function _e(Ze){Ze&&pe!=="GoodTillCancel"&&t(10,pe="GoodTillCancel")}function be(Ze){if(me<=0)return{quantity:ee,iptValue:ke};const St=Jr(V,oe,L,me,Z,Ze==="Buy"?$.buyQty:$.sellQty),kt=Zr(V,v,L,St);return{quantity:(kt==null?void 0:kt.quantity)||ee,iptValue:(kt==null?void 0:kt.iptValue)||ke}}function Ve(Ze,St){const{quantity:kt,iptValue:$t}=be(Ze),ht={actionBy:"FromOrderPlacement",symbol:V.symbol,side:Ze,ordType:St,orderQty:kt,priceEp:L,triggerType:X,stopPxEp:K,closeOnTrigger:ce,postOnly:ue,reduceOnly:!1,timeInForce:pe,direction:Ze==="Buy"?c:f,icebergQty:Se,icebergOrders:Pe};Ze===Le&&Object.assign(ht,Object.assign({},ge));const At=Object.assign({tpslSide:Le},ge);Bl.createOrder(Object.assign(Object.assign({},ht),{iptValue:$t}),At,V),qi.next(ht);const Mt=Bn(V,I,P,Ze);Pt.send("order-place","create-click",{position:Mt})}function Be(Ze,St){const{quantity:kt,iptValue:$t}=be(Ze),ht={actionBy:"FromOrderPlacement",symbol:V.symbol,side:Ze,ordType:St,orderQty:kt,priceEp:l,triggerType:X,stopPxEp:K,closeOnTrigger:ce,postOnly:!1,reduceOnly:!1,timeInForce:"ImmediateOrCancel",direction:Ze==="Buy"?c:f};Ze===Le&&Object.assign(ht,Object.assign({},ge));const At=Object.assign({tpslSide:Le},ge);Bl.createOrder(Object.assign(Object.assign({},ht),{iptValue:$t}),At,V),qi.next(ht);const Mt=Bn(V,I,P,Ze);Pt.send("order-place","create-click",{position:Mt})}async function Fe(Ze){const{quantity:St,iptValue:kt}=be(Ze),$t={triggerType:X,stopPxEp:K,priceEp:L,quantity:St},ht={orderType:Ot.Conditional,conditionalType:D,costEv:Ze==="Buy"?b.costEv:g.costEv,availableBalanceEv:w.availableBalanceEv,lastPriceEp:l,markPriceEp:s,contract:V,iptValue:kt,qtyType:v,iceberg:fe,icebergQty:Se,icebergOrders:Pe,icebergInputType:Ce},At=await Fs(_,$t,ht);return At?(Pt.send("toast","info",{message:At}),!0):!1}async function $e(){if(!h||await Fe("Buy"))return;const St=Di(X,K,l,s);if(D===qt.Limit){const kt=St>0?"StopLimit":"LimitIfTouched";Ve("Buy",kt);return}if(D===qt.Market){const kt=St>0?"Stop":"MarketIfTouched";Be("Buy",kt)}}async function Ae(){if(await Fe("Sell")||!h)return;const St=Di(X,K,l,s);if(D===qt.Limit){const kt=St>0?"LimitIfTouched":"StopLimit";Ve("Sell",kt);return}if(D===qt.Market){const kt=St>0?"MarketIfTouched":"Stop";Be("Sell",kt)}}function Ne(Ze){ge=Ze.detail}function Ge(Ze){Le=Ze.detail}function Xe(Ze,St,kt,$t,ht){if(Ze>0){t(20,ee=0),t(21,ke=0);return}const{type:At,qtyPrecision:Mt,qtyScale:fn,contPrecision:oi,settleValuePrecision:Ti,valuePrecision:ti,valueScale:Qn}=ht;let ai=0,Rn=0;At==="Perpetual"&&(ai=kt===we.Cont?oi:Ti,Rn=fn),At==="PerpetualV2"&&(ai=kt===we.Base?ti:Mt,Rn=kt===we.Base?Qn:fn);const Ui=Number(xe.floor(St,ai,Rn));if(kt===we.Cont){t(20,ee=Ui);return}t(21,ke=Ui),kt===we.Base&&t(20,ee=Number(In(ke,$t,ht))),kt===we.Coin&&t(20,ee=Number(Dn(ke,ht,$t)))}function ye(Ze){t(7,Z=0),t(11,me=0);const St=Fi(Ze.detail,V);an.next(St)}function Ke(Ze,St,kt,$t,ht){if(Ze===we.Cont)return;const{settleCurrency:At,contractUnderlyingAssets:Mt}=ht;Ze===At&&St>kt&&t(7,Z=kt),Ze===Mt&&St>$t&&t(7,Z=$t)}function Qe(){t(11,me=0),H&&H.focus()}function ze(Ze,St,kt,$t,ht,At,Mt){const fn=ei(Ze,St,kt,$t,ht,At);return Object.assign(Object.assign({},fn),{placeholder:Mt>0?"":fn.placeholder})}function Ue(){t(7,Z=0),t(17,H.placeholder="",H)}function st(Ze){N=Ze,t(15,N)}function Oe(Ze){X=Ze,t(6,X)}function it(Ze){K=Ze,t(5,K)}function ct(Ze){z=Ze,t(16,z)}function ft(Ze){L=Ze,t(0,L)}function _t(Ze){H=Ze,t(17,H)}function Et(Ze){Z=Ze,t(7,Z)}function gt(Ze){oe=Ze,t(12,oe)}function Dt(Ze){De[Ze?"unshift":"push"](()=>{R=Ze,t(18,R)})}function It(Ze){me=Ze,t(11,me)}function pt(Ze){le=Ze,t(24,le)}function mt(Ze){ue=Ze,t(8,ue)}function Nt(Ze){ce=Ze,t(9,ce)}function Rt(Ze){pe=Ze,t(10,pe)}function je(Ze){fe=Ze,t(25,fe)}function lt(Ze){Se=Ze,t(26,Se)}function Yt(Ze){Pe=Ze,t(27,Pe)}function tn(Ze){Ce=Ze,t(28,Ce)}return n.$$set=Ze=>{"contract"in Ze&&t(1,V=Ze.contract),"market"in Ze&&t(41,O=Ze.market),"account"in Ze&&t(2,w=Ze.account),"conditionalType"in Ze&&t(3,D=Ze.conditionalType),"priceEp"in Ze&&t(0,L=Ze.priceEp),"maxQty"in Ze&&t(4,$=Ze.maxQty)},n.$$.update=()=>{n.$$.dirty[1]&131072&&t(32,i=P),n.$$.dirty[1]&524288&&t(31,r=C),n.$$.dirty[1]&1024&&t(43,l=O.closeEp),n.$$.dirty[1]&1024&&t(42,s=O.markPriceEp),n.$$.dirty[0]&2|n.$$.dirty[1]&262144&&Ee(V,T),n.$$.dirty[0]&6090&&Ie(V,D,X,Z,ue,ce,pe,oe),n.$$.dirty[0]&96|n.$$.dirty[1]&6144&&t(47,o=kp(Di(X,K,l,s))),n.$$.dirty[0]&96|n.$$.dirty[1]&6144&&t(46,a=Pp(Di(X,K,l,s))),n.$$.dirty[1]&65536&&t(30,c=o==="Set Buy Stop"?"≥":"≤"),n.$$.dirty[1]&32768&&t(29,f=a==="Set Sell Stop"?"≤":"≥"),n.$$.dirty[0]&2&&ve(V),n.$$.dirty[0]&2|n.$$.dirty[1]&1024&&de(V,O),n.$$.dirty[0]&2|n.$$.dirty[1]&1024&&se(V,O),n.$$.dirty[0]&34&&he(V,K),n.$$.dirty[0]&18563&&Xe(me,Z,v,L,V),n.$$.dirty[0]&256&&_e(ue),n.$$.dirty[0]&3&&t(45,p=li(V,L)),n.$$.dirty[0]&2&&t(44,d=si(V)),n.$$.dirty[0]&26626|n.$$.dirty[1]&24576&&t(22,ae=ze(v,_,Ye,V,p,d,me)),n.$$.dirty[0]&73|n.$$.dirty[1]&6144,n.$$.dirty[0]&4226|n.$$.dirty[1]&24576&&Ke(oe,Z,p,d,V),n.$$.dirty[0]&41&&t(23,x=D===qt.Limit?L:K)},[L,V,w,D,$,K,X,Z,ue,ce,pe,me,oe,_,v,N,z,H,R,Y,ee,ke,ae,x,le,fe,Se,Pe,Ce,f,c,r,i,h,$e,Ae,Ne,Ge,ye,Qe,Ue,O,s,l,d,p,a,o,P,T,C,st,Oe,it,ct,ft,_t,Et,gt,Dt,It,pt,mt,Nt,Rt,je,lt,Yt,tn]}let x0=class extends tt{constructor(e){super(),nt(this,e,Z0,J0,et,{contract:1,market:41,account:2,conditionalType:3,priceEp:0,maxQty:4},null,[-1,-1,-1])}};function fa(n){let e,t,i,r,l,s,o=n[7](Ye.SomeCurrenciesAre)+"",a,c,f,p,d,h;return{c(){e=y("div"),t=y("div"),i=y("i"),r=B(""),l=q(),s=y("span"),a=B(o),c=q(),f=y("i"),p=B(""),this.h()},l(_){e=k(_,"DIV",{class:!0});var v=S(e);t=k(v,"DIV",{class:!0});var g=S(t);i=k(g,"I",{class:!0});var b=S(i);r=A(b,""),b.forEach(m),l=M(g),s=k(g,"SPAN",{class:!0});var P=S(s);a=A(P,o),P.forEach(m),g.forEach(m),c=M(v),f=k(v,"I",{class:!0});var I=S(f);p=A(I,""),I.forEach(m),v.forEach(m),this.h()},h(){E(i,"class","iconfont f12"),E(s,"class","ml6 f12"),E(t,"class","df f1"),E(f,"class","iconfont close T3 cp f12 H-1jzqsfu"),E(e,"class","cheap-copy-info df mt12 br4 B2 H-1jzqsfu")},m(_,v){G(_,e,v),u(e,t),u(t,i),u(i,r),u(t,l),u(t,s),u(s,a),u(e,c),u(e,f),u(f,p),d||(h=We(f,"click",n[27]),d=!0)},p(_,v){v[0]&128&&o!==(o=_[7](Ye.SomeCurrenciesAre)+"")&&W(a,o)},d(_){_&&m(e),d=!1,h()}}}function ua(n){let e,t,i;return t=new Ys({props:{priceEp:n[0],size:n[11],percent:n[5],liqPrice:n[15]}}),t.$on("change",n[22]),t.$on("sideChange",n[23]),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);re(t.$$.fragment,l),l.forEach(m),this.h()},h(){E(e,"class","tp-sl H-1jzqsfu")},m(r,l){G(r,e,l),ne(t,e,null),i=!0},p(r,l){const s={};l[0]&1&&(s.priceEp=r[0]),l[0]&2048&&(s.size=r[11]),l[0]&32&&(s.percent=r[5]),l[0]&32768&&(s.liqPrice=r[15]),t.$set(s)},i(r){i||(Q(t.$$.fragment,r),i=!0)},o(r){j(t.$$.fragment,r),i=!1},d(r){r&&m(e),ie(t)}}}function e_(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,V,O,w,D,L,$,N,z,H,R,F=n[14]&&n[19].isCheapCopyToken&&fa(n);const U=[{isInline:!1},{operation:!1},{label:n[7](Ye.Size)},{options:rn.createQtyOptions(n[1],n[7],Ye)},n[13],{placeholder:Or(n[7],n[8],n[0],n[11],n[12],n[5],n[1])}];function K(oe){n[34](oe)}function Y(oe){n[35](oe)}function X(oe){n[36](oe)}let ee={};for(let oe=0;oe<U.length;oe+=1)ee=pn(ee,U[oe]);n[9]!==void 0&&(ee.input=n[9]),n[4]!==void 0&&(ee.quantity=n[4]),n[6]!==void 0&&(ee.qtyType=n[6]),r=new Un({props:ee}),De.push(()=>qe(r,"input",K)),De.push(()=>qe(r,"quantity",Y)),De.push(()=>qe(r,"qtyType",X)),r.$on("change",n[24]),r.$on("focus",n[25]),p=new zs({props:{label:n[7](Ye.Available),value:Mr(n[1],n[2])}});function Z(oe){n[38](oe)}let ue={type:"market",showTip:!1};n[5]!==void 0&&(ue.value=n[5]),_=new ji({props:ue}),De.push(()=>qe(_,"value",Z)),_.$on("input",n[26]),b=new Xs({props:{percent:n[5],maxQty:n[3],priceEp:n[0]}});let ce=n[17]===Ut.Open&&ua(n);T=new Sr({props:{type:"market",disabled:!n[18],buyText:sn(n[1],n[16],n[17],n[7],He,"Buy"),sellText:sn(n[1],n[16],n[17],n[7],He,"Sell")}}),T.$on("buy",n[20]),T.$on("sell",n[21]),V=new Js({props:{percent:n[5],quantity:n[11],maxQty:n[3],priceEp:n[0]}});function pe(oe){n[39](oe)}let me={contract:n[1],posMode:n[16],ordMode:n[17],isMarket:!0,account:n[2],priceEp:n[0],quantity:n[11],percentValue:n[5],maxQty:n[3]};return n[15]!==void 0&&(me.liq=n[15]),w=new Zs({props:me}),De.push(()=>qe(w,"liq",pe)),N=new xr({}),H=new zp({props:{quantity:n[11]}}),{c(){e=y("div"),F&&F.c(),t=q(),i=y("div"),te(r.$$.fragment),c=q(),f=y("div"),te(p.$$.fragment),d=q(),h=y("div"),te(_.$$.fragment),g=q(),te(b.$$.fragment),P=q(),ce&&ce.c(),I=q(),te(T.$$.fragment),C=q(),te(V.$$.fragment),O=q(),te(w.$$.fragment),L=q(),$=y("div"),te(N.$$.fragment),z=q(),te(H.$$.fragment),this.h()},l(oe){e=k(oe,"DIV",{class:!0});var ke=S(e);F&&F.l(ke),t=M(ke),i=k(ke,"DIV",{class:!0,"data-percent":!0});var Le=S(i);re(r.$$.fragment,Le),Le.forEach(m),c=M(ke),f=k(ke,"DIV",{class:!0});var ge=S(f);re(p.$$.fragment,ge),ge.forEach(m),d=M(ke),h=k(ke,"DIV",{class:!0});var ae=S(h);re(_.$$.fragment,ae),ae.forEach(m),g=M(ke),re(b.$$.fragment,ke),P=M(ke),ce&&ce.l(ke),I=M(ke),re(T.$$.fragment,ke),C=M(ke),re(V.$$.fragment,ke),O=M(ke),re(w.$$.fragment,ke),L=M(ke),$=k(ke,"DIV",{class:!0});var x=S($);re(N.$$.fragment,x),x.forEach(m),z=M(ke),re(H.$$.fragment,ke),ke.forEach(m),this.h()},h(){E(i,"class","mt16 pr percent-label"),E(i,"data-percent",a=n[5]>0?`${n[5]}%`:""),E(f,"class","mt10"),E(h,"class","mt16"),E($,"class","mt15 mb20"),E(e,"class","wrap")},m(oe,ke){G(oe,e,ke),F&&F.m(e,null),u(e,t),u(e,i),ne(r,i,null),n[37](i),u(e,c),u(e,f),ne(p,f,null),u(e,d),u(e,h),ne(_,h,null),u(e,g),ne(b,e,null),u(e,P),ce&&ce.m(e,null),u(e,I),ne(T,e,null),u(e,C),ne(V,e,null),u(e,O),ne(w,e,null),u(e,L),u(e,$),ne(N,$,null),u(e,z),ne(H,e,null),R=!0},p(oe,ke){oe[14]&&oe[19].isCheapCopyToken?F?F.p(oe,ke):(F=fa(oe),F.c(),F.m(e,t)):F&&(F.d(1),F=null);const Le=ke[0]&14755?dn(U,[U[0],U[1],ke[0]&128&&{label:oe[7](Ye.Size)},ke[0]&130&&{options:rn.createQtyOptions(oe[1],oe[7],Ye)},ke[0]&8192&&mn(oe[13]),ke[0]&6563&&{placeholder:Or(oe[7],oe[8],oe[0],oe[11],oe[12],oe[5],oe[1])}]):{};!l&&ke[0]&512&&(l=!0,Le.input=oe[9],Me(()=>l=!1)),!s&&ke[0]&16&&(s=!0,Le.quantity=oe[4],Me(()=>s=!1)),!o&&ke[0]&64&&(o=!0,Le.qtyType=oe[6],Me(()=>o=!1)),r.$set(Le),(!R||ke[0]&32&&a!==(a=oe[5]>0?`${oe[5]}%`:""))&&E(i,"data-percent",a);const ge={};ke[0]&128&&(ge.label=oe[7](Ye.Available)),ke[0]&6&&(ge.value=Mr(oe[1],oe[2])),p.$set(ge);const ae={};!v&&ke[0]&32&&(v=!0,ae.value=oe[5],Me(()=>v=!1)),_.$set(ae);const x={};ke[0]&32&&(x.percent=oe[5]),ke[0]&8&&(x.maxQty=oe[3]),ke[0]&1&&(x.priceEp=oe[0]),b.$set(x),oe[17]===Ut.Open?ce?(ce.p(oe,ke),ke[0]&131072&&Q(ce,1)):(ce=ua(oe),ce.c(),Q(ce,1),ce.m(e,I)):ce&&(ot(),j(ce,1,1,()=>{ce=null}),at());const le={};ke[0]&262144&&(le.disabled=!oe[18]),ke[0]&196738&&(le.buyText=sn(oe[1],oe[16],oe[17],oe[7],He,"Buy")),ke[0]&196738&&(le.sellText=sn(oe[1],oe[16],oe[17],oe[7],He,"Sell")),T.$set(le);const fe={};ke[0]&32&&(fe.percent=oe[5]),ke[0]&2048&&(fe.quantity=oe[11]),ke[0]&8&&(fe.maxQty=oe[3]),ke[0]&1&&(fe.priceEp=oe[0]),V.$set(fe);const Se={};ke[0]&2&&(Se.contract=oe[1]),ke[0]&65536&&(Se.posMode=oe[16]),ke[0]&131072&&(Se.ordMode=oe[17]),ke[0]&4&&(Se.account=oe[2]),ke[0]&1&&(Se.priceEp=oe[0]),ke[0]&2048&&(Se.quantity=oe[11]),ke[0]&32&&(Se.percentValue=oe[5]),ke[0]&8&&(Se.maxQty=oe[3]),!D&&ke[0]&32768&&(D=!0,Se.liq=oe[15],Me(()=>D=!1)),w.$set(Se);const Pe={};ke[0]&2048&&(Pe.quantity=oe[11]),H.$set(Pe)},i(oe){R||(Q(r.$$.fragment,oe),Q(p.$$.fragment,oe),Q(_.$$.fragment,oe),Q(b.$$.fragment,oe),Q(ce),Q(T.$$.fragment,oe),Q(V.$$.fragment,oe),Q(w.$$.fragment,oe),Q(N.$$.fragment,oe),Q(H.$$.fragment,oe),R=!0)},o(oe){j(r.$$.fragment,oe),j(p.$$.fragment,oe),j(_.$$.fragment,oe),j(b.$$.fragment,oe),j(ce),j(T.$$.fragment,oe),j(V.$$.fragment,oe),j(w.$$.fragment,oe),j(N.$$.fragment,oe),j(H.$$.fragment,oe),R=!1},d(oe){oe&&m(e),F&&F.d(),ie(r),n[37](null),ie(p),ie(_),ie(b),ce&&ce.d(),ie(T),ie(V),ie(w),ie(N),ie(H)}}}function t_(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v,g,b;J(n,Sn,he=>t(42,o=he)),J(n,Kr,he=>t(18,a=he)),J(n,dt,he=>t(7,c=he)),J(n,an,he=>t(8,f=he)),J(n,Wr,he=>t(43,p=he)),J(n,Gr,he=>t(44,d=he)),J(n,Yn,he=>t(45,h=he)),J(n,cr,he=>t(31,_=he)),J(n,_n,he=>t(32,v=he)),J(n,kn,he=>t(33,g=he)),J(n,or,he=>t(19,b=he));let{contract:P=null}=e,{market:I=null}=e,{account:T=null}=e,{maxQty:C={buyQty:0,sellQty:0}}=e,{priceEp:V=0}=e,O=null,w=null,D=0,L=0,$=0,N=P.contractSide>0?P.contractUnderlyingAssets:P.settleCurrency,z=0,H="",R={},F,U=!0,K={long:"-",short:""};Lt(()=>Pt.subscribe("global","quantity-click",he=>{t(4,L=Number(Re(he.quantity).times(P.qtyFactor))),O&&h&&O.focus()})),Lt(()=>{var he;const _e=vn.readContractStorage();_e&&_e.timestamp&&t(14,U=Date.now()-(((he=_e.timestamp)===null||he===void 0?void 0:he.cheapToken)||0)>864e5)});function Y(he,_e){const{symbol:be,contractSide:Ve,settleCurrency:Be,contractUnderlyingAssets:Fe}=he;if(be!==_e.symbol)return;const{kv:$e}=_e;t(4,L=$e.quantityEv);const{qtyType:Ae}=$e;Ae===we.Cont&&t(6,N=Ae),Ae===we.Base&&t(6,N=Be),Ae===we.Coin&&t(6,N=Ve>0?Fe:Be)}function X(he,_e,be){const{type:Ve,symbol:Be,contractSide:Fe,settleCurrency:$e,contractUnderlyingAssets:Ae}=he;let Ne;be===we.Cont&&(Ne=Ve==="PerpetualV2"?we.Base:we.Cont),be===$e&&(Ne=Fe>0?we.Base:we.Coin),Fe>0&&be===Ae&&(Ne=we.Coin),Pi.next({symbol:Be,kv:{quantityEv:_e,qtyType:Ne}})}function ee(he){if($<=0)return{quantity:D,iptValue:z};const _e=Jr(P,N,V,$,L,he==="Buy"?C.buyQty:C.sellQty),be=Zr(P,f,V,_e);return{quantity:(be==null?void 0:be.quantity)||D,iptValue:(be==null?void 0:be.iptValue)||z}}async function Z(he){const{quantity:_e,iptValue:be}=ee(he),Ve={quantity:_e,priceEp:V},Be={orderType:Ot.Market,costEv:he==="Buy"?d.costEv:p.costEv,availableBalanceEv:T.availableBalanceEv,contract:P,iptValue:be,qtyType:f},Fe=await Fs(c,Ve,Be);return Fe?(Pt.send("toast","info",{message:Fe}),!0):!1}async function ue(he){if(!a||await Z(he))return;const{quantity:be,iptValue:Ve}=ee(he),{symbol:Be}=P,Fe={actionBy:"FromOrderPlacement",symbol:Be,side:he,priceEp:I.closeEp,orderQty:be,ordType:"Market",postOnly:!1,reduceOnly:!1,timeInForce:"ImmediateOrCancel"};he===H&&Object.assign(Fe,Object.assign({},R));const $e=Object.assign({tpslSide:H},R);Bl.createOrder(Object.assign(Object.assign({},Fe),{iptValue:Ve}),$e,P),qi.next(Fe);const Ae=Bn(P,o,r,he);Pt.send("order-place","create-click",{position:Ae})}function ce(){ue("Buy")}function pe(){ue("Sell")}function me(he){R=he.detail}function oe(he){H=he.detail}function ke(he,_e,be,Ve,Be){if(he>0){t(11,D=0),t(12,z=0);return}const{type:Fe,qtyPrecision:$e,qtyScale:Ae,contPrecision:Ne,settleValuePrecision:Ge,valuePrecision:Xe,valueScale:ye}=Be;let Ke=0,Qe=0;Fe==="Perpetual"&&(Ke=be===we.Cont?Ne:Ge,Qe=Ae),Fe==="PerpetualV2"&&(Ke=be===we.Base?Xe:$e,Qe=be===we.Base?ye:Ae);const ze=Number(xe.floor(_e,Ke,Qe));if(be===we.Cont){t(11,D=ze);return}t(12,z=ze),be===we.Base&&t(11,D=Number(In(z,Ve,Be))),be===we.Coin&&t(11,D=Number(Dn(z,Be,Ve)))}function Le(he){t(4,L=0),t(5,$=0);const _e=Fi(he.detail,P);an.next(_e)}function ge(he,_e,be,Ve,Be){const{settleCurrency:Fe,contractUnderlyingAssets:$e}=Be;he===Fe&&_e>be&&t(4,L=be),he===$e&&_e>Ve&&t(4,L=Ve)}function ae(he){t(0,V=he?he.closeEp:0)}function x(){t(5,$=0),O&&O.focus()}function le(he,_e,be,Ve,Be,Fe,$e){const Ae=ei(he,_e,be,Ve,Be,Fe);return Object.assign(Object.assign({},Ae),{placeholder:$e>0?"":Ae.placeholder})}function fe(){t(4,L=0),t(9,O.placeholder="",O)}function Se(){t(14,U=!U);const{timestamp:he}=vn.readContractStorage(),_e=Object.assign(Object.assign({},he),{cheapToken:Date.now()});vn.updateContractStorage({timestamp:_e})}function Pe(he){t(5,$=0)}function Ce(he){O=he,t(9,O)}function Ee(he){L=he,t(4,L)}function Ie(he){N=he,t(6,N)}function ve(he){De[he?"unshift":"push"](()=>{w=he,t(10,w)})}function de(he){$=he,t(5,$)}function se(he){K=he,t(15,K)}return n.$$set=he=>{"contract"in he&&t(1,P=he.contract),"market"in he&&t(28,I=he.market),"account"in he&&t(2,T=he.account),"maxQty"in he&&t(3,C=he.maxQty),"priceEp"in he&&t(0,V=he.priceEp)},n.$$.update=()=>{n.$$.dirty[0]&2&&Pe(),n.$$.dirty[1]&4&&t(17,i=g),n.$$.dirty[1]&2&&t(16,r=v),n.$$.dirty[0]&3&&t(30,l=li(P,V)),n.$$.dirty[0]&2&&t(29,s=si(P)),n.$$.dirty[0]&1610613154&&t(13,F=le(f,c,Ye,P,l,s,$)),n.$$.dirty[0]&2|n.$$.dirty[1]&1&&Y(P,_),n.$$.dirty[0]&268435456&&ae(I),n.$$.dirty[0]&82&&X(P,L,N),n.$$.dirty[0]&307&&ke($,L,f,V,P),n.$$.dirty[0]&1610612818&&ge(N,L,l,s,P)},[V,P,T,C,L,$,N,c,f,O,w,D,z,F,U,K,r,i,a,b,ce,pe,me,oe,Le,x,fe,Se,I,s,l,_,v,g,Ce,Ee,Ie,ve,de,se]}let n_=class extends tt{constructor(e){super(),nt(this,e,t_,e_,et,{contract:1,market:28,account:2,maxQty:3,priceEp:0},null,[-1,-1])}};function i_(n){let e,t,i,r;function l(a){n[39](a)}function s(a){n[40](a)}let o={class:"limit-price",isInline:!1,operation:!1,label:n[10](Ye.LimitPrice),unit:n[1].quoteCurrency,tickSizeEp:n[1].tickSizeEp,precision:n[1].pricePrecision,maxPriceEp:n[1].maxPriceEp,factor:n[1].priceFactor,scale:n[1].priceScale};return n[12]!==void 0&&(o.input=n[12]),n[0]!==void 0&&(o.priceEp=n[0]),e=new yn({props:o}),De.push(()=>qe(e,"input",l)),De.push(()=>qe(e,"priceEp",s)),{c(){te(e.$$.fragment)},l(a){re(e.$$.fragment,a)},m(a,c){ne(e,a,c),r=!0},p(a,c){const f={};c[0]&1024&&(f.label=a[10](Ye.LimitPrice)),c[0]&2&&(f.unit=a[1].quoteCurrency),c[0]&2&&(f.tickSizeEp=a[1].tickSizeEp),c[0]&2&&(f.precision=a[1].pricePrecision),c[0]&2&&(f.maxPriceEp=a[1].maxPriceEp),c[0]&2&&(f.factor=a[1].priceFactor),c[0]&2&&(f.scale=a[1].priceScale),!t&&c[0]&4096&&(t=!0,f.input=a[12],Me(()=>t=!1)),!i&&c[0]&1&&(i=!0,f.priceEp=a[0],Me(()=>i=!1)),e.$set(f)},i(a){r||(Q(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){ie(e,a)}}}function pa(n){let e,t,i;return t=new Ys({props:{liqPrice:n[18],priceEp:n[0],size:n[15],percent:n[8]}}),t.$on("change",n[28]),t.$on("sideChange",n[29]),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);re(t.$$.fragment,l),l.forEach(m),this.h()},h(){E(e,"class","tp-sl H-1nr3anb")},m(r,l){G(r,e,l),ne(t,e,null),i=!0},p(r,l){const s={};l[0]&262144&&(s.liqPrice=r[18]),l[0]&1&&(s.priceEp=r[0]),l[0]&32768&&(s.size=r[15]),l[0]&256&&(s.percent=r[8]),t.$set(s)},i(r){i||(Q(t.$$.fragment,r),i=!0)},o(r){j(t.$$.fragment,r),i=!1},d(r){r&&m(e),ie(t)}}}function r_(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,V,O,w,D,L,$,N,z,H,R,F,U,K,Y,X,ee,Z,ue;t=new ns({props:{$$slots:{default:[i_]},$$scope:{ctx:n}}});const ce=[{class:"limit-quantity"},{isInline:!1},{operation:!1},{label:n[10](Ye.Size)},{options:rn.createQtyOptions(n[1],n[10],Ye)},n[17],{placeholder:Or(n[10],n[11],n[0],n[15],n[16],n[8],n[1])}];function pe(se){n[41](se)}function me(se){n[42](se)}function oe(se){n[43](se)}let ke={};for(let se=0;se<ce.length;se+=1)ke=pn(ke,ce[se]);n[13]!==void 0&&(ke.input=n[13]),n[4]!==void 0&&(ke.quantity=n[4]),n[9]!==void 0&&(ke.qtyType=n[9]),l=new Un({props:ke}),De.push(()=>qe(l,"input",pe)),De.push(()=>qe(l,"quantity",me)),De.push(()=>qe(l,"qtyType",oe)),l.$on("change",n[30]),l.$on("focus",n[31]),d=new zs({props:{label:n[10](Ye.Available),value:Mr(n[1],n[2])}});function Le(se){n[45](se)}let ge={type:"limit",showTip:!1};n[8]!==void 0&&(ge.value=n[8]),v=new ji({props:ge}),De.push(()=>qe(v,"value",Le)),v.$on("input",n[32]),P=new Xs({props:{percent:n[8],maxQty:n[3],priceEp:n[0]}});let ae=n[24]===Ut.Open&&pa(n);C=new Sr({props:{type:"limit",disabled:!n[25],buyText:sn(n[1],n[23],n[24],n[10],He,"Buy"),sellText:sn(n[1],n[23],n[24],n[10],He,"Sell")}}),C.$on("buy",n[26]),C.$on("sell",n[27]),O=new Js({props:{percent:n[8],quantity:n[15],maxQty:n[3],priceEp:n[0]}});function x(se){n[46](se)}let le={contract:n[1],posMode:n[23],isMarket:!1,ordMode:n[24],account:n[2],priceEp:n[0],quantity:n[15],percentValue:n[8],maxQty:n[3]};n[18]!==void 0&&(le.liq=n[18]),D=new Zs({props:le}),De.push(()=>qe(D,"liq",x)),z=new xr({});function fe(se){n[47](se)}function Se(se){n[48](se)}function Pe(se){n[49](se)}function Ce(se){n[50](se)}function Ee(se){n[51](se)}function Ie(se){n[52](se)}function ve(se){n[53](se)}let de={tabType:Ot.Limit,quantity:n[4],qtyType:n[9],priceEp:n[0]};return n[5]!==void 0&&(de.postOnly=n[5]),n[6]!==void 0&&(de.reduceOnly=n[6]),n[7]!==void 0&&(de.timeInForce=n[7]),n[19]!==void 0&&(de.iceberg=n[19]),n[20]!==void 0&&(de.icebergQty=n[20]),n[21]!==void 0&&(de.icebergOrders=n[21]),n[22]!==void 0&&(de.icebergInputType=n[22]),R=new xl({props:de}),De.push(()=>qe(R,"postOnly",fe)),De.push(()=>qe(R,"reduceOnly",Se)),De.push(()=>qe(R,"timeInForce",Pe)),De.push(()=>qe(R,"iceberg",Ce)),De.push(()=>qe(R,"icebergQty",Ee)),De.push(()=>qe(R,"icebergOrders",Ie)),De.push(()=>qe(R,"icebergInputType",ve)),{c(){e=y("div"),te(t.$$.fragment),i=q(),r=y("div"),te(l.$$.fragment),f=q(),p=y("div"),te(d.$$.fragment),h=q(),_=y("div"),te(v.$$.fragment),b=q(),te(P.$$.fragment),I=q(),ae&&ae.c(),T=q(),te(C.$$.fragment),V=q(),te(O.$$.fragment),w=q(),te(D.$$.fragment),$=q(),N=y("div"),te(z.$$.fragment),H=q(),te(R.$$.fragment),this.h()},l(se){e=k(se,"DIV",{class:!0});var he=S(e);re(t.$$.fragment,he),i=M(he),r=k(he,"DIV",{class:!0,"data-percent":!0});var _e=S(r);re(l.$$.fragment,_e),_e.forEach(m),f=M(he),p=k(he,"DIV",{class:!0});var be=S(p);re(d.$$.fragment,be),be.forEach(m),h=M(he),_=k(he,"DIV",{class:!0});var Ve=S(_);re(v.$$.fragment,Ve),Ve.forEach(m),b=M(he),re(P.$$.fragment,he),I=M(he),ae&&ae.l(he),T=M(he),re(C.$$.fragment,he),V=M(he),re(O.$$.fragment,he),w=M(he),re(D.$$.fragment,he),$=M(he),N=k(he,"DIV",{class:!0});var Be=S(N);re(z.$$.fragment,Be),Be.forEach(m),H=M(he),re(R.$$.fragment,he),he.forEach(m),this.h()},h(){E(r,"class","pr mt16 percent-label"),E(r,"data-percent",c=n[8]>0?`${n[8]}%`:""),E(p,"class","mt10"),E(_,"class","mt16"),E(N,"class","mt15 mb20"),E(e,"class","wrap")},m(se,he){G(se,e,he),ne(t,e,null),u(e,i),u(e,r),ne(l,r,null),n[44](r),u(e,f),u(e,p),ne(d,p,null),u(e,h),u(e,_),ne(v,_,null),u(e,b),ne(P,e,null),u(e,I),ae&&ae.m(e,null),u(e,T),ne(C,e,null),u(e,V),ne(O,e,null),u(e,w),ne(D,e,null),u(e,$),u(e,N),ne(z,N,null),u(e,H),ne(R,e,null),ue=!0},p(se,he){const _e={};he[0]&5123|he[2]&4096&&(_e.$$scope={dirty:he,ctx:se}),t.$set(_e);const be=he[0]&232707?dn(ce,[ce[0],ce[1],ce[2],he[0]&1024&&{label:se[10](Ye.Size)},he[0]&1026&&{options:rn.createQtyOptions(se[1],se[10],Ye)},he[0]&131072&&mn(se[17]),he[0]&101635&&{placeholder:Or(se[10],se[11],se[0],se[15],se[16],se[8],se[1])}]):{};!s&&he[0]&8192&&(s=!0,be.input=se[13],Me(()=>s=!1)),!o&&he[0]&16&&(o=!0,be.quantity=se[4],Me(()=>o=!1)),!a&&he[0]&512&&(a=!0,be.qtyType=se[9],Me(()=>a=!1)),l.$set(be),(!ue||he[0]&256&&c!==(c=se[8]>0?`${se[8]}%`:""))&&E(r,"data-percent",c);const Ve={};he[0]&1024&&(Ve.label=se[10](Ye.Available)),he[0]&6&&(Ve.value=Mr(se[1],se[2])),d.$set(Ve);const Be={};!g&&he[0]&256&&(g=!0,Be.value=se[8],Me(()=>g=!1)),v.$set(Be);const Fe={};he[0]&256&&(Fe.percent=se[8]),he[0]&8&&(Fe.maxQty=se[3]),he[0]&1&&(Fe.priceEp=se[0]),P.$set(Fe),se[24]===Ut.Open?ae?(ae.p(se,he),he[0]&16777216&&Q(ae,1)):(ae=pa(se),ae.c(),Q(ae,1),ae.m(e,T)):ae&&(ot(),j(ae,1,1,()=>{ae=null}),at());const $e={};he[0]&33554432&&($e.disabled=!se[25]),he[0]&25166850&&($e.buyText=sn(se[1],se[23],se[24],se[10],He,"Buy")),he[0]&25166850&&($e.sellText=sn(se[1],se[23],se[24],se[10],He,"Sell")),C.$set($e);const Ae={};he[0]&256&&(Ae.percent=se[8]),he[0]&32768&&(Ae.quantity=se[15]),he[0]&8&&(Ae.maxQty=se[3]),he[0]&1&&(Ae.priceEp=se[0]),O.$set(Ae);const Ne={};he[0]&2&&(Ne.contract=se[1]),he[0]&8388608&&(Ne.posMode=se[23]),he[0]&16777216&&(Ne.ordMode=se[24]),he[0]&4&&(Ne.account=se[2]),he[0]&1&&(Ne.priceEp=se[0]),he[0]&32768&&(Ne.quantity=se[15]),he[0]&256&&(Ne.percentValue=se[8]),he[0]&8&&(Ne.maxQty=se[3]),!L&&he[0]&262144&&(L=!0,Ne.liq=se[18],Me(()=>L=!1)),D.$set(Ne);const Ge={};he[0]&16&&(Ge.quantity=se[4]),he[0]&512&&(Ge.qtyType=se[9]),he[0]&1&&(Ge.priceEp=se[0]),!F&&he[0]&32&&(F=!0,Ge.postOnly=se[5],Me(()=>F=!1)),!U&&he[0]&64&&(U=!0,Ge.reduceOnly=se[6],Me(()=>U=!1)),!K&&he[0]&128&&(K=!0,Ge.timeInForce=se[7],Me(()=>K=!1)),!Y&&he[0]&524288&&(Y=!0,Ge.iceberg=se[19],Me(()=>Y=!1)),!X&&he[0]&1048576&&(X=!0,Ge.icebergQty=se[20],Me(()=>X=!1)),!ee&&he[0]&2097152&&(ee=!0,Ge.icebergOrders=se[21],Me(()=>ee=!1)),!Z&&he[0]&4194304&&(Z=!0,Ge.icebergInputType=se[22],Me(()=>Z=!1)),R.$set(Ge)},i(se){ue||(Q(t.$$.fragment,se),Q(l.$$.fragment,se),Q(d.$$.fragment,se),Q(v.$$.fragment,se),Q(P.$$.fragment,se),Q(ae),Q(C.$$.fragment,se),Q(O.$$.fragment,se),Q(D.$$.fragment,se),Q(z.$$.fragment,se),Q(R.$$.fragment,se),ue=!0)},o(se){j(t.$$.fragment,se),j(l.$$.fragment,se),j(d.$$.fragment,se),j(v.$$.fragment,se),j(P.$$.fragment,se),j(ae),j(C.$$.fragment,se),j(O.$$.fragment,se),j(D.$$.fragment,se),j(z.$$.fragment,se),j(R.$$.fragment,se),ue=!1},d(se){se&&m(e),ie(t),ie(l),n[44](null),ie(d),ie(v),ie(P),ae&&ae.d(),ie(C),ie(O),ie(D),ie(z),ie(R)}}}const wi={symbol:"",priceEp:0};function l_(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v,g,b;J(n,Ci,Oe=>t(58,o=Oe)),J(n,xn,Oe=>t(59,a=Oe)),J(n,Sn,Oe=>t(60,c=Oe)),J(n,Kr,Oe=>t(25,f=Oe)),J(n,dt,Oe=>t(10,p=Oe)),J(n,an,Oe=>t(11,d=Oe)),J(n,Wr,Oe=>t(61,h=Oe)),J(n,Gr,Oe=>t(62,_=Oe)),J(n,cr,Oe=>t(36,v=Oe)),J(n,_n,Oe=>t(37,g=Oe)),J(n,kn,Oe=>t(38,b=Oe));let{contract:P=null}=e,{market:I=null}=e,{account:T=null}=e,{priceEp:C=wi.symbol===P.symbol?wi.priceEp:0}=e,{maxQty:V={buyQty:0,sellQty:0}}=e,O=null,w=null,D=null,L=!1,$=0,N=0,z=!1,H=!1,R="GoodTillCancel",F=0,U=P.contractSide>0?P.contractUnderlyingAssets:P.settleCurrency,K=0,Y="",X={},ee={},Z={long:"-",short:""},ue=!1,ce=0,pe=0,me="Orders";Lt(()=>()=>{wi.symbol=P.symbol,wi.priceEp=C}),Lt(()=>Pt.subscribe("global","price-click",Oe=>{t(0,C=xe.roundPriceEp(xe.priceToEp(Oe.price,P.priceScale),P.tickSizeEp)),O&&O.focus()})),Lt(()=>Pt.subscribe("global","quantity-click",Oe=>{t(4,N=Number(Re(Oe.quantity).times(P.qtyFactor))),w&&w.focus()}));function oe(Oe,it){const{symbol:ct,contractSide:ft,settleCurrency:_t,contractUnderlyingAssets:Et}=Oe;if(ct!==it.symbol)return;const{kv:gt}=it;t(4,N=gt.quantityEv),t(5,z=gt.postOnly),t(6,H=gt.reduceOnly),gt.slTrigger,t(7,R=gt.timeInForce);const{qtyType:Dt}=gt;Dt===we.Cont&&t(9,U=Dt),Dt===we.Base&&t(9,U=_t),Dt===we.Coin&&t(9,U=ft>0?Et:_t)}function ke(Oe,it,ct,ft,_t,Et){const{type:gt,symbol:Dt,contractSide:It,settleCurrency:pt,contractUnderlyingAssets:mt}=Oe;let Nt;Et===we.Cont&&(Nt=gt==="PerpetualV2"?we.Base:we.Cont),Et===pt&&(Nt=It>0?we.Base:we.Coin),It>0&&Et===mt&&(Nt=we.Coin),Pi.next({symbol:Dt,kv:{quantityEv:it,postOnly:ct,reduceOnly:ft,timeInForce:_t,qtyType:Nt}})}function Le(Oe){L=!1;const{symbol:it}=Oe;wi.symbol!==it&&(wi.symbol=it,wi.priceEp=0,t(0,C=0),t(8,F=0))}function ge(Oe,it){if(L||C!==0||it.closeEp===0)return;const{symbol:ct}=Oe;it.symbol===ct&&(wi.symbol===ct&&wi.priceEp!==0||(t(0,C=it.closeEp),L=!0))}function ae(Oe,it){it&&R!=="GoodTillCancel"&&(t(7,R="GoodTillCancel"),Pi.next({symbol:Oe.symbol,kv:{timeInForce:R}}))}function x(Oe){if(F<=0)return{quantity:$,iptValue:K};const it=Jr(P,U,C,F,N,Oe==="Buy"?V.buyQty:V.sellQty),ct=Zr(P,d,C,it);return{quantity:(ct==null?void 0:ct.quantity)||$,iptValue:(ct==null?void 0:ct.iptValue)||K}}async function le(Oe){const{quantity:it,iptValue:ct}=x(Oe),ft={priceEp:C,quantity:it},_t={orderType:Ot.Limit,costEv:Oe==="Buy"?_.costEv:h.costEv,availableBalanceEv:T.availableBalanceEv,contract:P,iptValue:ct,qtyType:d,iceberg:ue,icebergQty:ce,icebergOrders:pe,icebergInputType:me},Et=await Fs(p,ft,_t);return Et?(Pt.send("toast","info",{message:Et}),!0):!1}async function fe(Oe){if(!f||await le(Oe))return;const{quantity:ct,iptValue:ft}=x(Oe),{symbol:_t,tickSizeEp:Et}=P,gt={actionBy:"FromOrderPlacement",symbol:_t,side:Oe,priceEp:C,orderQty:ct,ordType:"Limit",postOnly:z,reduceOnly:H,timeInForce:R,icebergQty:ce,icebergOrders:pe},Dt=Object.assign({tpslSide:Y},X);Bl.createOrder(Object.assign(Object.assign({},gt),{iptValue:ft}),Dt,P),Oe===Y&&Object.assign(gt,Object.assign({},X)),qi.next(gt);const It=Bn(P,c,r,Oe),pt=Et*30;if(a.orderFatFingerProtection){const{bid1Ep:Nt,ask1Ep:Rt}=o;if(Oe==="Sell"&&C<Nt-pt||Oe==="Buy"&&C>Rt+pt){Pt.send("order-protect","order-protect-click",{position:It});return}}Pt.send("order-place","create-click",{position:It})}function Se(){fe("Buy")}function Pe(){fe("Sell")}function Ce(Oe){X=Oe.detail}function Ee(Oe){Y=Oe.detail}function Ie(Oe,it,ct,ft,_t){if(Oe>0){t(15,$=0),t(16,K=0);return}const{type:Et,qtyPrecision:gt,qtyScale:Dt,contPrecision:It,settleValuePrecision:pt,valuePrecision:mt,valueScale:Nt}=_t;let Rt=0,je=0;Et==="Perpetual"&&(Rt=ct===we.Cont?It:pt,je=Dt),Et==="PerpetualV2"&&(Rt=ct===we.Base?mt:gt,je=ct===we.Base?Nt:Dt);const lt=Number(xe.floor(it,Rt,je));if(ct===we.Cont){t(15,$=lt);return}t(16,K=lt),ct===we.Base&&t(15,$=Number(In(K,ft,_t))),ct===we.Coin&&t(15,$=Number(Dn(K,_t,ft)))}function ve(Oe){t(4,N=0),t(8,F=0);const it=Fi(Oe.detail,P);an.next(it)}function de(Oe,it,ct,ft,_t){if(Oe===we.Cont)return;const{settleCurrency:Et,contractUnderlyingAssets:gt}=_t;Oe===Et&&it>ct&&t(4,N=ct),Oe===gt&&it>ft&&t(4,N=ft)}function se(){t(8,F=0),w&&w.focus()}function he(Oe,it,ct,ft,_t,Et,gt){const Dt=ei(Oe,it,ct,ft,_t,Et);return Object.assign(Object.assign({},Dt),{placeholder:gt>0?"":Dt.placeholder})}function _e(){t(4,N=0),t(13,w.placeholder="",w)}function be(Oe){O=Oe,t(12,O)}function Ve(Oe){C=Oe,t(0,C)}function Be(Oe){w=Oe,t(13,w)}function Fe(Oe){N=Oe,t(4,N)}function $e(Oe){U=Oe,t(9,U)}function Ae(Oe){De[Oe?"unshift":"push"](()=>{D=Oe,t(14,D)})}function Ne(Oe){F=Oe,t(8,F)}function Ge(Oe){Z=Oe,t(18,Z)}function Xe(Oe){z=Oe,t(5,z)}function ye(Oe){H=Oe,t(6,H)}function Ke(Oe){R=Oe,t(7,R)}function Qe(Oe){ue=Oe,t(19,ue)}function ze(Oe){ce=Oe,t(20,ce)}function Ue(Oe){pe=Oe,t(21,pe)}function st(Oe){me=Oe,t(22,me)}return n.$$set=Oe=>{"contract"in Oe&&t(1,P=Oe.contract),"market"in Oe&&t(33,I=Oe.market),"account"in Oe&&t(2,T=Oe.account),"priceEp"in Oe&&t(0,C=Oe.priceEp),"maxQty"in Oe&&t(3,V=Oe.maxQty)},n.$$.update=()=>{n.$$.dirty[1]&128&&t(24,i=b),n.$$.dirty[1]&64&&t(23,r=g),n.$$.dirty[0]&2|n.$$.dirty[1]&32&&oe(P,v),n.$$.dirty[0]&3&&t(35,l=li(P,C)),n.$$.dirty[0]&2&&t(34,s=si(P)),n.$$.dirty[0]&3330|n.$$.dirty[1]&24&&t(17,ee=he(d,p,Ye,P,l,s,F)),n.$$.dirty[0]&2&&Le(P),n.$$.dirty[0]&2|n.$$.dirty[1]&4&&ge(P,I),n.$$.dirty[0]&34&&ae(P,z),n.$$.dirty[0]&754&&ke(P,N,z,H,R,U),n.$$.dirty[0]&2323&&Ie(F,N,d,C,P),n.$$.dirty[0]&530|n.$$.dirty[1]&24&&de(U,N,l,s,P)},[C,P,T,V,N,z,H,R,F,U,p,d,O,w,D,$,K,ee,Z,ue,ce,pe,me,r,i,f,Se,Pe,Ce,Ee,ve,se,_e,I,s,l,v,g,b,be,Ve,Be,Fe,$e,Ae,Ne,Ge,Xe,ye,Ke,Qe,ze,Ue,st]}let s_=class extends tt{constructor(e){super(),nt(this,e,l_,r_,et,{contract:1,market:33,account:2,priceEp:0,maxQty:3},null,[-1,-1,-1])}};function ir(n,e,t,i){if(e===Ct.Hedge&&n===Ut.Close){const r=t.find(({posSide:l})=>l===i);return r?r.size:0}return 0}function is(n,e,t,i,r){const{precision:l,scale:s}=r,o=Number(xe.floor(e,l,s)),a=o_(n,t,i);return{minClosePosTipVisible:e>0?o<a:!1,minOrderQty:a}}function o_(n,e,t){const i=_r(e,t),{settleValuePrecision:r,contractSize:l,type:s,qtyStepSize:o,valuePrecision:a}=t;return{Perpetual:{[we.Cont]:1,[we.Base]:l,[we.Coin]:xe.floor(i,r)},PerpetualV2:{[we.Base]:xe.floor(Re(e).times(o),a),[we.Coin]:o}}[s][n]}function a_(n){let e,t,i,r=n[2](Ye.MaxCloseLong)+"",l,s,o,a,c,f,p,d=n[2](Ye.MaxCloseShort)+"",h,_,v,g;return{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),s=q(),o=y("span"),a=B(n[1]),c=q(),f=y("div"),p=y("span"),h=B(d),_=q(),v=y("span"),g=B(n[0]),this.h()},l(b){e=k(b,"DIV",{class:!0});var P=S(e);t=k(P,"DIV",{class:!0});var I=S(t);i=k(I,"SPAN",{class:!0});var T=S(i);l=A(T,r),T.forEach(m),s=M(I),o=k(I,"SPAN",{class:!0});var C=S(o);a=A(C,n[1]),C.forEach(m),I.forEach(m),c=M(P),f=k(P,"DIV",{class:!0});var V=S(f);p=k(V,"SPAN",{class:!0});var O=S(p);h=A(O,d),O.forEach(m),_=M(V),v=k(V,"SPAN",{class:!0});var w=S(v);g=A(w,n[0]),w.forEach(m),V.forEach(m),P.forEach(m),this.h()},h(){E(i,"class","T3"),E(o,"class","T1"),E(t,"class","f1 lh18 f12"),E(p,"class","T3"),E(v,"class","T1"),E(f,"class","h18 f12"),E(e,"class","mt8")},m(b,P){G(b,e,P),u(e,t),u(t,i),u(i,l),u(t,s),u(t,o),u(o,a),u(e,c),u(e,f),u(f,p),u(p,h),u(f,_),u(f,v),u(v,g)},p(b,[P]){P&4&&r!==(r=b[2](Ye.MaxCloseLong)+"")&&W(l,r),P&2&&W(a,b[1]),P&4&&d!==(d=b[2](Ye.MaxCloseShort)+"")&&W(h,d),P&1&&W(g,b[0])},i:rt,o:rt,d(b){b&&m(e)}}}function c_(n,e,t){let i,r,l;J(n,dt,d=>t(2,l=d));let{contract:s=null}=e,{priceEp:o=0}=e,{closeLongMax:a=0}=e,{closeShortMax:c=0}=e,{qtyType:f=we.Coin}=e;function p(d,h,_,v){const{settleCurrency:g,qtyPrecision:b,valuePrecision:P,contractUnderlyingAssets:I}=v,T=_===we.Coin,C=T?b:P,V=T?I:g;if(d<=0||h<=0)return xe.floor(0,C)+" "+V;const O=T?d:Re(d).times(h);return xe.floor(O,C)+" "+V}return n.$$set=d=>{"contract"in d&&t(3,s=d.contract),"priceEp"in d&&t(4,o=d.priceEp),"closeLongMax"in d&&t(5,a=d.closeLongMax),"closeShortMax"in d&&t(6,c=d.closeShortMax),"qtyType"in d&&t(7,f=d.qtyType)},n.$$.update=()=>{n.$$.dirty&184&&t(1,i=p(a,o,f,s)),n.$$.dirty&216&&t(0,r=p(c,o,f,s))},[r,i,l,s,o,a,c,f]}let xs=class extends tt{constructor(e){super(),nt(this,e,c_,a_,et,{contract:3,priceEp:4,closeLongMax:5,closeShortMax:6,qtyType:7})}};function f_(n){let e,t,i,r=n[2](Ye.Close)+"",l,s,o,a,c,f,p,d,h=n[2](Ye.Close)+"",_,v,g,b,P;return{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),s=B(":"),o=q(),a=y("span"),c=B(n[1]),f=q(),p=y("div"),d=y("span"),_=B(h),v=B(":"),g=q(),b=y("span"),P=B(n[0]),this.h()},l(I){e=k(I,"DIV",{class:!0});var T=S(e);t=k(T,"DIV",{});var C=S(t);i=k(C,"SPAN",{class:!0});var V=S(i);l=A(V,r),s=A(V,":"),V.forEach(m),o=M(C),a=k(C,"SPAN",{class:!0});var O=S(a);c=A(O,n[1]),O.forEach(m),C.forEach(m),f=M(T),p=k(T,"DIV",{});var w=S(p);d=k(w,"SPAN",{class:!0});var D=S(d);_=A(D,h),v=A(D,":"),D.forEach(m),g=M(w),b=k(w,"SPAN",{class:!0});var L=S(b);P=A(L,n[0]),L.forEach(m),w.forEach(m),T.forEach(m),this.h()},h(){E(i,"class","T3"),E(a,"class","T1"),E(d,"class","T3"),E(b,"class","T1"),E(e,"class","df aic jcsb mt8 f12")},m(I,T){G(I,e,T),u(e,t),u(t,i),u(i,l),u(i,s),u(t,o),u(t,a),u(a,c),u(e,f),u(e,p),u(p,d),u(d,_),u(d,v),u(p,g),u(p,b),u(b,P)},p(I,[T]){T&4&&r!==(r=I[2](Ye.Close)+"")&&W(l,r),T&2&&W(c,I[1]),T&4&&h!==(h=I[2](Ye.Close)+"")&&W(_,h),T&1&&W(P,I[0])},i:rt,o:rt,d(I){I&&m(e)}}}function u_(n,e,t){let i,r,l,s,o;J(n,Sn,_=>t(9,s=_)),J(n,dt,_=>t(2,o=_));let{priceEp:a=0}=e,{quantity:c=0}=e,{percentValue:f=0}=e,{qtyType:p=we.Coin}=e,{contract:d}=e;function h(_,v,g,b,P,I,T){const{settleCurrency:C,qtyPrecision:V,valuePrecision:O,contractUnderlyingAssets:w}=b,D=g===we.Coin,L=D?V:O,$=D?w:C,{size:N=0}=I.find(({posSide:R})=>R===T),z=P>0?Re(P).times(N).div(100):_;if(z<=0||v<=0)return xe.floor(0,L)+" "+$;const H=D?z:Re(z).times(v);return xe.floor(H,L)+" "+$}return n.$$set=_=>{"priceEp"in _&&t(3,a=_.priceEp),"quantity"in _&&t(4,c=_.quantity),"percentValue"in _&&t(5,f=_.percentValue),"qtyType"in _&&t(6,p=_.qtyType),"contract"in _&&t(7,d=_.contract)},n.$$.update=()=>{n.$$.dirty&512&&t(8,i=s),n.$$.dirty&504&&t(1,r=h(c,a,p,d,f,i,"Long")),n.$$.dirty&504&&t(0,l=h(c,a,p,d,f,i,"Short"))},[l,r,o,a,c,f,p,d,i,s]}let eo=class extends tt{constructor(e){super(),nt(this,e,u_,f_,et,{priceEp:3,quantity:4,percentValue:5,qtyType:6,contract:7})}};function p_(n){let e,t,i,r;function l(a){n[33](a)}function s(a){n[34](a)}let o={class:"limit-price f1",isInline:!1,operation:!1,label:n[9](Ye.LimitPrice),unit:n[1].quoteCurrency,tickSizeEp:n[1].tickSizeEp,precision:n[1].pricePrecision,maxPriceEp:n[1].maxPriceEp,factor:n[1].priceFactor,scale:n[1].priceScale};return n[10]!==void 0&&(o.input=n[10]),n[0]!==void 0&&(o.priceEp=n[0]),e=new yn({props:o}),De.push(()=>qe(e,"input",l)),De.push(()=>qe(e,"priceEp",s)),{c(){te(e.$$.fragment)},l(a){re(e.$$.fragment,a)},m(a,c){ne(e,a,c),r=!0},p(a,c){const f={};c[0]&512&&(f.label=a[9](Ye.LimitPrice)),c[0]&2&&(f.unit=a[1].quoteCurrency),c[0]&2&&(f.tickSizeEp=a[1].tickSizeEp),c[0]&2&&(f.precision=a[1].pricePrecision),c[0]&2&&(f.maxPriceEp=a[1].maxPriceEp),c[0]&2&&(f.factor=a[1].priceFactor),c[0]&2&&(f.scale=a[1].priceScale),!t&&c[0]&1024&&(t=!0,f.input=a[10],Me(()=>t=!1)),!i&&c[0]&1&&(i=!0,f.priceEp=a[0],Me(()=>i=!1)),e.$set(f)},i(a){r||(Q(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){ie(e,a)}}}function da(n){var l;let e,t=n[9](Ye.MinPositionWillClose,{Min:(l=n[18])==null?void 0:l.minOrderQty,Unit:n[15]})+"",i,r;return{c(){e=y("div"),i=B(t),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);i=A(o,t),o.forEach(m),this.h()},h(){E(e,"class","mt5 sell f12"),jn(()=>n[38].call(e))},m(s,o){G(s,e,o),u(e,i),r=hi(e,n[38].bind(e))},p(s,o){var a;o[0]&295424&&t!==(t=s[9](Ye.MinPositionWillClose,{Min:(a=s[18])==null?void 0:a.minOrderQty,Unit:s[15]})+"")&&W(i,t)},d(s){s&&m(e),r()}}}function d_(n){var ce;let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,V,O,w,D,L,$,N;t=new ns({props:{$$slots:{default:[p_]},$$scope:{ctx:n}}});const z=[{class:"limit-quantity"},{isInline:!1},{operation:!1},{label:n[9](Ye.Size)},{options:rn.createQtyOptions(n[1],n[9],Ye)},n[5]];function H(pe){n[35](pe)}function R(pe){n[36](pe)}function F(pe){n[37](pe)}let U={};for(let pe=0;pe<z.length;pe+=1)U=pn(U,z[pe]);n[11]!==void 0&&(U.input=n[11]),n[2]!==void 0&&(U.quantity=n[2]),n[15]!==void 0&&(U.qtyType=n[15]),l=new Un({props:U}),De.push(()=>qe(l,"input",H)),De.push(()=>qe(l,"quantity",R)),De.push(()=>qe(l,"qtyType",F)),l.$on("change",n[23]),l.$on("focus",n[24]);let K=((ce=n[18])==null?void 0:ce.minClosePosTipVisible)&&da(n);d=new xs({props:{priceEp:n[0],contract:n[1],closeLongMax:n[16],closeShortMax:n[17],qtyType:n[8]}});function Y(pe){n[40](pe)}let X={type:"limit"};n[14]!==void 0&&(X.value=n[14]),v=new ji({props:X}),De.push(()=>qe(v,"value",Y)),v.$on("input",n[22]),P=new Sr({props:{type:"limit",placeOrderMode:Ut.Close,disabled:!n[20],buyText:sn(n[1],n[6],n[7],n[9],He,"Buy"),sellText:sn(n[1],n[6],n[7],n[9],He,"Sell")}}),P.$on("buy",n[21]("Buy")),P.$on("sell",n[21]("Sell")),T=new eo({props:{priceEp:n[0],quantity:n[13],contract:n[1],percentValue:n[14],qtyType:n[8]}}),O=new xr({});function ee(pe){n[41](pe)}function Z(pe){n[42](pe)}let ue={tabType:Ot.Limit};return n[3]!==void 0&&(ue.postOnly=n[3]),n[4]!==void 0&&(ue.timeInForce=n[4]),D=new xl({props:ue}),De.push(()=>qe(D,"postOnly",ee)),De.push(()=>qe(D,"timeInForce",Z)),{c(){e=y("div"),te(t.$$.fragment),i=q(),r=y("div"),te(l.$$.fragment),c=q(),K&&K.c(),p=q(),te(d.$$.fragment),h=q(),_=y("div"),te(v.$$.fragment),b=q(),te(P.$$.fragment),I=q(),te(T.$$.fragment),C=q(),V=y("div"),te(O.$$.fragment),w=q(),te(D.$$.fragment),this.h()},l(pe){e=k(pe,"DIV",{class:!0});var me=S(e);re(t.$$.fragment,me),i=M(me),r=k(me,"DIV",{class:!0,"data-percent":!0});var oe=S(r);re(l.$$.fragment,oe),c=M(oe),K&&K.l(oe),oe.forEach(m),p=M(me),re(d.$$.fragment,me),h=M(me),_=k(me,"DIV",{class:!0});var ke=S(_);re(v.$$.fragment,ke),ke.forEach(m),b=M(me),re(P.$$.fragment,me),I=M(me),re(T.$$.fragment,me),C=M(me),V=k(me,"DIV",{class:!0});var Le=S(V);re(O.$$.fragment,Le),Le.forEach(m),w=M(me),re(D.$$.fragment,me),me.forEach(m),this.h()},h(){E(r,"class","percent-label pr mt16"),E(r,"data-percent",f=n[14]>0?`${n[14]}%`:""),E(_,"class","slider-box H-eg2gi8"),E(V,"class","mt15 mb20"),E(e,"class","wrap")},m(pe,me){G(pe,e,me),ne(t,e,null),u(e,i),u(e,r),ne(l,r,null),u(r,c),K&&K.m(r,null),n[39](r),u(e,p),ne(d,e,null),u(e,h),u(e,_),ne(v,_,null),u(e,b),ne(P,e,null),u(e,I),ne(T,e,null),u(e,C),u(e,V),ne(O,V,null),u(e,w),ne(D,e,null),N=!0},p(pe,me){var fe;const oe={};me[0]&1539|me[1]&4194304&&(oe.$$scope={dirty:me,ctx:pe}),t.$set(oe);const ke=me[0]&546?dn(z,[z[0],z[1],z[2],me[0]&512&&{label:pe[9](Ye.Size)},me[0]&514&&{options:rn.createQtyOptions(pe[1],pe[9],Ye)},me[0]&32&&mn(pe[5])]):{};!s&&me[0]&2048&&(s=!0,ke.input=pe[11],Me(()=>s=!1)),!o&&me[0]&4&&(o=!0,ke.quantity=pe[2],Me(()=>o=!1)),!a&&me[0]&32768&&(a=!0,ke.qtyType=pe[15],Me(()=>a=!1)),l.$set(ke),(fe=pe[18])!=null&&fe.minClosePosTipVisible?K?K.p(pe,me):(K=da(pe),K.c(),K.m(r,null)):K&&(K.d(1),K=null),(!N||me[0]&16384&&f!==(f=pe[14]>0?`${pe[14]}%`:""))&&E(r,"data-percent",f);const Le={};me[0]&1&&(Le.priceEp=pe[0]),me[0]&2&&(Le.contract=pe[1]),me[0]&65536&&(Le.closeLongMax=pe[16]),me[0]&131072&&(Le.closeShortMax=pe[17]),me[0]&256&&(Le.qtyType=pe[8]),d.$set(Le);const ge={};!g&&me[0]&16384&&(g=!0,ge.value=pe[14],Me(()=>g=!1)),v.$set(ge);const ae={};me[0]&1048576&&(ae.disabled=!pe[20]),me[0]&706&&(ae.buyText=sn(pe[1],pe[6],pe[7],pe[9],He,"Buy")),me[0]&706&&(ae.sellText=sn(pe[1],pe[6],pe[7],pe[9],He,"Sell")),P.$set(ae);const x={};me[0]&1&&(x.priceEp=pe[0]),me[0]&8192&&(x.quantity=pe[13]),me[0]&2&&(x.contract=pe[1]),me[0]&16384&&(x.percentValue=pe[14]),me[0]&256&&(x.qtyType=pe[8]),T.$set(x);const le={};!L&&me[0]&8&&(L=!0,le.postOnly=pe[3],Me(()=>L=!1)),!$&&me[0]&16&&($=!0,le.timeInForce=pe[4],Me(()=>$=!1)),D.$set(le)},i(pe){N||(Q(t.$$.fragment,pe),Q(l.$$.fragment,pe),Q(d.$$.fragment,pe),Q(v.$$.fragment,pe),Q(P.$$.fragment,pe),Q(T.$$.fragment,pe),Q(O.$$.fragment,pe),Q(D.$$.fragment,pe),N=!0)},o(pe){j(t.$$.fragment,pe),j(l.$$.fragment,pe),j(d.$$.fragment,pe),j(v.$$.fragment,pe),j(P.$$.fragment,pe),j(T.$$.fragment,pe),j(O.$$.fragment,pe),j(D.$$.fragment,pe),N=!1},d(pe){pe&&m(e),ie(t),ie(l),K&&K.d(),n[39](null),ie(d),ie(v),ie(P),ie(T),ie(O),ie(D)}}}const Ii={symbol:"",priceEp:0};function m_(n,e,t){let i,r,l,s,o,a,c,f,p;J(n,an,ve=>t(8,l=ve)),J(n,Sn,ve=>t(29,s=ve)),J(n,Kr,ve=>t(20,o=ve)),J(n,dt,ve=>t(9,a=ve)),J(n,cr,ve=>t(30,c=ve)),J(n,kn,ve=>t(31,f=ve)),J(n,_n,ve=>t(32,p=ve));let{contract:d=null}=e,{market:h=null}=e,{account:_=null}=e,{priceEp:v=Ii.symbol===d.symbol?Ii.priceEp:0}=e,g=null,b=null,P=null,I=!1,T=0,C=0,V=!1,O="GoodTillCancel",w=0,D=we.Base,L=0,$=0,N,z,H,R,F=0;Lt(()=>()=>{Ii.symbol=d.symbol,Ii.priceEp=v}),Lt(()=>Pt.subscribe("global","price-click",ve=>{t(0,v=xe.roundPriceEp(xe.priceToEp(ve.price,d.priceScale),d.tickSizeEp)),g&&g.focus()})),Lt(()=>Pt.subscribe("global","quantity-click",ve=>{t(2,C=Number(Re(ve.quantity).times(d.qtyFactor))),b&&b.focus()}));function U(ve,de){const{contractSide:se,settleCurrency:he,contractUnderlyingAssets:_e}=ve;if(ve.symbol!==de.symbol)return;const{kv:be}=de;t(2,C=be.quantityEv),t(3,V=be.postOnly),t(4,O=be.timeInForce);const{qtyType:Ve}=be;Ve===we.Base&&t(15,D=he),se>0&&Ve===we.Coin&&t(15,D=_e)}function K(ve,de,se,he,_e){const{symbol:be}=ve;Pi.next({symbol:be,kv:{quantityEv:de,postOnly:se,timeInForce:he,qtyType:_e}})}function Y(ve){I=!1;const{symbol:de}=ve;Ii.symbol!==de&&(Ii.symbol=de,Ii.priceEp=0,t(0,v=0),t(14,w=0))}function X(ve,de){if(I||v!==0||de.closeEp===0)return;const{symbol:se}=ve;de.symbol===se&&(Ii.symbol===se&&Ii.priceEp!==0||(t(0,v=de.closeEp),I=!0))}function ee(ve,de){de&&O!=="GoodTillCancel"&&(t(4,O="GoodTillCancel"),Pi.next({symbol:ve.symbol,kv:{timeInForce:O}}))}async function Z(ve){const de=Le(ve),se={priceEp:v,quantity:de},he={orderType:Ot.Limit,side:ve,contract:d,closeLongMax:L,closeShortMax:$},_e=await js(a,se,he);return _e?(Pt.send("toast","info",{message:_e}),!0):!1}async function ue(ve){if(!o||await Z(ve))return;const{symbol:se,qtyStepSize:he}=d,_e=ve==="Sell"?"Buy":"Sell",be=Bn(d,s,i,ve);if(!be)return;const Ve=be.size,Be=Le(ve),Fe=Ve&&Re(Be).div(Ve).gte(.95)?Ve:Be,$e=Fe<he?he:Fe,Ae={actionBy:"FromOrderPlacement",symbol:se,side:_e,priceEp:v,orderQty:$e,ordType:"Limit",postOnly:V,timeInForce:O,closeOnTrigger:!0};qi.next(Ae),Pt.send("order-place","create-click",{position:be})}function ce(ve){return function(){ue(ve)}}function pe(){t(2,C=0)}function me(ve,de,se,he){de===we.Base&&t(13,T=Number(In(ve,se,he))),de===we.Coin&&t(13,T=Number(Dn(ve,he,se)))}function oe(ve){t(2,C=0),t(14,w=0);const de=Fi(ve.detail,d);an.next(de)}function ke(){t(14,w=0),b&&b.focus()}function Le(ve){if(w<=0)return T;const se=Jr(d,D,v,w,C,ve==="Buy"?L:$),he=Zr(d,l,v,se);return(he==null?void 0:he.quantity)||T}function ge(ve){g=ve,t(10,g)}function ae(ve){v=ve,t(0,v)}function x(ve){b=ve,t(11,b)}function le(ve){C=ve,t(2,C)}function fe(ve){D=ve,t(15,D)}function Se(){F=this.offsetHeight,t(19,F)}function Pe(ve){De[ve?"unshift":"push"](()=>{P=ve,t(12,P)})}function Ce(ve){w=ve,t(14,w)}function Ee(ve){V=ve,t(3,V)}function Ie(ve){O=ve,t(4,O)}return n.$$set=ve=>{"contract"in ve&&t(1,d=ve.contract),"market"in ve&&t(25,h=ve.market),"account"in ve&&t(26,_=ve.account),"priceEp"in ve&&t(0,v=ve.priceEp)},n.$$.update=()=>{n.$$.dirty[1]&2&&t(6,i=p),n.$$.dirty[1]&1&&t(7,r=f),n.$$.dirty[0]&3&&t(27,N=li(d,v)),n.$$.dirty[0]&2&&t(28,z=si(d)),n.$$.dirty[0]&402653954&&t(5,H=ei(l,a,Ye,d,N,z)),n.$$.dirty[0]&295&&t(18,R=is(l,C,v,d,H)),n.$$.dirty[0]&536871104&&t(16,L=ir(r,i,s,"Long")),n.$$.dirty[0]&536871104&&t(17,$=ir(r,i,s,"Short")),n.$$.dirty[0]&1073741826&&U(d,c),n.$$.dirty[0]&2&&Y(d),n.$$.dirty[0]&33554434&&X(d,h),n.$$.dirty[0]&10&&ee(d,V),n.$$.dirty[0]&286&&K(d,C,V,O,l),n.$$.dirty[0]&263&&me(C,l,v,d)},[v,d,C,V,O,H,i,r,l,a,g,b,P,T,w,D,L,$,R,F,o,ce,pe,oe,ke,h,_,N,z,s,c,f,p,ge,ae,x,le,fe,Se,Pe,Ce,Ee,Ie]}let h_=class extends tt{constructor(e){super(),nt(this,e,m_,d_,et,{contract:1,market:25,account:26,priceEp:0},null,[-1,-1])}};function ma(n){var l;let e,t=n[8](Ye.MinPositionWillClose,{Min:(l=n[15])==null?void 0:l.minOrderQty,Unit:n[3]})+"",i,r;return{c(){e=y("div"),i=B(t),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);i=A(o,t),o.forEach(m),this.h()},h(){E(e,"class","mt5 sell f12"),jn(()=>n[33].call(e))},m(s,o){G(s,e,o),u(e,i),r=hi(e,n[33].bind(e))},p(s,o){var a;o[0]&33032&&t!==(t=s[8](Ye.MinPositionWillClose,{Min:(a=s[15])==null?void 0:a.minOrderQty,Unit:s[3]})+"")&&W(i,t)},d(s){s&&m(e),r()}}}function __(n){var R;let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,V;const O=[{class:"market-quantity"},{isInline:!1},{operation:!1},{label:n[8](Ye.Size)},{options:rn.createQtyOptions(n[1],n[8],Ye)},n[4]];function w(F){n[30](F)}function D(F){n[31](F)}function L(F){n[32](F)}let $={};for(let F=0;F<O.length;F+=1)$=pn($,O[F]);n[9]!==void 0&&($.input=n[9]),n[2]!==void 0&&($.quantity=n[2]),n[3]!==void 0&&($.qtyType=n[3]),i=new Un({props:$}),De.push(()=>qe(i,"input",w)),De.push(()=>qe(i,"quantity",D)),De.push(()=>qe(i,"qtyType",L)),i.$on("change",n[20]),i.$on("focus",n[21]);let N=((R=n[15])==null?void 0:R.minClosePosTipVisible)&&ma(n);f=new xs({props:{priceEp:n[0],contract:n[1],closeLongMax:n[13],closeShortMax:n[14],qtyType:n[7]}});function z(F){n[35](F)}let H={type:"market"};return n[12]!==void 0&&(H.value=n[12]),h=new ji({props:H}),De.push(()=>qe(h,"value",z)),h.$on("input",n[19]),g=new Sr({props:{type:"market",placeOrderMode:Ut.Close,disabled:!n[17],buyText:sn(n[1],n[5],n[6],n[8],He,"Buy"),sellText:sn(n[1],n[5],n[6],n[8],He,"Sell")}}),g.$on("buy",n[18]("Buy")),g.$on("sell",n[18]("Sell")),P=new eo({props:{priceEp:n[0],quantity:n[11],contract:n[1],percentValue:n[12],qtyType:n[7]}}),C=new xr({}),{c(){e=y("div"),t=y("div"),te(i.$$.fragment),o=q(),N&&N.c(),c=q(),te(f.$$.fragment),p=q(),d=y("div"),te(h.$$.fragment),v=q(),te(g.$$.fragment),b=q(),te(P.$$.fragment),I=q(),T=y("div"),te(C.$$.fragment),this.h()},l(F){e=k(F,"DIV",{class:!0});var U=S(e);t=k(U,"DIV",{class:!0,"data-percent":!0});var K=S(t);re(i.$$.fragment,K),o=M(K),N&&N.l(K),K.forEach(m),c=M(U),re(f.$$.fragment,U),p=M(U),d=k(U,"DIV",{class:!0});var Y=S(d);re(h.$$.fragment,Y),Y.forEach(m),v=M(U),re(g.$$.fragment,U),b=M(U),re(P.$$.fragment,U),I=M(U),T=k(U,"DIV",{class:!0});var X=S(T);re(C.$$.fragment,X),X.forEach(m),U.forEach(m),this.h()},h(){E(t,"class","percent-label mt16"),E(t,"data-percent",a=n[12]>0?`${n[12]}%`:""),E(d,"class","slider-box H-eg2gi8"),E(T,"class","mt15 mb20"),E(e,"class","wrap")},m(F,U){G(F,e,U),u(e,t),ne(i,t,null),u(t,o),N&&N.m(t,null),n[34](t),u(e,c),ne(f,e,null),u(e,p),u(e,d),ne(h,d,null),u(e,v),ne(g,e,null),u(e,b),ne(P,e,null),u(e,I),u(e,T),ne(C,T,null),V=!0},p(F,U){var ue;const K=U[0]&274?dn(O,[O[0],O[1],O[2],U[0]&256&&{label:F[8](Ye.Size)},U[0]&258&&{options:rn.createQtyOptions(F[1],F[8],Ye)},U[0]&16&&mn(F[4])]):{};!r&&U[0]&512&&(r=!0,K.input=F[9],Me(()=>r=!1)),!l&&U[0]&4&&(l=!0,K.quantity=F[2],Me(()=>l=!1)),!s&&U[0]&8&&(s=!0,K.qtyType=F[3],Me(()=>s=!1)),i.$set(K),(ue=F[15])!=null&&ue.minClosePosTipVisible?N?N.p(F,U):(N=ma(F),N.c(),N.m(t,null)):N&&(N.d(1),N=null),(!V||U[0]&4096&&a!==(a=F[12]>0?`${F[12]}%`:""))&&E(t,"data-percent",a);const Y={};U[0]&1&&(Y.priceEp=F[0]),U[0]&2&&(Y.contract=F[1]),U[0]&8192&&(Y.closeLongMax=F[13]),U[0]&16384&&(Y.closeShortMax=F[14]),U[0]&128&&(Y.qtyType=F[7]),f.$set(Y);const X={};!_&&U[0]&4096&&(_=!0,X.value=F[12],Me(()=>_=!1)),h.$set(X);const ee={};U[0]&131072&&(ee.disabled=!F[17]),U[0]&354&&(ee.buyText=sn(F[1],F[5],F[6],F[8],He,"Buy")),U[0]&354&&(ee.sellText=sn(F[1],F[5],F[6],F[8],He,"Sell")),g.$set(ee);const Z={};U[0]&1&&(Z.priceEp=F[0]),U[0]&2048&&(Z.quantity=F[11]),U[0]&2&&(Z.contract=F[1]),U[0]&4096&&(Z.percentValue=F[12]),U[0]&128&&(Z.qtyType=F[7]),P.$set(Z)},i(F){V||(Q(i.$$.fragment,F),Q(f.$$.fragment,F),Q(h.$$.fragment,F),Q(g.$$.fragment,F),Q(P.$$.fragment,F),Q(C.$$.fragment,F),V=!0)},o(F){j(i.$$.fragment,F),j(f.$$.fragment,F),j(h.$$.fragment,F),j(g.$$.fragment,F),j(P.$$.fragment,F),j(C.$$.fragment,F),V=!1},d(F){F&&m(e),ie(i),N&&N.d(),n[34](null),ie(f),ie(h),ie(g),ie(P),ie(C)}}}function g_(n,e,t){let i,r,l,s,o,a,c,f,p,d;J(n,an,le=>t(7,l=le)),J(n,Sn,le=>t(26,s=le)),J(n,Kr,le=>t(17,o=le)),J(n,dt,le=>t(8,a=le)),J(n,Yn,le=>t(37,c=le)),J(n,cr,le=>t(27,f=le)),J(n,kn,le=>t(28,p=le)),J(n,_n,le=>t(29,d=le));let{contract:h=null}=e,{market:_=null}=e,{account:v=null}=e,{priceEp:g=0}=e,b=null,P=null,I=0,T=0,C=0,V=we.Base,O=0,w=0,D,L,$,N,z=0;Lt(()=>Pt.subscribe("global","quantity-click",le=>{t(2,T=Number(Re(le.quantity).times(h.qtyFactor))),b&&c&&b.focus()}));function H(le,fe){const{symbol:Se,contractSide:Pe,settleCurrency:Ce,contractUnderlyingAssets:Ee}=le;if(Se!==fe.symbol)return;const{kv:Ie}=fe;t(2,T=Ie.quantityEv);const{qtyType:ve}=Ie;ve===we.Base&&t(3,V=Ce),Pe>0&&ve===we.Coin&&t(3,V=Ee)}function R(le,fe,Se){Pi.next({symbol:le.symbol,kv:{quantityEv:fe,qtyType:Se}})}async function F(le){const fe=pe(le),Se={priceEp:g,quantity:fe},Pe={orderType:Ot.Limit,side:le,contract:h,closeLongMax:O,closeShortMax:w},Ce=await js(a,Se,Pe);return Ce?(Pt.send("toast","info",{message:Ce}),!0):!1}async function U(le){if(!o||await F(le))return;const{symbol:Se,qtyStepSize:Pe}=h,Ce=le==="Sell"?"Buy":"Sell",Ee=Bn(h,s,i,le);if(!Ee)return;const Ie=Ee.size,ve=pe(le),de=Ie&&Re(ve).div(Ie).gte(.95)?Ie:ve,se=de<Pe?Pe:de,he={actionBy:"FromOrderPlacement",symbol:Se,side:Ce,priceEp:_.closeEp,orderQty:se,ordType:"Market",postOnly:!1,reduceOnly:!1,closeOnTrigger:!0,timeInForce:"ImmediateOrCancel"};qi.next(he),Pt.send("order-place","create-click",{position:Ee})}function K(le){return function(){U(le)}}function Y(){t(2,T=0)}function X(le,fe,Se,Pe){fe===we.Base&&t(11,I=Number(In(le,Se,Pe))),fe===we.Coin&&t(11,I=Number(Dn(le,Pe,Se)))}function ee(le){t(2,T=0),t(12,C=0);const fe=Fi(le.detail,h);an.next(fe)}function Z(le,fe,Se,Pe){const{settleCurrency:Ce,contractUnderlyingAssets:Ee}=h;le===Ce&&fe>Se&&t(2,T=Se),le===Ee&&fe>Pe&&t(2,T=Pe)}function ue(le){t(0,g=le?le.closeEp:0)}function ce(){t(12,C=0),b&&b.focus()}function pe(le){if(C<=0)return I;const Se=Jr(h,V,g,C,T,le==="Buy"?O:w),Pe=Zr(h,l,g,Se);return(Pe==null?void 0:Pe.quantity)||I}function me(le){t(12,C=0)}function oe(le){b=le,t(9,b)}function ke(le){T=le,t(2,T)}function Le(le){V=le,t(3,V)}function ge(){z=this.offsetHeight,t(16,z)}function ae(le){De[le?"unshift":"push"](()=>{P=le,t(10,P)})}function x(le){C=le,t(12,C)}return n.$$set=le=>{"contract"in le&&t(1,h=le.contract),"market"in le&&t(22,_=le.market),"account"in le&&t(23,v=le.account),"priceEp"in le&&t(0,g=le.priceEp)},n.$$.update=()=>{n.$$.dirty[0]&2&&me(),n.$$.dirty[0]&536870912&&t(5,i=d),n.$$.dirty[0]&268435456&&t(6,r=p),n.$$.dirty[0]&3&&t(24,D=li(h,g)),n.$$.dirty[0]&2&&t(25,L=si(h)),n.$$.dirty[0]&50332034&&t(4,$=ei(l,a,Ye,h,D,L)),n.$$.dirty[0]&151&&t(15,N=is(l,T,g,h,$)),n.$$.dirty[0]&386&&Lr(l,a,He,h),n.$$.dirty[0]&67108960&&t(13,O=ir(r,i,s,"Long")),n.$$.dirty[0]&67108960&&t(14,w=ir(r,i,s,"Short")),n.$$.dirty[0]&4194304&&ue(_),n.$$.dirty[0]&134217730&&H(h,f),n.$$.dirty[0]&134&&R(h,T,l),n.$$.dirty[0]&135&&X(T,l,g,h),n.$$.dirty[0]&50331660&&Z(V,T,D,L)},[g,h,T,V,$,i,r,l,a,b,P,I,C,O,w,N,z,o,K,Y,ee,ce,_,v,D,L,s,f,p,d,oe,ke,Le,ge,ae,x]}let v_=class extends tt{constructor(e){super(),nt(this,e,g_,__,et,{contract:1,market:22,account:23,priceEp:0},null,[-1,-1])}};function ha(n){let e,t;return e=new ns({props:{$$slots:{default:[b_]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&40966|r[2]&4096&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function b_(n){let e,t,i,r;function l(a){n[48](a)}function s(a){n[49](a)}let o={class:"trigger-limit-price f1",isInline:!1,operation:!1,label:n[13](Ye.LimitPrice),unit:n[2].quoteCurrency,tickSizeEp:n[2].tickSizeEp,precision:n[2].pricePrecision,maxPriceEp:n[2].maxPriceEp,factor:n[2].priceFactor,scale:n[2].priceScale};return n[15]!==void 0&&(o.input=n[15]),n[1]!==void 0&&(o.priceEp=n[1]),e=new yn({props:o}),De.push(()=>qe(e,"input",l)),De.push(()=>qe(e,"priceEp",s)),{c(){te(e.$$.fragment)},l(a){re(e.$$.fragment,a)},m(a,c){ne(e,a,c),r=!0},p(a,c){const f={};c[0]&8192&&(f.label=a[13](Ye.LimitPrice)),c[0]&4&&(f.unit=a[2].quoteCurrency),c[0]&4&&(f.tickSizeEp=a[2].tickSizeEp),c[0]&4&&(f.precision=a[2].pricePrecision),c[0]&4&&(f.maxPriceEp=a[2].maxPriceEp),c[0]&4&&(f.factor=a[2].priceFactor),c[0]&4&&(f.scale=a[2].priceScale),!t&&c[0]&32768&&(t=!0,f.input=a[15],Me(()=>t=!1)),!i&&c[0]&2&&(i=!0,f.priceEp=a[1],Me(()=>i=!1)),e.$set(f)},i(a){r||(Q(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){ie(e,a)}}}function _a(n){var l;let e,t=n[13](Ye.MinPositionWillClose,{Min:(l=n[24])==null?void 0:l.minOrderQty,Unit:n[21]})+"",i,r;return{c(){e=y("div"),i=B(t),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);i=A(o,t),o.forEach(m),this.h()},h(){E(e,"class","pa mt5 sell f12"),jn(()=>n[53].call(e))},m(s,o){G(s,e,o),u(e,i),r=hi(e,n[53].bind(e))},p(s,o){var a;o[0]&18882560&&t!==(t=s[13](Ye.MinPositionWillClose,{Min:(a=s[24])==null?void 0:a.minOrderQty,Unit:s[21]})+"")&&W(i,t)},d(s){s&&m(e),r()}}}function ga(n){let e,t,i,r,l;function s(f){n[56](f)}function o(f){n[57](f)}function a(f){n[58](f)}let c={tabType:Ot.Conditional,conditionalType:n[0]};return n[6]!==void 0&&(c.postOnly=n[6]),n[7]!==void 0&&(c.closeOnTrigger=n[7]),n[8]!==void 0&&(c.timeInForce=n[8]),e=new xl({props:c}),De.push(()=>qe(e,"postOnly",s)),De.push(()=>qe(e,"closeOnTrigger",o)),De.push(()=>qe(e,"timeInForce",a)),{c(){te(e.$$.fragment)},l(f){re(e.$$.fragment,f)},m(f,p){ne(e,f,p),l=!0},p(f,p){const d={};p[0]&1&&(d.conditionalType=f[0]),!t&&p[0]&64&&(t=!0,d.postOnly=f[6],Me(()=>t=!1)),!i&&p[0]&128&&(i=!0,d.closeOnTrigger=f[7],Me(()=>i=!1)),!r&&p[0]&256&&(r=!0,d.timeInForce=f[8],Me(()=>r=!1)),e.$set(d)},i(f){l||(Q(e.$$.fragment,f),l=!0)},o(f){j(e.$$.fragment,f),l=!1},d(f){ie(e,f)}}}function E_(n){var Fe;let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,V,O,w,D,L,$,N=n[13](Ye.Trigger)+"",z,H,R,F,U,K,Y,X,ee=n[13](Ye.Trigger)+"",Z,ue,ce,pe,me,oe,ke,Le,ge,ae,x,le;function fe($e){n[45]($e)}function Se($e){n[46]($e)}function Pe($e){n[47]($e)}let Ce={class:"trigger-price",isInline:!1,operation:!1,label:n[13](Ye.TriggerPrice)+" ("+n[2].quoteCurrency+")",tickSizeEp:n[2].tickSizeEp,precision:n[2].pricePrecision,maxPriceEp:n[2].maxPriceEp,factor:n[2].priceFactor,scale:n[2].priceScale,options:rn.createTriggerTypesOptions(n[13],Ye)};n[14]!==void 0&&(Ce.input=n[14]),n[3]!==void 0&&(Ce.priceEp=n[3]),n[4]!==void 0&&(Ce.selectValue=n[4]),i=new yn({props:Ce}),De.push(()=>qe(i,"input",fe)),De.push(()=>qe(i,"priceEp",Se)),De.push(()=>qe(i,"selectValue",Pe));let Ee=n[0]===qt.Limit&&ha(n);const Ie=[{class:"conditional-quantity"},{isInline:!1},{operation:!1},{label:n[13](Ye.Size)},{options:rn.createQtyOptions(n[2],n[13],Ye)},n[11]];function ve($e){n[50]($e)}function de($e){n[51]($e)}function se($e){n[52]($e)}let he={};for(let $e=0;$e<Ie.length;$e+=1)he=pn(he,Ie[$e]);n[16]!==void 0&&(he.input=n[16]),n[5]!==void 0&&(he.quantity=n[5]),n[21]!==void 0&&(he.qtyType=n[21]),f=new Un({props:he}),De.push(()=>qe(f,"input",ve)),De.push(()=>qe(f,"quantity",de)),De.push(()=>qe(f,"qtyType",se)),f.$on("change",n[32]);let _e=((Fe=n[24])==null?void 0:Fe.minClosePosTipVisible)&&_a(n);b=new xs({props:{priceEp:n[0]===qt.Limit?n[1]:n[3],contract:n[2],closeLongMax:n[22],closeShortMax:n[23],qtyType:n[12]}});function be($e){n[55]($e)}let Ve={type:"conditional"};n[20]!==void 0&&(Ve.value=n[20]),T=new ji({props:Ve}),De.push(()=>qe(T,"value",be)),T.$on("input",n[31]),O=new Sr({props:{type:"conditional",placeOrderMode:Ut.Close,disabled:!n[28],buyText:sn(n[2],n[9],n[10],n[13],He,"Buy"),sellText:sn(n[2],n[9],n[10],n[13],He,"Sell")}}),O.$on("buy",n[29]),O.$on("sell",n[30]),ke=new eo({props:{priceEp:n[1],quantity:n[19],contract:n[2],percentValue:n[20],qtyType:n[12]}}),ae=new xr({});let Be=n[0]===qt.Limit&&ga(n);return{c(){e=y("div"),t=y("div"),te(i.$$.fragment),o=q(),Ee&&Ee.c(),a=q(),c=y("div"),te(f.$$.fragment),_=q(),_e&&_e.c(),g=q(),te(b.$$.fragment),P=q(),I=y("div"),te(T.$$.fragment),V=q(),te(O.$$.fragment),w=q(),D=y("div"),L=y("div"),$=y("span"),z=B(N),H=q(),R=B(n[27]),F=q(),U=B(n[18]),K=q(),Y=y("div"),X=y("span"),Z=B(ee),ue=q(),ce=B(n[26]),pe=q(),me=B(n[18]),oe=q(),te(ke.$$.fragment),Le=q(),ge=y("div"),te(ae.$$.fragment),x=q(),Be&&Be.c(),this.h()},l($e){e=k($e,"DIV",{class:!0});var Ae=S(e);t=k(Ae,"DIV",{class:!0});var Ne=S(t);re(i.$$.fragment,Ne),Ne.forEach(m),o=M(Ae),Ee&&Ee.l(Ae),a=M(Ae),c=k(Ae,"DIV",{class:!0,"data-percent":!0});var Ge=S(c);re(f.$$.fragment,Ge),_=M(Ge),_e&&_e.l(Ge),Ge.forEach(m),g=M(Ae),re(b.$$.fragment,Ae),P=M(Ae),I=k(Ae,"DIV",{class:!0});var Xe=S(I);re(T.$$.fragment,Xe),Xe.forEach(m),V=M(Ae),re(O.$$.fragment,Ae),w=M(Ae),D=k(Ae,"DIV",{class:!0});var ye=S(D);L=k(ye,"DIV",{});var Ke=S(L);$=k(Ke,"SPAN",{class:!0});var Qe=S($);z=A(Qe,N),Qe.forEach(m),H=M(Ke),R=A(Ke,n[27]),F=M(Ke),U=A(Ke,n[18]),Ke.forEach(m),K=M(ye),Y=k(ye,"DIV",{});var ze=S(Y);X=k(ze,"SPAN",{class:!0});var Ue=S(X);Z=A(Ue,ee),Ue.forEach(m),ue=M(ze),ce=A(ze,n[26]),pe=M(ze),me=A(ze,n[18]),ze.forEach(m),ye.forEach(m),oe=M(Ae),re(ke.$$.fragment,Ae),Le=M(Ae),ge=k(Ae,"DIV",{class:!0});var st=S(ge);re(ae.$$.fragment,st),st.forEach(m),x=M(Ae),Be&&Be.l(Ae),Ae.forEach(m),this.h()},h(){E(t,"class","mt16"),E(c,"class","percent-label pr mt16"),E(c,"data-percent",v=n[20]>0?`${n[20]}%`:""),E(I,"class","slider-box H-rlkb0d"),E($,"class","op6"),E(X,"class","op6"),E(D,"class","df jcsb mt8 f12"),E(ge,"class","mt15 mb20"),E(e,"class","wrap H-rlkb0d")},m($e,Ae){G($e,e,Ae),u(e,t),ne(i,t,null),u(e,o),Ee&&Ee.m(e,null),u(e,a),u(e,c),ne(f,c,null),u(c,_),_e&&_e.m(c,null),n[54](c),u(e,g),ne(b,e,null),u(e,P),u(e,I),ne(T,I,null),u(e,V),ne(O,e,null),u(e,w),u(e,D),u(D,L),u(L,$),u($,z),u(L,H),u(L,R),u(L,F),u(L,U),u(D,K),u(D,Y),u(Y,X),u(X,Z),u(Y,ue),u(Y,ce),u(Y,pe),u(Y,me),u(e,oe),ne(ke,e,null),u(e,Le),u(e,ge),ne(ae,ge,null),u(e,x),Be&&Be.m(e,null),le=!0},p($e,Ae){var ze;const Ne={};Ae[0]&8196&&(Ne.label=$e[13](Ye.TriggerPrice)+" ("+$e[2].quoteCurrency+")"),Ae[0]&4&&(Ne.tickSizeEp=$e[2].tickSizeEp),Ae[0]&4&&(Ne.precision=$e[2].pricePrecision),Ae[0]&4&&(Ne.maxPriceEp=$e[2].maxPriceEp),Ae[0]&4&&(Ne.factor=$e[2].priceFactor),Ae[0]&4&&(Ne.scale=$e[2].priceScale),Ae[0]&8192&&(Ne.options=rn.createTriggerTypesOptions($e[13],Ye)),!r&&Ae[0]&16384&&(r=!0,Ne.input=$e[14],Me(()=>r=!1)),!l&&Ae[0]&8&&(l=!0,Ne.priceEp=$e[3],Me(()=>l=!1)),!s&&Ae[0]&16&&(s=!0,Ne.selectValue=$e[4],Me(()=>s=!1)),i.$set(Ne),$e[0]===qt.Limit?Ee?(Ee.p($e,Ae),Ae[0]&1&&Q(Ee,1)):(Ee=ha($e),Ee.c(),Q(Ee,1),Ee.m(e,a)):Ee&&(ot(),j(Ee,1,1,()=>{Ee=null}),at());const Ge=Ae[0]&10244?dn(Ie,[Ie[0],Ie[1],Ie[2],Ae[0]&8192&&{label:$e[13](Ye.Size)},Ae[0]&8196&&{options:rn.createQtyOptions($e[2],$e[13],Ye)},Ae[0]&2048&&mn($e[11])]):{};!p&&Ae[0]&65536&&(p=!0,Ge.input=$e[16],Me(()=>p=!1)),!d&&Ae[0]&32&&(d=!0,Ge.quantity=$e[5],Me(()=>d=!1)),!h&&Ae[0]&2097152&&(h=!0,Ge.qtyType=$e[21],Me(()=>h=!1)),f.$set(Ge),(ze=$e[24])!=null&&ze.minClosePosTipVisible?_e?_e.p($e,Ae):(_e=_a($e),_e.c(),_e.m(c,null)):_e&&(_e.d(1),_e=null),(!le||Ae[0]&1048576&&v!==(v=$e[20]>0?`${$e[20]}%`:""))&&E(c,"data-percent",v);const Xe={};Ae[0]&11&&(Xe.priceEp=$e[0]===qt.Limit?$e[1]:$e[3]),Ae[0]&4&&(Xe.contract=$e[2]),Ae[0]&4194304&&(Xe.closeLongMax=$e[22]),Ae[0]&8388608&&(Xe.closeShortMax=$e[23]),Ae[0]&4096&&(Xe.qtyType=$e[12]),b.$set(Xe);const ye={};!C&&Ae[0]&1048576&&(C=!0,ye.value=$e[20],Me(()=>C=!1)),T.$set(ye);const Ke={};Ae[0]&268435456&&(Ke.disabled=!$e[28]),Ae[0]&9732&&(Ke.buyText=sn($e[2],$e[9],$e[10],$e[13],He,"Buy")),Ae[0]&9732&&(Ke.sellText=sn($e[2],$e[9],$e[10],$e[13],He,"Sell")),O.$set(Ke),(!le||Ae[0]&8192)&&N!==(N=$e[13](Ye.Trigger)+"")&&W(z,N),(!le||Ae[0]&134217728)&&W(R,$e[27]),(!le||Ae[0]&262144)&&W(U,$e[18]),(!le||Ae[0]&8192)&&ee!==(ee=$e[13](Ye.Trigger)+"")&&W(Z,ee),(!le||Ae[0]&67108864)&&W(ce,$e[26]),(!le||Ae[0]&262144)&&W(me,$e[18]);const Qe={};Ae[0]&2&&(Qe.priceEp=$e[1]),Ae[0]&524288&&(Qe.quantity=$e[19]),Ae[0]&4&&(Qe.contract=$e[2]),Ae[0]&1048576&&(Qe.percentValue=$e[20]),Ae[0]&4096&&(Qe.qtyType=$e[12]),ke.$set(Qe),$e[0]===qt.Limit?Be?(Be.p($e,Ae),Ae[0]&1&&Q(Be,1)):(Be=ga($e),Be.c(),Q(Be,1),Be.m(e,null)):Be&&(ot(),j(Be,1,1,()=>{Be=null}),at())},i($e){le||(Q(i.$$.fragment,$e),Q(Ee),Q(f.$$.fragment,$e),Q(b.$$.fragment,$e),Q(T.$$.fragment,$e),Q(O.$$.fragment,$e),Q(ke.$$.fragment,$e),Q(ae.$$.fragment,$e),Q(Be),le=!0)},o($e){j(i.$$.fragment,$e),j(Ee),j(f.$$.fragment,$e),j(b.$$.fragment,$e),j(T.$$.fragment,$e),j(O.$$.fragment,$e),j(ke.$$.fragment,$e),j(ae.$$.fragment,$e),j(Be),le=!1},d($e){$e&&m(e),ie(i),Ee&&Ee.d(),ie(f),_e&&_e.d(),n[54](null),ie(b),ie(T),ie(O),ie(ke),ie(ae),Be&&Be.d()}}}const Nn={symbol:"",priceEp:0,stopPxEp:0};function y_(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T;J(n,an,Oe=>t(12,_=Oe)),J(n,Kr,Oe=>t(28,v=Oe)),J(n,dt,Oe=>t(13,g=Oe)),J(n,Sn,Oe=>t(41,b=Oe)),J(n,_n,Oe=>t(42,P=Oe)),J(n,cr,Oe=>t(43,I=Oe)),J(n,kn,Oe=>t(44,T=Oe));let{contract:C=null}=e,{market:V=null}=e,{account:O=null}=e,{conditionalType:w=qt.Limit}=e,{priceEp:D=Nn.symbol===C.symbol?Nn.priceEp:0}=e,L=null,$=null,N=null,z=null,H=!1,R=!1,F=Nn.symbol===C.symbol?Nn.stopPxEp:0,U=0 .toFixed(C.pricePrecision),K="ByLastPrice",Y=0,X=0,ee=!1,Z=!0,ue="GoodTillCancel",ce=0,pe=we.Base,me=0,oe=0,ke,Le=0;Lt(()=>()=>{Nn.symbol=C.symbol,Nn.priceEp=D,Nn.stopPxEp=F}),Lt(()=>Pt.subscribe("global","price-click",Oe=>{const it=xe.roundPriceEp(xe.priceToEp(Oe.price,C.priceScale),C.tickSizeEp);if(Oe.onlyLimitPrice){t(1,D=it),$.focus();return}t(3,F=it),t(1,D=it),L&&L.focus()})),Lt(()=>Pt.subscribe("global","quantity-click",Oe=>{t(5,X=Number(Re(Oe.quantity).times(C.qtyFactor))),N&&N.focus()}));function ge(Oe,it){const{symbol:ct,contractSide:ft,settleCurrency:_t,contractUnderlyingAssets:Et}=Oe;if(ct!==it.symbol)return;const{kv:gt}=it;t(0,w=gt.conditionalType),t(4,K=gt.triggerType),t(5,X=gt.quantityEv),t(6,ee=gt.postOnly),t(7,Z=gt.closeOnTrigger),t(8,ue=gt.timeInForce);const{qtyType:Dt}=gt;Dt===we.Base&&t(21,pe=_t),ft>0&&Dt===we.Coin&&t(21,pe=Et)}function ae(Oe,it,ct,ft,_t,Et,gt,Dt){Pi.next({symbol:Oe.symbol,kv:{conditionalType:it,triggerType:ct,quantityEv:ft,postOnly:_t,closeOnTrigger:Et,timeInForce:gt,qtyType:Dt}})}function x(Oe){H=!1,R=!1;const{symbol:it}=Oe;Nn.symbol!==it&&(Nn.symbol=it,Nn.priceEp=0,Nn.stopPxEp=0,t(1,D=0),t(3,F=0),t(20,ce=0))}function le(Oe,it){if(H||D!==0||it.closeEp===0)return;const{symbol:ct}=Oe;it.symbol===ct&&(Nn.symbol===ct&&Nn.priceEp!==0||(t(1,D=it.closeEp),H=!0))}function fe(Oe,it){if(R||F!==0||it.closeEp===0)return;const{symbol:ct}=Oe;it.symbol===ct&&(Nn.symbol===ct&&Nn.stopPxEp!==0||(t(3,F=it.closeEp),R=!0))}function Se(Oe,it){t(18,U=xe.floor(it,Oe.pricePrecision,Oe.priceScale))}function Pe(Oe){Oe&&ue!=="GoodTillCancel"&&t(8,ue="GoodTillCancel")}function Ce(Oe,it){const{symbol:ct,qtyStepSize:ft}=C,_t=Oe==="Sell"?"Buy":"Sell",Et=Bn(C,b,P,Oe);if(!Et)return;const gt=Et.size,Dt=be(Oe),It=gt&&Re(Dt).div(gt).gte(.95)?gt:Dt,pt=It<ft?ft:It,mt={actionBy:"FromOrderPlacement",symbol:ct,side:_t,ordType:it,orderQty:pt,priceEp:D,triggerType:K,stopPxEp:F,closeOnTrigger:Z,postOnly:ee,reduceOnly:!1,timeInForce:ue,direction:Oe==="Buy"?c:f};qi.next(mt),Pt.send("order-place","create-click",{position:Et})}function Ee(Oe,it){const{symbol:ct,qtyStepSize:ft}=C,_t=Oe==="Sell"?"Buy":"Sell",Et=Bn(C,b,i,Oe);if(!Et)return;const gt=Et.size,Dt=be(Oe),It=gt&&Re(Dt).div(gt).gte(.95)?gt:Dt,pt=It<ft?ft:It,mt={actionBy:"FromOrderPlacement",symbol:ct,side:_t,ordType:it,orderQty:pt,priceEp:l,triggerType:K,stopPxEp:F,closeOnTrigger:Z,postOnly:!1,reduceOnly:!1,timeInForce:"ImmediateOrCancel",direction:Oe==="Buy"?c:f};qi.next(mt),Pt.send("order-place","create-click",{position:Et})}async function Ie(Oe){const it=be(Oe),ct={triggerType:K,stopPxEp:F,priceEp:D,quantity:it},ft={orderType:Ot.Conditional,side:Oe,conditionalType:w,lastPriceEp:l,markPriceEp:s,contract:C,closeLongMax:me,closeShortMax:oe},_t=await js(g,ct,ft);return _t?(Pt.send("toast","info",{message:_t}),!0):!1}async function ve(){if(!v||await Ie("Buy"))return;const it=Di(K,F,l,s);if(w===qt.Limit){const ct=it>0?"LimitIfTouched":"StopLimit";Ce("Buy",ct);return}if(w===qt.Market){const ct=it>0?"MarketIfTouched":"Stop";Ee("Buy",ct)}}async function de(){if(!v||await Ie("Sell"))return;const it=Di(K,F,l,s);if(w===qt.Limit){const ct=it>0?"StopLimit":"LimitIfTouched";Ce("Sell",ct);return}if(w===qt.Market){const ct=it>0?"Stop":"MarketIfTouched";Ee("Sell",ct)}}function se(){t(5,X=0)}function he(Oe,it,ct,ft,_t,Et){const gt=ct===qt.Limit?ft:_t;it===we.Base&&t(19,Y=Number(In(Oe,gt,Et))),it===we.Coin&&t(19,Y=Number(Dn(Oe,Et,gt)))}function _e(Oe){t(5,X=0),t(20,ce=0);const it=Fi(Oe.detail,C);an.next(it)}function be(Oe){if(ce<=0)return Y;const it=Oe==="Buy"?me:oe,ct=w===qt.Limit?D:F,ft=Jr(C,pe,ct,ce,X,it),_t=Zr(C,_,ct,ft);return(_t==null?void 0:_t.quantity)||Y}function Ve(Oe){L=Oe,t(14,L)}function Be(Oe){F=Oe,t(3,F)}function Fe(Oe){K=Oe,t(4,K)}function $e(Oe){$=Oe,t(15,$)}function Ae(Oe){D=Oe,t(1,D)}function Ne(Oe){N=Oe,t(16,N)}function Ge(Oe){X=Oe,t(5,X)}function Xe(Oe){pe=Oe,t(21,pe)}function ye(){Le=this.offsetHeight,t(25,Le)}function Ke(Oe){De[Oe?"unshift":"push"](()=>{z=Oe,t(17,z)})}function Qe(Oe){ce=Oe,t(20,ce)}function ze(Oe){ee=Oe,t(6,ee)}function Ue(Oe){Z=Oe,t(7,Z)}function st(Oe){ue=Oe,t(8,ue)}return n.$$set=Oe=>{"contract"in Oe&&t(2,C=Oe.contract),"market"in Oe&&t(33,V=Oe.market),"account"in Oe&&t(34,O=Oe.account),"conditionalType"in Oe&&t(0,w=Oe.conditionalType),"priceEp"in Oe&&t(1,D=Oe.priceEp)},n.$$.update=()=>{n.$$.dirty[1]&2048&&t(9,i=P),n.$$.dirty[1]&8192&&t(10,r=T),n.$$.dirty[0]&6&&t(38,p=li(C,D)),n.$$.dirty[0]&4&&t(37,d=si(C)),n.$$.dirty[0]&12292|n.$$.dirty[1]&192&&t(11,h=ei(_,g,Ye,C,p,d)),n.$$.dirty[0]&6182&&t(24,ke=is(_,X,D,C,h)),n.$$.dirty[1]&4&&t(36,l=V.closeEp),n.$$.dirty[1]&4&&t(35,s=V.markPriceEp),n.$$.dirty[0]&4|n.$$.dirty[1]&4096&&ge(C,I),n.$$.dirty[0]&4597&&ae(C,w,K,X,ee,Z,ue,_),n.$$.dirty[0]&24|n.$$.dirty[1]&48&&t(40,o=kp(Di(K,F,l,s))),n.$$.dirty[0]&24|n.$$.dirty[1]&48&&t(39,a=Pp(Di(K,F,l,s))),n.$$.dirty[1]&512&&t(27,c=o==="Set Buy Stop"?"≥":"≤"),n.$$.dirty[1]&256&&t(26,f=a==="Set Sell Stop"?"≤":"≥"),n.$$.dirty[0]&12292&&Lr(_,g,He,C),n.$$.dirty[0]&1536|n.$$.dirty[1]&1024&&t(22,me=ir(r,i,b,"Long")),n.$$.dirty[0]&1536|n.$$.dirty[1]&1024&&t(23,oe=ir(r,i,b,"Short")),n.$$.dirty[0]&4&&x(C),n.$$.dirty[0]&4|n.$$.dirty[1]&4&&le(C,V),n.$$.dirty[0]&4|n.$$.dirty[1]&4&&fe(C,V),n.$$.dirty[0]&12&&Se(C,F),n.$$.dirty[0]&64&&Pe(ee),n.$$.dirty[0]&4143&&he(X,_,w,D,F,C)},[w,D,C,F,K,X,ee,Z,ue,i,r,h,_,g,L,$,N,z,U,Y,ce,pe,me,oe,ke,Le,f,c,v,ve,de,se,_e,V,O,s,l,d,p,a,o,b,P,I,T,Ve,Be,Fe,$e,Ae,Ne,Ge,Xe,ye,Ke,Qe,ze,Ue,st]}let k_=class extends tt{constructor(e){super(),nt(this,e,y_,E_,et,{contract:2,market:33,account:34,conditionalType:0,priceEp:1},null,[-1,-1,-1])}};function va(n){let e,t,i=n[2](Ye.InHedgeMode)+"",r,l,s,o=n[2](Ye.YouCanModify)+"",a,c,f,p=n[2](He.OK)+"",d,h,_,v,g,b;return{c(){e=y("div"),t=y("p"),r=B(i),l=q(),s=y("p"),a=B(o),c=q(),f=y("div"),d=B(p),this.h()},l(P){e=k(P,"DIV",{class:!0});var I=S(e);t=k(I,"P",{class:!0});var T=S(t);r=A(T,i),T.forEach(m),l=M(I),s=k(I,"P",{class:!0});var C=S(s);a=A(C,o),C.forEach(m),c=M(I),f=k(I,"DIV",{class:!0});var V=S(f);d=A(V,p),V.forEach(m),I.forEach(m),this.h()},h(){E(t,"class","H-pa9jni"),E(s,"class","H-pa9jni"),E(f,"class","mt10 tc T1 fw2 cp"),E(e,"class","popup pa p16 br8 H-pa9jni")},m(P,I){G(P,e,I),u(e,t),u(t,r),u(e,l),u(e,s),u(s,a),u(e,c),u(e,f),u(f,d),v=!0,g||(b=We(f,"click",n[4]),g=!0)},p(P,I){(!v||I&4)&&i!==(i=P[2](Ye.InHedgeMode)+"")&&W(r,i),(!v||I&4)&&o!==(o=P[2](Ye.YouCanModify)+"")&&W(a,o),(!v||I&4)&&p!==(p=P[2](He.OK)+"")&&W(d,p)},i(P){v||(jn(()=>{v&&(_&&_.end(1),h=Ts(e,Yu,{}),h.start())}),v=!0)},o(P){h&&h.invalidate(),_=ws(e,Ol,{}),v=!1},d(P){P&&m(e),P&&_&&_.end(),g=!1,b()}}}function P_(n){let e,t,i,r=n[2](Ye.Open)+"",l,s,o,a,c,f,p,d,h=n[2](Ye.Close)+"",_,v,g,b,P,I=n[0]&&n[1]===Ut.Open&&va(n);return{c(){e=y("div"),t=y("button"),i=y("div"),l=B(r),s=q(),o=y("div"),a=q(),c=y("button"),f=y("div"),p=q(),d=y("div"),_=B(h),v=q(),I&&I.c(),this.h()},l(T){e=k(T,"DIV",{class:!0});var C=S(e);t=k(C,"BUTTON",{class:!0});var V=S(t);i=k(V,"DIV",{class:!0});var O=S(i);l=A(O,r),O.forEach(m),s=M(V),o=k(V,"DIV",{class:!0}),S(o).forEach(m),V.forEach(m),a=M(C),c=k(C,"BUTTON",{class:!0});var w=S(c);f=k(w,"DIV",{class:!0}),S(f).forEach(m),p=M(w),d=k(w,"DIV",{class:!0});var D=S(d);_=A(D,h),D.forEach(m),w.forEach(m),v=M(C),I&&I.l(C),C.forEach(m),this.h()},h(){E(i,"class","rectangle ph8 f14 fw2 wsn ooo usn H-pa9jni"),E(o,"class","triangle H-pa9jni"),E(t,"class","open-btn df cp H-pa9jni"),Te(t,"active",n[1]===Ut.Open),E(f,"class","triangle H-pa9jni"),E(d,"class","rectangle ph8 f14 fw2 wsn ooo usn H-pa9jni"),E(c,"class","close-btn df cp H-pa9jni"),Te(c,"active",n[1]===Ut.Close),E(e,"class","wrap df pr H-pa9jni")},m(T,C){G(T,e,C),u(e,t),u(t,i),u(i,l),u(t,s),u(t,o),u(e,a),u(e,c),u(c,f),u(c,p),u(c,d),u(d,_),u(e,v),I&&I.m(e,null),g=!0,b||(P=[We(t,"click",n[3](Ut.Open)),We(c,"click",n[3](Ut.Close))],b=!0)},p(T,[C]){(!g||C&4)&&r!==(r=T[2](Ye.Open)+"")&&W(l,r),(!g||C&2)&&Te(t,"active",T[1]===Ut.Open),(!g||C&4)&&h!==(h=T[2](Ye.Close)+"")&&W(_,h),(!g||C&2)&&Te(c,"active",T[1]===Ut.Close),T[0]&&T[1]===Ut.Open?I?(I.p(T,C),C&3&&Q(I,1)):(I=va(T),I.c(),Q(I,1),I.m(e,null)):I&&(ot(),j(I,1,1,()=>{I=null}),at())},i(T){g||(Q(I),g=!0)},o(T){j(I),g=!1},d(T){T&&m(e),I&&I.d(),b=!1,jt(P)}}}function S_(n,e,t){let i,r,l;J(n,kn,c=>t(5,r=c)),J(n,dt,c=>t(2,l=c));let s=!1;Lt(()=>t(0,s=localStorage.getItem("v-p-m-bubble")!=="Y"));function o(c){return function(){kn.next(c)}}function a(){localStorage.setItem("v-p-m-bubble","Y"),t(0,s=!1)}return n.$$.update=()=>{n.$$.dirty&32&&t(1,i=r)},[s,i,l,o,a,r]}let C_=class extends tt{constructor(e){super(),nt(this,e,S_,P_,et,{})}};const Rp=new Jn(null),T_=Ai.pipe(Cn(n=>{const e=new Map;return n&&n.filter(({type:t})=>t==="PerpetualV2").forEach(t=>{const{symbol:i,posSide:r}=t,l=i+r;e.set(l,t)}),e}),Fr(new Map)),w_=gr([Rp,Ud,T_,Ni,zi,ri,Ci,dl]).pipe(Rr(100),qn(([n])=>!!n&&["USDT","MUSDT"].includes(n.currency)),Cn(([n,e,t,i,r,l,s,o])=>{var P;const{symbol:a,side:c,ordMode:f,newOrderSize:p,orderType:d}=n,h=t.toArray(),_=h.filter(I=>{if(I.symbol===a){if(I.posMode===Ct.Hedge)return I.posSide==="Long"||I.posSide==="Short";if(I.posMode===Ct.OneWay)return I.posSide==="Merged"}return!1}),v=_.every(({isCross:I})=>I),g=r.get(a),b=Op(n,s.ask1Ep,s.bid1Ep,Fp(g.symbol,l));if(n.priceEp=b,v){const I=h.filter(({isCross:U,type:K})=>U&&K==="PerpetualV2"),T=I.filter(({posMode:U})=>U==="OneWay").map(U=>{const K=nl(r,n,U),{mmCost:Y}=Ea(K,i,r,o);return Y}).reduce((U,K)=>U.plus(K),Re(0)),C=I.filter(({posMode:U})=>U==="Hedged"),O=Array.from(new Set(C.map(({symbol:U})=>U))).map(U=>{const K=C.filter(ce=>ce.symbol===U),Y=K.find(({posSide:ce})=>ce==="Long"),X=K.find(({posSide:ce})=>ce==="Short"),ee=nl(r,n,Y),Z=nl(r,n,X),{mmCost:ue}=I_(ee,Z,i,r,o);return ue}).reduce((U,K)=>U.plus(K),Re(0)),w=I.reduce((U,K)=>{const Y=nl(r,n,K),X=ba(Y,l,r,K.symbol===a?b:0);return U.plus(X)},Re(0)),{accountBalanceRv:D="0",totalOrdUsedBalanceRv:L="0",fixedUsedRv:$="0"}=e.get("Invalid")||{},N=Qt.toValueQuantity(g,p,b),z=(((P=_[0])==null?void 0:P.takerFeeRateEr)||-1)>0?_[0].takerFeeRateEr:o,H=Re(D).plus(w).minus($).minus(L).minus(Re(N).times(z)),R=T.plus(O),{marginRatio:F}=ya(H,R);return F}else{const T=_.every(({posMode:Y})=>Y===Ct.Hedge)?Ct.Hedge:Ct.OneWay,C=kr(f,T,c),V=a+C,O=t.get(V),w=yi.genMergeSize(g,O,n),D=Qt.toValueQuantity(g,p,b),L=nl(r,n,O),$=c==="Buy"?O.buyValueToCostEr:O.sellValueToCostEr,N=isNaN(Number(D))?0:Re(D).times($).toNumber(),{mmCost:z}=Ea(L,i,r,o),{accountBalanceRv:H}=e.get(V)||{accountBalanceRv:"0"},R=ba(L,l,r,b),F=Re(H).plus(R),U=["Open","Increase"].includes(d)?F.plus(N):["Reverse"].includes(d)?Re(Qt.toValueQuantity(g,w,b)).times($):F.times(w).div(O.size),{marginRatio:K}=ya(U,z);return K}}),Fr("--"));function ks(n,e,t){if(!n||!t)return 0;const i=t.get(n.symbol);if(!i)return 0;const r=Wd(i,n,e);return(r==null?void 0:r.maintenanceMargin)||0}function ba(n,e,t,i=0){if(!n)return 0;const{side:r,size:l,symbol:s,avgEntryPriceEp:o}=n,a=t.get(s);if(!a)return 0;const{contractSide:c,contractSize:f,valueFactor:p,priceFactor:d}=a;return i||(i=Fp(s,e)),Xr({side:r,contractSide:c,contractSize:f,qty:l,entryPriceEp:o,exitPriceEp:i,factor:p,priceFactor:d})}function Fp(n,e){const t=e.get(n);return t?t.markPriceEp:0}function nl(n,e,t){if(!t)return null;const{ordMode:i,symbol:r,posSide:l}=e;if(r===t.symbol&&l===t.posSide){const s=n.get(r),o=yi.genMergeSize(s,t,e),a=yi.averagePrice(i,e,t,s),c=Qt.toValueQuantity(s,o,a),f=["Open","Reverse"].includes(e.orderType)?e.side:t.side;return{...t,side:f,size:o,value:c,valueRv:c,avgEntryPriceEp:a,markPriceEp:e.priceEp}}return t}function I_(n,e,t,i,r){if(!n&&!e)return{mm:0,posValue:0,mmCost:0};const l=(n==null?void 0:n.size)||0,s=(e==null?void 0:e.size)||0,o=l>s?n:e,a=l>s?e:n,c=o?ks(o,t,i):0,f=a?ks(a,t,i):0,p=Re(c).minus(f),d=ip(_s((o==null?void 0:o.size)||0,(o==null?void 0:o.markPriceEp)||0),_s((a==null?void 0:a.size)||0,(a==null?void 0:a.markPriceEp)||0)),h=jp(o.posSide==="Long",d,p,r);return{mm:p,posValue:d,mmCost:$l(h,p)}}function Ea(n,e,t,i){if(!n)return{mm:0,posValue:0,mmCost:0};const r=ks(n,e,t),l=_s(n.size,n.markPriceEp),s=jp(n.side==="Buy",l,r,i);return{mm:r,posValue:l,mmCost:$l(s,r)}}function ya(n,e){const t=n.gt(0)&&Re(e).gt(0)?n.div(e):Re(999),i=t.gt(999)?999:Number(t),r=xe.floor(i,2,-2)+"%";return{marginRatioRr:i,marginRatio:r}}function jp(n,e,t,i){return n?Re(e).minus(t).times(i):Re(e).plus(t).times(i)}function D_(n){let e,t;return{c(){e=y("span"),t=B(n[1]),this.h()},l(i){e=k(i,"SPAN",{class:!0});var r=S(e);t=A(r,n[1]),r.forEach(m),this.h()},h(){E(e,"class","f1 T1 tr f16")},m(i,r){G(i,e,r),u(e,t)},p(i,r){r&2&&W(t,i[1])},d(i){i&&m(e)}}}function V_(n){let e,t,i,r,l;const s=n[3].default,o=Br(s,n,n[2],null),a=o||D_(n);return{c(){e=y("div"),t=y("span"),i=B(n[0]),r=q(),a&&a.c(),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=S(e);t=k(f,"SPAN",{class:!0});var p=S(t);i=A(p,n[0]),p.forEach(m),r=M(f),a&&a.l(f),f.forEach(m),this.h()},h(){E(t,"class","T3"),E(e,"class","wrap df aic jcsb lh22 fw2 H-1ncgrs2")},m(c,f){G(c,e,f),u(e,t),u(t,i),u(e,r),a&&a.m(e,null),l=!0},p(c,[f]){(!l||f&1)&&W(i,c[0]),o?o.p&&(!l||f&4)&&Ar(o,s,c,c[2],l?Qr(s,c[2],f,null):zr(c[2]),null):a&&a.p&&(!l||f&2)&&a.p(c,l?f:-1)},i(c){l||(Q(a,c),l=!0)},o(c){j(a,c),l=!1},d(c){c&&m(e),a&&a.d(c)}}}function O_(n,e,t){let{$$slots:i={},$$scope:r}=e,{label:l=""}=e,{info:s=""}=e;return n.$$set=o=>{"label"in o&&t(0,l=o.label),"info"in o&&t(1,s=o.info),"$$scope"in o&&t(2,r=o.$$scope)},[l,s,r,i]}let ci=class extends tt{constructor(e){super(),nt(this,e,O_,V_,et,{label:0,info:1})}};const ln={LimitOrder:"82c1ae",MarketOrder:"3a0433",ConditionalOrder:"831951",BuyLong:"8f0994",SellShort:"21edea",OrderPrice:"f43a8f",Size:"a1cade",Cost:"3529bc",Leverage:"7db386",PositionSizeAfter:"ff9654",LastPrice:"d6cde8",MarkPrice:"a6333c",EstimatedLiquidationPrice:"10c647",Distance:"36cce6",PostOnly:"3d0afa",CloseOnTrigger:"84f7e9",ReduceOnly:"5e05a3",TakeProfit:"2390a6",StopLoss:"499f9b",AvgFillPrice:"4228a9",TimeInForce:"6168fa",TriggerPrice:"e554c8",Limit:"21a637",Market:"b4b6ed",AfterExecution:"a8750c",PositionSize:"82b91b",EntryPrice:"8e375a",EstLiqPrice:"86be71"};function L_(n){let e,t;return e=new ci({props:{label:n[4](ln.OrderPrice),info:n[18](n[0],n[2])}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&16&&(l.label=i[4](ln.OrderPrice)),r[0]&5&&(l.info=i[18](i[0],i[2])),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function $_(n){let e,t;return e=new ci({props:{label:n[4](ln.TriggerPrice),info:n[19](n[0],n[4],n[2])}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&16&&(l.label=i[4](ln.TriggerPrice)),r[0]&21&&(l.info=i[19](i[0],i[4],i[2])),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function ka(n){let e,t;return e=new ci({props:{label:n[4](ln.TakeProfit),info:n[9]}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&16&&(l.label=i[4](ln.TakeProfit)),r[0]&512&&(l.info=i[9]),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Pa(n){let e,t;return e=new ci({props:{label:n[4](ln.StopLoss),info:n[8]}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&16&&(l.label=i[4](ln.StopLoss)),r[0]&256&&(l.info=i[8]),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Sa(n){let e,t,i,r,l;return{c(){e=y("span"),t=B(n[14]),i=q(),r=y("i"),l=B(""),this.h()},l(s){e=k(s,"SPAN",{class:!0});var o=S(e);t=A(o,n[14]),o.forEach(m),i=M(s),r=k(s,"I",{class:!0});var a=S(r);l=A(a,""),a.forEach(m),this.h()},h(){E(e,"class","T3"),E(r,"class","iconfont mh5 T3")},m(s,o){G(s,e,o),u(e,t),G(s,i,o),G(s,r,o),u(r,l)},p(s,o){o[0]&16384&&W(t,s[14])},d(s){s&&m(e),s&&m(i),s&&m(r)}}}function q_(n){let e,t=["Reverse","Increase","Decrease"].includes(n[3]),i,r,l,s,o,a=t&&Sa(n);return{c(){e=y("div"),a&&a.c(),i=q(),r=y("span"),l=B(n[13]),s=q(),o=B(n[12]),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=S(e);a&&a.l(f),i=M(f),r=k(f,"SPAN",{class:!0});var p=S(r);l=A(p,n[13]),s=M(p),o=A(p,n[12]),p.forEach(m),f.forEach(m),this.h()},h(){E(r,"class","T1"),E(e,"class","tr f16")},m(c,f){G(c,e,f),a&&a.m(e,null),u(e,i),u(e,r),u(r,l),u(r,s),u(r,o)},p(c,f){f[0]&8&&(t=["Reverse","Increase","Decrease"].includes(c[3])),t?a?a.p(c,f):(a=Sa(c),a.c(),a.m(e,i)):a&&(a.d(1),a=null),f[0]&8192&&W(l,c[13]),f[0]&4096&&W(o,c[12])},d(c){c&&m(e),a&&a.d()}}}function M_(n){let e,t=n[1].avgEntryPrice+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","T1")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&2&&t!==(t=r[1].avgEntryPrice+"")&&W(i,t)},d(r){r&&m(e)}}}function N_(n){let e,t=n[1].avgEntryPrice+"",i,r,l,s,o,a,c;return{c(){e=y("span"),i=B(t),r=q(),l=y("i"),s=B(""),o=q(),a=y("span"),c=B(n[7]),this.h()},l(f){e=k(f,"SPAN",{class:!0});var p=S(e);i=A(p,t),p.forEach(m),r=M(f),l=k(f,"I",{class:!0});var d=S(l);s=A(d,""),d.forEach(m),o=M(f),a=k(f,"SPAN",{class:!0});var h=S(a);c=A(h,n[7]),h.forEach(m),this.h()},h(){E(e,"class","T3"),E(l,"class","iconfont mh5 T3"),E(a,"class","T1")},m(f,p){G(f,e,p),u(e,i),G(f,r,p),G(f,l,p),u(l,s),G(f,o,p),G(f,a,p),u(a,c)},p(f,p){p[0]&2&&t!==(t=f[1].avgEntryPrice+"")&&W(i,t),p[0]&128&&W(c,f[7])},d(f){f&&m(e),f&&m(r),f&&m(l),f&&m(o),f&&m(a)}}}function H_(n){let e,t;return{c(){e=y("span"),t=B(n[7]),this.h()},l(i){e=k(i,"SPAN",{class:!0});var r=S(e);t=A(r,n[7]),r.forEach(m),this.h()},h(){E(e,"class","fw2 T1")},m(i,r){G(i,e,r),u(e,t)},p(i,r){r[0]&128&&W(t,i[7])},d(i){i&&m(e)}}}function B_(n){let e,t,i;function r(o,a){if(a[0]&8&&(t=null),a[0]&8&&(i=null),t==null&&(t=!!["Open"].includes(o[3])),t)return H_;if(i==null&&(i=!!["Reverse","Increase"].includes(o[3])),i)return N_;if(o[3]==="Decrease")return M_}let l=r(n,[-1,-1]),s=l&&l(n);return{c(){e=y("div"),s&&s.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=S(e);s&&s.l(a),a.forEach(m),this.h()},h(){E(e,"class","tr f16")},m(o,a){G(o,e,a),s&&s.m(e,null)},p(o,a){l===(l=r(o,a))&&s?s.p(o,a):(s&&s.d(1),s=l&&l(o),s&&(s.c(),s.m(e,null)))},d(o){o&&m(e),s&&s.d()}}}function A_(n){var p;let e,t=Tn(n[1].liquidationPrice,n[0].tickSize)+"",i,r,l,s,o,a,c=Tn(((p=n[10])==null?void 0:p.liqPrice)||0,n[0].tickSize)+"",f;return{c(){e=y("span"),i=B(t),r=q(),l=y("i"),s=B(""),o=q(),a=y("span"),f=B(c),this.h()},l(d){e=k(d,"SPAN",{class:!0});var h=S(e);i=A(h,t),h.forEach(m),r=M(d),l=k(d,"I",{class:!0});var _=S(l);s=A(_,""),_.forEach(m),o=M(d),a=k(d,"SPAN",{class:!0});var v=S(a);f=A(v,c),v.forEach(m),this.h()},h(){E(e,"class","T3"),E(l,"class","iconfont mh5 T3"),E(a,"class","fw2 liq H-1x1tkl7")},m(d,h){G(d,e,h),u(e,i),G(d,r,h),G(d,l,h),u(l,s),G(d,o,h),G(d,a,h),u(a,f)},p(d,h){var _;h[0]&3&&t!==(t=Tn(d[1].liquidationPrice,d[0].tickSize)+"")&&W(i,t),h[0]&1025&&c!==(c=Tn(((_=d[10])==null?void 0:_.liqPrice)||0,d[0].tickSize)+"")&&W(f,c)},d(d){d&&m(e),d&&m(r),d&&m(l),d&&m(o),d&&m(a)}}}function z_(n){var r;let e,t=Tn(((r=n[10])==null?void 0:r.liqPrice)||0,n[0].tickSize)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(l){e=k(l,"SPAN",{class:!0});var s=S(e);i=A(s,t),s.forEach(m),this.h()},h(){E(e,"class","fw2 liq H-1x1tkl7")},m(l,s){G(l,e,s),u(e,i)},p(l,s){var o;s[0]&1025&&t!==(t=Tn(((o=l[10])==null?void 0:o.liqPrice)||0,l[0].tickSize)+"")&&W(i,t)},d(l){l&&m(e)}}}function Q_(n){let e,t;function i(s,o){if(o[0]&8&&(e=null),s[3]==="Open")return j_;if(e==null&&(e=!!["Reverse","Increase"].includes(s[3])),e)return F_;if(s[3]==="Decrease")return R_}let r=i(n,[-1,-1]),l=r&&r(n);return{c(){l&&l.c(),t=ut()},l(s){l&&l.l(s),t=ut()},m(s,o){l&&l.m(s,o),G(s,t,o)},p(s,o){r===(r=i(s,o))&&l?l.p(s,o):(l&&l.d(1),l=r&&r(s),l&&(l.c(),l.m(t.parentNode,t)))},d(s){l&&l.d(s),s&&m(t)}}}function R_(n){let e,t=Tn(n[1].liquidationPrice,n[0].tickSize)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","liq H-1x1tkl7")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&3&&t!==(t=Tn(r[1].liquidationPrice,r[0].tickSize)+"")&&W(i,t)},d(r){r&&m(e)}}}function F_(n){var p;let e,t=Tn(n[1].liquidationPrice,n[0].tickSize)+"",i,r,l,s,o,a,c=Tn(((p=n[10])==null?void 0:p.liqPrice)||0,n[0].tickSize)+"",f;return{c(){e=y("span"),i=B(t),r=q(),l=y("i"),s=B(""),o=q(),a=y("span"),f=B(c),this.h()},l(d){e=k(d,"SPAN",{class:!0});var h=S(e);i=A(h,t),h.forEach(m),r=M(d),l=k(d,"I",{class:!0});var _=S(l);s=A(_,""),_.forEach(m),o=M(d),a=k(d,"SPAN",{class:!0});var v=S(a);f=A(v,c),v.forEach(m),this.h()},h(){E(e,"class","T3"),E(l,"class","iconfont mh5 T3"),E(a,"class","fw2 liq H-1x1tkl7")},m(d,h){G(d,e,h),u(e,i),G(d,r,h),G(d,l,h),u(l,s),G(d,o,h),G(d,a,h),u(a,f)},p(d,h){var _;h[0]&3&&t!==(t=Tn(d[1].liquidationPrice,d[0].tickSize)+"")&&W(i,t),h[0]&1025&&c!==(c=Tn(((_=d[10])==null?void 0:_.liqPrice)||0,d[0].tickSize)+"")&&W(f,c)},d(d){d&&m(e),d&&m(r),d&&m(l),d&&m(o),d&&m(a)}}}function j_(n){var r;let e,t=Tn(((r=n[10])==null?void 0:r.liqPrice)||0,n[0].tickSize)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(l){e=k(l,"SPAN",{class:!0});var s=S(e);i=A(s,t),s.forEach(m),this.h()},h(){E(e,"class","fw2 liq H-1x1tkl7")},m(l,s){G(l,e,s),u(e,i)},p(l,s){var o;s[0]&1025&&t!==(t=Tn(((o=l[10])==null?void 0:o.liqPrice)||0,l[0].tickSize)+"")&&W(i,t)},d(l){l&&m(e)}}}function U_(n){let e,t;function i(s,o){if(o[0]&8&&(t=null),s[1].isIsolated)return Q_;if(s[3]==="Open")return z_;if(t==null&&(t=!!["Reverse","Increase","Decrease"].includes(s[3])),t)return A_}let r=i(n,[-1,-1]),l=r&&r(n);return{c(){e=y("div"),l&&l.c(),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);l&&l.l(o),o.forEach(m),this.h()},h(){E(e,"class","tr f16")},m(s,o){G(s,e,o),l&&l.m(e,null)},p(s,o){r===(r=i(s,o))&&l?l.p(s,o):(l&&l.d(1),l=r&&r(s),l&&(l.c(),l.m(e,null)))},d(s){s&&m(e),l&&l.d()}}}function Ca(n){let e,t;return e=new ci({props:{label:"Margin Level",$$slots:{default:[W_]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&32778|r[1]&65536&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Ta(n){let e,t=n[1].marginRatio+"",i,r,l,s;return{c(){e=y("span"),i=B(t),r=q(),l=y("i"),s=B(""),this.h()},l(o){e=k(o,"SPAN",{class:!0});var a=S(e);i=A(a,t),a.forEach(m),r=M(o),l=k(o,"I",{class:!0});var c=S(l);s=A(c,""),c.forEach(m),this.h()},h(){E(e,"class","T3"),E(l,"class","iconfont mh5 T3")},m(o,a){G(o,e,a),u(e,i),G(o,r,a),G(o,l,a),u(l,s)},p(o,a){a[0]&2&&t!==(t=o[1].marginRatio+"")&&W(i,t)},d(o){o&&m(e),o&&m(r),o&&m(l)}}}function W_(n){let e,t=["Reverse","Increase","Decrease"].includes(n[3]),i,r,l,s=t&&Ta(n);return{c(){e=y("div"),s&&s.c(),i=q(),r=y("span"),l=B(n[15]),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=S(e);s&&s.l(a),i=M(a),r=k(a,"SPAN",{class:!0});var c=S(r);l=A(c,n[15]),c.forEach(m),a.forEach(m),this.h()},h(){E(r,"class","fw2 liq H-1x1tkl7"),E(e,"class","tr f16")},m(o,a){G(o,e,a),s&&s.m(e,null),u(e,i),u(e,r),u(r,l)},p(o,a){a[0]&8&&(t=["Reverse","Increase","Decrease"].includes(o[3])),t?s?s.p(o,a):(s=Ta(o),s.c(),s.m(e,i)):s&&(s.d(1),s=null),a[0]&32768&&W(l,o[15])},d(o){o&&m(e),s&&s.d()}}}function G_(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C=n[5]&&["USDT","MUSDT"].includes(n[1].settleCurrency),V;const O=[$_,L_],w=[];function D(z,H){return z[16]?0:1}t=D(n),i=w[t]=O[t](n),l=new ci({props:{label:n[4](ln.Size),info:n[6]}}),o=new ci({props:{label:n[4](ln.Cost),info:n[11].costWU}});let L=n[2].tpTrigger&&ka(n),$=n[2].slTrigger&&Pa(n);h=new ci({props:{label:n[4](ln.AfterExecution)}}),v=new ci({props:{label:n[4](ln.PositionSize),$$slots:{default:[q_]},$$scope:{ctx:n}}}),b=new ci({props:{label:n[4](ln.EntryPrice),$$slots:{default:[B_]},$$scope:{ctx:n}}}),I=new ci({props:{label:n[4](ln.EstLiqPrice),$$slots:{default:[U_]},$$scope:{ctx:n}}});let N=C&&Ca(n);return{c(){e=y("div"),i.c(),r=q(),te(l.$$.fragment),s=q(),te(o.$$.fragment),a=q(),L&&L.c(),c=q(),$&&$.c(),f=q(),p=y("div"),d=q(),te(h.$$.fragment),_=q(),te(v.$$.fragment),g=q(),te(b.$$.fragment),P=q(),te(I.$$.fragment),T=q(),N&&N.c(),this.h()},l(z){e=k(z,"DIV",{class:!0});var H=S(e);i.l(H),r=M(H),re(l.$$.fragment,H),s=M(H),re(o.$$.fragment,H),a=M(H),L&&L.l(H),c=M(H),$&&$.l(H),f=M(H),p=k(H,"DIV",{class:!0}),S(p).forEach(m),d=M(H),re(h.$$.fragment,H),_=M(H),re(v.$$.fragment,H),g=M(H),re(b.$$.fragment,H),P=M(H),re(I.$$.fragment,H),T=M(H),N&&N.l(H),H.forEach(m),this.h()},h(){E(p,"class","boundary H-1x1tkl7"),E(e,"class","wrap")},m(z,H){G(z,e,H),w[t].m(e,null),u(e,r),ne(l,e,null),u(e,s),ne(o,e,null),u(e,a),L&&L.m(e,null),u(e,c),$&&$.m(e,null),u(e,f),u(e,p),u(e,d),ne(h,e,null),u(e,_),ne(v,e,null),u(e,g),ne(b,e,null),u(e,P),ne(I,e,null),u(e,T),N&&N.m(e,null),V=!0},p(z,H){i.p(z,H);const R={};H[0]&16&&(R.label=z[4](ln.Size)),H[0]&64&&(R.info=z[6]),l.$set(R);const F={};H[0]&16&&(F.label=z[4](ln.Cost)),H[0]&2048&&(F.info=z[11].costWU),o.$set(F),z[2].tpTrigger?L?(L.p(z,H),H[0]&4&&Q(L,1)):(L=ka(z),L.c(),Q(L,1),L.m(e,c)):L&&(ot(),j(L,1,1,()=>{L=null}),at()),z[2].slTrigger?$?($.p(z,H),H[0]&4&&Q($,1)):($=Pa(z),$.c(),Q($,1),$.m(e,f)):$&&(ot(),j($,1,1,()=>{$=null}),at());const U={};H[0]&16&&(U.label=z[4](ln.AfterExecution)),h.$set(U);const K={};H[0]&16&&(K.label=z[4](ln.PositionSize)),H[0]&28680|H[1]&65536&&(K.$$scope={dirty:H,ctx:z}),v.$set(K);const Y={};H[0]&16&&(Y.label=z[4](ln.EntryPrice)),H[0]&138|H[1]&65536&&(Y.$$scope={dirty:H,ctx:z}),b.$set(Y);const X={};H[0]&16&&(X.label=z[4](ln.EstLiqPrice)),H[0]&1035|H[1]&65536&&(X.$$scope={dirty:H,ctx:z}),I.$set(X),H[0]&34&&(C=z[5]&&["USDT","MUSDT"].includes(z[1].settleCurrency)),C?N?(N.p(z,H),H[0]&34&&Q(N,1)):(N=Ca(z),N.c(),Q(N,1),N.m(e,null)):N&&(ot(),j(N,1,1,()=>{N=null}),at())},i(z){V||(Q(i),Q(l.$$.fragment,z),Q(o.$$.fragment,z),Q(L),Q($),Q(h.$$.fragment,z),Q(v.$$.fragment,z),Q(b.$$.fragment,z),Q(I.$$.fragment,z),Q(N),V=!0)},o(z){j(i),j(l.$$.fragment,z),j(o.$$.fragment,z),j(L),j($),j(h.$$.fragment,z),j(v.$$.fragment,z),j(b.$$.fragment,z),j(I.$$.fragment,z),j(N),V=!1},d(z){z&&m(e),w[t].d(),ie(l),ie(o),L&&L.d(),$&&$.d(),ie(h),ie(v),ie(b),ie(I),N&&N.d()}}}function wa(n){return n.side==="Sell"?-1:1}function K_(n,e,t,i){if(e&&t){const r=wa(e),l=Re(e.size).mul(r),s=wa(t),o=Re(t.orderQty).mul(s),a=o.plus(l),c=Re(t.priceEp).div(n.priceFactor);if(i===we.Cont)return Number(Qt.toContQuantity(n,a));if(i===we.Base){const f=wl(Qt.toValueQuantity(n,l,e.avgEntryPrice)),p=wl(Qt.toValueQuantity(n,o,c));return Re(f).add(p).toNumber()}else if(i===we.Coin){const f=wl(Qt.toCoinQuantity(n,l,e.avgEntryPrice)),p=wl(Qt.toCoinQuantity(n,o,c));return Re(f).add(p).toNumber()}}return 0}function X_(n,e){if(!n||!e)return"";const t={[we.Cont]:()=>Qt.toContUnit(n),[we.Base]:()=>Qt.toValueUnit(n),[we.Coin]:()=>Qt.toCoinUnit(n)};return t[e]&&t[e]()}function wl(n){return n==="-"?0:n}function Y_(n,e){const t=e.side==="Sell"?"-":"",i={[we.Cont]:e.sizeByContWU,[we.Base]:e.sizeByValueWU,[we.Coin]:e.sizeByCoinWU};return t+i[n]}function J_(n,e,t,i){if(t&&i){const r=(i==null?void 0:i.orderQty)||0,l=(t==null?void 0:t.size)||0,s=["Open","Increase"].includes(n);return Math.abs(Number(s?Re(r).plus(l):Re(l).minus(r)))}return 0}function Z_(n,e,t){return n.side==="Buy"?e:t}function x_(n,e){return n==="Buy"&&e==="tp"||n==="Sell"&&e==="sl"?"≥":"≤"}function eg(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,V,O,w,D,L,$,N,z;J(n,_n,fe=>t(41,v=fe)),J(n,dt,fe=>t(4,g=fe)),J(n,sp,fe=>t(30,b=fe)),J(n,dl,fe=>t(31,P=fe)),J(n,sr,fe=>t(5,I=fe)),J(n,vr,fe=>t(32,T=fe)),J(n,Sn,fe=>t(33,C=fe)),J(n,Wr,fe=>t(34,V=fe)),J(n,Gr,fe=>t(35,O=fe)),J(n,Ni,fe=>t(36,w=fe)),J(n,ri,fe=>t(37,D=fe)),J(n,Hi,fe=>t(39,$=fe)),J(n,an,fe=>t(40,N=fe)),J(n,w_,fe=>t(15,z=fe));let{contract:H=null}=e,{position:R=null}=e,{orderParams:F=null}=e,{orderMode:U=Ut.Open}=e;const K=ii.isMarketOrder(F==null?void 0:F.ordType),Y=ii.isConditionalOrder(F.ordType),X=Ci.pipe(Rr(500));J(n,X,fe=>t(38,L=fe));let ee,Z,ue,ce,pe="-",me=0,oe="-";function ke(fe,Se,Pe,Ce,Ee){const Ie=kr(U,v,fe.side);Rp.next(Object.assign(Object.assign({},fe),{currency:Se.settleCurrency,ordMode:Ce,leverage:Pe.leverage,posSide:Ie,orderType:Ee}))}function Le(fe,Se){return K?"Market":xe.floor(Se.priceEp,fe.pricePrecision,fe.priceScale)}function ge(fe,Se,Pe){const{pricePrecision:Ce,priceScale:Ee}=fe,{triggerType:Ie,stopPxEp:ve,direction:de,priceEp:se}=Pe,he=Ie==="ByLastPrice"?"LP":"MP",_e=xe.floor(ve,Ce,Ee),be=xe.floor(se,Ce,Ee),Ve=K?Se(ln.Market):Se(ln.Limit)+" "+be;return`${he} ${de} ${_e} | ${Ve}`}function ae(fe,Se,Pe,Ce){if(!Se[fe+"Trigger"])return"--";const Ee=fe==="tp"?Se.takeProfitEp:Se.stopLossEp,Ie=xe.floor(Ee,Pe.pricePrecision,Pe.priceScale),ve=fe==="tp"?Se.tpPxRp:Se.slPxRp,de=xe.floor(ve,Pe.pricePrecision,Pe.priceScale),se=Ce(ve?ln.Limit:ln.Market),he=Se[fe+"Trigger"]==="ByMarkPrice"?"MP":"LP",_e=x_(Se.side,fe);return`${`${he} ${_e} ${Ie}`} | ${se} ${de}`}function x(fe,Se,Pe){const{orderQty:Ce,priceEp:Ee}=Se,Ie=Re(Ee).div(fe.priceFactor),ve={[we.Cont]:()=>Qt.toCont(fe,Ce),[we.Base]:()=>Qt.toValue(fe,Ce,Ie),[we.Coin]:()=>Qt.toCoin(fe,Ce,Ie)};t(6,pe=ve[Pe]&&ve[Pe]())}function le(fe,Se){return fe.type==="Perpetual"&&fe.contractSide===-1&&Se===we.Base?we.Coin:Se}return n.$$set=fe=>{"contract"in fe&&t(0,H=fe.contract),"position"in fe&&t(1,R=fe.position),"orderParams"in fe&&t(2,F=fe.orderParams),"orderMode"in fe&&t(20,U=fe.orderMode)},n.$$.update=()=>{n.$$.dirty[0]&1|n.$$.dirty[1]&512&&t(29,i=le(H,N)),n.$$.dirty[0]&536870914&&t(14,r=Y_(i,R)),n.$$.dirty[0]&6&&t(3,l=yi.genOrderType(R,F)),n.$$.dirty[1]&256&&t(21,ee=$),n.$$.dirty[1]&128&&t(22,Z=L),n.$$.dirty[1]&64&&t(23,ue=D),n.$$.dirty[1]&32&&t(24,ce=w),n.$$.dirty[0]&536870919&&t(13,s=K_(H,R,F,i)),n.$$.dirty[0]&536870913&&t(12,o=X_(H,i)),n.$$.dirty[0]&4|n.$$.dirty[1]&24&&t(11,a=Z_(F,O,V)),n.$$.dirty[0]&536870917&&x(H,F,i),n.$$.dirty[0]&1048583&&t(25,me=yi.averagePrice(U,Object.assign(Object.assign({},F),{newOrderSize:F.orderQty}),R,H)),n.$$.dirty[0]&33554433&&t(7,oe=xe.floor(me,H.pricePrecision,H.priceScale)),n.$$.dirty[0]&15&&t(28,c=Math.abs(J_(l,H,R,F))),n.$$.dirty[0]&301989892&&t(26,f=Object.assign(Object.assign({},F),{orderQty:c,newOrderSize:F.orderQty,avgPriceEp:me})),n.$$.dirty[0]&14|n.$$.dirty[1]&4&&t(27,p=em(C,R.posMode,F.side,l)),n.$$.dirty[0]&1306525731|n.$$.dirty[1]&3&&t(10,d=ys(H,R,p,ee,T,Object.assign({},f),ue,Z,ce,I,P,b)),n.$$.dirty[0]&21&&t(9,h=ae("tp",F,H,g)),n.$$.dirty[0]&21&&t(8,_=ae("sl",F,H,g)),n.$$.dirty[0]&68157451&&ke(f,H,R,U,l)},[H,R,F,l,g,I,pe,oe,_,h,d,a,o,s,r,z,Y,X,Le,ge,U,ee,Z,ue,ce,me,f,p,c,i,b,P,T,C,V,O,w,D,L,$,N]}let tg=class extends tt{constructor(e){super(),nt(this,e,eg,G_,et,{contract:0,position:1,orderParams:2,orderMode:20},null,[-1,-1])}};function Ia(n){let e,t;return e=new bn({props:{style:"width: 480px; max-width: 640px; border-radius: 12px; background: var(--B2);",$$slots:{footer:[og],header:[ig],default:[ng]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&8389118&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function ng(n){let e,t,i;return t=new tg({props:{contract:n[5],position:n[6],orderParams:n[3],orderMode:n[1]}}),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);re(t.$$.fragment,l),l.forEach(m),this.h()},h(){E(e,"class","body H-1gs0gl1")},m(r,l){G(r,e,l),ne(t,e,null),i=!0},p(r,l){const s={};l&32&&(s.contract=r[5]),l&64&&(s.position=r[6]),l&8&&(s.orderParams=r[3]),l&2&&(s.orderMode=r[1]),t.$set(s)},i(r){i||(Q(t.$$.fragment,r),i=!0)},o(r){j(t.$$.fragment,r),i=!1},d(r){r&&m(e),ie(t)}}}function ig(n){let e,t,i,r,l,s,o,a=n[5].pairName+"",c,f,p,d,h,_=n[6].leverage+"",v,g,b,P,I,T,C;return{c(){e=y("div"),t=y("div"),i=y("img"),s=q(),o=y("span"),c=B(a),f=q(),p=y("span"),d=B(n[7]),h=q(),v=B(_),g=B("X"),b=q(),P=y("i"),I=B(""),this.h()},l(V){e=k(V,"DIV",{class:!0,slot:!0});var O=S(e);t=k(O,"DIV",{class:!0});var w=S(t);i=k(w,"IMG",{width:!0,src:!0,alt:!0}),s=M(w),o=k(w,"SPAN",{class:!0});var D=S(o);c=A(D,a),D.forEach(m),f=M(w),p=k(w,"SPAN",{class:!0});var L=S(p);d=A(L,n[7]),h=M(L),v=A(L,_),g=A(L,"X"),L.forEach(m),w.forEach(m),b=M(O),P=k(O,"I",{class:!0});var $=S(P);I=A($,""),$.forEach(m),O.forEach(m),this.h()},h(){E(i,"width","24"),hn(i.src,r=ql.getUrl(n[5].baseCurrency))||E(i,"src",r),E(i,"alt",l=n[5].baseCurrency),E(o,"class","ml8 f18 fw3 T1"),E(p,"class","side ml8 br4 fw2 f14 H-1gs0gl1"),Te(p,"buy-bg",n[3].side==="Buy"),Te(p,"sell-bg",n[3].side==="Sell"),E(t,"class","df aic"),E(P,"class","iconfont cp f14"),E(e,"class","p24 lh24 df jcsb aic b f16 T2"),E(e,"slot","header")},m(V,O){G(V,e,O),u(e,t),u(t,i),u(t,s),u(t,o),u(o,c),u(t,f),u(t,p),u(p,d),u(p,h),u(p,v),u(p,g),u(e,b),u(e,P),u(P,I),T||(C=We(P,"click",n[10]),T=!0)},p(V,O){O&32&&!hn(i.src,r=ql.getUrl(V[5].baseCurrency))&&E(i,"src",r),O&32&&l!==(l=V[5].baseCurrency)&&E(i,"alt",l),O&32&&a!==(a=V[5].pairName+"")&&W(c,a),O&128&&W(d,V[7]),O&64&&_!==(_=V[6].leverage+"")&&W(v,_),O&8&&Te(p,"buy-bg",V[3].side==="Buy"),O&8&&Te(p,"sell-bg",V[3].side==="Sell")},d(V){V&&m(e),T=!1,C()}}}function rg(n){let e,t=n[2](He.DontShowAgain)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ml8 T2")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&4&&t!==(t=r[2](He.DontShowAgain)+"")&&W(i,t)},d(r){r&&m(e)}}}function lg(n){let e=n[2](He.Cancel)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&4&&e!==(e=i[2](He.Cancel)+"")&&W(t,e)},d(i){i&&m(t)}}}function sg(n){let e=n[2](He.Confirm)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&4&&e!==(e=i[2](He.Confirm)+"")&&W(t,e)},d(i){i&&m(t)}}}function og(n){let e,t,i,r,l,s,o,a,c;function f(d){n[15](d)}let p={class:"usn T2",$$slots:{default:[rg]},$$scope:{ctx:n}};return n[4]!==void 0&&(p.checked=n[4]),t=new Pn({props:p}),De.push(()=>qe(t,"checked",f)),t.$on("change",n[9]),s=new Ht({props:{class:"f1 fw2 cancel",$$slots:{default:[lg]},$$scope:{ctx:n}}}),s.$on("click",n[10]),a=new Ht({props:{class:"f1 fw2 confirm",type:"primary",loading:n[8],$$slots:{default:[sg]},$$scope:{ctx:n}}}),a.$on("click",n[11]),{c(){e=y("div"),te(t.$$.fragment),r=q(),l=y("div"),te(s.$$.fragment),o=q(),te(a.$$.fragment),this.h()},l(d){e=k(d,"DIV",{class:!0,slot:!0});var h=S(e);re(t.$$.fragment,h),r=M(h),l=k(h,"DIV",{class:!0});var _=S(l);re(s.$$.fragment,_),o=M(_),re(a.$$.fragment,_),_.forEach(m),h.forEach(m),this.h()},h(){E(l,"class","df mt16"),E(e,"class","footer p24 H-1gs0gl1"),E(e,"slot","footer")},m(d,h){G(d,e,h),ne(t,e,null),u(e,r),u(e,l),ne(s,l,null),u(l,o),ne(a,l,null),c=!0},p(d,h){const _={};h&8388612&&(_.$$scope={dirty:h,ctx:d}),!i&&h&16&&(i=!0,_.checked=d[4],Me(()=>i=!1)),t.$set(_);const v={};h&8388612&&(v.$$scope={dirty:h,ctx:d}),s.$set(v);const g={};h&256&&(g.loading=d[8]),h&8388612&&(g.$$scope={dirty:h,ctx:d}),a.$set(g)},i(d){c||(Q(t.$$.fragment,d),Q(s.$$.fragment,d),Q(a.$$.fragment,d),c=!0)},o(d){j(t.$$.fragment,d),j(s.$$.fragment,d),j(a.$$.fragment,d),c=!1},d(d){d&&m(e),ie(t),ie(s),ie(a)}}}function ag(n){let e,t,i=n[0]&&Ia(n);return{c(){i&&i.c(),e=ut()},l(r){i&&i.l(r),e=ut()},m(r,l){i&&i.m(r,l),G(r,e,l),t=!0},p(r,[l]){r[0]?i?(i.p(r,l),l&1&&Q(i,1)):(i=Ia(r),i.c(),Q(i,1),i.m(e.parentNode,e)):i&&(ot(),j(i,1,1,()=>{i=null}),at())},i(r){t||(Q(i),t=!0)},o(r){j(i),t=!1},d(r){i&&i.d(r),r&&m(e)}}}function cg(n,e,t){let i,r,l,s,o,a,c;J(n,kn,L=>t(1,i=L)),J(n,_n,L=>t(16,r=L)),J(n,qi,L=>t(17,l=L)),J(n,Xt,L=>t(13,s=L)),J(n,dt,L=>t(2,o=L)),J(n,xn,L=>t(14,a=L)),J(n,Sl,L=>t(8,c=L));var f=this&&this.__rest||function(L,$){var N={};for(var z in L)Object.prototype.hasOwnProperty.call(L,z)&&$.indexOf(z)<0&&(N[z]=L[z]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,z=Object.getOwnPropertySymbols(L);H<z.length;H++)$.indexOf(z[H])<0&&Object.prototype.propertyIsEnumerable.call(L,z[H])&&(N[z[H]]=L[z[H]]);return N};let p=!1,d="",h=null,_=!1,v=null,g=null,b="-";Lt(()=>{const L=Pt.subscribe("order-place","create-click",$=>{if(t(5,v=s),t(6,g=$.position),t(3,h=l),t(12,d=h.side),_){C();return}t(0,p=!0)});return()=>{L()}});function P(L){pi.track("dont_show_again",{check:L.target.checked})}function I(){t(4,_=!1),t(0,p=!1)}function T(){t(5,v=null),t(6,g=null),t(12,d=""),t(3,h=null),t(0,p=!1),Sl.next(!1)}async function C(){Sl.next(!0);const{ordType:L,orderQty:$,priceEp:N,postOnly:z,timeInForce:H,stopPxEp:R=0,direction:F,tpTrigger:U="",slTrigger:K="",takeProfitEp:Y=0,stopLossEp:X=0,tpslCloseMode:ee,icebergQty:Z,icebergOrders:ue}=h,ce=f(h,["ordType","orderQty","priceEp","postOnly","timeInForce","stopPxEp","direction","tpTrigger","slTrigger","takeProfitEp","stopLossEp","tpslCloseMode","icebergQty","icebergOrders"]),{type:pe,pricePrecision:me}=v,oe=Object.assign(Object.assign({},ce),{ordType:L,timeInForce:z?"PostOnly":H,tpTrigger:U,slTrigger:K,type:pe});(U||K)&&ee&&(oe.posPattern=ee.toUpperCase()),pe==="Perpetual"&&Object.assign(oe,{orderQty:$,priceEp:N,stopPxEp:R,takeProfitEp:Y,stopLossEp:X}),pe==="PerpetualV2"&&Object.assign(oe,{orderQtyRq:$.toString(),priceRp:xe.floor(N,me),stopPxRp:xe.floor(R,me),posSide:kr(i,r,h.side),takeProfitRp:xe.floor(Y,me),tpTimeInForce:h.tpTimeInForce,tpPxRp:xe.floor(h.tpPxRp,me),stopLossRp:xe.floor(X,me),slTimeInForce:h.slTimeInForce,slPxRp:xe.floor(h.slPxRp,me)}),!Z&&!ue&&(pe==="Perpetual"&&Object.assign(oe,{displayQty:0}),pe==="PerpetualV2"&&Object.assign(oe,{displayQtyRq:0})),Z&&Object.assign(oe,{displayQtyRq:Z}),ue&&Object.assign(oe,{splitOrdersTotal:ue});const Le={by:"order",goal:i===Ut.Close?"create_close":"create_open"},ge=await fr(oe,Le);Sl.next(!1),ge&&t(0,p=!1)}async function V(){await Promise.all([C(),ar("orderSubmitConfirmation",!_)]),Pt.send("tpsl-place-order","reset",{})}function O(L){t(4,_=!L.orderSubmitConfirmation)}function w(L,$,N,z){if(!L)return;const{type:H}=L;if(H==="Perpetual"&&t(7,b=z(N==="Buy"?ln.BuyLong:ln.SellShort)),H==="PerpetualV2"){if($===Ut.Open){t(7,b=z(N==="Buy"?ln.BuyLong:ln.SellShort));return}$===Ut.Close&&t(7,b=z(N==="Buy"?He.CloseShort:He.CloseLong))}}function D(L){_=L,t(4,_)}return n.$$.update=()=>{n.$$.dirty&1&&!p&&T(),n.$$.dirty&16384&&O(a),n.$$.dirty&12294&&w(s,i,d,o)},[p,i,o,h,_,v,g,b,c,P,I,V,d,s,a,D]}let fg=class extends tt{constructor(e){super(),nt(this,e,cg,ag,et,{})}};const rr={OrderConfirmation:"6398f1",TheCurrentLimit:"a9d931"};function Da(n){let e,t;return e=new bn({props:{style:"width:640px;max-width: 640px;",$$slots:{footer:[_g],header:[pg],default:[ug]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&2062&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function ug(n){let e,t=n[3](rr.TheCurrentLimit)+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","desc ph24 lh22 f14 T3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&8&&t!==(t=r[3](rr.TheCurrentLimit)+"")&&W(i,t)},d(r){r&&m(e)}}}function pg(n){let e,t,i=n[3](rr.OrderConfirmation)+"",r,l,s,o,a,c;return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("i"),o=B(""),this.h()},l(f){e=k(f,"DIV",{class:!0,slot:!0});var p=S(e);t=k(p,"SPAN",{});var d=S(t);r=A(d,i),d.forEach(m),l=M(p),s=k(p,"I",{class:!0});var h=S(s);o=A(h,""),h.forEach(m),p.forEach(m),this.h()},h(){E(s,"class","iconfont cp"),E(e,"class","p24 lh24 df jcsb b f16 T2"),E(e,"slot","header")},m(f,p){G(f,e,p),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),a||(c=We(s,"click",n[5]),a=!0)},p(f,p){p&8&&i!==(i=f[3](rr.OrderConfirmation)+"")&&W(r,i)},d(f){f&&m(e),a=!1,c()}}}function dg(n){let e,t=n[3](He.DontShowAgain)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ml8 T3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&8&&t!==(t=r[3](He.DontShowAgain)+"")&&W(i,t)},d(r){r&&m(e)}}}function mg(n){let e=n[3](He.Cancel)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&8&&e!==(e=i[3](He.Cancel)+"")&&W(t,e)},d(i){i&&m(t)}}}function hg(n){let e=n[3](He.Confirm)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&8&&e!==(e=i[3](He.Confirm)+"")&&W(t,e)},d(i){i&&m(t)}}}function _g(n){let e,t,i,r,l,s,o,a,c;function f(d){n[7](d)}let p={class:"usn",$$slots:{default:[dg]},$$scope:{ctx:n}};return n[1]!==void 0&&(p.checked=n[1]),t=new Pn({props:p}),De.push(()=>qe(t,"checked",f)),s=new Ht({props:{$$slots:{default:[mg]},$$scope:{ctx:n}}}),s.$on("click",n[4]),a=new Ht({props:{type:"primary",loading:n[2],$$slots:{default:[hg]},$$scope:{ctx:n}}}),a.$on("click",n[6]),{c(){e=y("div"),te(t.$$.fragment),r=q(),l=y("div"),te(s.$$.fragment),o=q(),te(a.$$.fragment),this.h()},l(d){e=k(d,"DIV",{class:!0,slot:!0});var h=S(e);re(t.$$.fragment,h),r=M(h),l=k(h,"DIV",{});var _=S(l);re(s.$$.fragment,_),o=M(_),re(a.$$.fragment,_),_.forEach(m),h.forEach(m),this.h()},h(){E(e,"class","p24 df aic jcsb mt24"),E(e,"slot","footer")},m(d,h){G(d,e,h),ne(t,e,null),u(e,r),u(e,l),ne(s,l,null),u(l,o),ne(a,l,null),c=!0},p(d,h){const _={};h&2056&&(_.$$scope={dirty:h,ctx:d}),!i&&h&2&&(i=!0,_.checked=d[1],Me(()=>i=!1)),t.$set(_);const v={};h&2056&&(v.$$scope={dirty:h,ctx:d}),s.$set(v);const g={};h&4&&(g.loading=d[2]),h&2056&&(g.$$scope={dirty:h,ctx:d}),a.$set(g)},i(d){c||(Q(t.$$.fragment,d),Q(s.$$.fragment,d),Q(a.$$.fragment,d),c=!0)},o(d){j(t.$$.fragment,d),j(s.$$.fragment,d),j(a.$$.fragment,d),c=!1},d(d){d&&m(e),ie(t),ie(s),ie(a)}}}function gg(n){let e,t,i=n[0]&&Da(n);return{c(){i&&i.c(),e=ut()},l(r){i&&i.l(r),e=ut()},m(r,l){i&&i.m(r,l),G(r,e,l),t=!0},p(r,[l]){r[0]?i?(i.p(r,l),l&1&&Q(i,1)):(i=Da(r),i.c(),Q(i,1),i.m(e.parentNode,e)):i&&(ot(),j(i,1,1,()=>{i=null}),at())},i(r){t||(Q(i),t=!0)},o(r){j(i),t=!1},d(r){i&&i.d(r),r&&m(e)}}}function vg(n,e,t){let i;J(n,dt,h=>t(3,i=h));let r=!1,l=!1,s=!1,o;Lt(()=>Pt.subscribe("order-protect","order-protect-click",h=>{t(0,r=!0),o=h.position}));function a(){t(0,r=!1)}function c(){t(0,r=!1)}function f(){t(2,s=!0),Pt.send("order-place","create-click",{position:o}),p(l)}async function p(h){await ar("orderFatFingerProtection",!h),t(0,r=!1),t(2,s=!1)}function d(h){l=h,t(1,l)}return[r,l,s,i,a,c,f,d]}let bg=class extends tt{constructor(e){super(),nt(this,e,vg,gg,et,{})}};const En={calcAveragePriceXp(n){if(n.length<1)return Re(0);const e=n.reduce((i,{price:r,quantity:l})=>Re(i).plus(Re(r).times(l)),Re(0)),t=this.calcTotalSize(n);return Re(e).div(t)},calcTotalSize(n){return n.reduce((e,{quantity:t})=>Re(e).plus(t),Re(0)).toNumber()},genPriceProps(n){const{tickSizeEp:e,pricePrecision:t,maxPriceEp:i,priceFactor:r,priceScale:l}=n;return{tickSizeEp:e,precision:t,minPriceEp:e,maxPriceEp:i,factor:r,scale:l}},genQtyProps(n,e,t,i,r){const l=li(n,e),s=si(n),o=ei(t,i,r,n,l,s);return{...o,minQuantity:o.minQuantity*2,maxQuantity:o.maxQuantity*2}},genOrderQty(n,e,t,i,r){if(t===0||e.lte(0))return 0;const l=Number(xe.floor(t,i.precision,i.scale)),{type:s,contractSide:o}=n;return s==="Perpetual"?o>0?{[we.Cont]:l,[we.Base]:Number(In(l,e,n)),[we.Coin]:Dn(l,n,e)}[r]:{[we.Cont]:l,[we.Base]:Dn(l,n,e)}[r]:{[we.Base]:In(l,e,n),[we.Coin]:Dn(l,n,e)}[r]},checkCloseParams(n,e,t){const{buy:i,sell:r}=t;if(n==="Buy"&&i<=0||n==="Sell"&&r<=0)return e(Ye.NoPositionToClose)},checkOpenParams(n,e,t,i){if((n==="Buy"?t.buyEv:t.sellEv)>i)return e(Ye.AvailableError)},enabledBtn(n,e,t,i,r){return n>0||e>0||!t||!i||t>i||!r},calcExceedsValue(n,{precision:e,scale:t},i){const r=xe.floor(this.calcTotalSize(i),e,t),l=Number(xe.floor(n,e,t));return Re(r).minus(l).toNumber()},calcOrdType(n,e,t,i,r){const{closeEp:l,markPriceEp:s}=r;if(e){const o=Di(t,i,l,s);return n==="Buy"&&o>0?"StopLimit":"LimitIfTouched"}return"Limit"},genMinSize(n,e,t=0,i,r,l){if(Re(t).lte(0)||Re(i).lte(0))return 0;const{tickSizeEx:s,factor:o,precision:a,scale:c}=l,f=Number(_r(t,n)),p=xe.floor(i/r,8,c),{contractSize:d,type:h,qtyStepSize:_}=n;if(h==="Perpetual"){if(e===we.Cont&&Re(r).times(s).gt(i))return Re(s).times(r).div(o);if(e===we.Base&&Re(p).lt(f)){const v=Number(xe.floor(f*r,a));return Il(v)}if(e===we.Coin&&Re(p).lt(d))return d*r}if(h==="PerpetualV2"){const v=Number(Re(t).times(_));if(e===we.Base&&Re(p).lt(v))return Il(v*r);if(e===we.Coin&&Re(p).lt(_))return _*r}},calcMinSize(n,e,t=0,i){if(Re(t).lte(0))return 0;const{tickSizeEx:r,factor:l,precision:s}=i,o=Number(_r(t,n)),{contractSize:a,type:c,qtyStepSize:f}=n;if(c==="Perpetual"){if(e===we.Cont)return Re(r).div(l);if(e===we.Base){const p=Number(xe.floor(o,s));return Il(p)}if(e===we.Coin)return a}if(c==="PerpetualV2"){const p=Number(Re(t).times(f));if(e===we.Base)return Il(p);if(e===we.Coin)return f}}};function Il(n){return n+n*.1}const Eg=new jr,Ps=yg(kg);function yg(n){return Eg.pipe(Cn(n),qn(Boolean))}function kg(n){return n}const Up=new jr,rs=new Jn([]),to=new Jn({sellEv:0,buyEv:0});Up.pipe(Rr(100)).subscribe(async n=>{const{priceProps:e,quantityProps:t,...i}=n,{data:r}=await Sp.scaledPreview(i);if(r){const{priceRp:l,orderQtyRq:s}=r,o=l.map((a,c)=>({price:xe.priceToEp(a,e.scale),quantity:xe.priceToEp(s[c],t.scale),disabled:c===0||c===i.orderCount-1}));rs.next(o)}});const Ft={LowestPrice:"a247da",Cont:"c64d01",HighestPrice:"c5544d",Size:"a1cade",SizeDistribution:"471311",Flat:"64f028",Ascending:"103b48",Descending:"99a140",PleaseEnter:"9abdc0",Exceeds:"4673ae",OrderConfirmation:"4b2d0f",Price:"fd6f8c",AveragePrice:"457657",Cost:"3529bc",MinSizeIs:"87f63d",DontShowAgain:"595f1b",Long:"cacd67",Short:"b4bdd2",UpperPriceMust:"1cc5f2",OrdersSubmitted:"191f36",OrdersFailed:"db826d",OrderRequestFailure:"775f9e",SuccessTitle:"ef8fe9",PleaseLogIn:"022a23"};function Va(n,e,t){const i=n.slice();return i[30]=e[t],i}function Oa(n){let e,t;return e=new bn({props:{style:"min-width: 432px; padding: 24px;",$$slots:{footer:[wg],default:[Sg]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&32751|r[1]&4&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function La(n){let e,t,i=xe.floor(n[30].price,n[0].pricePrecision,n[0].priceScale)+"",r,l,s,o=xe.floor(n[30].quantity,n[7].precision,n[7].scale)+"",a,c;return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("span"),a=B(o),c=q(),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=S(e);t=k(p,"SPAN",{});var d=S(t);r=A(d,i),d.forEach(m),l=M(p),s=k(p,"SPAN",{});var h=S(s);a=A(h,o),h.forEach(m),c=M(p),p.forEach(m),this.h()},h(){E(e,"class","df aic jcsb mt16 f16 T1")},m(f,p){G(f,e,p),u(e,t),u(t,r),u(e,l),u(e,s),u(s,a),u(e,c)},p(f,p){p[0]&65&&i!==(i=xe.floor(f[30].price,f[0].pricePrecision,f[0].priceScale)+"")&&W(r,i),p[0]&192&&o!==(o=xe.floor(f[30].quantity,f[7].precision,f[7].scale)+"")&&W(a,o)},d(f){f&&m(e)}}}function $a(n){let e,t,i=n[2](Ye.TriggerPrice)+"",r,l,s,o=xe.floor(n[11],n[0].pricePrecision,n[0].priceScale)+"",a;return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("span"),a=B(o),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=S(e);t=k(f,"SPAN",{});var p=S(t);r=A(p,i),p.forEach(m),l=M(f),s=k(f,"SPAN",{});var d=S(s);a=A(d,o),d.forEach(m),f.forEach(m),this.h()},h(){E(e,"class","df aic jcsb mt12 T1")},m(c,f){G(c,e,f),u(e,t),u(t,r),u(e,l),u(e,s),u(s,a)},p(c,f){f[0]&4&&i!==(i=c[2](Ye.TriggerPrice)+"")&&W(r,i),f[0]&2049&&o!==(o=xe.floor(c[11],c[0].pricePrecision,c[0].priceScale)+"")&&W(a,o)},d(c){c&&m(e)}}}function qa(n){let e,t,i=n[2](Ft.Cost)+"",r,l,s,o=n[14][n[1].toLowerCase()]+"",a;return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("span"),a=B(o),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=S(e);t=k(f,"SPAN",{});var p=S(t);r=A(p,i),p.forEach(m),l=M(f),s=k(f,"SPAN",{});var d=S(s);a=A(d,o),d.forEach(m),f.forEach(m),this.h()},h(){E(e,"class","df aic jcsb mt12 T1")},m(c,f){G(c,e,f),u(e,t),u(t,r),u(e,l),u(e,s),u(s,a)},p(c,f){f[0]&4&&i!==(i=c[2](Ft.Cost)+"")&&W(r,i),f[0]&16386&&o!==(o=c[14][c[1].toLowerCase()]+"")&&W(a,o)},d(c){c&&m(e)}}}function Pg(n){let e,t=n[2](Ft.DontShowAgain)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ml8 usn")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&4&&t!==(t=r[2](Ft.DontShowAgain)+"")&&W(i,t)},d(r){r&&m(e)}}}function Sg(n){let e,t,i,r=n[2](Ft.OrderConfirmation)+"",l,s,o=n[0].pairName+"",a,c,f,p,d,h,_,v,g,b,P,I=n[2](Ft.Price)+"",T,C,V,O=n[2](Ft.Size)+"",w,D,L=Lr(n[9],n[2],He,n[0])+"",$,N,z,H,R,F,U,K=n[2](Ft.AveragePrice)+"",Y,X,ee,Z=xe.floor(n[8],n[0].pricePrecision,n[0].priceScale)+"",ue,ce,pe,me,oe,ke,Le,ge,ae,x=n[6],le=[];for(let Ee=0;Ee<x.length;Ee+=1)le[Ee]=La(Va(n,x,Ee));let fe=n[10]&&$a(n),Se=n[3]==="Open"&&qa(n);function Pe(Ee){n[18](Ee)}let Ce={class:"mt24 cp T1",$$slots:{default:[Pg]},$$scope:{ctx:n}};return n[5]!==void 0&&(Ce.checked=n[5]),oe=new Pn({props:Ce}),De.push(()=>qe(oe,"checked",Pe)),{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),s=B(" - "),a=B(o),c=q(),f=y("span"),p=B(n[12]),d=q(),h=y("i"),_=B(""),v=q(),g=y("div"),b=y("div"),P=y("span"),T=B(I),C=q(),V=y("span"),w=B(O),D=B("("),$=B(L),N=B(")"),z=q(),H=y("div");for(let Ee=0;Ee<le.length;Ee+=1)le[Ee].c();R=q(),F=y("div"),U=y("span"),Y=B(K),X=q(),ee=y("span"),ue=B(Z),ce=q(),fe&&fe.c(),pe=q(),Se&&Se.c(),me=q(),te(oe.$$.fragment),this.h()},l(Ee){e=k(Ee,"DIV",{class:!0});var Ie=S(e);t=k(Ie,"DIV",{});var ve=S(t);i=k(ve,"SPAN",{class:!0});var de=S(i);l=A(de,r),s=A(de," - "),a=A(de,o),de.forEach(m),c=M(ve),f=k(ve,"SPAN",{});var se=S(f);p=A(se,n[12]),se.forEach(m),ve.forEach(m),d=M(Ie),h=k(Ie,"I",{class:!0});var he=S(h);_=A(he,""),he.forEach(m),Ie.forEach(m),v=M(Ee),g=k(Ee,"DIV",{class:!0});var _e=S(g);b=k(_e,"DIV",{class:!0});var be=S(b);P=k(be,"SPAN",{});var Ve=S(P);T=A(Ve,I),Ve.forEach(m),C=M(be),V=k(be,"SPAN",{});var Be=S(V);w=A(Be,O),D=A(Be,"("),$=A(Be,L),N=A(Be,")"),Be.forEach(m),be.forEach(m),z=M(_e),H=k(_e,"DIV",{class:!0});var Fe=S(H);for(let Ge=0;Ge<le.length;Ge+=1)le[Ge].l(Fe);Fe.forEach(m),_e.forEach(m),R=M(Ee),F=k(Ee,"DIV",{class:!0});var $e=S(F);U=k($e,"SPAN",{});var Ae=S(U);Y=A(Ae,K),Ae.forEach(m),X=M($e),ee=k($e,"SPAN",{});var Ne=S(ee);ue=A(Ne,Z),Ne.forEach(m),$e.forEach(m),ce=M(Ee),fe&&fe.l(Ee),pe=M(Ee),Se&&Se.l(Ee),me=M(Ee),re(oe.$$.fragment,Ee),this.h()},h(){E(i,"class","T1"),Te(f,"up",n[1]==="Buy"),Te(f,"down",n[1]==="Sell"),E(h,"class","iconfont cp T3"),E(e,"class","df jcsb b f16 T2"),E(b,"class","df aic jcsb mt24 f12 T3"),E(H,"class","main sv H-n83xaw"),Te(H,"pr3",n[6].length>5),E(g,"class","body T3 H-n83xaw"),E(F,"class","df aic jcsb T1")},m(Ee,Ie){G(Ee,e,Ie),u(e,t),u(t,i),u(i,l),u(i,s),u(i,a),u(t,c),u(t,f),u(f,p),u(e,d),u(e,h),u(h,_),G(Ee,v,Ie),G(Ee,g,Ie),u(g,b),u(b,P),u(P,T),u(b,C),u(b,V),u(V,w),u(V,D),u(V,$),u(V,N),u(g,z),u(g,H);for(let ve=0;ve<le.length;ve+=1)le[ve]&&le[ve].m(H,null);G(Ee,R,Ie),G(Ee,F,Ie),u(F,U),u(U,Y),u(F,X),u(F,ee),u(ee,ue),G(Ee,ce,Ie),fe&&fe.m(Ee,Ie),G(Ee,pe,Ie),Se&&Se.m(Ee,Ie),G(Ee,me,Ie),ne(oe,Ee,Ie),Le=!0,ge||(ae=We(h,"click",n[15]),ge=!0)},p(Ee,Ie){if((!Le||Ie[0]&4)&&r!==(r=Ee[2](Ft.OrderConfirmation)+"")&&W(l,r),(!Le||Ie[0]&1)&&o!==(o=Ee[0].pairName+"")&&W(a,o),(!Le||Ie[0]&4096)&&W(p,Ee[12]),(!Le||Ie[0]&2)&&Te(f,"up",Ee[1]==="Buy"),(!Le||Ie[0]&2)&&Te(f,"down",Ee[1]==="Sell"),(!Le||Ie[0]&4)&&I!==(I=Ee[2](Ft.Price)+"")&&W(T,I),(!Le||Ie[0]&4)&&O!==(O=Ee[2](Ft.Size)+"")&&W(w,O),(!Le||Ie[0]&517)&&L!==(L=Lr(Ee[9],Ee[2],He,Ee[0])+"")&&W($,L),Ie[0]&193){x=Ee[6];let de;for(de=0;de<x.length;de+=1){const se=Va(Ee,x,de);le[de]?le[de].p(se,Ie):(le[de]=La(se),le[de].c(),le[de].m(H,null))}for(;de<le.length;de+=1)le[de].d(1);le.length=x.length}(!Le||Ie[0]&64)&&Te(H,"pr3",Ee[6].length>5),(!Le||Ie[0]&4)&&K!==(K=Ee[2](Ft.AveragePrice)+"")&&W(Y,K),(!Le||Ie[0]&257)&&Z!==(Z=xe.floor(Ee[8],Ee[0].pricePrecision,Ee[0].priceScale)+"")&&W(ue,Z),Ee[10]?fe?fe.p(Ee,Ie):(fe=$a(Ee),fe.c(),fe.m(pe.parentNode,pe)):fe&&(fe.d(1),fe=null),Ee[3]==="Open"?Se?Se.p(Ee,Ie):(Se=qa(Ee),Se.c(),Se.m(me.parentNode,me)):Se&&(Se.d(1),Se=null);const ve={};Ie[0]&4|Ie[1]&4&&(ve.$$scope={dirty:Ie,ctx:Ee}),!ke&&Ie[0]&32&&(ke=!0,ve.checked=Ee[5],Me(()=>ke=!1)),oe.$set(ve)},i(Ee){Le||(Q(oe.$$.fragment,Ee),Le=!0)},o(Ee){j(oe.$$.fragment,Ee),Le=!1},d(Ee){Ee&&m(e),Ee&&m(v),Ee&&m(g),wn(le,Ee),Ee&&m(R),Ee&&m(F),Ee&&m(ce),fe&&fe.d(Ee),Ee&&m(pe),Se&&Se.d(Ee),Ee&&m(me),ie(oe,Ee),ge=!1,ae()}}}function Cg(n){let e=n[2](He.Cancel)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[0]&4&&e!==(e=i[2](He.Cancel)+"")&&W(t,e)},d(i){i&&m(t)}}}function Tg(n){let e=n[2](He.Confirm)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[0]&4&&e!==(e=i[2](He.Confirm)+"")&&W(t,e)},d(i){i&&m(t)}}}function wg(n){let e,t,i,r,l;return t=new Ht({props:{class:"f1",$$slots:{default:[Cg]},$$scope:{ctx:n}}}),t.$on("click",n[15]),r=new Ht({props:{class:"f1",type:"primary",loading:n[13],$$slots:{default:[Tg]},$$scope:{ctx:n}}}),r.$on("click",n[16]),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);re(t.$$.fragment,o),i=M(o),re(r.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","footer df jcfe tr H-n83xaw"),E(e,"slot","footer")},m(s,o){G(s,e,o),ne(t,e,null),u(e,i),ne(r,e,null),l=!0},p(s,o){const a={};o[0]&4|o[1]&4&&(a.$$scope={dirty:o,ctx:s}),t.$set(a);const c={};o[0]&8192&&(c.loading=s[13]),o[0]&4|o[1]&4&&(c.$$scope={dirty:o,ctx:s}),r.$set(c)},i(s){l||(Q(t.$$.fragment,s),Q(r.$$.fragment,s),l=!0)},o(s){j(t.$$.fragment,s),j(r.$$.fragment,s),l=!1},d(s){s&&m(e),ie(t),ie(r)}}}function Ig(n){let e,t,i=n[4]&&Oa(n);return{c(){i&&i.c(),e=ut()},l(r){i&&i.l(r),e=ut()},m(r,l){i&&i.m(r,l),G(r,e,l),t=!0},p(r,l){r[4]?i?(i.p(r,l),l[0]&16&&Q(i,1)):(i=Oa(r),i.c(),Q(i,1),i.m(e.parentNode,e)):i&&(ot(),j(i,1,1,()=>{i=null}),at())},i(r){t||(Q(i),t=!0)},o(r){j(i),t=!1},d(r){i&&i.d(r),r&&m(e)}}}function Dg(n,e,t){let i,r,l,s,o,a;J(n,dt,R=>t(2,i=R)),J(n,_n,R=>t(24,r=R)),J(n,kn,R=>t(3,l=R)),J(n,or,R=>t(25,s=R)),J(n,xn,R=>t(17,o=R)),J(n,to,R=>t(14,a=R)),Kt();let c=!1,f=!1,p,d=[],h,_={precision:8,scale:8},v=0,g,b=!1,P=!1,I=!1,T=!1,C="ByLastPrice",V=0,O="",w=!1;Lt(()=>{const R=Pt.subscribe("scaled-order-place","create-order",F=>{if(t(0,p=F.contract),t(6,d=F.orders),t(1,h=F.side),t(7,_=F.quantityProps),t(8,v=F.averagePriceXp),F.quantity,b=F.reduceOnly,P=F.postOnly,I=F.timeInForce,t(10,T=F.hasTriggerPrice),C=F.triggerType,t(11,V=F.stopPriceEp),t(9,g=F.qtyType),f){D();return}t(4,c=!0)});return()=>{R()}});async function D(){t(13,w=!0);const{type:R,symbol:F,pricePrecision:U,priceScale:K}=p,Y=[],X=[],ee=[];d.map(({price:me,quantity:oe})=>{Y.push(xe.floor(me,U,K)),X.push(me),ee.push(En.genOrderQty(p,v,oe,_,g))});const Z=En.calcOrdType(h,T,C,V,s),ue={type:R,symbol:F,side:h,reduceOnly:b,actionBy:"FromOrderPlacement",ordType:Z,timeInForce:P?"PostOnly":I,triggerType:C};R==="Perpetual"?Object.assign(ue,{orderQty:ee,price:Y,priceEp:X,stopPxEp:V}):Object.assign(ue,{priceRp:Y,orderQtyRq:ee,posSide:kr(l,r,h),stopPxRp:V}),pi.track("place_scaled_order",Object.assign({},ue));const{data:ce,error:pe}=await Sp.createScaledOrder(ue);if(ce){t(4,c=!1);const{failCnt:me}=ce;me>0?Ps.next({type:"error",title:i(Ft.OrderRequestFailure),content:i(Ft.OrdersFailed,{Number:me})}):Ps.next({type:"info",title:i(Ft.SuccessTitle),content:i(Ft.OrdersSubmitted)})}pe&&Pt.send("toast","error",pe),t(13,w=!1)}function L(){t(4,c=!1),t(5,f=!1)}async function $(){await Promise.all([D(),f&&ar("orderSubmitConfirmation",!f)])}function N({orderSubmitConfirmation:R}){t(5,f=!R)}function z(R,F,U,K){if(!R)return;const{type:Y}=R;(Y==="Perpetual"||Y==="PerpetualV2"&&F===Ut.Open)&&t(12,O=K(U==="Buy"?Ft.Long:Ft.Short)),F===Ut.Close&&t(12,O=K(U==="Buy"?He.CloseShort:He.CloseLong))}function H(R){f=R,t(5,f)}return n.$$.update=()=>{n.$$.dirty[0]&131072&&N(o),n.$$.dirty[0]&15&&z(p,l,h,i)},[p,h,i,l,c,f,d,_,v,g,T,V,O,w,a,L,$,o,H]}let Vg=class extends tt{constructor(e){super(),nt(this,e,Dg,Ig,et,{},null,[-1,-1])}};function Ma(n){let e,t;return e=new bn({props:{style:"width:640px;max-width: 640px;",$$slots:{footer:[Ng],header:[Lg],default:[Og]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&270&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Og(n){let e,t=n[3](rr.TheCurrentLimit)+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","desc ph24 lh22 f14 T3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&8&&t!==(t=r[3](rr.TheCurrentLimit)+"")&&W(i,t)},d(r){r&&m(e)}}}function Lg(n){let e,t,i=n[3](rr.OrderConfirmation)+"",r,l,s,o,a,c;return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("i"),o=B(""),this.h()},l(f){e=k(f,"DIV",{class:!0,slot:!0});var p=S(e);t=k(p,"SPAN",{});var d=S(t);r=A(d,i),d.forEach(m),l=M(p),s=k(p,"I",{class:!0});var h=S(s);o=A(h,""),h.forEach(m),p.forEach(m),this.h()},h(){E(s,"class","iconfont cp"),E(e,"class","p24 lh24 df jcsb b f16 T2"),E(e,"slot","header")},m(f,p){G(f,e,p),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),a||(c=We(s,"click",n[4]),a=!0)},p(f,p){p&8&&i!==(i=f[3](rr.OrderConfirmation)+"")&&W(r,i)},d(f){f&&m(e),a=!1,c()}}}function $g(n){let e,t=n[3](He.DontShowAgain)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ml8 T3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&8&&t!==(t=r[3](He.DontShowAgain)+"")&&W(i,t)},d(r){r&&m(e)}}}function qg(n){let e=n[3](He.Cancel)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&8&&e!==(e=i[3](He.Cancel)+"")&&W(t,e)},d(i){i&&m(t)}}}function Mg(n){let e=n[3](He.Confirm)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&8&&e!==(e=i[3](He.Confirm)+"")&&W(t,e)},d(i){i&&m(t)}}}function Ng(n){let e,t,i,r,l,s,o,a,c;function f(d){n[6](d)}let p={class:"usn",$$slots:{default:[$g]},$$scope:{ctx:n}};return n[1]!==void 0&&(p.checked=n[1]),t=new Pn({props:p}),De.push(()=>qe(t,"checked",f)),s=new Ht({props:{$$slots:{default:[qg]},$$scope:{ctx:n}}}),s.$on("click",n[4]),a=new Ht({props:{type:"primary",loading:n[2],$$slots:{default:[Mg]},$$scope:{ctx:n}}}),a.$on("click",n[5]),{c(){e=y("div"),te(t.$$.fragment),r=q(),l=y("div"),te(s.$$.fragment),o=q(),te(a.$$.fragment),this.h()},l(d){e=k(d,"DIV",{class:!0,slot:!0});var h=S(e);re(t.$$.fragment,h),r=M(h),l=k(h,"DIV",{});var _=S(l);re(s.$$.fragment,_),o=M(_),re(a.$$.fragment,_),_.forEach(m),h.forEach(m),this.h()},h(){E(e,"class","p24 df aic jcsb mt24"),E(e,"slot","footer")},m(d,h){G(d,e,h),ne(t,e,null),u(e,r),u(e,l),ne(s,l,null),u(l,o),ne(a,l,null),c=!0},p(d,h){const _={};h&264&&(_.$$scope={dirty:h,ctx:d}),!i&&h&2&&(i=!0,_.checked=d[1],Me(()=>i=!1)),t.$set(_);const v={};h&264&&(v.$$scope={dirty:h,ctx:d}),s.$set(v);const g={};h&4&&(g.loading=d[2]),h&264&&(g.$$scope={dirty:h,ctx:d}),a.$set(g)},i(d){c||(Q(t.$$.fragment,d),Q(s.$$.fragment,d),Q(a.$$.fragment,d),c=!0)},o(d){j(t.$$.fragment,d),j(s.$$.fragment,d),j(a.$$.fragment,d),c=!1},d(d){d&&m(e),ie(t),ie(s),ie(a)}}}function Hg(n){let e,t,i=n[0]&&Ma(n);return{c(){i&&i.c(),e=ut()},l(r){i&&i.l(r),e=ut()},m(r,l){i&&i.m(r,l),G(r,e,l),t=!0},p(r,[l]){r[0]?i?(i.p(r,l),l&1&&Q(i,1)):(i=Ma(r),i.c(),Q(i,1),i.m(e.parentNode,e)):i&&(ot(),j(i,1,1,()=>{i=null}),at())},i(r){t||(Q(i),t=!0)},o(r){j(i),t=!1},d(r){i&&i.d(r),r&&m(e)}}}function Bg(n,e,t){let i;J(n,dt,p=>t(3,i=p));let r=!1,l=!1,s=!1,o;Lt(()=>{const p=Pt.subscribe("scaled-order-protect","order-protect",d=>{t(0,r=!0),o=d});return()=>{p()}});function a(){t(0,r=!1),t(1,l=!1),t(2,s=!1)}async function c(){t(2,s=!0),Pt.send("scaled-order-place","create-order",Object.assign({},o)),l&&await ar("orderFatFingerProtection",!l),a()}function f(p){l=p,t(1,l)}return[r,l,s,i,a,c,f]}let Ag=class extends tt{constructor(e){super(),nt(this,e,Bg,Hg,et,{})}};function Na(n){let e,t=n[1](Ft.MinSizeIs,{Size:n[0]})+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","sell mt2 f12")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&3&&t!==(t=r[1](Ft.MinSizeIs,{Size:r[0]})+"")&&W(i,t)},d(r){r&&m(e)}}}function zg(n){let e,t=n[0]&&Na(n);return{c(){t&&t.c(),e=ut()},l(i){t&&t.l(i),e=ut()},m(i,r){t&&t.m(i,r),G(i,e,r)},p(i,[r]){i[0]?t?t.p(i,r):(t=Na(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:rt,o:rt,d(i){t&&t.d(i),i&&m(e)}}}function Qg(n,e,t){let i,r;J(n,dt,p=>t(1,r=p));let{quantityEv:l=0}=e,{orderCount:s=0}=e,{quantityProps:o}=e,{contract:a}=e,{averagePriceXp:c}=e,{qtyType:f}=e;return n.$$set=p=>{"quantityEv"in p&&t(2,l=p.quantityEv),"orderCount"in p&&t(3,s=p.orderCount),"quantityProps"in p&&t(4,o=p.quantityProps),"contract"in p&&t(5,a=p.contract),"averagePriceXp"in p&&t(6,c=p.averagePriceXp),"qtyType"in p&&t(7,f=p.qtyType)},n.$$.update=()=>{n.$$.dirty&252&&t(0,i=En.genMinSize(a,f,c,l,s,o))},[i,r,l,s,o,a,c,f]}let Rg=class extends tt{constructor(e){super(),nt(this,e,Qg,zg,et,{quantityEv:2,orderCount:3,quantityProps:4,contract:5,averagePriceXp:6,qtyType:7})}};function Fg(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b;const P=[{class:"f1"},{operation:!1},n[9],{placeholder:n[7](Ft.LowestPrice)}];function I(N){n[15](N)}let T={};for(let N=0;N<P.length;N+=1)T=pn(T,P[N]);n[0]!==void 0&&(T.priceEp=n[0]),i=new yn({props:T}),De.push(()=>qe(i,"priceEp",I));const C=[{class:"f1"},{operation:!1},n[9],{placeholder:n[7](Ft.HighestPrice)}];function V(N){n[16](N)}let O={};for(let N=0;N<C.length;N+=1)O=pn(O,C[N]);n[1]!==void 0&&(O.priceEp=n[1]),a=new yn({props:O}),De.push(()=>qe(a,"priceEp",V));const w=[{isInline:!1},{operation:!1},{options:rn.createQtyOptions(n[3],n[7],Ft)},n[8],{label:n[7](Ft.Size)}];function D(N){n[17](N)}function L(N){n[18](N)}let $={};for(let N=0;N<w.length;N+=1)$=pn($,w[N]);return n[2]!==void 0&&($.quantity=n[2]),n[6]!==void 0&&($.qtyType=n[6]),d=new Un({props:$}),De.push(()=>qe(d,"quantity",D)),De.push(()=>qe(d,"qtyType",L)),d.$on("change",n[10]),g=new Rg({props:{quantityEv:n[2],orderCount:n[4],quantityProps:n[8],averagePriceXp:n[5],contract:n[3],qtyType:n[6]}}),{c(){e=y("div"),t=y("div"),te(i.$$.fragment),l=q(),s=y("div"),o=q(),te(a.$$.fragment),f=q(),p=y("div"),te(d.$$.fragment),v=q(),te(g.$$.fragment),this.h()},l(N){e=k(N,"DIV",{class:!0});var z=S(e);t=k(z,"DIV",{class:!0});var H=S(t);re(i.$$.fragment,H),l=M(H),s=k(H,"DIV",{class:!0}),S(s).forEach(m),o=M(H),re(a.$$.fragment,H),H.forEach(m),f=M(z),p=k(z,"DIV",{class:!0});var R=S(p);re(d.$$.fragment,R),R.forEach(m),v=M(z),re(g.$$.fragment,z),z.forEach(m),this.h()},h(){E(s,"class","gap H-1cpvt87"),E(t,"class","mt16 df aic jcsb"),E(p,"class","percent-label mt16"),E(e,"class","wrap H-1cpvt87")},m(N,z){G(N,e,z),u(e,t),ne(i,t,null),u(t,l),u(t,s),u(t,o),ne(a,t,null),u(e,f),u(e,p),ne(d,p,null),u(e,v),ne(g,e,null),b=!0},p(N,[z]){const H=z&640?dn(P,[P[0],P[1],z&512&&mn(N[9]),z&128&&{placeholder:N[7](Ft.LowestPrice)}]):{};!r&&z&1&&(r=!0,H.priceEp=N[0],Me(()=>r=!1)),i.$set(H);const R=z&640?dn(C,[C[0],C[1],z&512&&mn(N[9]),z&128&&{placeholder:N[7](Ft.HighestPrice)}]):{};!c&&z&2&&(c=!0,R.priceEp=N[1],Me(()=>c=!1)),a.$set(R);const F=z&392?dn(w,[w[0],w[1],z&136&&{options:rn.createQtyOptions(N[3],N[7],Ft)},z&256&&mn(N[8]),z&128&&{label:N[7](Ft.Size)}]):{};!h&&z&4&&(h=!0,F.quantity=N[2],Me(()=>h=!1)),!_&&z&64&&(_=!0,F.qtyType=N[6],Me(()=>_=!1)),d.$set(F);const U={};z&4&&(U.quantityEv=N[2]),z&16&&(U.orderCount=N[4]),z&256&&(U.quantityProps=N[8]),z&32&&(U.averagePriceXp=N[5]),z&8&&(U.contract=N[3]),z&64&&(U.qtyType=N[6]),g.$set(U)},i(N){b||(Q(i.$$.fragment,N),Q(a.$$.fragment,N),Q(d.$$.fragment,N),Q(g.$$.fragment,N),b=!0)},o(N){j(i.$$.fragment,N),j(a.$$.fragment,N),j(d.$$.fragment,N),j(g.$$.fragment,N),b=!1},d(N){N&&m(e),ie(i),ie(a),ie(d),ie(g)}}}function jg(n,e,t){let i,r,l,s,o,a;J(n,dt,D=>t(7,l=D)),J(n,an,D=>t(12,s=D)),J(n,Yn,D=>t(13,o=D)),J(n,cr,D=>t(14,a=D));let{contract:c}=e,{lowPriceEp:f=0}=e,{highestPriceEp:p=0}=e,{quantityEv:d=0}=e,{scaledType:h=Li.Flat}=e,{orderCount:_=2}=e,{averagePriceXp:v=0}=e,g=c.contractSide>0?c.contractUnderlyingAssets:c.settleCurrency;function b(D,L){const{symbol:$,contractSide:N,settleCurrency:z,contractUnderlyingAssets:H}=D;if($!==L.symbol)return;const{kv:R}=L,{qtyType:F}=R;F===we.Cont&&t(6,g=F),F===we.Base&&t(6,g=z),F===we.Coin&&t(6,g=N>0?H:z)}function P(D){t(2,d=0);const L=Fi(D.detail,c);an.next(L)}function I(D,L){const{type:$,symbol:N,contractSide:z,settleCurrency:H,contractUnderlyingAssets:R}=D;let F;L===we.Cont&&(F=$==="PerpetualV2"?we.Base:we.Cont),L===H&&(F=z>0?we.Base:we.Coin),z>0&&L===R&&(F=we.Coin),Pi.next({symbol:N,kv:{qtyType:F}})}function T(D,L,$,N,z,H,R,F){if(!N||!z||!H){rs.next([]);return}if(!D){bo.error({message:l(Ft.PleaseLogIn)});return}if(N>=z){bo.error({message:l(Ft.UpperPriceMust)});return}const U={ByCont:"CONT",ByValue:L.contractSide>0?"QUOTE_CURRENCY":"COIN",ByCoin:"COIN"}[F],K=xe.floor(N,i.precision,i.scale),Y=xe.floor(z,i.precision,i.scale),X=xe.floor(H,r.precision,r.scale);Up.next({symbol:L.symbol,lowestPrice:K,highestPrice:Y,orderSize:X,distributionMode:$,orderCount:R,orderSizeUnit:U,priceProps:i,quantityProps:r})}function C(D){f=D,t(0,f)}function V(D){p=D,t(1,p)}function O(D){d=D,t(2,d)}function w(D){g=D,t(6,g)}return n.$$set=D=>{"contract"in D&&t(3,c=D.contract),"lowPriceEp"in D&&t(0,f=D.lowPriceEp),"highestPriceEp"in D&&t(1,p=D.highestPriceEp),"quantityEv"in D&&t(2,d=D.quantityEv),"scaledType"in D&&t(11,h=D.scaledType),"orderCount"in D&&t(4,_=D.orderCount),"averagePriceXp"in D&&t(5,v=D.averagePriceXp)},n.$$.update=()=>{n.$$.dirty&16392&&b(c,a),n.$$.dirty&72&&I(c,g),n.$$.dirty&8&&t(9,i=En.genPriceProps(c)),n.$$.dirty&4264&&t(8,r=En.genQtyProps(c,v,s,l,Ft)),n.$$.dirty&14367&&T(o,c,h,f,p,d,_,s)},[f,p,d,c,_,v,g,l,r,i,P,h,s,o,a,C,V,O,w]}let Wp=class extends tt{constructor(e){super(),nt(this,e,jg,Fg,et,{contract:3,lowPriceEp:0,highestPriceEp:1,quantityEv:2,scaledType:11,orderCount:4,averagePriceXp:5})}};function Ha(n,e,t){const i=n.slice();return i[21]=e[t],i[22]=e,i[23]=t,i}function Ug(n){let e,t=n[7](Ft.Flat)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","T1 H-1gowvof")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&128&&t!==(t=r[7](Ft.Flat)+"")&&W(i,t)},d(r){r&&m(e)}}}function Wg(n){let e,t;return{c(){e=y("img"),this.h()},l(i){e=k(i,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){E(e,"class","direction H-1gowvof"),hn(e.src,t=Xn["INCREASING_"+n[5]])||E(e,"src",t),E(e,"alt","Increment")},m(i,r){G(i,e,r)},p(i,r){r&32&&!hn(e.src,t=Xn["INCREASING_"+i[5]])&&E(e,"src",t)},d(i){i&&m(e)}}}function Gg(n){let e,t;return{c(){e=y("img"),this.h()},l(i){e=k(i,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){E(e,"class","direction H-1gowvof"),hn(e.src,t=Xn["DEGRESSION_"+n[5]])||E(e,"src",t),E(e,"alt","Decrement")},m(i,r){G(i,e,r)},p(i,r){r&32&&!hn(e.src,t=Xn["DEGRESSION_"+i[5]])&&E(e,"src",t)},d(i){i&&m(e)}}}function Kg(n){let e,t,i,r,l,s=n[7](Ft.PleaseEnter)+"",o;return{c(){e=y("div"),t=y("img"),r=q(),l=y("div"),o=B(s),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=S(e);t=k(c,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),r=M(c),l=k(c,"DIV",{class:!0});var f=S(l);o=A(f,s),f.forEach(m),c.forEach(m),this.h()},h(){hn(t.src,i=Xn.SCALED_ORDER)||E(t,"src",i),E(t,"alt","no scaled order"),E(t,"width","44"),E(t,"height","44"),E(t,"class","H-1gowvof"),E(l,"class","mt12 T3 H-1gowvof"),E(e,"class","no-data df aic fdc jcc H-1gowvof")},m(a,c){G(a,e,c),u(e,t),u(e,r),u(e,l),u(l,o)},p(a,c){c&128&&s!==(s=a[7](Ft.PleaseEnter)+"")&&W(o,s)},i:rt,o:rt,d(a){a&&m(e)}}}function Xg(n){let e,t,i=n[0],r=[];for(let s=0;s<i.length;s+=1)r[s]=Ba(Ha(n,i,s));const l=s=>j(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=ut()},l(s){for(let o=0;o<r.length;o+=1)r[o].l(s);e=ut()},m(s,o){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,o);G(s,e,o),t=!0},p(s,o){if(o&593){i=s[0];let a;for(a=0;a<i.length;a+=1){const c=Ha(s,i,a);r[a]?(r[a].p(c,o),Q(r[a],1)):(r[a]=Ba(c),r[a].c(),Q(r[a],1),r[a].m(e.parentNode,e))}for(ot(),a=i.length;a<r.length;a+=1)l(a);at()}},i(s){if(!t){for(let o=0;o<i.length;o+=1)Q(r[o]);t=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)j(r[o]);t=!1},d(s){wn(r,s),s&&m(e)}}}function Ba(n){let e,t,i,r,l,s,o,a,c,f;const p=[{class:"ipt f1"},n[6],{useBlur:!0},{isInline:!1},{operation:!1},{disabled:n[21].disabled}];function d(b){n[18](b,n[21])}let h={};for(let b=0;b<p.length;b+=1)h=pn(h,p[b]);n[21].price!==void 0&&(h.priceEp=n[21].price),t=new yn({props:h}),De.push(()=>qe(t,"priceEp",d));const _=[{class:"ipt f1"},{useBlur:!0},n[4],{operation:!1}];function v(b){n[19](b,n[21])}let g={};for(let b=0;b<_.length;b+=1)g=pn(g,_[b]);return n[21].quantity!==void 0&&(g.quantity=n[21].quantity),o=new Un({props:g}),De.push(()=>qe(o,"quantity",v)),o.$on("blur",n[9](n[23])),{c(){e=y("div"),te(t.$$.fragment),r=q(),l=y("div"),s=q(),te(o.$$.fragment),c=q(),this.h()},l(b){e=k(b,"DIV",{class:!0});var P=S(e);re(t.$$.fragment,P),r=M(P),l=k(P,"DIV",{class:!0}),S(l).forEach(m),s=M(P),re(o.$$.fragment,P),c=M(P),P.forEach(m),this.h()},h(){E(l,"class","ph4 H-1gowvof"),E(e,"class","df aic jcsb mb8 H-1gowvof")},m(b,P){G(b,e,P),ne(t,e,null),u(e,r),u(e,l),u(e,s),ne(o,e,null),u(e,c),f=!0},p(b,P){n=b;const I=P&65?dn(p,[p[0],P&64&&mn(n[6]),p[2],p[3],p[4],P&1&&{disabled:n[21].disabled}]):{};!i&&P&1&&(i=!0,I.priceEp=n[21].price,Me(()=>i=!1)),t.$set(I);const T=P&16?dn(_,[_[0],_[1],mn(n[4]),_[3]]):{};!a&&P&1&&(a=!0,T.quantity=n[21].quantity,Me(()=>a=!1)),o.$set(T)},i(b){f||(Q(t.$$.fragment,b),Q(o.$$.fragment,b),f=!0)},o(b){j(t.$$.fragment,b),j(o.$$.fragment,b),f=!1},d(b){b&&m(e),ie(t),ie(o)}}}function Aa(n){let e,t=n[7](Ft.Exceeds,{Num:n[3]})+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","mt10 sell f12 tr H-1gowvof")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&136&&t!==(t=r[7](Ft.Exceeds,{Num:r[3]})+"")&&W(i,t)},d(r){r&&m(e)}}}function Yg(n){let e,t,i=n[7](Ft.SizeDistribution)+"",r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,V,O,w,D,L;function $(ue){n[14](ue)}let N={class:"cp",value:Li.Flat,$$slots:{default:[Ug]},$$scope:{ctx:n}};n[2]!==void 0&&(N.group=n[2]),c=new ki({props:N}),De.push(()=>qe(c,"group",$));function z(ue){n[15](ue)}let H={class:"cp ml8",value:Li.Increment,$$slots:{default:[Wg]},$$scope:{ctx:n}};n[2]!==void 0&&(H.group=n[2]),d=new ki({props:H}),De.push(()=>qe(d,"group",z));function R(ue){n[16](ue)}let F={class:"cp ml8",value:Li.Decrement,$$slots:{default:[Gg]},$$scope:{ctx:n}};n[2]!==void 0&&(F.group=n[2]),v=new ki({props:F}),De.push(()=>qe(v,"group",R));function U(ue){n[17](ue)}let K={options:n[8]};n[1]!==void 0&&(K.value=n[1]),I=new Yr({props:K}),De.push(()=>qe(I,"value",U));const Y=[Xg,Kg],X=[];function ee(ue,ce){return ue[0].length>0?0:1}O=ee(n),w=X[O]=Y[O](n);let Z=n[3]>0&&Aa(n);return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),s=y("div"),o=y("div"),a=y("div"),te(c.$$.fragment),p=q(),te(d.$$.fragment),_=q(),te(v.$$.fragment),b=q(),P=y("div"),te(I.$$.fragment),C=q(),V=y("div"),w.c(),D=q(),Z&&Z.c(),this.h()},l(ue){e=k(ue,"DIV",{class:!0});var ce=S(e);t=k(ce,"DIV",{class:!0});var pe=S(t);r=A(pe,i),pe.forEach(m),l=M(ce),s=k(ce,"DIV",{class:!0});var me=S(s);o=k(me,"DIV",{class:!0});var oe=S(o);a=k(oe,"DIV",{class:!0});var ke=S(a);re(c.$$.fragment,ke),p=M(ke),re(d.$$.fragment,ke),_=M(ke),re(v.$$.fragment,ke),ke.forEach(m),b=M(oe),P=k(oe,"DIV",{class:!0});var Le=S(P);re(I.$$.fragment,Le),Le.forEach(m),oe.forEach(m),C=M(me),V=k(me,"DIV",{class:!0});var ge=S(V);w.l(ge),ge.forEach(m),me.forEach(m),D=M(ce),Z&&Z.l(ce),ce.forEach(m),this.h()},h(){E(t,"class","T3 H-1gowvof"),E(a,"class","df aic H-1gowvof"),E(P,"class","options B3 br4 sv H-1gowvof"),E(o,"class","ph12 pt12 df aic jcsb H-1gowvof"),E(V,"class","body sv H-1gowvof"),E(s,"class","mt8 B2 br4 H-1gowvof"),E(e,"class","wrap H-1gowvof")},m(ue,ce){G(ue,e,ce),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),u(o,a),ne(c,a,null),u(a,p),ne(d,a,null),u(a,_),ne(v,a,null),u(o,b),u(o,P),ne(I,P,null),u(s,C),u(s,V),X[O].m(V,null),u(e,D),Z&&Z.m(e,null),L=!0},p(ue,[ce]){(!L||ce&128)&&i!==(i=ue[7](Ft.SizeDistribution)+"")&&W(r,i);const pe={};ce&16777344&&(pe.$$scope={dirty:ce,ctx:ue}),!f&&ce&4&&(f=!0,pe.group=ue[2],Me(()=>f=!1)),c.$set(pe);const me={};ce&16777248&&(me.$$scope={dirty:ce,ctx:ue}),!h&&ce&4&&(h=!0,me.group=ue[2],Me(()=>h=!1)),d.$set(me);const oe={};ce&16777248&&(oe.$$scope={dirty:ce,ctx:ue}),!g&&ce&4&&(g=!0,oe.group=ue[2],Me(()=>g=!1)),v.$set(oe);const ke={};!T&&ce&2&&(T=!0,ke.value=ue[1],Me(()=>T=!1)),I.$set(ke);let Le=O;O=ee(ue),O===Le?X[O].p(ue,ce):(ot(),j(X[Le],1,1,()=>{X[Le]=null}),at(),w=X[O],w?w.p(ue,ce):(w=X[O]=Y[O](ue),w.c()),Q(w,1),w.m(V,null)),ue[3]>0?Z?Z.p(ue,ce):(Z=Aa(ue),Z.c(),Z.m(e,null)):Z&&(Z.d(1),Z=null)},i(ue){L||(Q(c.$$.fragment,ue),Q(d.$$.fragment,ue),Q(v.$$.fragment,ue),Q(I.$$.fragment,ue),Q(w),L=!0)},o(ue){j(c.$$.fragment,ue),j(d.$$.fragment,ue),j(v.$$.fragment,ue),j(I.$$.fragment,ue),j(w),L=!1},d(ue){ue&&m(e),ie(c),ie(d),ie(v),ie(I),X[O].d(),Z&&Z.d()}}}function Jg(n){const{factor:e,maxQuantity:t,precision:i,scale:r,tickSizeEx:l}=n;return{factor:e,maxQuantity:t,minQuantity:l,precision:i,scale:r,tickSizeEx:l}}function Zg(n,e,t){let i,r,l,s,o,a;J(n,an,w=>t(20,s=w)),J(n,Ur,w=>t(13,o=w)),J(n,dt,w=>t(7,a=w));let{contract:c}=e,{averagePriceXp:f=0}=e,{quantityProps:p={}}=e,{orders:d=[]}=e,{orderCount:h=0}=e,{scaledType:_=Li.Flat}=e,{exceedsValue:v=0}=e;const g=[];(function(){for(let D=2;D<=20;D++)g.push({text:D,value:D})})();function b(w){return function(){const D=d[w],L=En.calcMinSize(c,s,D.price,p)*p.factor;D.quantity<L&&t(0,d[w].quantity=L,d)}}function P(w){_=w,t(2,_)}function I(w){_=w,t(2,_)}function T(w){_=w,t(2,_)}function C(w){h=w,t(1,h)}function V(w,D){n.$$.not_equal(D.price,w)&&(D.price=w,t(0,d))}function O(w,D){n.$$.not_equal(D.quantity,w)&&(D.quantity=w,t(0,d))}return n.$$set=w=>{"contract"in w&&t(10,c=w.contract),"averagePriceXp"in w&&t(11,f=w.averagePriceXp),"quantityProps"in w&&t(12,p=w.quantityProps),"orders"in w&&t(0,d=w.orders),"orderCount"in w&&t(1,h=w.orderCount),"scaledType"in w&&t(2,_=w.scaledType),"exceedsValue"in w&&t(3,v=w.exceedsValue)},n.$$.update=()=>{n.$$.dirty&1024&&t(6,i=En.genPriceProps(c)),n.$$.dirty&8192&&t(5,r=o.toUpperCase()),n.$$.dirty&4096&&t(4,l=Jg(p))},[d,h,_,v,l,r,i,a,g,b,c,f,p,o,P,I,T,C,V,O]}let Gp=class extends tt{constructor(e){super(),nt(this,e,Zg,Yg,et,{contract:10,averagePriceXp:11,quantityProps:12,orders:0,orderCount:1,scaledType:2,exceedsValue:3})}};function xg(n){let e,t=n[7](Ye.TriggerPrice)+"",i,r,l,s;return{c(){e=y("span"),i=B(t),this.h()},l(o){e=k(o,"SPAN",{class:!0});var a=S(e);i=A(a,t),a.forEach(m),this.h()},h(){E(e,"class","s-o-trigger-price usn tdud f12 H-aza9n3")},m(o,a){G(o,e,a),u(e,i),l||(s=Wt(r=Gt.call(null,e,{text:n[7](vt.OneTheTriggerPrice),showDelay:800})),l=!0)},p(o,a){a&128&&t!==(t=o[7](Ye.TriggerPrice)+"")&&W(i,t),r&&Tt(r.update)&&a&128&&r.update.call(null,{text:o[7](vt.OneTheTriggerPrice),showDelay:800})},d(o){o&&m(e),l=!1,s()}}}function za(n){let e,t,i,r;function l(o){n[11](o)}let s={class:"trigger-price",isInline:!1,operation:!1,unit:n[5].quoteCurrency,tickSizeEp:n[5].tickSizeEp,precision:n[5].pricePrecision,maxPriceEp:n[5].maxPriceEp,factor:n[5].priceFactor,scale:n[5].priceScale};return n[4]!==void 0&&(s.priceEp=n[4]),t=new yn({props:s}),De.push(()=>qe(t,"priceEp",l)),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=S(e);re(t.$$.fragment,a),a.forEach(m),this.h()},h(){E(e,"class","mb16")},m(o,a){G(o,e,a),ne(t,e,null),r=!0},p(o,a){const c={};a&32&&(c.unit=o[5].quoteCurrency),a&32&&(c.tickSizeEp=o[5].tickSizeEp),a&32&&(c.precision=o[5].pricePrecision),a&32&&(c.maxPriceEp=o[5].maxPriceEp),a&32&&(c.factor=o[5].priceFactor),a&32&&(c.scale=o[5].priceScale),!i&&a&16&&(i=!0,c.priceEp=o[4],Me(()=>i=!1)),t.$set(c)},i(o){r||(Q(t.$$.fragment,o),r=!0)},o(o){j(t.$$.fragment,o),r=!1},d(o){o&&m(e),ie(t)}}}function e2(n){let e,t=n[7](Ye.PostOnly)+"",i,r,l,s;return{c(){e=y("span"),i=B(t),this.h()},l(o){e=k(o,"SPAN",{class:!0});var a=S(e);i=A(a,t),a.forEach(m),this.h()},h(){E(e,"class","post-only usn tdud f12 H-aza9n3")},m(o,a){G(o,e,a),u(e,i),l||(s=Wt(r=Gt.call(null,e,{text:n[7](vt.PostOnly),showDelay:800})),l=!0)},p(o,a){a&128&&t!==(t=o[7](Ye.PostOnly)+"")&&W(i,t),r&&Tt(r.update)&&a&128&&r.update.call(null,{text:o[7](vt.PostOnly),showDelay:800})},d(o){o&&m(e),l=!1,s()}}}function Qa(n){let e,t,i;function r(s){n[13](s)}let l={class:"f12",$$slots:{default:[t2]},$$scope:{ctx:n}};return n[2]!==void 0&&(l.checked=n[2]),e=new Pn({props:l}),De.push(()=>qe(e,"checked",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o&65664&&(a.$$scope={dirty:o,ctx:s}),!t&&o&4&&(t=!0,a.checked=s[2],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function t2(n){let e,t=n[7](Ye.ReduceOnly)+"",i,r,l,s;return{c(){e=y("span"),i=B(t),this.h()},l(o){e=k(o,"SPAN",{class:!0});var a=S(e);i=A(a,t),a.forEach(m),this.h()},h(){E(e,"class","reduce-only usn tdud f12 H-aza9n3")},m(o,a){G(o,e,a),u(e,i),l||(s=Wt(r=Gt.call(null,e,{text:n[7](vt.ReduceOnly),showDelay:800})),l=!0)},p(o,a){a&128&&t!==(t=o[7](Ye.ReduceOnly)+"")&&W(i,t),r&&Tt(r.update)&&a&128&&r.update.call(null,{text:o[7](vt.ReduceOnly),showDelay:800})},d(o){o&&m(e),l=!1,s()}}}function n2(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v;function g(w){n[9](w)}let b={class:"f1 f12",$$slots:{default:[xg]},$$scope:{ctx:n}};n[0]!==void 0&&(b.checked=n[0]),i=new Pn({props:b}),De.push(()=>qe(i,"checked",g));function P(w){n[10](w)}let I={class:"s-o-trigger-type f12",options:rn.createTriggerTypesOptions(n[7],Ye)};n[3]!==void 0&&(I.value=n[3]),o=new Yr({props:I}),De.push(()=>qe(o,"value",P));let T=n[0]&&za(n);function C(w){n[12](w)}let V={class:"f12",$$slots:{default:[e2]},$$scope:{ctx:n}};n[1]!==void 0&&(V.checked=n[1]),d=new Pn({props:V}),De.push(()=>qe(d,"checked",C));let O=n[6]&&Qa(n);return{c(){e=y("div"),t=y("div"),te(i.$$.fragment),l=q(),s=y("div"),te(o.$$.fragment),c=q(),T&&T.c(),f=q(),p=y("div"),te(d.$$.fragment),_=q(),O&&O.c(),this.h()},l(w){e=k(w,"DIV",{class:!0});var D=S(e);t=k(D,"DIV",{class:!0});var L=S(t);re(i.$$.fragment,L),l=M(L),s=k(L,"DIV",{});var $=S(s);re(o.$$.fragment,$),$.forEach(m),L.forEach(m),c=M(D),T&&T.l(D),D.forEach(m),f=M(w),p=k(w,"DIV",{class:!0});var N=S(p);re(d.$$.fragment,N),_=M(N),O&&O.l(N),N.forEach(m),this.h()},h(){E(t,"class","df aic jcsb"),E(e,"class","trigger-price mt10 H-aza9n3"),E(p,"class","df aic jcsb pb10")},m(w,D){G(w,e,D),u(e,t),ne(i,t,null),u(t,l),u(t,s),ne(o,s,null),u(e,c),T&&T.m(e,null),G(w,f,D),G(w,p,D),ne(d,p,null),u(p,_),O&&O.m(p,null),v=!0},p(w,[D]){const L={};D&65664&&(L.$$scope={dirty:D,ctx:w}),!r&&D&1&&(r=!0,L.checked=w[0],Me(()=>r=!1)),i.$set(L);const $={};D&128&&($.options=rn.createTriggerTypesOptions(w[7],Ye)),!a&&D&8&&(a=!0,$.value=w[3],Me(()=>a=!1)),o.$set($),w[0]?T?(T.p(w,D),D&1&&Q(T,1)):(T=za(w),T.c(),Q(T,1),T.m(e,null)):T&&(ot(),j(T,1,1,()=>{T=null}),at());const N={};D&65664&&(N.$$scope={dirty:D,ctx:w}),!h&&D&2&&(h=!0,N.checked=w[1],Me(()=>h=!1)),d.$set(N),w[6]?O?(O.p(w,D),D&64&&Q(O,1)):(O=Qa(w),O.c(),Q(O,1),O.m(p,null)):O&&(ot(),j(O,1,1,()=>{O=null}),at())},i(w){v||(Q(i.$$.fragment,w),Q(o.$$.fragment,w),Q(T),Q(d.$$.fragment,w),Q(O),v=!0)},o(w){j(i.$$.fragment,w),j(o.$$.fragment,w),j(T),j(d.$$.fragment,w),j(O),v=!1},d(w){w&&m(e),ie(i),ie(o),T&&T.d(),w&&m(f),w&&m(p),ie(d),O&&O.d()}}}function i2(n,e,t){let i,r;J(n,_n,I=>t(8,i=I)),J(n,dt,I=>t(7,r=I));let{contract:l}=e,{postOnly:s=!1}=e,{reduceOnly:o=!1}=e,{hasTriggerPrice:a=!1}=e,{triggerType:c="ByLastPrice"}=e,{stopPriceEp:f=0}=e,p;function d({type:I},T){return I==="Perpetual"||T===Ct.OneWay}function h(I){I||t(4,f=0)}function _(I){a=I,t(0,a)}function v(I){c=I,t(3,c)}function g(I){f=I,t(4,f)}function b(I){s=I,t(1,s)}function P(I){o=I,t(2,o)}return n.$$set=I=>{"contract"in I&&t(5,l=I.contract),"postOnly"in I&&t(1,s=I.postOnly),"reduceOnly"in I&&t(2,o=I.reduceOnly),"hasTriggerPrice"in I&&t(0,a=I.hasTriggerPrice),"triggerType"in I&&t(3,c=I.triggerType),"stopPriceEp"in I&&t(4,f=I.stopPriceEp)},n.$$.update=()=>{n.$$.dirty&288&&t(6,p=d(l,i)),n.$$.dirty&1&&h(a)},[a,s,o,c,f,l,p,r,i,_,v,g,b,P]}let Kp=class extends tt{constructor(e){super(),nt(this,e,i2,n2,et,{contract:5,postOnly:1,reduceOnly:2,hasTriggerPrice:0,triggerType:3,stopPriceEp:4})}};function r2(n){let e,t,i,r=n[1](Ye.Cost)+"",l,s,o,a=n[0].buy+"",c,f,p,d,h=n[1](Ye.Cost)+"",_,v,g,b=n[0].sell+"",P,I,T;return{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),o=q(),c=B(a),f=q(),p=y("div"),d=y("span"),_=B(h),g=q(),P=B(b),this.h()},l(C){e=k(C,"DIV",{class:!0});var V=S(e);t=k(V,"DIV",{class:!0});var O=S(t);i=k(O,"SPAN",{class:!0});var w=S(i);l=A(w,r),w.forEach(m),o=M(O),c=A(O,a),O.forEach(m),f=M(V),p=k(V,"DIV",{class:!0});var D=S(p);d=k(D,"SPAN",{class:!0});var L=S(d);_=A(L,h),L.forEach(m),g=M(D),P=A(D,b),D.forEach(m),V.forEach(m),this.h()},h(){E(i,"class","op6 tdud ch"),E(t,"class","f1 lh18 f12"),E(d,"class","op6 tdud ch"),E(p,"class","h18 f12"),E(e,"class","df mt8")},m(C,V){G(C,e,V),u(e,t),u(t,i),u(i,l),u(t,o),u(t,c),u(e,f),u(e,p),u(p,d),u(d,_),u(p,g),u(p,P),I||(T=[Wt(s=Gt.call(null,i,{text:n[1](vt.Cost),showDelay:800})),Wt(v=Gt.call(null,d,{text:n[1](vt.Cost),showDelay:800}))],I=!0)},p(C,[V]){V&2&&r!==(r=C[1](Ye.Cost)+"")&&W(l,r),s&&Tt(s.update)&&V&2&&s.update.call(null,{text:C[1](vt.Cost),showDelay:800}),V&1&&a!==(a=C[0].buy+"")&&W(c,a),V&2&&h!==(h=C[1](Ye.Cost)+"")&&W(_,h),v&&Tt(v.update)&&V&2&&v.update.call(null,{text:C[1](vt.Cost),showDelay:800}),V&1&&b!==(b=C[0].sell+"")&&W(P,b)},i:rt,o:rt,d(C){C&&m(e),I=!1,jt(T)}}}function il(n,e){return n.find(({posSide:t})=>t===e)}function l2(n,e,t){let i,r,l,s,o;J(n,an,v=>t(9,i=v)),J(n,kn,v=>t(6,r=v)),J(n,_n,v=>t(7,l=v)),J(n,Sn,v=>t(8,s=v)),J(n,dt,v=>t(1,o=v));let{contract:a}=e,{orders:c=[]}=e,{quantityProps:f}=e,{averagePriceXp:p}=e,d={buy:"--",sell:"--"};function h(v,g,b,P,I){if(!g||!b||!b.length)return;const T=_(g,b,P,I),C=v.reduce(($,{price:N,quantity:z})=>{const H=En.genOrderQty(g,p,z,f,i),R=$p(g,T.long,N,H),F=qp(g,T.short,N,H);return{buyEv:$.buyEv+R,sellEv:$.sellEv+F}},{buyEv:0,sellEv:0}),{settleCurrency:V,valuePrecision:O,valueScale:w}=g,D=xe.floor(C.buyEv,O,w),L=xe.floor(C.sellEv,O,w);t(0,d=Object.assign(Object.assign({},C),{buy:`${D} ${V}`,sell:`${L} ${V}`})),to.next(d)}function _(v,g,b,P){let I,T;if(v.type==="Perpetual")I=T=g[0];else switch(b){case Ct.OneWay:I=T=il(g,"Merged");break;case Ct.Hedge:switch(P){case Ut.Open:I=il(g,"Long"),T=il(g,"Short");break;case Ut.Close:I=il(g,"Short"),T=il(g,"Long");break}break}return{long:I,short:T}}return n.$$set=v=>{"contract"in v&&t(2,a=v.contract),"orders"in v&&t(3,c=v.orders),"quantityProps"in v&&t(4,f=v.quantityProps),"averagePriceXp"in v&&t(5,p=v.averagePriceXp)},n.$$.update=()=>{n.$$.dirty&460&&h(c,a,s,l,r)},[d,o,a,c,f,p,r,l,s]}let s2=class extends tt{constructor(e){super(),nt(this,e,l2,r2,et,{contract:2,orders:3,quantityProps:4,averagePriceXp:5})}};function o2(n){let e,t,i;return t=new Sr({props:{disabled:n[0],buyText:sn(n[1],n[2],n[3],n[4],He,"Buy"),sellText:sn(n[1],n[2],n[3],n[4],He,"Sell")}}),t.$on("buy",n[5]("Buy")),t.$on("sell",n[5]("Sell")),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);re(t.$$.fragment,l),l.forEach(m),this.h()},h(){E(e,"class","btn H-13q2opq")},m(r,l){G(r,e,l),ne(t,e,null),i=!0},p(r,[l]){const s={};l&1&&(s.disabled=r[0]),l&30&&(s.buyText=sn(r[1],r[2],r[3],r[4],He,"Buy")),l&30&&(s.sellText=sn(r[1],r[2],r[3],r[4],He,"Sell")),t.$set(s)},i(r){i||(Q(t.$$.fragment,r),i=!0)},o(r){j(t.$$.fragment,r),i=!1},d(r){r&&m(e),ie(t)}}}function a2(n,e,t){let i,r,l;J(n,_n,f=>t(2,i=f)),J(n,kn,f=>t(3,r=f)),J(n,dt,f=>t(4,l=f));let{disabled:s}=e,{contract:o}=e;const a=Kt();function c(f){return function(){a("place-order",f)}}return n.$$set=f=>{"disabled"in f&&t(0,s=f.disabled),"contract"in f&&t(1,o=f.contract)},[s,o,i,r,l,c]}let Xp=class extends tt{constructor(e){super(),nt(this,e,a2,o2,et,{disabled:0,contract:1})}};function c2(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C;function V(X){n[22](X)}function O(X){n[23](X)}function w(X){n[24](X)}let D={contract:n[0],averagePriceXp:n[6],scaledType:n[9],orderCount:n[4]};n[2]!==void 0&&(D.highestPriceEp=n[2]),n[1]!==void 0&&(D.lowPriceEp=n[1]),n[3]!==void 0&&(D.quantityEv=n[3]),e=new Wp({props:D}),De.push(()=>qe(e,"highestPriceEp",V)),De.push(()=>qe(e,"lowPriceEp",O)),De.push(()=>qe(e,"quantityEv",w));function L(X){n[25](X)}function $(X){n[26](X)}function N(X){n[27](X)}let z={contract:n[0],quantityProps:n[7],exceedsValue:n[8]};n[5]!==void 0&&(z.orders=n[5]),n[4]!==void 0&&(z.orderCount=n[4]),n[9]!==void 0&&(z.scaledType=n[9]),s=new Gp({props:z}),De.push(()=>qe(s,"orders",L)),De.push(()=>qe(s,"orderCount",$)),De.push(()=>qe(s,"scaledType",N)),p=new Xp({props:{contract:n[0],disabled:n[15]}}),p.$on("place-order",n[16]),h=new s2({props:{contract:n[0],averagePriceXp:n[6],quantityProps:n[7],orders:n[5]}});function H(X){n[28](X)}function R(X){n[29](X)}function F(X){n[30](X)}function U(X){n[31](X)}function K(X){n[32](X)}let Y={contract:n[0]};return n[10]!==void 0&&(Y.postOnly=n[10]),n[11]!==void 0&&(Y.reduceOnly=n[11]),n[12]!==void 0&&(Y.hasTriggerPrice=n[12]),n[13]!==void 0&&(Y.triggerType=n[13]),n[14]!==void 0&&(Y.stopPriceEp=n[14]),v=new Kp({props:Y}),De.push(()=>qe(v,"postOnly",H)),De.push(()=>qe(v,"reduceOnly",R)),De.push(()=>qe(v,"hasTriggerPrice",F)),De.push(()=>qe(v,"triggerType",U)),De.push(()=>qe(v,"stopPriceEp",K)),{c(){te(e.$$.fragment),l=q(),te(s.$$.fragment),f=q(),te(p.$$.fragment),d=q(),te(h.$$.fragment),_=q(),te(v.$$.fragment)},l(X){re(e.$$.fragment,X),l=M(X),re(s.$$.fragment,X),f=M(X),re(p.$$.fragment,X),d=M(X),re(h.$$.fragment,X),_=M(X),re(v.$$.fragment,X)},m(X,ee){ne(e,X,ee),G(X,l,ee),ne(s,X,ee),G(X,f,ee),ne(p,X,ee),G(X,d,ee),ne(h,X,ee),G(X,_,ee),ne(v,X,ee),C=!0},p(X,ee){const Z={};ee[0]&1&&(Z.contract=X[0]),ee[0]&64&&(Z.averagePriceXp=X[6]),ee[0]&512&&(Z.scaledType=X[9]),ee[0]&16&&(Z.orderCount=X[4]),!t&&ee[0]&4&&(t=!0,Z.highestPriceEp=X[2],Me(()=>t=!1)),!i&&ee[0]&2&&(i=!0,Z.lowPriceEp=X[1],Me(()=>i=!1)),!r&&ee[0]&8&&(r=!0,Z.quantityEv=X[3],Me(()=>r=!1)),e.$set(Z);const ue={};ee[0]&1&&(ue.contract=X[0]),ee[0]&128&&(ue.quantityProps=X[7]),ee[0]&256&&(ue.exceedsValue=X[8]),!o&&ee[0]&32&&(o=!0,ue.orders=X[5],Me(()=>o=!1)),!a&&ee[0]&16&&(a=!0,ue.orderCount=X[4],Me(()=>a=!1)),!c&&ee[0]&512&&(c=!0,ue.scaledType=X[9],Me(()=>c=!1)),s.$set(ue);const ce={};ee[0]&1&&(ce.contract=X[0]),ee[0]&32768&&(ce.disabled=X[15]),p.$set(ce);const pe={};ee[0]&1&&(pe.contract=X[0]),ee[0]&64&&(pe.averagePriceXp=X[6]),ee[0]&128&&(pe.quantityProps=X[7]),ee[0]&32&&(pe.orders=X[5]),h.$set(pe);const me={};ee[0]&1&&(me.contract=X[0]),!g&&ee[0]&1024&&(g=!0,me.postOnly=X[10],Me(()=>g=!1)),!b&&ee[0]&2048&&(b=!0,me.reduceOnly=X[11],Me(()=>b=!1)),!P&&ee[0]&4096&&(P=!0,me.hasTriggerPrice=X[12],Me(()=>P=!1)),!I&&ee[0]&8192&&(I=!0,me.triggerType=X[13],Me(()=>I=!1)),!T&&ee[0]&16384&&(T=!0,me.stopPriceEp=X[14],Me(()=>T=!1)),v.$set(me)},i(X){C||(Q(e.$$.fragment,X),Q(s.$$.fragment,X),Q(p.$$.fragment,X),Q(h.$$.fragment,X),Q(v.$$.fragment,X),C=!0)},o(X){j(e.$$.fragment,X),j(s.$$.fragment,X),j(p.$$.fragment,X),j(h.$$.fragment,X),j(v.$$.fragment,X),C=!1},d(X){ie(e,X),X&&m(l),ie(s,X),X&&m(f),ie(p,X),X&&m(d),ie(h,X),X&&m(_),ie(v,X)}}}function f2(n,e,t){let i,r,l,s,o,a,c,f,p,d,h;J(n,Ci,oe=>t(35,a=oe)),J(n,xn,oe=>t(36,c=oe)),J(n,an,oe=>t(19,f=oe)),J(n,to,oe=>t(37,p=oe)),J(n,dt,oe=>t(20,d=oe)),J(n,rs,oe=>t(21,h=oe));let{contract:_}=e,{account:v}=e,g=0,b=0,P=0,I=0,T=2,C=Li.Flat,V=!1,O=!1,w="GoodTillCancel",D=!1,L="ByLastPrice",$=0,N=[];function z(oe){t(5,N=oe)}function H(oe){const ke=oe.detail,Le=En.checkOpenParams(ke,d,p,(v==null?void 0:v.availableBalanceEv)||0);if(Le){Pt.send("toast","info",{message:Le});return}const ge={contract:_,side:ke,orders:N,qtyType:f,quantity:I,quantityProps:r,averagePriceXp:i,reduceOnly:O,postOnly:V,timeInForce:w,hasTriggerPrice:D,triggerType:L,stopPriceEp:$};if(c.orderFatFingerProtection){const{bid1Ep:x,ask1Ep:le}=a,fe=Re(_.tickSizeEp).times(30);if(ke==="Sell"&&Re(x).minus(fe).gt(i)||ke==="Buy"&&Re(le).plus(fe).lt(i)){Pt.send("scaled-order-protect","order-protect",ge);return}}Pt.send("scaled-order-place","create-order",ge)}function R(oe){t(1,g=0),t(2,b=0),t(3,P=0),I=0,t(4,T=2),t(9,C=Li.Flat),t(10,V=!1),t(11,O=!1),w="GoodTillCancel",t(12,D=!1),t(13,L="ByLastPrice"),t(14,$=0),t(5,N=[])}function F(oe){b=oe,t(2,b)}function U(oe){g=oe,t(1,g)}function K(oe){P=oe,t(3,P)}function Y(oe){N=oe,t(5,N)}function X(oe){T=oe,t(4,T)}function ee(oe){C=oe,t(9,C)}function Z(oe){V=oe,t(10,V)}function ue(oe){O=oe,t(11,O)}function ce(oe){D=oe,t(12,D)}function pe(oe){L=oe,t(13,L)}function me(oe){$=oe,t(14,$)}return n.$$set=oe=>{"contract"in oe&&t(0,_=oe.contract),"account"in oe&&t(17,v=oe.account)},n.$$.update=()=>{n.$$.dirty[0]&2097152&&z(h),n.$$.dirty[0]&2097152&&t(6,i=En.calcAveragePriceXp(h)),n.$$.dirty[0]&1572929&&t(7,r=En.genQtyProps(_,i,f,d,Ft)),n.$$.dirty[0]&168&&t(8,l=En.calcExceedsValue(P,r,N)),n.$$.dirty[0]&524505&&t(18,s=En.genMinSize(_,f,i,P,T,r)),n.$$.dirty[0]&262414&&t(15,o=En.enabledBtn(s,l,g,b,P)),n.$$.dirty[0]&524489&&(I=En.genOrderQty(_,i,P,r,f)),n.$$.dirty[0]&1&&R()},[_,g,b,P,T,N,i,r,l,C,V,O,D,L,$,o,H,v,s,f,d,h,F,U,K,Y,X,ee,Z,ue,ce,pe,me]}let u2=class extends tt{constructor(e){super(),nt(this,e,f2,c2,et,{contract:0,account:17},null,[-1,-1])}};function Ra(n){let e,t,i,r=n[4](Ye.MaxClose)+"",l,s,o,a=xe.floor(n[1].buy,n[0].qtyPrecision)+"",c,f,p=n[0].contractUnderlyingAssets+"",d,h,_,v,g=n[4](Ye.MaxClose)+"",b,P,I,T=xe.floor(n[1].sell,n[0].qtyPrecision)+"",C,V,O=n[0].contractUnderlyingAssets+"",w;return{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),s=q(),o=y("span"),c=B(a),f=q(),d=B(p),h=q(),_=y("div"),v=y("span"),b=B(g),P=q(),I=y("span"),C=B(T),V=q(),w=B(O),this.h()},l(D){e=k(D,"DIV",{class:!0});var L=S(e);t=k(L,"DIV",{class:!0});var $=S(t);i=k($,"SPAN",{class:!0});var N=S(i);l=A(N,r),N.forEach(m),s=M($),o=k($,"SPAN",{});var z=S(o);c=A(z,a),f=M(z),d=A(z,p),z.forEach(m),$.forEach(m),h=M(L),_=k(L,"DIV",{class:!0});var H=S(_);v=k(H,"SPAN",{class:!0});var R=S(v);b=A(R,g),R.forEach(m),P=M(H),I=k(H,"SPAN",{});var F=S(I);C=A(F,T),V=M(F),w=A(F,O),F.forEach(m),H.forEach(m),L.forEach(m),this.h()},h(){E(i,"class","op6"),E(t,"class","f1 lh18 f12"),E(v,"class","op6"),E(_,"class","h18 f12"),E(e,"class","df mt8")},m(D,L){G(D,e,L),u(e,t),u(t,i),u(i,l),u(t,s),u(t,o),u(o,c),u(o,f),u(o,d),u(e,h),u(e,_),u(_,v),u(v,b),u(_,P),u(_,I),u(I,C),u(I,V),u(I,w)},p(D,L){L&16&&r!==(r=D[4](Ye.MaxClose)+"")&&W(l,r),L&3&&a!==(a=xe.floor(D[1].buy,D[0].qtyPrecision)+"")&&W(c,a),L&1&&p!==(p=D[0].contractUnderlyingAssets+"")&&W(d,p),L&16&&g!==(g=D[4](Ye.MaxClose)+"")&&W(b,g),L&3&&T!==(T=xe.floor(D[1].sell,D[0].qtyPrecision)+"")&&W(C,T),L&1&&O!==(O=D[0].contractUnderlyingAssets+"")&&W(w,O)},d(D){D&&m(e)}}}function p2(n){let e,t=n[2]===Ct.Hedge&&n[3]===Ut.Close&&Ra(n);return{c(){t&&t.c(),e=ut()},l(i){t&&t.l(i),e=ut()},m(i,r){t&&t.m(i,r),G(i,e,r)},p(i,[r]){i[2]===Ct.Hedge&&i[3]===Ut.Close?t?t.p(i,r):(t=Ra(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:rt,o:rt,d(i){t&&t.d(i),i&&m(e)}}}function d2(n,e,t){let i,r,l;J(n,_n,a=>t(2,i=a)),J(n,kn,a=>t(3,r=a)),J(n,dt,a=>t(4,l=a));let{contract:s}=e,{maximumClose:o={sell:0,buy:0}}=e;return n.$$set=a=>{"contract"in a&&t(0,s=a.contract),"maximumClose"in a&&t(1,o=a.maximumClose)},[s,o,i,r,l]}let m2=class extends tt{constructor(e){super(),nt(this,e,d2,p2,et,{contract:0,maximumClose:1})}};function h2(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C;function V(X){n[26](X)}function O(X){n[27](X)}function w(X){n[28](X)}let D={contract:n[0],averagePriceXp:n[7],scaledType:n[9],orderCount:n[4]};n[2]!==void 0&&(D.highestPriceEp=n[2]),n[1]!==void 0&&(D.lowPriceEp=n[1]),n[3]!==void 0&&(D.quantityEv=n[3]),e=new Wp({props:D}),De.push(()=>qe(e,"highestPriceEp",V)),De.push(()=>qe(e,"lowPriceEp",O)),De.push(()=>qe(e,"quantityEv",w));function L(X){n[29](X)}function $(X){n[30](X)}function N(X){n[31](X)}let z={contract:n[0],quantityProps:n[8],exceedsValue:n[5]};n[6]!==void 0&&(z.orders=n[6]),n[4]!==void 0&&(z.orderCount=n[4]),n[9]!==void 0&&(z.scaledType=n[9]),s=new Gp({props:z}),De.push(()=>qe(s,"orders",L)),De.push(()=>qe(s,"orderCount",$)),De.push(()=>qe(s,"scaledType",N)),p=new Xp({props:{contract:n[0],disabled:n[15]}}),p.$on("place-order",n[17]),h=new m2({props:{contract:n[0],maximumClose:n[16]}});function H(X){n[32](X)}function R(X){n[33](X)}function F(X){n[34](X)}function U(X){n[35](X)}function K(X){n[36](X)}let Y={contract:n[0]};return n[10]!==void 0&&(Y.postOnly=n[10]),n[11]!==void 0&&(Y.reduceOnly=n[11]),n[12]!==void 0&&(Y.hasTriggerPrice=n[12]),n[13]!==void 0&&(Y.triggerType=n[13]),n[14]!==void 0&&(Y.stopPriceEp=n[14]),v=new Kp({props:Y}),De.push(()=>qe(v,"postOnly",H)),De.push(()=>qe(v,"reduceOnly",R)),De.push(()=>qe(v,"hasTriggerPrice",F)),De.push(()=>qe(v,"triggerType",U)),De.push(()=>qe(v,"stopPriceEp",K)),{c(){te(e.$$.fragment),l=q(),te(s.$$.fragment),f=q(),te(p.$$.fragment),d=q(),te(h.$$.fragment),_=q(),te(v.$$.fragment)},l(X){re(e.$$.fragment,X),l=M(X),re(s.$$.fragment,X),f=M(X),re(p.$$.fragment,X),d=M(X),re(h.$$.fragment,X),_=M(X),re(v.$$.fragment,X)},m(X,ee){ne(e,X,ee),G(X,l,ee),ne(s,X,ee),G(X,f,ee),ne(p,X,ee),G(X,d,ee),ne(h,X,ee),G(X,_,ee),ne(v,X,ee),C=!0},p(X,ee){const Z={};ee[0]&1&&(Z.contract=X[0]),ee[0]&128&&(Z.averagePriceXp=X[7]),ee[0]&512&&(Z.scaledType=X[9]),ee[0]&16&&(Z.orderCount=X[4]),!t&&ee[0]&4&&(t=!0,Z.highestPriceEp=X[2],Me(()=>t=!1)),!i&&ee[0]&2&&(i=!0,Z.lowPriceEp=X[1],Me(()=>i=!1)),!r&&ee[0]&8&&(r=!0,Z.quantityEv=X[3],Me(()=>r=!1)),e.$set(Z);const ue={};ee[0]&1&&(ue.contract=X[0]),ee[0]&256&&(ue.quantityProps=X[8]),ee[0]&32&&(ue.exceedsValue=X[5]),!o&&ee[0]&64&&(o=!0,ue.orders=X[6],Me(()=>o=!1)),!a&&ee[0]&16&&(a=!0,ue.orderCount=X[4],Me(()=>a=!1)),!c&&ee[0]&512&&(c=!0,ue.scaledType=X[9],Me(()=>c=!1)),s.$set(ue);const ce={};ee[0]&1&&(ce.contract=X[0]),ee[0]&32768&&(ce.disabled=X[15]),p.$set(ce);const pe={};ee[0]&1&&(pe.contract=X[0]),ee[0]&65536&&(pe.maximumClose=X[16]),h.$set(pe);const me={};ee[0]&1&&(me.contract=X[0]),!g&&ee[0]&1024&&(g=!0,me.postOnly=X[10],Me(()=>g=!1)),!b&&ee[0]&2048&&(b=!0,me.reduceOnly=X[11],Me(()=>b=!1)),!P&&ee[0]&4096&&(P=!0,me.hasTriggerPrice=X[12],Me(()=>P=!1)),!I&&ee[0]&8192&&(I=!0,me.triggerType=X[13],Me(()=>I=!1)),!T&&ee[0]&16384&&(T=!0,me.stopPriceEp=X[14],Me(()=>T=!1)),v.$set(me)},i(X){C||(Q(e.$$.fragment,X),Q(s.$$.fragment,X),Q(p.$$.fragment,X),Q(h.$$.fragment,X),Q(v.$$.fragment,X),C=!0)},o(X){j(e.$$.fragment,X),j(s.$$.fragment,X),j(p.$$.fragment,X),j(h.$$.fragment,X),j(v.$$.fragment,X),C=!1},d(X){ie(e,X),X&&m(l),ie(s,X),X&&m(f),ie(p,X),X&&m(d),ie(h,X),X&&m(_),ie(v,X)}}}function _2(n,e,t){let i,r,l,s,o,a,c,f,p,d;J(n,Ci,ae=>t(40,l=ae)),J(n,xn,ae=>t(41,s=ae)),J(n,an,ae=>t(20,o=ae)),J(n,dt,ae=>t(21,a=ae)),J(n,_n,ae=>t(22,c=ae)),J(n,kn,ae=>t(23,f=ae)),J(n,Sn,ae=>t(24,p=ae)),J(n,rs,ae=>t(25,d=ae));let{contract:h}=e,{account:_}=e,v=0,g=0,b=0,P=0,I=2,T=Li.Flat,C=!1,V=!1,O="GoodTillCancel",w=!1,D="ByLastPrice",L=0,$,N,z=[],H={sell:0,buy:0},R=0;function F(ae){t(6,z=ae)}function U(ae){const x=ae.detail,le=En.checkCloseParams(x,a,H);if(le){Pt.send("toast","info",{message:le});return}const fe=x==="Sell"?"Buy":"Sell",Se={contract:h,side:fe,orders:z,qtyType:o,quantity:P,quantityProps:i,averagePriceXp:R,reduceOnly:V,postOnly:C,timeInForce:O,hasTriggerPrice:w,triggerType:D,stopPriceEp:L};if(s.orderFatFingerProtection){const{bid1Ep:Ce,ask1Ep:Ee}=l,Ie=Re(h.tickSizeEp).times(30);if(fe==="Sell"&&Re(Ce).minus(Ie).gt(R)||fe==="Buy"&&Re(Ee).plus(Ie).lt(R)){Pt.send("scaled-order-protect","order-protect",Se);return}}Pt.send("scaled-order-place","create-order",Se)}function K(ae,x,le){const fe=ir(ae,x,le,"Long"),Se=ir(ae,x,le,"Short");t(16,H={buy:fe,sell:Se})}function Y(ae){t(1,v=0),t(2,g=0),t(3,b=0),P=0,t(4,I=2),t(9,T=Li.Flat),t(10,C=!1),t(11,V=!1),O="GoodTillCancel",t(12,w=!1),t(13,D="ByLastPrice"),t(14,L=0),t(6,z=[])}function X(ae){g=ae,t(2,g)}function ee(ae){v=ae,t(1,v)}function Z(ae){b=ae,t(3,b)}function ue(ae){z=ae,t(6,z)}function ce(ae){I=ae,t(4,I)}function pe(ae){T=ae,t(9,T)}function me(ae){C=ae,t(10,C)}function oe(ae){V=ae,t(11,V)}function ke(ae){w=ae,t(12,w)}function Le(ae){D=ae,t(13,D)}function ge(ae){L=ae,t(14,L)}return n.$$set=ae=>{"contract"in ae&&t(0,h=ae.contract),"account"in ae&&t(18,_=ae.account)},n.$$.update=()=>{n.$$.dirty[0]&33554432&&F(d),n.$$.dirty[0]&29360128&&K(f,c,p),n.$$.dirty[0]&33554432&&t(7,R=En.calcAveragePriceXp(d)),n.$$.dirty[0]&3145857&&t(8,i=En.genQtyProps(h,R,o,a,Ft)),n.$$.dirty[0]&29622401&&hr(h,_,p,f,c,R),n.$$.dirty[0]&1048969&&(P=En.genOrderQty(h,R,b,i,o)),n.$$.dirty[0]&1048985&&t(19,r=En.genMinSize(h,o,R,b,I,i)),n.$$.dirty[0]&328&&t(5,$=En.calcExceedsValue(b,i,z)),n.$$.dirty[0]&524334&&t(15,N=En.enabledBtn(r,$,v,g,b)),n.$$.dirty[0]&1&&Y()},[h,v,g,b,I,$,z,R,i,T,C,V,w,D,L,N,H,U,_,r,o,a,c,f,p,d,X,ee,Z,ue,ce,pe,me,oe,ke,Le,ge]}let g2=class extends tt{constructor(e){super(),nt(this,e,_2,h2,et,{contract:0,account:18},null,[-1,-1])}};function v2(n){let e,t;return e=new g2({props:{contract:n[0],account:n[1]}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&1&&(l.contract=i[0]),r&2&&(l.account=i[1]),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function b2(n){let e,t;return e=new u2({props:{contract:n[0],account:n[1]}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&1&&(l.contract=i[0]),r&2&&(l.account=i[1]),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Fa(n){let e,t,i,r;return e=new mr({props:{component:Vg}}),i=new mr({props:{component:Ag}}),{c(){te(e.$$.fragment),t=q(),te(i.$$.fragment)},l(l){re(e.$$.fragment,l),t=M(l),re(i.$$.fragment,l)},m(l,s){ne(e,l,s),G(l,t,s),ne(i,l,s),r=!0},p:rt,i(l){r||(Q(e.$$.fragment,l),Q(i.$$.fragment,l),r=!0)},o(l){j(e.$$.fragment,l),j(i.$$.fragment,l),r=!1},d(l){ie(e,l),l&&m(t),ie(i,l)}}}function E2(n){let e,t,i,r,l,s;const o=[b2,v2],a=[];function c(p,d){return p[2]==="Open"?0:1}t=c(n),i=a[t]=o[t](n);let f=n[3]&&Fa();return{c(){e=y("div"),i.c(),r=q(),f&&f.c(),l=ut(),this.h()},l(p){e=k(p,"DIV",{class:!0});var d=S(e);i.l(d),d.forEach(m),r=M(p),f&&f.l(p),l=ut(),this.h()},h(){E(e,"class","wrap")},m(p,d){G(p,e,d),a[t].m(e,null),G(p,r,d),f&&f.m(p,d),G(p,l,d),s=!0},p(p,[d]){let h=t;t=c(p),t===h?a[t].p(p,d):(ot(),j(a[h],1,1,()=>{a[h]=null}),at(),i=a[t],i?i.p(p,d):(i=a[t]=o[t](p),i.c()),Q(i,1),i.m(e,null)),p[3]?f?(f.p(p,d),d&8&&Q(f,1)):(f=Fa(),f.c(),Q(f,1),f.m(l.parentNode,l)):f&&(ot(),j(f,1,1,()=>{f=null}),at())},i(p){s||(Q(i),Q(f),s=!0)},o(p){j(i),j(f),s=!1},d(p){p&&m(e),a[t].d(),p&&m(r),f&&f.d(p),p&&m(l)}}}function y2(n,e,t){let i,r;J(n,kn,o=>t(2,i=o)),J(n,Yn,o=>t(3,r=o));let{contract:l}=e,{account:s}=e;return n.$$set=o=>{"contract"in o&&t(0,l=o.contract),"account"in o&&t(1,s=o.account)},[l,s,i,r]}let Yp=class extends tt{constructor(e){super(),nt(this,e,y2,E2,et,{contract:0,account:1})}};function ja(n,e,t){const i=n.slice();return i[27]=e[t],i[29]=t,i}function Ua(n){let e,t,i,r,l;return{c(){e=y("div"),t=y("i"),i=B(""),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);t=k(o,"I",{class:!0});var a=S(t);i=A(a,""),a.forEach(m),o.forEach(m),this.h()},h(){E(t,"class","iconfont T2 H-1g94qvs"),E(e,"class","arrow arrow-left H-1g94qvs")},m(s,o){G(s,e,o),u(e,t),u(t,i),r||(l=We(e,"click",n[13]),r=!0)},p:rt,d(s){s&&m(e),r=!1,l()}}}function Wa(n,e){let t,i,r,l,s=Yi(e[1],e[27].limit,!1)+"",o,a,c,f;return{key:n,first:null,c(){t=y("div"),i=y("i"),r=q(),l=y("div"),o=B(s),a=q(),this.h()},l(p){t=k(p,"DIV",{class:!0});var d=S(t);i=k(d,"I",{class:!0}),S(i).forEach(m),r=M(d),l=k(d,"DIV",{class:!0});var h=S(l);o=A(h,s),h.forEach(m),a=M(d),d.forEach(m),this.h()},h(){E(i,"class","dot cp H-1g94qvs"),E(l,"class","fixed-width mt5 f12 cp H-1g94qvs"),Te(l,"active",e[0].limit===e[27].limit),E(t,"class","df fdc aic"),this.first=t},m(p,d){G(p,t,d),u(t,i),u(t,r),u(t,l),u(l,o),u(t,a),c||(f=We(t,"click",function(){Tt(e[12](e[29],e[27]))&&e[12](e[29],e[27]).apply(this,arguments)}),c=!0)},p(p,d){e=p,d&6&&s!==(s=Yi(e[1],e[27].limit,!1)+"")&&W(o,s),d&5&&Te(l,"active",e[0].limit===e[27].limit)},d(p){p&&m(t),c=!1,f()}}}function Ga(n){let e,t,i,r,l;return{c(){e=y("div"),t=y("i"),i=B(""),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);t=k(o,"I",{class:!0});var a=S(t);i=A(a,""),a.forEach(m),o.forEach(m),this.h()},h(){E(t,"class","iconfont T2 H-1g94qvs"),E(e,"class","arrow arrow-right H-1g94qvs")},m(s,o){G(s,e,o),u(e,t),u(t,i),r||(l=We(e,"click",n[14]),r=!0)},p:rt,d(s){s&&m(e),r=!1,l()}}}function k2(n){let e,t,i,r,l,s,o,a,c,f,p,d=[],h=new Map,_,v,g,b=n[10]&&Ua(n),P=n[2];const I=C=>C[27].riskLimitEv;for(let C=0;C<P.length;C+=1){let V=ja(n,P,C),O=I(V);h.set(O,d[C]=Wa(O,V))}let T=n[11]&&Ga(n);return{c(){e=y("div"),b&&b.c(),t=q(),i=y("div"),r=y("div"),l=y("div"),s=y("div"),o=os("svg"),a=os("g"),c=os("path"),f=q(),p=y("div");for(let C=0;C<d.length;C+=1)d[C].c();_=q(),T&&T.c(),this.h()},l(C){e=k(C,"DIV",{class:!0});var V=S(e);b&&b.l(V),t=M(V),i=k(V,"DIV",{class:!0});var O=S(i);r=k(O,"DIV",{class:!0,style:!0});var w=S(r);l=k(w,"DIV",{class:!0,style:!0});var D=S(l);s=k(D,"DIV",{class:!0,style:!0});var L=S(s);o=as(L,"svg",{class:!0,width:!0,height:!0});var $=S(o);a=as($,"g",{fill:!0,"fill-rule":!0});var N=S(a);c=as(N,"path",{d:!0}),S(c).forEach(m),N.forEach(m),$.forEach(m),L.forEach(m),D.forEach(m),f=M(w),p=k(w,"DIV",{class:!0});var z=S(p);for(let H=0;H<d.length;H+=1)d[H].l(z);z.forEach(m),w.forEach(m),O.forEach(m),_=M(V),T&&T.l(V),V.forEach(m),this.h()},h(){E(c,"d","M16.2 7l4.8 5-4.8 5-1.2-1.25L18.599 12 15 8.25zM7.8 7L3 12l4.8 5L9 15.75 5.401 12 9 8.25z"),E(a,"fill","#FFF"),E(a,"fill-rule","evenodd"),E(o,"class","icon pa H-1g94qvs"),E(o,"width","24"),E(o,"height","24"),E(s,"class","slider cp df aic pa H-1g94qvs"),Jt(s,"left",n[5]+"px"),Te(s,"grabbing",n[9]),E(l,"class","line pr H-1g94qvs"),Jt(l,"width",n[4]+"px"),E(p,"class","df jcsb usn pr tc"),E(r,"class","T3"),Jt(r,"--slider-width",Jp+"px"),Jt(r,"--risk-width",n[8]+"px"),E(i,"class","container H-1g94qvs"),E(e,"class","pr")},m(C,V){G(C,e,V),b&&b.m(e,null),u(e,t),u(e,i),u(i,r),u(r,l),u(l,s),u(s,o),u(o,a),u(a,c),n[17](s),n[18](l),u(r,f),u(r,p);for(let O=0;O<d.length;O+=1)d[O]&&d[O].m(p,null);n[19](i),u(e,_),T&&T.m(e,null),v||(g=We(i,"scroll",n[15]),v=!0)},p(C,[V]){C[10]?b?b.p(C,V):(b=Ua(C),b.c(),b.m(e,t)):b&&(b.d(1),b=null),V&32&&Jt(s,"left",C[5]+"px"),V&512&&Te(s,"grabbing",C[9]),V&16&&Jt(l,"width",C[4]+"px"),V&4103&&(P=C[2],d=Si(d,V,I,1,C,P,h,p,Ju,Wa,null,ja)),V&256&&Jt(r,"--risk-width",C[8]+"px"),C[11]?T?T.p(C,V):(T=Ga(C),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i:rt,o:rt,d(C){C&&m(e),b&&b.d(),n[17](null),n[18](null);for(let V=0;V<d.length;V+=1)d[V].d();n[19](null),T&&T.d(),v=!1,g()}}}function P2(n){let e=n.offsetLeft,t=n.offsetParent;for(;t!=null;)e+=t.offsetLeft,t=t.offsetParent;return e}function Ka(n,e,t){const i=e.length,r=Math.floor(n/i),l=(n-i*r)/(i-1);return(t+.5)*r+t*l}function S2(n,e,t){if(n>=e)return t.length-1;if(n<=0)return 0;const i=e/t.length,r=Math.floor(n/i);return r<t.length?r:t.length-1}const us=65,Jp=32;function C2(n,e,t){let{contract:i=null}=e,{items:r=[]}=e,{selectedItem:l=null}=e;const s=Jp/2;let o,a,c,f=0,p=60,d=s,h=!1,_=!1,v=!1,g=!0;Lt(()=>{t(7,c.onmousedown=H=>{H.stopPropagation(),t(9,h=!0),document.onmousemove=R=>{R.stopPropagation();const F=R.clientX,U=P2(a),K=S2(F-U+(o==null?void 0:o.scrollLeft)||0,f,r);t(0,l=r[K])},document.onmouseup=function(){H.stopPropagation(),this.onmousemove=null,this.onmouseup=null,t(9,h=!1)}},c)}),Lt(()=>{if(!o||!window.ResizeObserver)return;const H=new ResizeObserver(b);return H.observe(o),function(){H.unobserve(o),H.disconnect()}});function b(){o&&L(o)}function P(H,R,F,U){let K=H.findIndex(Y=>R.limit===Y.limit);t(5,d=Ka(F,H,K)-U)}function I(H,R){return function(){t(0,l=R),t(5,d=Ka(f,r,H)-s)}}function T(H,R){t(8,p=Math.floor(H/R.length))}function C(H,R){t(4,f=H.length*R)}function V(){t(3,o.scrollLeft-=us,o)}function O(){t(3,o.scrollLeft+=us,o)}function w(H){L(H.target)}function D(H,R,F){!R||!H||setTimeout(()=>{R.scrollLeft=F<20?0:Math.abs(F),t(16,g=!1)},0)}function L(H){t(10,_=!1),t(11,v=!1);const{scrollLeft:R,clientWidth:F,scrollWidth:U}=H;U-F===R&&U!==F&&(t(10,_=!0),t(11,v=!1)),U-F>R&&(t(11,v=!0),t(10,_=!0)),U-F>R&&R===0&&t(10,_=!1)}function $(H){De[H?"unshift":"push"](()=>{c=H,t(7,c)})}function N(H){De[H?"unshift":"push"](()=>{a=H,t(6,a)})}function z(H){De[H?"unshift":"push"](()=>{o=H,t(3,o)})}return n.$$set=H=>{"contract"in H&&t(1,i=H.contract),"items"in H&&t(2,r=H.items),"selectedItem"in H&&t(0,l=H.selectedItem)},n.$$.update=()=>{n.$$.dirty&21&&P(r,l,f,s),n.$$.dirty&4&&C(r,us),n.$$.dirty&20&&T(f,r),n.$$.dirty&65576&&D(g,o,d)},[l,i,r,o,f,d,a,c,p,h,_,v,I,V,O,w,g,$,N,z]}let T2=class extends tt{constructor(e){super(),nt(this,e,C2,k2,et,{contract:1,items:2,selectedItem:0})}};function w2(n){let e,t,i,r,l,s,o,a,c,f=n[4](Vn.RiskLimit)+"",p,d,h,_=n[4](Vn.MaintenanceMargin)+"",v,g,b,P=n[4](Vn.InitialMargin)+"",I,T,C,V=n[4](Vn.MaxLeverage)+"",O,w,D,L,$=n[4](Vn.Current)+"",N,z,H,R=Yi(n[0],n[1].limit)+"",F,U,K,Y=n[1].maintenanceMargin+"",X,ee,Z,ue=wr(n[0],n[1])+"",ce,pe,me,oe=Cl(n[0],n[1].initialMarginEr)+"",ke,Le,ge,ae,x=n[4](Vn.New)+"",le,fe,Se,Pe=Yi(n[0],n[3].limit)+"",Ce,Ee,Ie,ve=n[3].maintenanceMargin+"",de,se,he,_e=wr(n[0],n[3])+"",be,Ve,Be,Fe=Cl(n[0],n[3].initialMarginEr)+"",$e,Ae,Ne,Ge=n[4](Vn.DifferentRiskLimits,{DisplayName:n[0].pairName,InitialMargin:wr(n[0],n[5][0]),MaintenanceMargin:n[5][0].maintenanceMargin,Step:n[0].riskLimitSteps,Currency:n[0].settleCurrency})+"",Xe,ye;function Ke(ze){n[11](ze)}let Qe={contract:n[0],items:n[5]};return n[3]!==void 0&&(Qe.selectedItem=n[3]),t=new T2({props:Qe}),De.push(()=>qe(t,"selectedItem",Ke)),{c(){e=y("div"),te(t.$$.fragment),r=q(),l=y("div"),s=y("div"),o=y("div"),a=q(),c=y("div"),p=B(f),d=q(),h=y("div"),v=B(_),g=q(),b=y("div"),I=B(P),T=q(),C=y("div"),O=B(V),w=q(),D=y("div"),L=y("div"),N=B($),z=q(),H=y("div"),F=B(R),U=q(),K=y("div"),X=B(Y),ee=q(),Z=y("div"),ce=B(ue),pe=q(),me=y("div"),ke=B(oe),Le=q(),ge=y("div"),ae=y("div"),le=B(x),fe=q(),Se=y("div"),Ce=B(Pe),Ee=q(),Ie=y("div"),de=B(ve),se=q(),he=y("div"),be=B(_e),Ve=q(),Be=y("div"),$e=B(Fe),Ae=q(),Ne=y("div"),Xe=B(Ge),this.h()},l(ze){e=k(ze,"DIV",{class:!0});var Ue=S(e);re(t.$$.fragment,Ue),r=M(Ue),l=k(Ue,"DIV",{class:!0});var st=S(l);s=k(st,"DIV",{class:!0});var Oe=S(s);o=k(Oe,"DIV",{class:!0}),S(o).forEach(m),a=M(Oe),c=k(Oe,"DIV",{class:!0});var it=S(c);p=A(it,f),it.forEach(m),d=M(Oe),h=k(Oe,"DIV",{class:!0});var ct=S(h);v=A(ct,_),ct.forEach(m),g=M(Oe),b=k(Oe,"DIV",{class:!0});var ft=S(b);I=A(ft,P),ft.forEach(m),T=M(Oe),C=k(Oe,"DIV",{class:!0});var _t=S(C);O=A(_t,V),_t.forEach(m),Oe.forEach(m),w=M(st),D=k(st,"DIV",{class:!0});var Et=S(D);L=k(Et,"DIV",{class:!0});var gt=S(L);N=A(gt,$),gt.forEach(m),z=M(Et),H=k(Et,"DIV",{class:!0});var Dt=S(H);F=A(Dt,R),Dt.forEach(m),U=M(Et),K=k(Et,"DIV",{class:!0});var It=S(K);X=A(It,Y),It.forEach(m),ee=M(Et),Z=k(Et,"DIV",{class:!0});var pt=S(Z);ce=A(pt,ue),pt.forEach(m),pe=M(Et),me=k(Et,"DIV",{class:!0});var mt=S(me);ke=A(mt,oe),mt.forEach(m),Et.forEach(m),Le=M(st),ge=k(st,"DIV",{class:!0});var Nt=S(ge);ae=k(Nt,"DIV",{class:!0});var Rt=S(ae);le=A(Rt,x),Rt.forEach(m),fe=M(Nt),Se=k(Nt,"DIV",{class:!0});var je=S(Se);Ce=A(je,Pe),je.forEach(m),Ee=M(Nt),Ie=k(Nt,"DIV",{class:!0});var lt=S(Ie);de=A(lt,ve),lt.forEach(m),se=M(Nt),he=k(Nt,"DIV",{class:!0});var Yt=S(he);be=A(Yt,_e),Yt.forEach(m),Ve=M(Nt),Be=k(Nt,"DIV",{class:!0});var tn=S(Be);$e=A(tn,Fe),tn.forEach(m),Nt.forEach(m),st.forEach(m),Ue.forEach(m),Ae=M(ze),Ne=k(ze,"DIV",{class:!0});var Ze=S(Ne);Xe=A(Ze,Ge),Ze.forEach(m),this.h()},h(){E(o,"class","f1 pl16"),E(c,"class","f1"),E(h,"class","f1 ooo"),E(b,"class","f1"),E(C,"class","f1"),E(s,"class","df T3 wsn"),E(L,"class","f1 pl16"),E(H,"class","f1"),E(K,"class","f1"),E(Z,"class","f1"),E(me,"class","f1"),E(D,"class","df bottom-line T2 H-1vr6m6x"),E(ae,"class","f1 pl16"),E(Se,"class","f1"),E(Ie,"class","f1"),E(he,"class","f1"),E(Be,"class","f1"),E(ge,"class","df BLUE"),E(l,"class","grid ph16 lh45 f14 B3 H-1vr6m6x"),E(e,"class","body p24 H-1vr6m6x"),E(Ne,"class","desc ph24 lh22 f14 T3")},m(ze,Ue){G(ze,e,Ue),ne(t,e,null),u(e,r),u(e,l),u(l,s),u(s,o),u(s,a),u(s,c),u(c,p),u(s,d),u(s,h),u(h,v),u(s,g),u(s,b),u(b,I),u(s,T),u(s,C),u(C,O),u(l,w),u(l,D),u(D,L),u(L,N),u(D,z),u(D,H),u(H,F),u(D,U),u(D,K),u(K,X),u(D,ee),u(D,Z),u(Z,ce),u(D,pe),u(D,me),u(me,ke),u(l,Le),u(l,ge),u(ge,ae),u(ae,le),u(ge,fe),u(ge,Se),u(Se,Ce),u(ge,Ee),u(ge,Ie),u(Ie,de),u(ge,se),u(ge,he),u(he,be),u(ge,Ve),u(ge,Be),u(Be,$e),G(ze,Ae,Ue),G(ze,Ne,Ue),u(Ne,Xe),ye=!0},p(ze,Ue){const st={};Ue&1&&(st.contract=ze[0]),!i&&Ue&8&&(i=!0,st.selectedItem=ze[3],Me(()=>i=!1)),t.$set(st),(!ye||Ue&16)&&f!==(f=ze[4](Vn.RiskLimit)+"")&&W(p,f),(!ye||Ue&16)&&_!==(_=ze[4](Vn.MaintenanceMargin)+"")&&W(v,_),(!ye||Ue&16)&&P!==(P=ze[4](Vn.InitialMargin)+"")&&W(I,P),(!ye||Ue&16)&&V!==(V=ze[4](Vn.MaxLeverage)+"")&&W(O,V),(!ye||Ue&16)&&$!==($=ze[4](Vn.Current)+"")&&W(N,$),(!ye||Ue&3)&&R!==(R=Yi(ze[0],ze[1].limit)+"")&&W(F,R),(!ye||Ue&2)&&Y!==(Y=ze[1].maintenanceMargin+"")&&W(X,Y),(!ye||Ue&3)&&ue!==(ue=wr(ze[0],ze[1])+"")&&W(ce,ue),(!ye||Ue&3)&&oe!==(oe=Cl(ze[0],ze[1].initialMarginEr)+"")&&W(ke,oe),(!ye||Ue&16)&&x!==(x=ze[4](Vn.New)+"")&&W(le,x),(!ye||Ue&9)&&Pe!==(Pe=Yi(ze[0],ze[3].limit)+"")&&W(Ce,Pe),(!ye||Ue&8)&&ve!==(ve=ze[3].maintenanceMargin+"")&&W(de,ve),(!ye||Ue&9)&&_e!==(_e=wr(ze[0],ze[3])+"")&&W(be,_e),(!ye||Ue&9)&&Fe!==(Fe=Cl(ze[0],ze[3].initialMarginEr)+"")&&W($e,Fe),(!ye||Ue&17)&&Ge!==(Ge=ze[4](Vn.DifferentRiskLimits,{DisplayName:ze[0].pairName,InitialMargin:wr(ze[0],ze[5][0]),MaintenanceMargin:ze[5][0].maintenanceMargin,Step:ze[0].riskLimitSteps,Currency:ze[0].settleCurrency})+"")&&W(Xe,Ge)},i(ze){ye||(Q(t.$$.fragment,ze),ye=!0)},o(ze){j(t.$$.fragment,ze),ye=!1},d(ze){ze&&m(e),ie(t),ze&&m(Ae),ze&&m(Ne)}}}function I2(n){let e,t,i=n[4](Vn.AdjustRiskLimit)+"",r,l,s=n[0].pairName+"",o,a,c=n[4](He[n[0].type])+"",f,p,d=n[4](He.CurrencyMargin,{Currency:n[0].settleCurrency})+"",h,_,v,g,b,P,I;return{c(){e=y("div"),t=y("span"),r=B(i),l=B(" ("),o=B(s),a=q(),f=B(c),p=q(),h=B(d),_=B(")"),v=q(),g=y("i"),b=B(""),this.h()},l(T){e=k(T,"DIV",{class:!0,slot:!0});var C=S(e);t=k(C,"SPAN",{});var V=S(t);r=A(V,i),l=A(V," ("),o=A(V,s),a=M(V),f=A(V,c),p=M(V),h=A(V,d),_=A(V,")"),V.forEach(m),v=M(C),g=k(C,"I",{class:!0});var O=S(g);b=A(O,""),O.forEach(m),C.forEach(m),this.h()},h(){E(g,"class","iconfont cp"),E(e,"class","header df jcsb ph24 b f16 T2 H-1vr6m6x"),E(e,"slot","header")},m(T,C){G(T,e,C),u(e,t),u(t,r),u(t,l),u(t,o),u(t,a),u(t,f),u(t,p),u(t,h),u(t,_),u(e,v),u(e,g),u(g,b),P||(I=We(g,"click",n[7]),P=!0)},p(T,C){C&16&&i!==(i=T[4](Vn.AdjustRiskLimit)+"")&&W(r,i),C&1&&s!==(s=T[0].pairName+"")&&W(o,s),C&17&&c!==(c=T[4](He[T[0].type])+"")&&W(f,c),C&17&&d!==(d=T[4](He.CurrencyMargin,{Currency:T[0].settleCurrency})+"")&&W(h,d)},d(T){T&&m(e),P=!1,I()}}}function D2(n){let e=n[4](He.Cancel)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&16&&e!==(e=i[4](He.Cancel)+"")&&W(t,e)},d(i){i&&m(t)}}}function V2(n){let e=n[4](He.Confirm)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&16&&e!==(e=i[4](He.Confirm)+"")&&W(t,e)},d(i){i&&m(t)}}}function O2(n){let e,t,i,r,l;return t=new Ht({props:{$$slots:{default:[D2]},$$scope:{ctx:n}}}),t.$on("click",n[6]),r=new Ht({props:{type:"primary",loading:n[2],$$slots:{default:[V2]},$$scope:{ctx:n}}}),r.$on("click",n[8]),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);re(t.$$.fragment,o),i=M(o),re(r.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","p24 tr"),E(e,"slot","footer")},m(s,o){G(s,e,o),ne(t,e,null),u(e,i),ne(r,e,null),l=!0},p(s,o){const a={};o&65552&&(a.$$scope={dirty:o,ctx:s}),t.$set(a);const c={};o&4&&(c.loading=s[2]),o&65552&&(c.$$scope={dirty:o,ctx:s}),r.$set(c)},i(s){l||(Q(t.$$.fragment,s),Q(r.$$.fragment,s),l=!0)},o(s){j(t.$$.fragment,s),j(r.$$.fragment,s),l=!1},d(s){s&&m(e),ie(t),ie(r)}}}function L2(n){let e,t;return e=new bn({props:{style:"max-width:700px;",$$slots:{footer:[O2],header:[I2],default:[w2]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&65567&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function $2(n,e,t){let i,r,l;J(n,Qi,I=>t(12,i=I)),J(n,yr,I=>t(13,r=I)),J(n,dt,I=>t(4,l=I));let{contract:s=null}=e,{curRiskLimit:o}=e,{curRiskLimitOptions:a=[]}=e,{posSide:c=""}=e;const f=Kt();let p=!1,d=a,h;function _(I,T){t(3,h=I.find(C=>C.limit===T.limit)||I[0])}function v(){f("close")}function g(){f("close")}async function b(){if(r==="Login"){t(2,p=!0);const I=await tm(s,h.riskLimitEv,c);t(2,p=!1),I&&f("close");return}Xl.gotoLogin(i(Os()?cn.LOGIN:cn.REGISTER))}function P(I){h=I,t(3,h)}return n.$$set=I=>{"contract"in I&&t(0,s=I.contract),"curRiskLimit"in I&&t(1,o=I.curRiskLimit),"curRiskLimitOptions"in I&&t(9,a=I.curRiskLimitOptions),"posSide"in I&&t(10,c=I.posSide)},n.$$.update=()=>{n.$$.dirty&2&&_(d,o)},[s,o,p,h,l,d,v,g,b,a,c,P]}let q2=class extends tt{constructor(e){super(),nt(this,e,$2,L2,et,{contract:0,curRiskLimit:1,curRiskLimitOptions:9,posSide:10})}};function M2(n){let e,t,i=n[3](on.RiskLimit)+"",r,l,s,o,a=Yi(n[0],n[1].limit)+"",c,f,p,d,h,_;return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("div"),o=y("span"),c=B(a),f=q(),p=y("i"),d=B(""),this.h()},l(v){e=k(v,"DIV",{class:!0});var g=S(e);t=k(g,"SPAN",{class:!0});var b=S(t);r=A(b,i),b.forEach(m),l=M(g),s=k(g,"DIV",{class:!0});var P=S(s);o=k(P,"SPAN",{class:!0});var I=S(o);c=A(I,a),I.forEach(m),f=M(P),p=k(P,"I",{class:!0});var T=S(p);d=A(T,""),T.forEach(m),P.forEach(m),g.forEach(m),this.h()},h(){E(t,"class","T3"),E(o,"class","T2"),E(p,"class","iconfont T3 f12"),E(s,"class","cp"),E(e,"class","df aic jcsb ph16 mt12 f12 B3 br4")},m(v,g){G(v,e,g),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),u(o,c),u(s,f),u(s,p),u(p,d),h||(_=We(s,"click",n[4]),h=!0)},p(v,g){g&8&&i!==(i=v[3](on.RiskLimit)+"")&&W(r,i),g&3&&a!==(a=Yi(v[0],v[1].limit)+"")&&W(c,a)},d(v){v&&m(e),h=!1,_()}}}function N2(n){let e,t,i=n[3](on.MaximumPosition,{PosSize:`<span class='T1'>${n[2]+" "+n[0].settleCurrency}</span>`})+"";return{c(){e=y("div"),t=y("span"),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);t=k(l,"SPAN",{class:!0});var s=S(t);s.forEach(m),l.forEach(m),this.h()},h(){E(t,"class","T3"),E(e,"class","mt12 T1")},m(r,l){G(r,e,l),u(e,t),t.innerHTML=i},p(r,l){l&13&&i!==(i=r[3](on.MaximumPosition,{PosSize:`<span class='T1'>${r[2]+" "+r[0].settleCurrency}</span>`})+"")&&(t.innerHTML=i)},d(r){r&&m(e)}}}function H2(n){let e,t;function i(s,o){return o&1&&(t=null),t==null&&(t=!!["USDT","MUSDT"].includes(s[0].settleCurrency)),t?N2:M2}let r=i(n,-1),l=r(n);return{c(){e=y("div"),l.c(),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);l.l(o),o.forEach(m),this.h()},h(){E(e,"class","wrap H-uey6xb")},m(s,o){G(s,e,o),l.m(e,null)},p(s,[o]){r===(r=i(s,o))&&l?l.p(s,o):(l.d(1),l=r(s),l&&(l.c(),l.m(e,null)))},i:rt,o:rt,d(s){s&&m(e),l.d()}}}function B2(n,e,t){let i,r,l,s,o,a;J(n,Ls,b=>t(10,r=b)),J(n,vr,b=>t(11,l=b)),J(n,Ni,b=>t(7,s=b)),J(n,zi,b=>t(8,o=b)),J(n,dt,b=>t(3,a=b));let{contract:c}=e,{position:f}=e,{leverageEr:p}=e;const d=Kt();let h,_=[];function v(){const{posSide:b}=f;en.create(q2,{contract:c,curRiskLimit:h,curRiskLimitOptions:_,posSide:b}),d("click")}function g(b,P){const I=b.get(P.symbol),T=ui.createRawRiskLimitOptions(I,l);t(1,h=ui.createRealRiskLimit(P,T,r)),_=ui.createRealRiskLimitOptions(T,h)}return n.$$set=b=>{"contract"in b&&t(0,c=b.contract),"position"in b&&t(5,f=b.position),"leverageEr"in b&&t(6,p=b.leverageEr)},n.$$.update=()=>{n.$$.dirty&288&&g(o,f),n.$$.dirty&225&&t(2,i=Gd(c,f,p,s))},[c,h,i,a,v,f,p,s,o]}let no=class extends tt{constructor(e){super(),nt(this,e,B2,H2,et,{contract:0,position:5,leverageEr:6})}};function A2(n){let e,t=n[2](on.EachContract)+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","body ph24 T1")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&4&&t!==(t=r[2](on.EachContract)+"")&&W(i,t)},d(r){r&&m(e)}}}function z2(n){let e,t,i=n[2](on.AdjustLeverage)+"",r,l,s,o,a,c;return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("i"),o=B(""),this.h()},l(f){e=k(f,"DIV",{class:!0,slot:!0});var p=S(e);t=k(p,"SPAN",{});var d=S(t);r=A(d,i),d.forEach(m),l=M(p),s=k(p,"I",{class:!0});var h=S(s);o=A(h,""),h.forEach(m),p.forEach(m),this.h()},h(){E(s,"class","iconfont cp"),E(e,"class","p24 lh24 df jcsb aic b f16 T2"),E(e,"slot","header")},m(f,p){G(f,e,p),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),a||(c=We(s,"click",n[3]),a=!0)},p(f,p){p&4&&i!==(i=f[2](on.AdjustLeverage)+"")&&W(r,i)},d(f){f&&m(e),a=!1,c()}}}function Q2(n){let e,t=n[2](He.DontShowAgain)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ml8 T3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&4&&t!==(t=r[2](He.DontShowAgain)+"")&&W(i,t)},d(r){r&&m(e)}}}function R2(n){let e=n[2](He.Cancel)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&4&&e!==(e=i[2](He.Cancel)+"")&&W(t,e)},d(i){i&&m(t)}}}function F2(n){let e=n[2](He.Confirm)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&4&&e!==(e=i[2](He.Confirm)+"")&&W(t,e)},d(i){i&&m(t)}}}function j2(n){let e,t,i,r,l,s,o,a,c;function f(d){n[7](d)}let p={class:"usn T4",$$slots:{default:[Q2]},$$scope:{ctx:n}};return n[1]!==void 0&&(p.checked=n[1]),t=new Pn({props:p}),De.push(()=>qe(t,"checked",f)),s=new Ht({props:{class:"cancel",$$slots:{default:[R2]},$$scope:{ctx:n}}}),s.$on("click",n[3]),a=new Ht({props:{class:"confirm",type:"primary",loading:n[0],$$slots:{default:[F2]},$$scope:{ctx:n}}}),a.$on("click",n[4]),{c(){e=y("div"),te(t.$$.fragment),r=q(),l=y("div"),te(s.$$.fragment),o=q(),te(a.$$.fragment),this.h()},l(d){e=k(d,"DIV",{class:!0,slot:!0});var h=S(e);re(t.$$.fragment,h),r=M(h),l=k(h,"DIV",{});var _=S(l);re(s.$$.fragment,_),o=M(_),re(a.$$.fragment,_),_.forEach(m),h.forEach(m),this.h()},h(){E(e,"class","footer p24 df aic jcsb"),E(e,"slot","footer")},m(d,h){G(d,e,h),ne(t,e,null),u(e,r),u(e,l),ne(s,l,null),u(l,o),ne(a,l,null),c=!0},p(d,h){const _={};h&1028&&(_.$$scope={dirty:h,ctx:d}),!i&&h&2&&(i=!0,_.checked=d[1],Me(()=>i=!1)),t.$set(_);const v={};h&1028&&(v.$$scope={dirty:h,ctx:d}),s.$set(v);const g={};h&1&&(g.loading=d[0]),h&1028&&(g.$$scope={dirty:h,ctx:d}),a.$set(g)},i(d){c||(Q(t.$$.fragment,d),Q(s.$$.fragment,d),Q(a.$$.fragment,d),c=!0)},o(d){j(t.$$.fragment,d),j(s.$$.fragment,d),j(a.$$.fragment,d),c=!1},d(d){d&&m(e),ie(t),ie(s),ie(a)}}}function U2(n){let e,t;return e=new bn({props:{style:"width:640px; max-width: 480px; border-radius: 12px; background: var(--B2);",$$slots:{footer:[j2],header:[z2],default:[A2]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&1031&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function W2(n,e,t){let i,r;J(n,xn,h=>t(6,i=h)),J(n,dt,h=>t(2,r=h));let{onConfirm:l}=e,{isPosting:s=!1}=e;const o=Kt();let a=!1;function c(){o("close")}function f(h){t(1,a=!h.adjustLeverageConfirmation)}function p(){ar("adjustLeverageConfirmation",!a).then(()=>o("close")),t(0,s=!0),l()}function d(h){a=h,t(1,a)}return n.$$set=h=>{"onConfirm"in h&&t(5,l=h.onConfirm),"isPosting"in h&&t(0,s=h.isPosting)},n.$$.update=()=>{n.$$.dirty&64&&f(i)},[s,a,r,c,p,l,i,d]}let G2=class extends tt{constructor(e){super(),nt(this,e,W2,U2,et,{onConfirm:5,isPosting:0})}};const Zi={CrossWarning:"4cee9f",IsolatedWarning:"edd0c4",Leverage:"dd7946"};function Xa(n){let e,t,i;return{c(){e=y("span"),t=y("i"),i=B(""),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);t=k(l,"I",{class:!0});var s=S(t);i=A(s,""),s.forEach(m),l.forEach(m),this.h()},h(){E(t,"class","iconfont pr db f12 H-9ji3ij"),E(e,"class","badge pa ovh H-9ji3ij")},m(r,l){G(r,e,l),u(e,t),u(t,i)},d(r){r&&m(e)}}}function Ya(n){let e,t,i;return{c(){e=y("span"),t=y("i"),i=B(""),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);t=k(l,"I",{class:!0});var s=S(t);i=A(s,""),s.forEach(m),l.forEach(m),this.h()},h(){E(t,"class","iconfont pr db f12 H-9ji3ij"),E(e,"class","badge pa ovh H-9ji3ij")},m(r,l){G(r,e,l),u(e,t),u(t,i)},d(r){r&&m(e)}}}function Ja(n){let e,t,i,r,l,s,o;function a(p){n[19](p)}let c={side:n[5].posSide,leverageScale:n[8],leverageOptions:n[2]};n[9]!==void 0&&(c.leverageEr=n[9]),e=new Qs({props:c}),De.push(()=>qe(e,"leverageEr",a)),r=new no({props:{contract:n[1],position:n[5],leverageEr:n[9]}}),r.$on("click",n[16]);let f=n[1].type==="PerpetualV2"&&Za(n);return{c(){te(e.$$.fragment),i=q(),te(r.$$.fragment),l=q(),f&&f.c(),s=ut()},l(p){re(e.$$.fragment,p),i=M(p),re(r.$$.fragment,p),l=M(p),f&&f.l(p),s=ut()},m(p,d){ne(e,p,d),G(p,i,d),ne(r,p,d),G(p,l,d),f&&f.m(p,d),G(p,s,d),o=!0},p(p,d){const h={};d&32&&(h.side=p[5].posSide),d&256&&(h.leverageScale=p[8]),d&4&&(h.leverageOptions=p[2]),!t&&d&512&&(t=!0,h.leverageEr=p[9],Me(()=>t=!1)),e.$set(h);const _={};d&2&&(_.contract=p[1]),d&32&&(_.position=p[5]),d&512&&(_.leverageEr=p[9]),r.$set(_),p[1].type==="PerpetualV2"?f?f.p(p,d):(f=Za(p),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null)},i(p){o||(Q(e.$$.fragment,p),Q(r.$$.fragment,p),o=!0)},o(p){j(e.$$.fragment,p),j(r.$$.fragment,p),o=!1},d(p){ie(e,p),p&&m(i),ie(r,p),p&&m(l),f&&f.d(p),p&&m(s)}}}function Za(n){let e,t=n[12](on.CheckOnLeverage)+"",i,r;return{c(){e=y("a"),i=B(t),this.h()},l(l){e=k(l,"A",{class:!0,href:!0});var s=S(e);i=A(s,t),s.forEach(m),this.h()},h(){E(e,"class","BLUE cp"),E(e,"href",r=n[11](cn.LEVERAGE_MARGIN))},m(l,s){G(l,e,s),u(e,i)},p(l,s){s&4096&&t!==(t=l[12](on.CheckOnLeverage)+"")&&W(i,t),s&2048&&r!==(r=l[11](cn.LEVERAGE_MARGIN))&&E(e,"href",r)},d(l){l&&m(e)}}}function xa(n){let e,t,i,r=n[5]&&ec(n),l=n[6]&&tc(n);return{c(){r&&r.c(),e=q(),l&&l.c(),t=ut()},l(s){r&&r.l(s),e=M(s),l&&l.l(s),t=ut()},m(s,o){r&&r.m(s,o),G(s,e,o),l&&l.m(s,o),G(s,t,o),i=!0},p(s,o){s[5]?r?(r.p(s,o),o&32&&Q(r,1)):(r=ec(s),r.c(),Q(r,1),r.m(e.parentNode,e)):r&&(ot(),j(r,1,1,()=>{r=null}),at()),s[6]?l?(l.p(s,o),o&64&&Q(l,1)):(l=tc(s),l.c(),Q(l,1),l.m(t.parentNode,t)):l&&(ot(),j(l,1,1,()=>{l=null}),at())},i(s){i||(Q(r),Q(l),i=!0)},o(s){j(r),j(l),i=!1},d(s){r&&r.d(s),s&&m(e),l&&l.d(s),s&&m(t)}}}function ec(n){let e,t=n[12](Zi.Leverage)+"",i,r,l=n[12](He.Long)+"",s,o,a,c,f,p,d,h;function _(g){n[20](g)}let v={side:n[5].posSide,leverageScale:n[8],leverageOptions:n[2]};return n[9]!==void 0&&(v.leverageEr=n[9]),c=new Qs({props:v}),De.push(()=>qe(c,"leverageEr",_)),d=new no({props:{contract:n[1],position:n[5],leverageEr:n[9]}}),d.$on("click",n[16]),{c(){e=y("div"),i=B(t),r=B("("),s=B(l),o=B(")"),a=q(),te(c.$$.fragment),p=q(),te(d.$$.fragment),this.h()},l(g){e=k(g,"DIV",{class:!0});var b=S(e);i=A(b,t),r=A(b,"("),s=A(b,l),o=A(b,")"),b.forEach(m),a=M(g),re(c.$$.fragment,g),p=M(g),re(d.$$.fragment,g),this.h()},h(){E(e,"class","mb8 T2")},m(g,b){G(g,e,b),u(e,i),u(e,r),u(e,s),u(e,o),G(g,a,b),ne(c,g,b),G(g,p,b),ne(d,g,b),h=!0},p(g,b){(!h||b&4096)&&t!==(t=g[12](Zi.Leverage)+"")&&W(i,t),(!h||b&4096)&&l!==(l=g[12](He.Long)+"")&&W(s,l);const P={};b&32&&(P.side=g[5].posSide),b&256&&(P.leverageScale=g[8]),b&4&&(P.leverageOptions=g[2]),!f&&b&512&&(f=!0,P.leverageEr=g[9],Me(()=>f=!1)),c.$set(P);const I={};b&2&&(I.contract=g[1]),b&32&&(I.position=g[5]),b&512&&(I.leverageEr=g[9]),d.$set(I)},i(g){h||(Q(c.$$.fragment,g),Q(d.$$.fragment,g),h=!0)},o(g){j(c.$$.fragment,g),j(d.$$.fragment,g),h=!1},d(g){g&&m(e),g&&m(a),ie(c,g),g&&m(p),ie(d,g)}}}function tc(n){let e,t=n[12](Zi.Leverage)+"",i,r,l=n[12](He.Short)+"",s,o,a,c,f,p,d,h,_,v=n[12](on.CheckOnLeverage)+"",g,b,P;function I(C){n[21](C)}let T={side:n[6].posSide,leverageScale:n[8],leverageOptions:n[3]};return n[10]!==void 0&&(T.leverageEr=n[10]),c=new Qs({props:T}),De.push(()=>qe(c,"leverageEr",I)),d=new no({props:{contract:n[1],position:n[6],leverageEr:n[10]}}),d.$on("click",n[16]),{c(){e=y("div"),i=B(t),r=B("("),s=B(l),o=B(")"),a=q(),te(c.$$.fragment),p=q(),te(d.$$.fragment),h=q(),_=y("a"),g=B(v),this.h()},l(C){e=k(C,"DIV",{class:!0});var V=S(e);i=A(V,t),r=A(V,"("),s=A(V,l),o=A(V,")"),V.forEach(m),a=M(C),re(c.$$.fragment,C),p=M(C),re(d.$$.fragment,C),h=M(C),_=k(C,"A",{class:!0,href:!0});var O=S(_);g=A(O,v),O.forEach(m),this.h()},h(){E(e,"class","mt24 mb8 T2"),E(_,"class","BLUE cp"),E(_,"href",b=n[11](cn.LEVERAGE_MARGIN))},m(C,V){G(C,e,V),u(e,i),u(e,r),u(e,s),u(e,o),G(C,a,V),ne(c,C,V),G(C,p,V),ne(d,C,V),G(C,h,V),G(C,_,V),u(_,g),P=!0},p(C,V){(!P||V&4096)&&t!==(t=C[12](Zi.Leverage)+"")&&W(i,t),(!P||V&4096)&&l!==(l=C[12](He.Short)+"")&&W(s,l);const O={};V&64&&(O.side=C[6].posSide),V&256&&(O.leverageScale=C[8]),V&8&&(O.leverageOptions=C[3]),!f&&V&1024&&(f=!0,O.leverageEr=C[10],Me(()=>f=!1)),c.$set(O);const w={};V&2&&(w.contract=C[1]),V&64&&(w.position=C[6]),V&1024&&(w.leverageEr=C[10]),d.$set(w),(!P||V&4096)&&v!==(v=C[12](on.CheckOnLeverage)+"")&&W(g,v),(!P||V&2048&&b!==(b=C[11](cn.LEVERAGE_MARGIN)))&&E(_,"href",b)},i(C){P||(Q(c.$$.fragment,C),Q(d.$$.fragment,C),P=!0)},o(C){j(c.$$.fragment,C),j(d.$$.fragment,C),P=!1},d(C){C&&m(e),C&&m(a),ie(c,C),C&&m(p),ie(d,C),C&&m(h),C&&m(_)}}}function K2(n){let e,t=n[12](He.Confirm)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","lh46 f16 H-9ji3ij")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&4096&&t!==(t=r[12](He.Confirm)+"")&&W(i,t)},d(r){r&&m(e)}}}function X2(n){let e,t,i,r=n[12](on.Cross)+"",l,s,o,a,c=n[12](on.Isolated)+"",f,p,d,h,_=(n[7]===un.Cross?n[12](Zi.CrossWarning):n[12](Zi.IsolatedWarning))+"",v,g,b,P,I,T,C,V,O,w=n[7]===un.Cross&&Xa(),D=n[7]===un.Isolated&&Ya(),L=n[5]&&(n[1].type==="Perpetual"||n[1].type==="PerpetualV2"&&n[0]===Ct.OneWay)&&Ja(n),$=n[1].type==="PerpetualV2"&&n[0]===Ct.Hedge&&xa(n);return T=new Ht({props:{type:"primary",class:"wp100",loading:n[4],$$slots:{default:[K2]},$$scope:{ctx:n}}}),T.$on("click",n[14]),{c(){e=y("form"),t=y("div"),i=y("div"),l=B(r),s=q(),w&&w.c(),o=q(),a=y("div"),f=B(c),p=q(),D&&D.c(),d=q(),h=y("div"),v=B(_),g=q(),L&&L.c(),b=q(),$&&$.c(),P=q(),I=y("div"),te(T.$$.fragment),this.h()},l(N){e=k(N,"FORM",{class:!0});var z=S(e);t=k(z,"DIV",{class:!0});var H=S(t);i=k(H,"DIV",{class:!0});var R=S(i);l=A(R,r),s=M(R),w&&w.l(R),R.forEach(m),o=M(H),a=k(H,"DIV",{class:!0});var F=S(a);f=A(F,c),p=M(F),D&&D.l(F),F.forEach(m),H.forEach(m),d=M(z),h=k(z,"DIV",{class:!0});var U=S(h);v=A(U,_),U.forEach(m),g=M(z),L&&L.l(z),b=M(z),$&&$.l(z),P=M(z),I=k(z,"DIV",{class:!0});var K=S(I);re(T.$$.fragment,K),K.forEach(m),z.forEach(m),this.h()},h(){E(i,"class","type pr f1 br8 fw2 tc cp H-9ji3ij"),Te(i,"active",n[7]===un.Cross),E(a,"class","type pr f1 br8 ml16 fw2 tc cp H-9ji3ij"),Te(a,"active",n[7]===un.Isolated),E(t,"class","type df mb24 lh40 f14 T1 H-9ji3ij"),E(h,"class","warning mb24 br8 T3 H-9ji3ij"),E(I,"class","mt40 mb24 H-9ji3ij"),E(e,"class","ph24")},m(N,z){G(N,e,z),u(e,t),u(t,i),u(i,l),u(i,s),w&&w.m(i,null),u(t,o),u(t,a),u(a,f),u(a,p),D&&D.m(a,null),u(e,d),u(e,h),u(h,v),u(e,g),L&&L.m(e,null),u(e,b),$&&$.m(e,null),u(e,P),u(e,I),ne(T,I,null),C=!0,V||(O=[We(i,"click",Ll(n[15],un.Cross)),We(a,"click",Ll(n[15],un.Isolated)),We(e,"submit",$d(n[18]))],V=!0)},p(N,z){(!C||z&4096)&&r!==(r=N[12](on.Cross)+"")&&W(l,r),N[7]===un.Cross?w||(w=Xa(),w.c(),w.m(i,null)):w&&(w.d(1),w=null),(!C||z&128)&&Te(i,"active",N[7]===un.Cross),(!C||z&4096)&&c!==(c=N[12](on.Isolated)+"")&&W(f,c),N[7]===un.Isolated?D||(D=Ya(),D.c(),D.m(a,null)):D&&(D.d(1),D=null),(!C||z&128)&&Te(a,"active",N[7]===un.Isolated),(!C||z&4224)&&_!==(_=(N[7]===un.Cross?N[12](Zi.CrossWarning):N[12](Zi.IsolatedWarning))+"")&&W(v,_),N[5]&&(N[1].type==="Perpetual"||N[1].type==="PerpetualV2"&&N[0]===Ct.OneWay)?L?(L.p(N,z),z&35&&Q(L,1)):(L=Ja(N),L.c(),Q(L,1),L.m(e,b)):L&&(ot(),j(L,1,1,()=>{L=null}),at()),N[1].type==="PerpetualV2"&&N[0]===Ct.Hedge?$?($.p(N,z),z&3&&Q($,1)):($=xa(N),$.c(),Q($,1),$.m(e,P)):$&&(ot(),j($,1,1,()=>{$=null}),at());const H={};z&16&&(H.loading=N[4]),z&268439552&&(H.$$scope={dirty:z,ctx:N}),T.$set(H)},i(N){C||(Q(L),Q($),Q(T.$$.fragment,N),C=!0)},o(N){j(L),j($),j(T.$$.fragment,N),C=!1},d(N){N&&m(e),w&&w.d(),D&&D.d(),L&&L.d(),$&&$.d(),ie(T),V=!1,jt(O)}}}function Y2(n){let e,t,i=n[12](on.Leverage)+"",r,l,s,o,a,c;return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("i"),o=B(""),this.h()},l(f){e=k(f,"DIV",{slot:!0,class:!0});var p=S(e);t=k(p,"SPAN",{class:!0});var d=S(t);r=A(d,i),d.forEach(m),l=M(p),s=k(p,"I",{class:!0});var h=S(s);o=A(h,""),h.forEach(m),p.forEach(m),this.h()},h(){E(t,"class","lh24 f18"),E(s,"class","iconfont close f12 cp"),E(e,"slot","header"),E(e,"class","df jcsb p24 T1")},m(f,p){G(f,e,p),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),a||(c=We(s,"click",n[13]),a=!0)},p(f,p){p&4096&&i!==(i=f[12](on.Leverage)+"")&&W(r,i)},d(f){f&&m(e),a=!1,c()}}}function J2(n){let e,t;return e=new bn({props:{style:"min-width: 480px; overflow-x: hidden;",$$slots:{header:[Y2],default:[X2]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&268443647&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Z2(n,e,t){let i,r,l,s;J(n,xn,R=>t(22,i=R)),J(n,Qi,R=>t(11,r=R)),J(n,Yn,R=>t(23,l=R)),J(n,dt,R=>t(12,s=R));let{posMode:o=Ct.OneWay}=e,{contract:a}=e,{positions:c=[]}=e,{leverageOptions:f=[]}=e,{leverageOptionsShort:p=[]}=e;const d=Kt();let h=!1,_,v,g,b=0,P=0,I=0;function T(){d("close")}function C(){if(!l){Xl.gotoLogin(r(Os()?cn.LOGIN:cn.REGISTER));return}D(P,I,i)||L()}function V(R){g!==R&&(t(7,g=R),t(9,P=_&&_.leverageEr||0),t(10,I=v&&v.leverageEr||0))}function O(R,F,U){const{type:K}=F;if(K==="Perpetual"){if(t(5,_=U[0]),!_)return;t(7,g=_.isIsolated?un.Isolated:un.Cross),t(9,P=_.leverageEr);return}if(K==="PerpetualV2"){if(R===Ct.OneWay){if(t(5,_=U.find(({posSide:Y})=>Y==="Merged")),!_)return;t(7,g=_.isIsolated?un.Isolated:un.Cross),t(9,P=_.leverageEr);return}if(R===Ct.Hedge){if(t(5,_=U.find(({posSide:Y})=>Y==="Long")),!_||(t(7,g=_.isIsolated?un.Isolated:un.Cross),t(9,P=_.leverageEr),t(6,v=U.find(({posSide:Y})=>Y==="Short")),!v))return;t(10,I=v.leverageEr)}}}function w(){d("close")}function D(R,F,U){const K=Math.pow(10,b),Y=Re(20).times(K);return U.adjustLeverageConfirmation&&(Re(R).gte(Y)||Re(F).gte(Y))?(en.create(G2,{isPosting:h,onConfirm:()=>L()}),!0):!1}async function L(){const{symbol:R,type:F}=a,U={symbol:R,type:F},K=un.Cross===g;if(F==="Perpetual"){const X=K?-P:P;Object.assign(U,{leverageEr:X})}if(F==="PerpetualV2"){const X=xe.floor(K?-P:P,2),ee=xe.floor(K?-I:I,2);o===Ct.Hedge&&Object.assign(U,{longLeverageRr:X,shortLeverageRr:ee}),o===Ct.OneWay&&Object.assign(U,{leverageRr:X})}t(4,h=!0);const Y=await Cp(U);t(4,h=!1),Y&&d("close")}function $(R){$i.call(this,n,R)}function N(R){P=R,t(9,P)}function z(R){P=R,t(9,P)}function H(R){I=R,t(10,I)}return n.$$set=R=>{"posMode"in R&&t(0,o=R.posMode),"contract"in R&&t(1,a=R.contract),"positions"in R&&t(17,c=R.positions),"leverageOptions"in R&&t(2,f=R.leverageOptions),"leverageOptionsShort"in R&&t(3,p=R.leverageOptionsShort)},n.$$.update=()=>{n.$$.dirty&131075&&O(o,a,c),n.$$.dirty&2&&t(8,b=a.ratioScale)},[o,a,f,p,h,_,v,g,b,P,I,r,s,T,C,V,w,c,$,N,z,H]}let Zp=class extends tt{constructor(e){super(),nt(this,e,Z2,J2,et,{posMode:0,contract:1,positions:17,leverageOptions:2,leverageOptionsShort:3})}};function x2(n){let e,t,i,r,l=n[1].label+"",s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C=n[1].value+"",V,O,w,D,L;return{c(){e=y("div"),t=y("div"),i=y("div"),r=y("span"),s=B(l),o=q(),a=y("i"),c=B(""),f=q(),p=y("div"),d=y("ul"),h=y("li"),_=B("Cross"),v=q(),g=y("li"),b=B("Isolated"),P=q(),I=y("div"),T=y("span"),V=q(),O=y("i"),w=B(""),this.h()},l($){e=k($,"DIV",{class:!0});var N=S(e);t=k(N,"DIV",{class:!0});var z=S(t);i=k(z,"DIV",{class:!0});var H=S(i);r=k(H,"SPAN",{class:!0});var R=S(r);s=A(R,l),R.forEach(m),o=M(H),a=k(H,"I",{class:!0});var F=S(a);c=A(F,""),F.forEach(m),H.forEach(m),f=M(z),p=k(z,"DIV",{class:!0});var U=S(p);d=k(U,"UL",{class:!0});var K=S(d);h=k(K,"LI",{class:!0});var Y=S(h);_=A(Y,"Cross"),Y.forEach(m),v=M(K),g=k(K,"LI",{class:!0});var X=S(g);b=A(X,"Isolated"),X.forEach(m),K.forEach(m),U.forEach(m),z.forEach(m),P=M(N),I=k(N,"DIV",{class:!0});var ee=S(I);T=k(ee,"SPAN",{class:!0});var Z=S(T);Z.forEach(m),V=M(ee),O=k(ee,"I",{class:!0});var ue=S(O);w=A(ue,""),ue.forEach(m),ee.forEach(m),N.forEach(m),this.h()},h(){E(r,"class","T1"),E(a,"class","iconfont f12 ml4 T2 H-1bgywxd"),Te(a,"animation",n[2]),E(i,"class","main df aic jcsb"),E(h,"class","H-1bgywxd"),E(g,"class","H-1bgywxd"),E(d,"class","H-1bgywxd"),E(p,"class","pa options H-1bgywxd"),Te(p,"dropdown",n[2]),E(t,"class","label pr br4 H-1bgywxd"),Te(t,"f1",n[0]===Ct.OneWay),E(T,"class","T1"),E(O,"class","iconfont arrow f12 T2 H-1bgywxd"),E(I,"class","leverage ml8 br4 df aic jcsb f1 H-1bgywxd"),E(e,"class","leverage-wrap df jcsb f12 cp"),Te(e,"mt12",!n[3])},m($,N){G($,e,N),u(e,t),u(t,i),u(i,r),u(r,s),u(i,o),u(i,a),u(a,c),u(t,f),u(t,p),u(p,d),u(d,h),u(h,_),u(d,v),u(d,g),u(g,b),u(e,P),u(e,I),u(I,T),T.innerHTML=C,u(I,V),u(I,O),u(O,w),D||(L=[We(h,"click",n[6]("CROSS")),We(g,"click",n[6]("ISOLATED")),We(t,"click",n[5]),We(I,"click",n[4]),We(e,"mouseleave",n[9])],D=!0)},p($,[N]){N&2&&l!==(l=$[1].label+"")&&W(s,l),N&4&&Te(a,"animation",$[2]),N&4&&Te(p,"dropdown",$[2]),N&1&&Te(t,"f1",$[0]===Ct.OneWay),N&2&&C!==(C=$[1].value+"")&&(T.innerHTML=C),N&8&&Te(e,"mt12",!$[3])},i:rt,o:rt,d($){$&&m(e),D=!1,jt(L)}}}function ev(n,e,t){let i,r,l,s,o,a,c,f,p,d,h;J(n,Sn,D=>t(8,i=D)),J(n,_n,D=>t(0,r=D)),J(n,Qi,D=>t(10,l=D)),J(n,Yn,D=>t(11,s=D)),J(n,dt,D=>t(12,o=D)),J(n,vr,D=>t(13,a=D)),J(n,Ni,D=>t(14,c=D)),J(n,Ls,D=>t(15,f=D)),J(n,Ds,D=>t(16,p=D)),J(n,Xt,D=>t(17,d=D)),J(n,$s,D=>t(3,h=D));let{contract:_}=e,v={label:"--",value:"--"},g=!1;function b(){const D=P(d,i,r,p,f,c);en.create(Zp,D)}function P(D,L,$,N,z,H){const R=ui.createRawRiskLimitOptions(D,a),F=L.find(({posSide:X})=>X==="Merged"),U=ui.createRealRiskLimit(F,R,z),K=Ki(D,F,N,U,H),{type:Y}=D;if(Y==="Perpetual")return{positions:[F],contract:D,leverageOptions:K};if(Y==="PerpetualV2"){if($===Ct.OneWay)return{posMode:Ct.OneWay,positions:[F],contract:D,leverageOptions:K};{const X=L.find(({posSide:me})=>me==="Long"),ee=ui.createRealRiskLimit(X,R,z),Z=Ki(D,X,N,ee,H),ue=L.find(({posSide:me})=>me==="Short"),ce=ui.createRealRiskLimit(ue,R,z),pe=Ki(D,ue,N,ce,H);return{posMode:Ct.Hedge,positions:L,contract:D,leverageOptions:Z,leverageOptionsShort:pe}}}}function I(D,L,$){const{type:N}=D;if(N==="Perpetual"&&L.map(({isCross:z,leverageX:H})=>{t(1,v={label:T(o,z),value:`<span class="default">${H}</span>`})}),N==="PerpetualV2"&&($===Ct.OneWay&&L.filter(({posSide:H})=>H==="Merged").map(({isCross:H,leverageX:R})=>{t(1,v={label:T(o,H),value:`<span class="default">${R}</span>`})}),$===Ct.Hedge)){const z=L.filter(({posSide:F})=>F!=="Merged"),H=z.map(({posSide:F,leverageX:U})=>`<span class='${F.toLowerCase()} mr4'> ${F} ${U}</span>`).join(""),R=z.every(({isCross:F})=>F);t(1,v={label:T(o,R),value:H})}}function T(D,L){return D(on[L?"Cross":"Isolated"])}function C(){t(2,g=!g)}function V(D){return async function(){if(!s){Xl.gotoLogin(l(Os()?cn.LOGIN:cn.REGISTER));return}const{symbol:L,type:$}=_,N={symbol:L,type:$},z=D==="CROSS";if($==="Perpetual"){const H=O("Merged"),R=z?-H:H;Object.assign(N,{leverageEr:R})}if($==="PerpetualV2"){if(r===Ct.Hedge){const H=O("Long"),R=O("Short"),F=xe.floor(z?-H:H,2),U=xe.floor(z?-R:R,2);Object.assign(N,{longLeverageRr:F,shortLeverageRr:U})}if(r===Ct.OneWay){const H=O("Merged"),R=xe.floor(z?-H:H,2);Object.assign(N,{leverageRr:R})}}await Cp(N)}}function O(D){const{leverageEr:L}=i.find(({posSide:$})=>$===D);return L}const w=()=>t(2,g=!1);return n.$$set=D=>{"contract"in D&&t(7,_=D.contract)},n.$$.update=()=>{n.$$.dirty&385&&I(_,i,r)},[r,v,g,h,b,C,V,_,i,w]}let tv=class extends tt{constructor(e){super(),nt(this,e,ev,x2,et,{contract:7})}};function nc(n){let e,t;return e=new C_({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function ic(n){let e,t,i,r,l,s,o=n[11](Ye.CopyTradingIs)+"",a,c,f,p,d,h;return{c(){e=y("div"),t=y("div"),i=y("i"),r=B(""),l=q(),s=y("span"),a=B(o),c=q(),f=y("i"),p=B(""),this.h()},l(_){e=k(_,"DIV",{class:!0});var v=S(e);t=k(v,"DIV",{class:!0});var g=S(t);i=k(g,"I",{class:!0});var b=S(i);r=A(b,""),b.forEach(m),l=M(g),s=k(g,"SPAN",{class:!0});var P=S(s);a=A(P,o),P.forEach(m),g.forEach(m),c=M(v),f=k(v,"I",{class:!0});var I=S(f);p=A(I,""),I.forEach(m),v.forEach(m),this.h()},h(){E(i,"class","iconfont f12"),E(s,"class","ml6"),E(t,"class","df f1"),E(f,"class","iconfont close T3 cp f12 H-12z2oyj"),E(e,"class","ct-info df mt12 br4 B2 f12 H-12z2oyj")},m(_,v){G(_,e,v),u(e,t),u(t,i),u(i,r),u(t,l),u(t,s),u(s,a),u(e,c),u(e,f),u(f,p),d||(h=We(f,"click",n[13]),d=!0)},p(_,v){v&2048&&o!==(o=_[11](Ye.CopyTradingIs)+"")&&W(a,o)},d(_){_&&m(e),d=!1,h()}}}function rc(n){let e,t,i,r,l,s;e=new gn({props:{active:n[6]===Ot.Limit,$$slots:{default:[nv]},$$scope:{ctx:n}}}),i=new gn({props:{active:n[6]===Ot.Market,$$slots:{default:[iv]},$$scope:{ctx:n}}});let o=n[6]===Ot.Conditional&&lc(n);return{c(){te(e.$$.fragment),t=q(),te(i.$$.fragment),r=q(),o&&o.c(),l=ut()},l(a){re(e.$$.fragment,a),t=M(a),re(i.$$.fragment,a),r=M(a),o&&o.l(a),l=ut()},m(a,c){ne(e,a,c),G(a,t,c),ne(i,a,c),G(a,r,c),o&&o.m(a,c),G(a,l,c),s=!0},p(a,c){const f={};c&64&&(f.active=a[6]===Ot.Limit),c&536871225&&(f.$$scope={dirty:c,ctx:a}),e.$set(f);const p={};c&64&&(p.active=a[6]===Ot.Market),c&536871225&&(p.$$scope={dirty:c,ctx:a}),i.$set(p),a[6]===Ot.Conditional?o?(o.p(a,c),c&64&&Q(o,1)):(o=lc(a),o.c(),Q(o,1),o.m(l.parentNode,l)):o&&(ot(),j(o,1,1,()=>{o=null}),at())},i(a){s||(Q(e.$$.fragment,a),Q(i.$$.fragment,a),Q(o),s=!0)},o(a){j(e.$$.fragment,a),j(i.$$.fragment,a),j(o),s=!1},d(a){ie(e,a),a&&m(t),ie(i,a),a&&m(r),o&&o.d(a),a&&m(l)}}}function nv(n){let e,t,i;function r(s){n[20](s)}let l={contract:n[3],market:n[4],maxQty:n[8],account:n[5]};return n[0]!==void 0&&(l.priceEp=n[0]),e=new s_({props:l}),De.push(()=>qe(e,"priceEp",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o&8&&(a.contract=s[3]),o&16&&(a.market=s[4]),o&256&&(a.maxQty=s[8]),o&32&&(a.account=s[5]),!t&&o&1&&(t=!0,a.priceEp=s[0],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function iv(n){let e,t,i;function r(s){n[21](s)}let l={contract:n[3],market:n[4],maxQty:n[8],account:n[5]};return n[0]!==void 0&&(l.priceEp=n[0]),e=new n_({props:l}),De.push(()=>qe(e,"priceEp",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o&8&&(a.contract=s[3]),o&16&&(a.market=s[4]),o&256&&(a.maxQty=s[8]),o&32&&(a.account=s[5]),!t&&o&1&&(t=!0,a.priceEp=s[0],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function lc(n){let e,t,i,r;return e=new gn({props:{active:[qt.Limit,qt.Market].includes(n[7]),$$slots:{default:[rv]},$$scope:{ctx:n}}}),i=new gn({props:{active:[qt.ScaledOrder].includes(n[7]),$$slots:{default:[lv]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment),t=q(),te(i.$$.fragment)},l(l){re(e.$$.fragment,l),t=M(l),re(i.$$.fragment,l)},m(l,s){ne(e,l,s),G(l,t,s),ne(i,l,s),r=!0},p(l,s){const o={};s&128&&(o.active=[qt.Limit,qt.Market].includes(l[7])),s&536871353&&(o.$$scope={dirty:s,ctx:l}),e.$set(o);const a={};s&128&&(a.active=[qt.ScaledOrder].includes(l[7])),s&536870952&&(a.$$scope={dirty:s,ctx:l}),i.$set(a)},i(l){r||(Q(e.$$.fragment,l),Q(i.$$.fragment,l),r=!0)},o(l){j(e.$$.fragment,l),j(i.$$.fragment,l),r=!1},d(l){ie(e,l),l&&m(t),ie(i,l)}}}function rv(n){let e,t,i,r;function l(a){n[22](a)}function s(a){n[23](a)}let o={contract:n[3],market:n[4],maxQty:n[8],account:n[5]};return n[7]!==void 0&&(o.conditionalType=n[7]),n[0]!==void 0&&(o.priceEp=n[0]),e=new x0({props:o}),De.push(()=>qe(e,"conditionalType",l)),De.push(()=>qe(e,"priceEp",s)),{c(){te(e.$$.fragment)},l(a){re(e.$$.fragment,a)},m(a,c){ne(e,a,c),r=!0},p(a,c){const f={};c&8&&(f.contract=a[3]),c&16&&(f.market=a[4]),c&256&&(f.maxQty=a[8]),c&32&&(f.account=a[5]),!t&&c&128&&(t=!0,f.conditionalType=a[7],Me(()=>t=!1)),!i&&c&1&&(i=!0,f.priceEp=a[0],Me(()=>i=!1)),e.$set(f)},i(a){r||(Q(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){ie(e,a)}}}function lv(n){let e,t;return e=new Yp({props:{contract:n[3],account:n[5]}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&8&&(l.contract=i[3]),r&32&&(l.account=i[5]),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function sc(n){let e,t,i,r,l,s;e=new gn({props:{active:n[6]===Ot.Limit,$$slots:{default:[sv]},$$scope:{ctx:n}}}),i=new gn({props:{active:n[6]===Ot.Market,$$slots:{default:[ov]},$$scope:{ctx:n}}});let o=n[6]===Ot.Conditional&&oc(n);return{c(){te(e.$$.fragment),t=q(),te(i.$$.fragment),r=q(),o&&o.c(),l=ut()},l(a){re(e.$$.fragment,a),t=M(a),re(i.$$.fragment,a),r=M(a),o&&o.l(a),l=ut()},m(a,c){ne(e,a,c),G(a,t,c),ne(i,a,c),G(a,r,c),o&&o.m(a,c),G(a,l,c),s=!0},p(a,c){const f={};c&64&&(f.active=a[6]===Ot.Limit),c&536870969&&(f.$$scope={dirty:c,ctx:a}),e.$set(f);const p={};c&64&&(p.active=a[6]===Ot.Market),c&536870969&&(p.$$scope={dirty:c,ctx:a}),i.$set(p),a[6]===Ot.Conditional?o?(o.p(a,c),c&64&&Q(o,1)):(o=oc(a),o.c(),Q(o,1),o.m(l.parentNode,l)):o&&(ot(),j(o,1,1,()=>{o=null}),at())},i(a){s||(Q(e.$$.fragment,a),Q(i.$$.fragment,a),Q(o),s=!0)},o(a){j(e.$$.fragment,a),j(i.$$.fragment,a),j(o),s=!1},d(a){ie(e,a),a&&m(t),ie(i,a),a&&m(r),o&&o.d(a),a&&m(l)}}}function sv(n){let e,t,i;function r(s){n[24](s)}let l={contract:n[3],market:n[4],account:n[5]};return n[0]!==void 0&&(l.priceEp=n[0]),e=new h_({props:l}),De.push(()=>qe(e,"priceEp",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o&8&&(a.contract=s[3]),o&16&&(a.market=s[4]),o&32&&(a.account=s[5]),!t&&o&1&&(t=!0,a.priceEp=s[0],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function ov(n){let e,t,i;function r(s){n[25](s)}let l={contract:n[3],market:n[4],account:n[5]};return n[0]!==void 0&&(l.priceEp=n[0]),e=new v_({props:l}),De.push(()=>qe(e,"priceEp",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o&8&&(a.contract=s[3]),o&16&&(a.market=s[4]),o&32&&(a.account=s[5]),!t&&o&1&&(t=!0,a.priceEp=s[0],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function oc(n){let e,t,i,r;return e=new gn({props:{active:[qt.Limit,qt.Market].includes(n[7]),$$slots:{default:[av]},$$scope:{ctx:n}}}),i=new gn({props:{active:[qt.ScaledOrder].includes(n[7]),$$slots:{default:[cv]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment),t=q(),te(i.$$.fragment)},l(l){re(e.$$.fragment,l),t=M(l),re(i.$$.fragment,l)},m(l,s){ne(e,l,s),G(l,t,s),ne(i,l,s),r=!0},p(l,s){const o={};s&128&&(o.active=[qt.Limit,qt.Market].includes(l[7])),s&536871097&&(o.$$scope={dirty:s,ctx:l}),e.$set(o);const a={};s&128&&(a.active=[qt.ScaledOrder].includes(l[7])),s&536870952&&(a.$$scope={dirty:s,ctx:l}),i.$set(a)},i(l){r||(Q(e.$$.fragment,l),Q(i.$$.fragment,l),r=!0)},o(l){j(e.$$.fragment,l),j(i.$$.fragment,l),r=!1},d(l){ie(e,l),l&&m(t),ie(i,l)}}}function av(n){let e,t,i,r;function l(a){n[26](a)}function s(a){n[27](a)}let o={contract:n[3],market:n[4],account:n[5]};return n[7]!==void 0&&(o.conditionalType=n[7]),n[0]!==void 0&&(o.priceEp=n[0]),e=new k_({props:o}),De.push(()=>qe(e,"conditionalType",l)),De.push(()=>qe(e,"priceEp",s)),{c(){te(e.$$.fragment)},l(a){re(e.$$.fragment,a)},m(a,c){ne(e,a,c),r=!0},p(a,c){const f={};c&8&&(f.contract=a[3]),c&16&&(f.market=a[4]),c&32&&(f.account=a[5]),!t&&c&128&&(t=!0,f.conditionalType=a[7],Me(()=>t=!1)),!i&&c&1&&(i=!0,f.priceEp=a[0],Me(()=>i=!1)),e.$set(f)},i(a){r||(Q(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){ie(e,a)}}}function cv(n){let e,t;return e=new Yp({props:{contract:n[3],account:n[5]}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&8&&(l.contract=i[3]),r&32&&(l.account=i[5]),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function ac(n){let e,t,i,r;return e=new mr({props:{component:fg}}),i=new mr({props:{component:bg}}),{c(){te(e.$$.fragment),t=q(),te(i.$$.fragment)},l(l){re(e.$$.fragment,l),t=M(l),re(i.$$.fragment,l)},m(l,s){ne(e,l,s),G(l,t,s),ne(i,l,s),r=!0},p:rt,i(l){r||(Q(e.$$.fragment,l),Q(i.$$.fragment,l),r=!0)},o(l){j(e.$$.fragment,l),j(i.$$.fragment,l),r=!1},d(l){ie(e,l),l&&m(t),ie(i,l)}}}function fv(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v;t=new tv({props:{contract:n[3]}});let g=n[3].type==="PerpetualV2"&&n[1]===Ct.Hedge&&nc(),b=n[9]&&n[10]&&ic(n);function P(w){n[18](w)}function I(w){n[19](w)}let T={};n[7]!==void 0&&(T.conditionalType=n[7]),n[6]!==void 0&&(T.tabType=n[6]),o=new Ch({props:T}),De.push(()=>qe(o,"conditionalType",P)),De.push(()=>qe(o,"tabType",I));let C=(n[3]&&n[3].type==="Perpetual"||n[3].type==="PerpetualV2"&&n[2]===Ut.Open)&&rc(n),V=n[3].type==="PerpetualV2"&&n[2]===Ut.Close&&sc(n),O=n[12]==="Login"&&ac();return{c(){e=y("div"),te(t.$$.fragment),i=q(),g&&g.c(),r=q(),l=y("div"),b&&b.c(),s=q(),te(o.$$.fragment),f=q(),p=y("div"),C&&C.c(),d=q(),V&&V.c(),h=q(),O&&O.c(),_=ut(),this.h()},l(w){e=k(w,"DIV",{class:!0});var D=S(e);re(t.$$.fragment,D),i=M(D),g&&g.l(D),r=M(D),l=k(D,"DIV",{});var L=S(l);b&&b.l(L),s=M(L),re(o.$$.fragment,L),L.forEach(m),f=M(D),p=k(D,"DIV",{class:!0});var $=S(p);C&&C.l($),d=M($),V&&V.l($),$.forEach(m),D.forEach(m),h=M(w),O&&O.l(w),_=ut(),this.h()},h(){E(p,"class","f1 pr"),E(e,"class","pr ph16")},m(w,D){G(w,e,D),ne(t,e,null),u(e,i),g&&g.m(e,null),u(e,r),u(e,l),b&&b.m(l,null),u(l,s),ne(o,l,null),u(e,f),u(e,p),C&&C.m(p,null),u(p,d),V&&V.m(p,null),G(w,h,D),O&&O.m(w,D),G(w,_,D),v=!0},p(w,[D]){const L={};D&8&&(L.contract=w[3]),t.$set(L),w[3].type==="PerpetualV2"&&w[1]===Ct.Hedge?g?D&10&&Q(g,1):(g=nc(),g.c(),Q(g,1),g.m(e,r)):g&&(ot(),j(g,1,1,()=>{g=null}),at()),w[9]&&w[10]?b?b.p(w,D):(b=ic(w),b.c(),b.m(l,s)):b&&(b.d(1),b=null);const $={};!a&&D&128&&(a=!0,$.conditionalType=w[7],Me(()=>a=!1)),!c&&D&64&&(c=!0,$.tabType=w[6],Me(()=>c=!1)),o.$set($),w[3]&&w[3].type==="Perpetual"||w[3].type==="PerpetualV2"&&w[2]===Ut.Open?C?(C.p(w,D),D&12&&Q(C,1)):(C=rc(w),C.c(),Q(C,1),C.m(p,d)):C&&(ot(),j(C,1,1,()=>{C=null}),at()),w[3].type==="PerpetualV2"&&w[2]===Ut.Close?V?(V.p(w,D),D&12&&Q(V,1)):(V=sc(w),V.c(),Q(V,1),V.m(p,null)):V&&(ot(),j(V,1,1,()=>{V=null}),at()),w[12]==="Login"?O?(O.p(w,D),D&4096&&Q(O,1)):(O=ac(),O.c(),Q(O,1),O.m(_.parentNode,_)):O&&(ot(),j(O,1,1,()=>{O=null}),at())},i(w){v||(Q(t.$$.fragment,w),Q(g),Q(o.$$.fragment,w),Q(C),Q(V),Q(O),v=!0)},o(w){j(t.$$.fragment,w),j(g),j(o.$$.fragment,w),j(C),j(V),j(O),v=!1},d(w){w&&m(e),ie(t),g&&g.d(),b&&b.d(),ie(o),C&&C.d(),V&&V.d(),w&&m(h),O&&O.d(w),w&&m(_)}}}function uv(n,e,t){let i,r,l,s,o,a,c,f,p;J(n,_n,F=>t(1,i=F)),J(n,Xt,F=>t(14,r=F)),J(n,kn,F=>t(2,l=F)),J(n,Sn,F=>t(15,s=F)),J(n,Hi,F=>t(16,o=F)),J(n,or,F=>t(17,a=F)),J(n,Kd,F=>t(10,c=F)),J(n,dt,F=>t(11,f=F)),J(n,yr,F=>t(12,p=F));let d,h,_,v=null,g=qt.Limit,b=0,P,I=!0;Lt(()=>{var F;const U=vn.readContractStorage();U&&U.timestamp&&t(9,I=Date.now()-(((F=U.timestamp)===null||F===void 0?void 0:F.ct)||0)>864e5)});function T(F,U){U===Ct.OneWay&&kn.next(Ut.Open)}function C(){t(9,I=!I);const{timestamp:F}=vn.readContractStorage(),U=Object.assign(Object.assign({},F),{ct:Date.now()});vn.updateContractStorage({timestamp:U})}function V(F){g=F,t(7,g)}function O(F){v=F,t(6,v)}function w(F){b=F,t(0,b)}function D(F){b=F,t(0,b)}function L(F){g=F,t(7,g)}function $(F){b=F,t(0,b)}function N(F){b=F,t(0,b)}function z(F){b=F,t(0,b)}function H(F){g=F,t(7,g)}function R(F){b=F,t(0,b)}return n.$$.update=()=>{n.$$.dirty&16384&&t(3,d=r),n.$$.dirty&131072&&t(4,h=a),n.$$.dirty&65536&&t(5,_=o),n.$$.dirty&114695&&t(8,P=hr(r,o,s,l,i,b)),n.$$.dirty&16386&&T(r,i)},[b,i,l,d,h,_,v,g,P,I,c,f,p,C,r,s,o,a,V,O,w,D,L,$,N,z,H,R]}let pv=class extends tt{constructor(e){super(),nt(this,e,uv,fv,et,{})}};function cc(n){let e,t,i=n[3](Xi.StandardMode)+"",r,l,s,o=n[3](Xi.TradingBotMode)+"",a,c,f;return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),s=y("div"),a=B(o),this.h()},l(p){e=k(p,"DIV",{class:!0});var d=S(e);t=k(d,"DIV",{class:!0});var h=S(t);r=A(h,i),h.forEach(m),l=M(d),s=k(d,"DIV",{class:!0});var _=S(s);a=A(_,o),_.forEach(m),d.forEach(m),this.h()},h(){E(t,"class","zd-manual f1 H-1rpng1h"),Te(t,"active",n[1]==="Standard"),E(s,"class","zd-strategy f1 H-1rpng1h"),Te(s,"active",n[1]==="Strategy"),E(e,"class","strategy-tabs df f14 cp H-1rpng1h")},m(p,d){G(p,e,d),u(e,t),u(t,r),u(e,l),u(e,s),u(s,a),c||(f=[We(t,"click",n[5]),We(s,"click",n[6])],c=!0)},p(p,d){d&8&&i!==(i=p[3](Xi.StandardMode)+"")&&W(r,i),d&2&&Te(t,"active",p[1]==="Standard"),d&8&&o!==(o=p[3](Xi.TradingBotMode)+"")&&W(a,o),d&2&&Te(s,"active",p[1]==="Strategy")},d(p){p&&m(e),c=!1,jt(f)}}}function dv(n){let e,t;return e=new pv({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function mv(n){let e,t;return e=new T1({props:{entryType:"Contract"}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p:rt,i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function hv(n){let e,t,i,r,l,s,o=n[0]&&n[2]==="Home"&&cc(n);return i=new gn({props:{active:n[1]==="Standard",$$slots:{default:[dv]},$$scope:{ctx:n}}}),l=new gn({props:{active:n[1]==="Strategy",$$slots:{default:[mv]},$$scope:{ctx:n}}}),{c(){e=y("section"),o&&o.c(),t=q(),te(i.$$.fragment),r=q(),te(l.$$.fragment),this.h()},l(a){e=k(a,"SECTION",{class:!0});var c=S(e);o&&o.l(c),t=M(c),re(i.$$.fragment,c),r=M(c),re(l.$$.fragment,c),c.forEach(m),this.h()},h(){E(e,"class","wrap df fdc wp100 B1 g12 H-1rpng1h")},m(a,c){G(a,e,c),o&&o.m(e,null),u(e,t),ne(i,e,null),u(e,r),ne(l,e,null),s=!0},p(a,[c]){a[0]&&a[2]==="Home"?o?o.p(a,c):(o=cc(a),o.c(),o.m(e,t)):o&&(o.d(1),o=null);const f={};c&2&&(f.active=a[1]==="Standard"),c&256&&(f.$$scope={dirty:c,ctx:a}),i.$set(f);const p={};c&2&&(p.active=a[1]==="Strategy"),c&256&&(p.$$scope={dirty:c,ctx:a}),l.$set(p)},i(a){s||(Q(i.$$.fragment,a),Q(l.$$.fragment,a),s=!0)},o(a){j(i.$$.fragment,a),j(l.$$.fragment,a),s=!1},d(a){a&&m(e),o&&o.d(),ie(i),ie(l)}}}function _v(n,e,t){let i,r,l,s,o;J(n,qs,p=>t(7,i=p)),J(n,$s,p=>t(0,r=p)),J(n,kl,p=>t(4,l=p)),J(n,sl,p=>t(2,s=p)),J(n,dt,p=>t(3,o=p));let a="";Lt(()=>{if(!r)return;const p=op.parseUrl(i);p.isStrategy&&kl.next("Strategy"),p.type==="contract_grid"&&sl.next("Grid"),p.type==="contract_martin"&&sl.next("Martingale"),p.type==="contract_signal"&&sl.next("Signal")});const c=()=>kl.next("Standard"),f=()=>kl.next("Strategy");return n.$$.update=()=>{n.$$.dirty&16&&t(1,a=l),n.$$.dirty&1&&!r&&t(1,a="Standard")},[r,a,s,o,l,c,f]}let gv=class extends tt{constructor(e){super(),nt(this,e,_v,hv,et,{})}};const Wi={MarginLevel:"f685c5",MaintenanceMargin:"61f131",MarginBalance:"a1287d"};function fc(n,e,t){const i=n.slice();return i[17]=e[t],i[19]=t,i}function vv(n){let e=n[4](Wi.MarginLevel)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&16&&e!==(e=i[4](Wi.MarginLevel)+"")&&W(t,e)},d(i){i&&m(t)}}}function uc(n){let e,t;return{c(){e=y("i"),t=B(""),this.h()},l(i){e=k(i,"I",{class:!0});var r=S(e);t=A(r,""),r.forEach(m),this.h()},h(){E(e,"class","iconfont f12 H-1c6w3v5"),Te(e,"animation",n[5])},m(i,r){G(i,e,r),u(e,t)},p(i,r){r&32&&Te(e,"animation",i[5])},d(i){i&&m(e)}}}function pc(n){let e,t=(n[17].side==="Buy"?n[4](He.Long):n[4](He.Short))+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ml-side f12 br4"),Te(e,"ml-long",n[17].side==="Buy"),Te(e,"ml-short",n[17].side==="Sell")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&17&&t!==(t=(r[17].side==="Buy"?r[4](He.Long):r[4](He.Short))+"")&&W(i,t),l&1&&Te(e,"ml-long",r[17].side==="Buy"),l&1&&Te(e,"ml-short",r[17].side==="Sell")},d(r){r&&m(e)}}}function dc(n){let e,t=n[17].symbol+"",i,r,l,s=n[17].mode+"",o,a,c,f,p,d=n[17].side&&pc(n);return{c(){e=y("div"),i=B(t),r=q(),l=y("span"),o=B(s),a=q(),d&&d.c(),c=q(),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=S(e);i=A(_,t),r=M(_),l=k(_,"SPAN",{class:!0});var v=S(l);o=A(v,s),v.forEach(m),a=M(_),d&&d.l(_),c=M(_),_.forEach(m),this.h()},h(){E(l,"class","mode H-1c6w3v5"),E(e,"class","row df aic lh32 ph12 cp f12 H-1c6w3v5"),Te(e,"BLUE",n[19]===n[1])},m(h,_){G(h,e,_),u(e,i),u(e,r),u(e,l),u(l,o),u(e,a),d&&d.m(e,null),u(e,c),f||(p=We(e,"click",n[9](n[19])),f=!0)},p(h,_){n=h,_&1&&t!==(t=n[17].symbol+"")&&W(i,t),_&1&&s!==(s=n[17].mode+"")&&W(o,s),n[17].side?d?d.p(n,_):(d=pc(n),d.c(),d.m(e,c)):d&&(d.d(1),d=null),_&2&&Te(e,"BLUE",n[19]===n[1])},d(h){h&&m(e),d&&d.d(),f=!1,p()}}}function mc(n){let e,t;return{c(){e=y("img"),this.h()},l(i){e=k(i,"IMG",{width:!0,src:!0,alt:!0}),this.h()},h(){E(e,"width","26"),hn(e.src,t=n[3].img)||E(e,"src",t),E(e,"alt","margin level")},m(i,r){G(i,e,r)},p(i,r){r&8&&!hn(e.src,t=i[3].img)&&E(e,"src",t)},d(i){i&&m(e)}}}function bv(n){let e,t;return{c(){e=y("span"),t=B("N/A"),this.h()},l(i){e=k(i,"SPAN",{class:!0});var r=S(e);t=A(r,"N/A"),r.forEach(m),this.h()},h(){E(e,"class","ml4")},m(i,r){G(i,e,r),u(e,t)},p:rt,d(i){i&&m(e)}}}function Ev(n){let e,t=n[3].marginRatio+"",i,r;return{c(){e=y("span"),i=B(t),this.h()},l(l){e=k(l,"SPAN",{class:!0});var s=S(e);i=A(s,t),s.forEach(m),this.h()},h(){E(e,"class",r="ml4 "+n[3].level+" H-1c6w3v5")},m(l,s){G(l,e,s),u(e,i)},p(l,s){s&8&&t!==(t=l[3].marginRatio+"")&&W(i,t),s&8&&r!==(r="ml4 "+l[3].level+" H-1c6w3v5")&&E(e,"class",r)},d(l){l&&m(e)}}}function yv(n){let e,t,i=n[3].img&&mc(n);function r(o,a){return o[2].length>0?Ev:bv}let l=r(n),s=l(n);return{c(){e=y("div"),i&&i.c(),t=q(),s.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=S(e);i&&i.l(a),t=M(a),s.l(a),a.forEach(m),this.h()},h(){E(e,"class","df aic")},m(o,a){G(o,e,a),i&&i.m(e,null),u(e,t),s.m(e,null)},p(o,a){o[3].img?i?i.p(o,a):(i=mc(o),i.c(),i.m(e,t)):i&&(i.d(1),i=null),l===(l=r(o))&&s?s.p(o,a):(s.d(1),s=l(o),s&&(s.c(),s.m(e,null)))},d(o){o&&m(e),i&&i.d(),s.d()}}}function kv(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T;t=new Rs({props:{$$slots:{default:[vv]},$$scope:{ctx:n}}});let C=n[6]&&uc(n),V=n[0],O=[];for(let w=0;w<V.length;w+=1)O[w]=dc(fc(n,V,w));return h=new Hn({props:{label:n[4](Wi.MarginLevel),tooltips:n[4](vt.MarginLevel2),$$slots:{default:[yv]},$$scope:{ctx:n}}}),v=new Hn({props:{label:n[4](Wi.MarginBalance),info:n[3].totalEquity+" "+n[3].currency,tooltips:n[10](n[4])}}),b=new Hn({props:{label:n[4](Wi.MaintenanceMargin),info:n[3].maintenanceMargin+" "+n[3].currency}}),{c(){e=y("div"),te(t.$$.fragment),i=q(),r=y("div"),l=y("div"),s=y("div"),o=y("span"),a=q(),C&&C.c(),c=q(),f=y("ul");for(let w=0;w<O.length;w+=1)O[w].c();p=q(),d=y("div"),te(h.$$.fragment),_=q(),te(v.$$.fragment),g=q(),te(b.$$.fragment),this.h()},l(w){e=k(w,"DIV",{class:!0});var D=S(e);re(t.$$.fragment,D),i=M(D),r=k(D,"DIV",{class:!0});var L=S(r);l=k(L,"DIV",{class:!0});var $=S(l);s=k($,"DIV",{class:!0});var N=S(s);o=k(N,"SPAN",{class:!0});var z=S(o);z.forEach(m),a=M(N),C&&C.l(N),N.forEach(m),c=M($),f=k($,"UL",{class:!0});var H=S(f);for(let F=0;F<O.length;F+=1)O[F].l(H);H.forEach(m),$.forEach(m),L.forEach(m),p=M(D),d=k(D,"DIV",{class:!0});var R=S(d);re(h.$$.fragment,R),_=M(R),re(v.$$.fragment,R),g=M(R),re(b.$$.fragment,R),R.forEach(m),D.forEach(m),this.h()},h(){E(o,"class","f12 T1 fw2"),E(s,"class","select df aic jcsb br4 B2 cp usn H-1c6w3v5"),E(f,"class","pa options ovh sv H-1c6w3v5"),Te(f,"dropdown",n[5]),E(l,"class","pr"),E(r,"class","select-wrap H-1c6w3v5"),E(d,"class","pt10"),E(e,"class","wrap H-1c6w3v5")},m(w,D){G(w,e,D),ne(t,e,null),u(e,i),u(e,r),u(r,l),u(l,s),u(s,o),o.innerHTML=n[7],u(s,a),C&&C.m(s,null),u(l,c),u(l,f);for(let L=0;L<O.length;L+=1)O[L]&&O[L].m(f,null);u(e,p),u(e,d),ne(h,d,null),u(d,_),ne(v,d,null),u(d,g),ne(b,d,null),P=!0,I||(T=[We(s,"click",n[8]),We(e,"mouseleave",n[13])],I=!0)},p(w,[D]){const L={};if(D&1048592&&(L.$$scope={dirty:D,ctx:w}),t.$set(L),(!P||D&128)&&(o.innerHTML=w[7]),w[6]?C?C.p(w,D):(C=uc(w),C.c(),C.m(s,null)):C&&(C.d(1),C=null),D&531){V=w[0];let H;for(H=0;H<V.length;H+=1){const R=fc(w,V,H);O[H]?O[H].p(R,D):(O[H]=dc(R),O[H].c(),O[H].m(f,null))}for(;H<O.length;H+=1)O[H].d(1);O.length=V.length}(!P||D&32)&&Te(f,"dropdown",w[5]);const $={};D&16&&($.label=w[4](Wi.MarginLevel)),D&16&&($.tooltips=w[4](vt.MarginLevel2)),D&1048588&&($.$$scope={dirty:D,ctx:w}),h.$set($);const N={};D&16&&(N.label=w[4](Wi.MarginBalance)),D&8&&(N.info=w[3].totalEquity+" "+w[3].currency),D&16&&(N.tooltips=w[10](w[4])),v.$set(N);const z={};D&16&&(z.label=w[4](Wi.MaintenanceMargin)),D&8&&(z.info=w[3].maintenanceMargin+" "+w[3].currency),b.$set(z)},i(w){P||(Q(t.$$.fragment,w),Q(h.$$.fragment,w),Q(v.$$.fragment,w),Q(b.$$.fragment,w),P=!0)},o(w){j(t.$$.fragment,w),j(h.$$.fragment,w),j(v.$$.fragment,w),j(b.$$.fragment,w),P=!1},d(w){w&&m(e),ie(t),C&&C.d(),wn(O,w),ie(h),ie(v),ie(b),I=!1,jt(T)}}}function Pv(n,e,t){let i,r,l;J(n,dt,T=>t(4,i=T)),J(n,Xd,T=>t(11,r=T)),J(n,Ai,T=>t(12,l=T));let s=[],o=!1,a=!1,c="-",f=0,p,d={marginRatio:"-",img:Pl.Level1,totalEquity:"-",maintenanceMargin:"-",currency:"-",level:"low"};function h(T,C){t(0,s=T.filter(({symbol:V,side:O})=>{const w=C.find(D=>D.symbol===V&&D.side===O);return V?((w==null?void 0:w.size)||0)>0&&O===w.side:!0}).map(V=>{const{symbol:O,posSide:w,currency:D}=V;return Object.assign(Object.assign({},V),{symbol:O||"USDT",posSide:w,currency:D,mode:O?"Isolated":"Cross"})}))}function _(T,C){C.find(({side:O,symbol:w})=>O===(T==null?void 0:T.side)&&w===(T==null?void 0:T.symbol))||t(1,f=0)}function v(T,C,V){const O=C[T];if(!O)return;const{symbol:w,currency:D,side:L,mode:$,marginRatioRr:N}=O,z=L?V(L==="Buy"?He.Long:He.Short):"",H=`<span class="ml-side f12 br4 ${L?L==="Buy"?"ml-long":"ml-short":""}">${z}</span>`;t(7,c=w?`${w} ${$} ${H}`:`${D} Cross ${H}`);const R=N*100;let F,U;R>200||R===0?(F=Pl.Level1,U="low"):R>120&&R<=200?(F=Pl.Level2,U="middle"):(F=Pl.Level3,U="high"),t(3,d=Object.assign(Object.assign({},O),{img:F,level:U}))}function g(){a&&t(5,o=!o)}function b(T){return function(){t(1,f=T),t(5,o=!o)}}function P(T){return T(vt.MarginBalanceCross)+'</br><div class="mt10">'+T(vt.MarginBalanceIsolated)+"</div>"}const I=()=>t(5,o=!1);return n.$$.update=()=>{n.$$.dirty&4096&&t(2,p=(l||[]).filter(({size:T})=>T>0)),n.$$.dirty&2052&&h(r,p),n.$$.dirty&19&&v(f,s,i),n.$$.dirty&1&&t(6,a=s.length>1),n.$$.dirty&12&&_(d,p)},[s,f,p,d,i,o,a,c,g,b,P,r,l,I]}let Sv=class extends tt{constructor(e){super(),nt(this,e,Pv,kv,et,{})}};const vi={Assets:"4ba567",More:"3918ae",BuyCrypto:"cbb72f",Deposit:"c2e77b",Transfer:"1abfcc",TotalEquity:"8463bc",TotalBalance:"da9f15",UnrealisedPNL:"c75e33"};function Cv(n){let e,t=n[2](vi.More)+"",i,r;return{c(){e=y("a"),i=B(t),this.h()},l(l){e=k(l,"A",{class:!0,href:!0});var s=S(e);i=A(s,t),s.forEach(m),this.h()},h(){E(e,"class","pr16 f12"),E(e,"href",r=n[3](cn.ASSETS_OVERVIEW)+"?tab=contract")},m(l,s){G(l,e,s),u(e,i)},p(l,s){s&4&&t!==(t=l[2](vi.More)+"")&&W(i,t),s&8&&r!==(r=l[3](cn.ASSETS_OVERVIEW)+"?tab=contract")&&E(e,"href",r)},d(l){l&&m(e)}}}function Tv(n){let e,t=n[2](vi.Assets)+"",i,r,l,s=!n[5]&&Cv(n);return{c(){e=y("span"),i=B(t),r=q(),s&&s.c(),l=ut(),this.h()},l(o){e=k(o,"SPAN",{class:!0});var a=S(e);i=A(a,t),a.forEach(m),r=M(o),s&&s.l(o),l=ut(),this.h()},h(){E(e,"class","f1")},m(o,a){G(o,e,a),u(e,i),G(o,r,a),s&&s.m(o,a),G(o,l,a)},p(o,a){a&4&&t!==(t=o[2](vi.Assets)+"")&&W(i,t),o[5]||s.p(o,a)},d(o){o&&m(e),o&&m(r),s&&s.d(o),o&&m(l)}}}function wv(n){let e,t,i;return t=new w1({props:{fromAccount:n[4]?Ir.UtaFundAccount:Ir.SpotWallet,toAccount:Ir.ContractsAccount,convertType:um.ContractAccount}}),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);re(t.$$.fragment,l),l.forEach(m),this.h()},h(){E(e,"class","mb8")},m(r,l){G(r,e,l),ne(t,e,null),i=!0},p(r,l){const s={};l&16&&(s.fromAccount=r[4]?Ir.UtaFundAccount:Ir.SpotWallet),t.$set(s)},i(r){i||(Q(t.$$.fragment,r),i=!0)},o(r){j(t.$$.fragment,r),i=!1},d(r){r&&m(e),ie(t)}}}function Iv(n){let e,t,i,r,l,s,o,a,c,f,p;t=new Rs({props:{style:"display: flex;",$$slots:{default:[Tv]},$$scope:{ctx:n}}});let d=!n[5]&&wv(n);return s=new Hn({props:{label:n[2](vi.TotalEquity),info:n[1].equity+" "+n[0].settleCurrency,tooltips:n[2](vt.TotalEquity)}}),a=new Hn({props:{label:n[2](vi.TotalBalance),info:n[1].accountBalance+" "+n[0].settleCurrency,tooltips:n[2](vt.TotalAssets)}}),f=new Hn({props:{label:n[2](vi.UnrealisedPNL),info:n[1].unrealisedPnl+" "+n[0].settleCurrency,tooltips:n[2](vt.AssetsUnrealisedPNL)}}),{c(){e=y("div"),te(t.$$.fragment),i=q(),r=y("div"),d&&d.c(),l=q(),te(s.$$.fragment),o=q(),te(a.$$.fragment),c=q(),te(f.$$.fragment),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=S(e);re(t.$$.fragment,_),i=M(_),r=k(_,"DIV",{class:!0});var v=S(r);d&&d.l(v),l=M(v),re(s.$$.fragment,v),o=M(v),re(a.$$.fragment,v),c=M(v),re(f.$$.fragment,v),v.forEach(m),_.forEach(m),this.h()},h(){E(r,"class","pb10"),E(e,"class","wrap H-iti8am")},m(h,_){G(h,e,_),ne(t,e,null),u(e,i),u(e,r),d&&d.m(r,null),u(r,l),ne(s,r,null),u(r,o),ne(a,r,null),u(r,c),ne(f,r,null),p=!0},p(h,[_]){const v={};_&268&&(v.$$scope={dirty:_,ctx:h}),t.$set(v),h[5]||d.p(h,_);const g={};_&4&&(g.label=h[2](vi.TotalEquity)),_&3&&(g.info=h[1].equity+" "+h[0].settleCurrency),_&4&&(g.tooltips=h[2](vt.TotalEquity)),s.$set(g);const b={};_&4&&(b.label=h[2](vi.TotalBalance)),_&3&&(b.info=h[1].accountBalance+" "+h[0].settleCurrency),_&4&&(b.tooltips=h[2](vt.TotalAssets)),a.$set(b);const P={};_&4&&(P.label=h[2](vi.UnrealisedPNL)),_&3&&(P.info=h[1].unrealisedPnl+" "+h[0].settleCurrency),_&4&&(P.tooltips=h[2](vt.AssetsUnrealisedPNL)),f.$set(P)},i(h){p||(Q(t.$$.fragment,h),Q(d),Q(s.$$.fragment,h),Q(a.$$.fragment,h),Q(f.$$.fragment,h),p=!0)},o(h){j(t.$$.fragment,h),j(d),j(s.$$.fragment,h),j(a.$$.fragment,h),j(f.$$.fragment,h),p=!1},d(h){h&&m(e),ie(t),d&&d.d(),ie(s),ie(a),ie(f)}}}function Dv(n,e,t){let i,r,l,s,o;J(n,Hi,p=>t(6,i=p)),J(n,Xt,p=>t(7,r=p)),J(n,dt,p=>t(2,l=p)),J(n,Qi,p=>t(3,s=p)),J(n,lp,p=>t(4,o=p));const a=xi.isMock();let c,f;return n.$$.update=()=>{n.$$.dirty&128&&t(0,c=r),n.$$.dirty&64&&t(1,f=i)},[c,f,l,s,o,a,i,r]}let Vv=class extends tt{constructor(e){super(),nt(this,e,Dv,Iv,et,{})}};function Ov(n){let e=n[3](Vt.ContractDetails)+"",t,i,r=n[1].pairName+"",l,s,o=n[3](He[n[1].type])+"",a;return{c(){t=B(e),i=q(),l=B(r),s=q(),a=B(o)},l(c){t=A(c,e),i=M(c),l=A(c,r),s=M(c),a=A(c,o)},m(c,f){G(c,t,f),G(c,i,f),G(c,l,f),G(c,s,f),G(c,a,f)},p(c,f){f&8&&e!==(e=c[3](Vt.ContractDetails)+"")&&W(t,e),f&2&&r!==(r=c[1].pairName+"")&&W(l,r),f&10&&o!==(o=c[3](He[c[1].type])+"")&&W(a,o)},d(c){c&&m(t),c&&m(i),c&&m(l),c&&m(s),c&&m(a)}}}function Lv(n){let e,t=n[3](Vt.More)+"",i,r;return{c(){e=y("a"),i=B(t),this.h()},l(l){e=k(l,"A",{class:!0,href:!0});var s=S(e);i=A(s,t),s.forEach(m),this.h()},h(){E(e,"class","db ph16 f12 lh24"),E(e,"href",r=n[5](cn.CONTRACT)+"?symbol="+n[1].symbol)},m(l,s){G(l,e,s),u(e,i)},p(l,s){s&8&&t!==(t=l[3](Vt.More)+"")&&W(i,t),s&34&&r!==(r=l[5](cn.CONTRACT)+"?symbol="+l[1].symbol)&&E(e,"href",r)},d(l){l&&m(e)}}}function $v(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,V,O;t=new Rs({props:{$$slots:{default:[Ov]},$$scope:{ctx:n}}}),l=new Hn({props:{label:n[3](Vt.SettledCurrency),info:n[1].settleCurrency,tooltips:n[3](vt.SettledCurrency)}}),o=new Hn({props:{label:n[3](Vt.LastPrice),info:n[2].close,tooltips:n[3](vt.LastPrice)}}),c=new Hn({props:{label:n[3](Vt.MarkPrice),info:n[2].markPrice,tooltips:n[3](vt.MarkPrice)}}),p=new Hn({props:{label:n[3](Vt.IndexPrice),info:n[2].indexPrice,tooltips:n[3](vt.IndexPrice)}}),h=new Hn({props:{label:n[3](Vt.Turnover24),info:(n[2].contractSide>0?n[2].volume24hWithUSD:n[2].turnoverWithUSD)+" USD",tooltips:n[3](vt.Turnover24)}}),v=new Hn({props:{label:n[3](Vt.Volume24),info:n[2].volume24hStr+" "+(n[6][n[1].symbol]||n[1].contractUnderlyingAssets),tooltips:n[3](vt.Volume24)}}),b=new Hn({props:{label:n[3](Vt.OpenInterest),info:n[4],tooltips:n[3](vt.OpenInterest)}}),I=new Hn({props:{label:n[3](Vt.FundingRate),info:n[2].predFundingRateStr+"% ("+n[0]+")",tooltips:n[3](vt.FundingRate)}}),C=new Hn({props:{label:n[3](Vt.ContractSize),info:n[1].contractSize+" "+n[1].contractUnderlyingAssets,tooltips:n[3](vt.ContractSize)}});let w=!n[7]&&Lv(n);return{c(){e=y("div"),te(t.$$.fragment),i=q(),r=y("div"),te(l.$$.fragment),s=q(),te(o.$$.fragment),a=q(),te(c.$$.fragment),f=q(),te(p.$$.fragment),d=q(),te(h.$$.fragment),_=q(),te(v.$$.fragment),g=q(),te(b.$$.fragment),P=q(),te(I.$$.fragment),T=q(),te(C.$$.fragment),V=q(),w&&w.c(),this.h()},l(D){e=k(D,"DIV",{class:!0});var L=S(e);re(t.$$.fragment,L),i=M(L),r=k(L,"DIV",{class:!0});var $=S(r);re(l.$$.fragment,$),s=M($),re(o.$$.fragment,$),a=M($),re(c.$$.fragment,$),f=M($),re(p.$$.fragment,$),d=M($),re(h.$$.fragment,$),_=M($),re(v.$$.fragment,$),g=M($),re(b.$$.fragment,$),P=M($),re(I.$$.fragment,$),T=M($),re(C.$$.fragment,$),V=M($),w&&w.l($),$.forEach(m),L.forEach(m),this.h()},h(){E(r,"class","body f1 H-18mmk1u"),E(e,"class","wrap df fdc wp100 ovh wsn H-18mmk1u")},m(D,L){G(D,e,L),ne(t,e,null),u(e,i),u(e,r),ne(l,r,null),u(r,s),ne(o,r,null),u(r,a),ne(c,r,null),u(r,f),ne(p,r,null),u(r,d),ne(h,r,null),u(r,_),ne(v,r,null),u(r,g),ne(b,r,null),u(r,P),ne(I,r,null),u(r,T),ne(C,r,null),u(r,V),w&&w.m(r,null),O=!0},p(D,[L]){const $={};L&2058&&($.$$scope={dirty:L,ctx:D}),t.$set($);const N={};L&8&&(N.label=D[3](Vt.SettledCurrency)),L&2&&(N.info=D[1].settleCurrency),L&8&&(N.tooltips=D[3](vt.SettledCurrency)),l.$set(N);const z={};L&8&&(z.label=D[3](Vt.LastPrice)),L&4&&(z.info=D[2].close),L&8&&(z.tooltips=D[3](vt.LastPrice)),o.$set(z);const H={};L&8&&(H.label=D[3](Vt.MarkPrice)),L&4&&(H.info=D[2].markPrice),L&8&&(H.tooltips=D[3](vt.MarkPrice)),c.$set(H);const R={};L&8&&(R.label=D[3](Vt.IndexPrice)),L&4&&(R.info=D[2].indexPrice),L&8&&(R.tooltips=D[3](vt.IndexPrice)),p.$set(R);const F={};L&8&&(F.label=D[3](Vt.Turnover24)),L&4&&(F.info=(D[2].contractSide>0?D[2].volume24hWithUSD:D[2].turnoverWithUSD)+" USD"),L&8&&(F.tooltips=D[3](vt.Turnover24)),h.$set(F);const U={};L&8&&(U.label=D[3](Vt.Volume24)),L&6&&(U.info=D[2].volume24hStr+" "+(D[6][D[1].symbol]||D[1].contractUnderlyingAssets)),L&8&&(U.tooltips=D[3](vt.Volume24)),v.$set(U);const K={};L&8&&(K.label=D[3](Vt.OpenInterest)),L&16&&(K.info=D[4]),L&8&&(K.tooltips=D[3](vt.OpenInterest)),b.$set(K);const Y={};L&8&&(Y.label=D[3](Vt.FundingRate)),L&5&&(Y.info=D[2].predFundingRateStr+"% ("+D[0]+")"),L&8&&(Y.tooltips=D[3](vt.FundingRate)),I.$set(Y);const X={};L&8&&(X.label=D[3](Vt.ContractSize)),L&2&&(X.info=D[1].contractSize+" "+D[1].contractUnderlyingAssets),L&8&&(X.tooltips=D[3](vt.ContractSize)),C.$set(X),D[7]||w.p(D,L)},i(D){O||(Q(t.$$.fragment,D),Q(l.$$.fragment,D),Q(o.$$.fragment,D),Q(c.$$.fragment,D),Q(p.$$.fragment,D),Q(h.$$.fragment,D),Q(v.$$.fragment,D),Q(b.$$.fragment,D),Q(I.$$.fragment,D),Q(C.$$.fragment,D),O=!0)},o(D){j(t.$$.fragment,D),j(l.$$.fragment,D),j(o.$$.fragment,D),j(c.$$.fragment,D),j(p.$$.fragment,D),j(h.$$.fragment,D),j(v.$$.fragment,D),j(b.$$.fragment,D),j(I.$$.fragment,D),j(C.$$.fragment,D),O=!1},d(D){D&&m(e),ie(t),ie(l),ie(o),ie(c),ie(p),ie(h),ie(v),ie(b),ie(I),ie(C),w&&w.d()}}}function qv(){return{close:"-",markPrice:"-",indexPrice:"-",contractSide:0,volume24hWithUSD:"-",turnoverWithUSD:"-",volume24hStr:"-",openInterestStr:"-",fundingRateStr:"-",predFundingRateStr:"-"}}function Mv(n,e,t){let i,r,l,s,o;J(n,or,_=>t(8,i=_)),J(n,Xt,_=>t(9,r=_)),J(n,dt,_=>t(3,l=_)),J(n,Tp,_=>t(4,s=_)),J(n,Qi,_=>t(5,o=_));const a={GOLDUSD:"TOZ"},c=xi.isMock();let f="0:00:00",p,d;Lt(()=>{const _=setInterval(()=>{if(!["Listed","Suspend"].includes(p.status)){t(0,f="0:00:00");return}const{fundingInterval:v}=p,g=v/3600;t(0,f=ap(g))},500);return function(){clearInterval(_)}});function h(_){t(2,d=_||qv())}return n.$$.update=()=>{n.$$.dirty&512&&t(1,p=r),n.$$.dirty&256&&h(i)},[f,p,d,l,s,o,a,c,i,r]}let Nv=class extends tt{constructor(e){super(),nt(this,e,Mv,$v,et,{})}};function hc(n){let e,t;return e=new Sv({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Hv(n){let e,t,i,r=n[0]&&["USDT","MUSDT"].includes(n[1].currency),l,s,o,a,c;t=new gv({});let f=r&&hc();return s=new Vv({}),a=new Nv({}),{c(){e=y("div"),te(t.$$.fragment),i=q(),f&&f.c(),l=q(),te(s.$$.fragment),o=q(),te(a.$$.fragment),this.h()},l(p){e=k(p,"DIV",{class:!0,id:!0});var d=S(e);re(t.$$.fragment,d),i=M(d),f&&f.l(d),l=M(d),re(s.$$.fragment,d),o=M(d),re(a.$$.fragment,d),d.forEach(m),this.h()},h(){E(e,"class","wrap B1 H-14jdcjm"),E(e,"id","sideBar")},m(p,d){G(p,e,d),ne(t,e,null),u(e,i),f&&f.m(e,null),u(e,l),ne(s,e,null),u(e,o),ne(a,e,null),c=!0},p(p,[d]){d&3&&(r=p[0]&&["USDT","MUSDT"].includes(p[1].currency)),r?f?d&3&&Q(f,1):(f=hc(),f.c(),Q(f,1),f.m(e,l)):f&&(ot(),j(f,1,1,()=>{f=null}),at())},i(p){c||(Q(t.$$.fragment,p),Q(f),Q(s.$$.fragment,p),Q(a.$$.fragment,p),c=!0)},o(p){j(t.$$.fragment,p),j(f),j(s.$$.fragment,p),j(a.$$.fragment,p),c=!1},d(p){p&&m(e),ie(t),f&&f.d(),ie(s),ie(a)}}}function Bv(n,e,t){let i,r;return J(n,sr,l=>t(0,i=l)),J(n,Hi,l=>t(1,r=l)),[i,r]}let Av=class extends tt{constructor(e){super(),nt(this,e,Bv,Hv,et,{})}};const Fn={AddingToPosition:"261472",ExpectedTo:"ccc7f4",CrossPosition:"a9e6f7",UnrealizedProfit:"17b2a2",MarginLevel:"9b44a5",TheLiquidation:"9e32fb"};function zv(n){let e,t,i,r,l,s,o=n[0](Fn.AddingToPosition)+"",a,c,f,p=n[0](Fn.ExpectedTo,{Time:n[2].launchTime})+"",d,h,_,v,g,b,P,I=n[0](Fn.UnrealizedProfit,{Cross:`<span class="BLUE">${n[0](Fn.CrossPosition)}</span>`})+"",T,C,V,O,w,D,L=n[0](Fn.TheLiquidation,{Margin:`<span class="BLUE">${n[0](Fn.MarginLevel)}</span>`})+"";return{c(){e=y("div"),t=y("div"),i=y("img"),l=q(),s=y("div"),a=B(o),c=q(),f=y("div"),d=B(p),h=q(),_=y("div"),v=y("i"),g=B(""),b=q(),P=y("div"),T=q(),C=y("div"),V=y("i"),O=B(""),w=q(),D=y("div"),this.h()},l($){e=k($,"DIV",{class:!0});var N=S(e);t=k(N,"DIV",{class:!0});var z=S(t);i=k(z,"IMG",{src:!0,width:!0,alt:!0}),z.forEach(m),l=M(N),s=k(N,"DIV",{class:!0});var H=S(s);a=A(H,o),H.forEach(m),c=M(N),f=k(N,"DIV",{class:!0});var R=S(f);d=A(R,p),R.forEach(m),h=M(N),_=k(N,"DIV",{class:!0});var F=S(_);v=k(F,"I",{class:!0});var U=S(v);g=A(U,""),U.forEach(m),b=M(F),P=k(F,"DIV",{});var K=S(P);K.forEach(m),F.forEach(m),T=M(N),C=k(N,"DIV",{class:!0});var Y=S(C);V=k(Y,"I",{class:!0});var X=S(V);O=A(X,""),X.forEach(m),w=M(Y),D=k(Y,"DIV",{});var ee=S(D);ee.forEach(m),Y.forEach(m),N.forEach(m),this.h()},h(){hn(i.src,r=Xn.ROCKET)||E(i,"src",r),E(i,"width","134"),E(i,"alt","phemex rocket"),E(t,"class","df aic jcc"),E(s,"class","df aic jcc f24 fw3 T1"),E(f,"class","expected mt12 df aic jcc f24 fw3  H-tv1xvf"),E(v,"class","mr2 iconfont f20 T2"),E(_,"class","df f16 mt40 "),E(V,"class","mr2 iconfont f20 T2"),E(C,"class","df mt12 f16"),E(e,"class","ph16 pb20 T2")},m($,N){G($,e,N),u(e,t),u(t,i),u(e,l),u(e,s),u(s,a),u(e,c),u(e,f),u(f,d),u(e,h),u(e,_),u(_,v),u(v,g),u(_,b),u(_,P),P.innerHTML=I,u(e,T),u(e,C),u(C,V),u(V,O),u(C,w),u(C,D),D.innerHTML=L},p($,N){N&1&&o!==(o=$[0](Fn.AddingToPosition)+"")&&W(a,o),N&5&&p!==(p=$[0](Fn.ExpectedTo,{Time:$[2].launchTime})+"")&&W(d,p),N&1&&I!==(I=$[0](Fn.UnrealizedProfit,{Cross:`<span class="BLUE">${$[0](Fn.CrossPosition)}</span>`})+"")&&(P.innerHTML=I),N&1&&L!==(L=$[0](Fn.TheLiquidation,{Margin:`<span class="BLUE">${$[0](Fn.MarginLevel)}</span>`})+"")&&(D.innerHTML=L)},d($){$&&m(e)}}}function Qv(n){let e,t,i,r,l;return{c(){e=y("div"),t=y("i"),i=B(""),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);t=k(o,"I",{class:!0});var a=S(t);i=A(a,""),a.forEach(m),o.forEach(m),this.h()},h(){E(t,"class","iconfont cp f32 T1"),E(e,"class","df jcfe"),E(e,"slot","header")},m(s,o){G(s,e,o),u(e,t),u(t,i),r||(l=We(t,"click",n[3]),r=!0)},p:rt,d(s){s&&m(e),r=!1,l()}}}function Rv(n){let e=n[0](He.GotIt)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&1&&e!==(e=i[0](He.GotIt)+"")&&W(t,e)},d(i){i&&m(t)}}}function Fv(n){let e=n[0](He.LearnMore)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&1&&e!==(e=i[0](He.LearnMore)+"")&&W(t,e)},d(i){i&&m(t)}}}function jv(n){let e,t,i,r,l;return t=new Ht({props:{class:"fw2 f16 mr8",$$slots:{default:[Rv]},$$scope:{ctx:n}}}),t.$on("click",n[3]),r=new Ht({props:{class:"fw2 f16",type:"primary",href:n[1](cn.PROFIT_REINVESTMENT),target:"_blank",$$slots:{default:[Fv]},$$scope:{ctx:n}}}),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);re(t.$$.fragment,o),i=M(o),re(r.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","footer mt40 df jcfe tr H-tv1xvf"),E(e,"slot","footer")},m(s,o){G(s,e,o),ne(t,e,null),u(e,i),ne(r,e,null),l=!0},p(s,o){const a={};o&129&&(a.$$scope={dirty:o,ctx:s}),t.$set(a);const c={};o&2&&(c.href=s[1](cn.PROFIT_REINVESTMENT)),o&129&&(c.$$scope={dirty:o,ctx:s}),r.$set(c)},i(s){l||(Q(t.$$.fragment,s),Q(r.$$.fragment,s),l=!0)},o(s){j(t.$$.fragment,s),j(r.$$.fragment,s),l=!1},d(s){s&&m(e),ie(t),ie(r)}}}function Uv(n){let e,t;return e=new bn({props:{style:"min-width: 600px; padding: 16px;",$$slots:{footer:[jv],header:[Qv],default:[zv]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&135&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Wv(n,e,t){let i,r,l;J(n,dt,f=>t(0,i=f)),J(n,Yl,f=>t(1,r=f)),J(n,Ms,f=>t(2,l=f));let{isConditional:s=!1}=e,{symbol:o=""}=e;const a=Kt();function c(){a("close"),vn.updateContractStorage({riskEngineMode:!1})}return n.$$set=f=>{"isConditional"in f&&t(4,s=f.isConditional),"symbol"in f&&t(5,o=f.symbol)},[i,r,l,c,s,o]}let xp=class extends tt{constructor(e){super(),nt(this,e,Wv,Uv,et,{isConditional:4,symbol:5})}};const _i={Change24:"98dbf3",High24:"3c6c56",Low24:"674714",HighLow24:"d1bd46",Turnover24:"564ca8",FundingCountDown:"88bd84",OpenInterest:"723c11",Suspend:"d5246e"};function Gv(n){let e,t,i,r=n[3](_i.Change24)+"",l,s,o,a=n[1].change24hStr+"",c,f,p=n[1].changePercentStr+"",d,h,_,v,g=n[3](_i.HighLow24)+"",b,P,I,T=n[1].high+"",C,V,O=n[1].low+"",w,D,L,$,N=n[3](_i.Turnover24)+"",z,H,R,F=(n[1].contractSide>0?n[1].volume24hWithUSD:n[1].turnoverWithUSD)+"",U,K,Y,X,ee,Z=n[3](_i.FundingCountDown)+"",ue,ce,pe,me=n[1].predFundingRateStr+"",oe,ke,Le,ge,ae,x,le=n[3](_i.OpenInterest)+"",fe,Se,Pe,Ce,Ee,Ie,ve;return{c(){e=y("div"),t=y("div"),i=y("div"),l=B(r),s=q(),o=y("div"),c=B(a),f=q(),d=B(p),h=q(),_=y("div"),v=y("div"),b=B(g),P=q(),I=y("div"),C=B(T),V=B(" / "),w=B(O),D=q(),L=y("div"),$=y("div"),z=B(N),H=q(),R=y("div"),U=B(F),K=B(" USD"),Y=q(),X=y("div"),ee=y("div"),ue=B(Z),ce=q(),pe=y("div"),oe=B(me),ke=B("% / "),Le=B(n[2]),ge=q(),ae=y("div"),x=y("div"),fe=B(le),Pe=q(),Ce=y("div"),Ee=B(n[6]),this.h()},l(de){e=k(de,"DIV",{class:!0});var se=S(e);t=k(se,"DIV",{class:!0});var he=S(t);i=k(he,"DIV",{class:!0});var _e=S(i);l=A(_e,r),_e.forEach(m),s=M(he),o=k(he,"DIV",{class:!0});var be=S(o);c=A(be,a),f=M(be),d=A(be,p),be.forEach(m),he.forEach(m),h=M(se),_=k(se,"DIV",{class:!0});var Ve=S(_);v=k(Ve,"DIV",{class:!0});var Be=S(v);b=A(Be,g),Be.forEach(m),P=M(Ve),I=k(Ve,"DIV",{class:!0});var Fe=S(I);C=A(Fe,T),V=A(Fe," / "),w=A(Fe,O),Fe.forEach(m),Ve.forEach(m),D=M(se),L=k(se,"DIV",{class:!0});var $e=S(L);$=k($e,"DIV",{class:!0});var Ae=S($);z=A(Ae,N),Ae.forEach(m),H=M($e),R=k($e,"DIV",{class:!0});var Ne=S(R);U=A(Ne,F),K=A(Ne," USD"),Ne.forEach(m),$e.forEach(m),Y=M(se),X=k(se,"DIV",{class:!0});var Ge=S(X);ee=k(Ge,"DIV",{class:!0});var Xe=S(ee);ue=A(Xe,Z),Xe.forEach(m),ce=M(Ge),pe=k(Ge,"DIV",{class:!0});var ye=S(pe);oe=A(ye,me),ke=A(ye,"% / "),Le=A(ye,n[2]),ye.forEach(m),Ge.forEach(m),ge=M(se),ae=k(se,"DIV",{class:!0});var Ke=S(ae);x=k(Ke,"DIV",{class:!0});var Qe=S(x);fe=A(Qe,le),Qe.forEach(m),Pe=M(Ke),Ce=k(Ke,"DIV",{class:!0});var ze=S(Ce);Ee=A(ze,n[6]),ze.forEach(m),Ke.forEach(m),se.forEach(m),this.h()},h(){E(i,"class","key H-75xmsz"),E(o,"class","value H-75xmsz"),Te(o,"up",n[1].change24hEp>0),Te(o,"down",n[1].change24hEp<0),E(t,"class","kv H-75xmsz"),E(v,"class","key H-75xmsz"),E(I,"class","value H-75xmsz"),E(_,"class","kv H-75xmsz"),E($,"class","key H-75xmsz"),E(R,"class","value H-75xmsz"),E(L,"class","kv H-75xmsz"),E(ee,"class","key H-75xmsz"),E(pe,"class","value H-75xmsz"),E(X,"class","kv H-75xmsz"),E(x,"class","key tdud H-75xmsz"),E(Ce,"class","value H-75xmsz"),E(ae,"class","kv H-75xmsz"),E(e,"class","container-main")},m(de,se){G(de,e,se),u(e,t),u(t,i),u(i,l),u(t,s),u(t,o),u(o,c),u(o,f),u(o,d),u(e,h),u(e,_),u(_,v),u(v,b),u(_,P),u(_,I),u(I,C),u(I,V),u(I,w),u(e,D),u(e,L),u(L,$),u($,z),u(L,H),u(L,R),u(R,U),u(R,K),u(e,Y),u(e,X),u(X,ee),u(ee,ue),u(X,ce),u(X,pe),u(pe,oe),u(pe,ke),u(pe,Le),u(e,ge),u(e,ae),u(ae,x),u(x,fe),u(ae,Pe),u(ae,Ce),u(Ce,Ee),Ie||(ve=Wt(Se=Gt.call(null,x,{text:n[3](vt.OpenInterest)})),Ie=!0)},p(de,se){se&8&&r!==(r=de[3](_i.Change24)+"")&&W(l,r),se&2&&a!==(a=de[1].change24hStr+"")&&W(c,a),se&2&&p!==(p=de[1].changePercentStr+"")&&W(d,p),se&2&&Te(o,"up",de[1].change24hEp>0),se&2&&Te(o,"down",de[1].change24hEp<0),se&8&&g!==(g=de[3](_i.HighLow24)+"")&&W(b,g),se&2&&T!==(T=de[1].high+"")&&W(C,T),se&2&&O!==(O=de[1].low+"")&&W(w,O),se&8&&N!==(N=de[3](_i.Turnover24)+"")&&W(z,N),se&2&&F!==(F=(de[1].contractSide>0?de[1].volume24hWithUSD:de[1].turnoverWithUSD)+"")&&W(U,F),se&8&&Z!==(Z=de[3](_i.FundingCountDown)+"")&&W(ue,Z),se&2&&me!==(me=de[1].predFundingRateStr+"")&&W(oe,me),se&4&&W(Le,de[2]),se&8&&le!==(le=de[3](_i.OpenInterest)+"")&&W(fe,le),Se&&Tt(Se.update)&&se&8&&Se.update.call(null,{text:de[3](vt.OpenInterest)}),se&64&&W(Ee,de[6])},d(de){de&&m(e),Ie=!1,ve()}}}function _c(n){let e,t,i,r,l,s=n[3](Fn.AddingToPosition)+"",o,a,c,f,p,d;return{c(){e=y("div"),t=y("img"),r=q(),l=y("span"),o=B(s),a=q(),c=y("i"),f=B(""),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=S(e);t=k(_,"IMG",{width:!0,src:!0,alt:!0,class:!0}),r=M(_),l=k(_,"SPAN",{class:!0});var v=S(l);o=A(v,s),v.forEach(m),a=M(_),c=k(_,"I",{class:!0});var g=S(c);f=A(g,""),g.forEach(m),_.forEach(m),this.h()},h(){E(t,"width","22"),hn(t.src,i=Xn.ROCKET_ICON)||E(t,"src",i),E(t,"alt","phemex rocket"),E(t,"class","H-75xmsz"),E(l,"class","ml2 add f12 H-75xmsz"),E(c,"class","iconfont H-75xmsz"),E(e,"class","announcement df aic fw2 cp H-75xmsz")},m(h,_){G(h,e,_),u(e,t),u(e,r),u(e,l),u(l,o),u(e,a),u(e,c),u(c,f),p||(d=We(e,"click",n[9]),p=!0)},p(h,_){_&8&&s!==(s=h[3](Fn.AddingToPosition)+"")&&W(o,s)},d(h){h&&m(e),p=!1,d()}}}function Kv(n){let e,t,i,r,l,s,o,a,c,f,p,d,h=n[0].pairName+"",_,v,g,b=n[3](He[n[0].type])+"",P,I,T,C=n[3](He.CurrencyMargin,{Currency:n[0].settleCurrency})+"",V,O,w,D,L,$,N,z,H,R;w=new Mp({props:{size:"f20",symbol:n[0].symbol,market:n[4],items:n[5]}}),$=new Vp({props:{$$slots:{default:[Gv]},$$scope:{ctx:n}}});let F=n[7].visible&&_c(n);return{c(){e=y("div"),t=y("h1"),i=y("i"),r=B(""),l=q(),s=y("img"),c=q(),f=y("div"),p=y("div"),d=y("span"),_=B(h),v=q(),g=y("span"),P=B(b),I=q(),T=y("div"),V=B(C),O=q(),te(w.$$.fragment),D=q(),L=y("div"),te($.$$.fragment),N=q(),F&&F.c(),this.h()},l(U){e=k(U,"DIV",{class:!0});var K=S(e);t=k(K,"H1",{class:!0});var Y=S(t);i=k(Y,"I",{class:!0});var X=S(i);r=A(X,""),X.forEach(m),l=M(Y),s=k(Y,"IMG",{width:!0,height:!0,src:!0,alt:!0}),c=M(Y),f=k(Y,"DIV",{class:!0});var ee=S(f);p=k(ee,"DIV",{class:!0});var Z=S(p);d=k(Z,"SPAN",{});var ue=S(d);_=A(ue,h),ue.forEach(m),v=M(Z),g=k(Z,"SPAN",{class:!0});var ce=S(g);P=A(ce,b),ce.forEach(m),Z.forEach(m),I=M(ee),T=k(ee,"DIV",{class:!0});var pe=S(T);V=A(pe,C),pe.forEach(m),ee.forEach(m),Y.forEach(m),O=M(K),re(w.$$.fragment,K),D=M(K),L=k(K,"DIV",{class:!0});var me=S(L);re($.$$.fragment,me),me.forEach(m),N=M(K),F&&F.l(K),K.forEach(m),this.h()},h(){E(i,"class","menu iconfont f22 mr8 fw2 T1 H-75xmsz"),E(s,"width","24"),E(s,"height","24"),hn(s.src,o=ql.getUrl(n[0].baseCurrency))||E(s,"src",o),E(s,"alt",a=n[0].baseCurrency),E(g,"class","ml4"),E(p,"class","symbol df aic f16 fw2 wsn T1"),E(T,"class","mt2 f12 fw1 T2"),E(f,"class","ml8"),E(t,"class","symbol-box df aic cp H-75xmsz"),E(L,"class","container pr df aic f1 wsn H-75xmsz"),E(e,"class","wrap f1 df aic pl16 H-75xmsz")},m(U,K){G(U,e,K),u(e,t),u(t,i),u(i,r),u(t,l),u(t,s),u(t,c),u(t,f),u(f,p),u(p,d),u(d,_),u(p,v),u(p,g),u(g,P),u(f,I),u(f,T),u(T,V),u(e,O),ne(w,e,null),u(e,D),u(e,L),ne($,L,null),u(e,N),F&&F.m(e,null),z=!0,H||(R=[We(t,"mousedown",Xv),We(t,"click",n[8])],H=!0)},p(U,[K]){(!z||K&1&&!hn(s.src,o=ql.getUrl(U[0].baseCurrency)))&&E(s,"src",o),(!z||K&1&&a!==(a=U[0].baseCurrency))&&E(s,"alt",a),(!z||K&1)&&h!==(h=U[0].pairName+"")&&W(_,h),(!z||K&9)&&b!==(b=U[3](He[U[0].type])+"")&&W(P,b),(!z||K&9)&&C!==(C=U[3](He.CurrencyMargin,{Currency:U[0].settleCurrency})+"")&&W(V,C);const Y={};K&1&&(Y.symbol=U[0].symbol),K&16&&(Y.market=U[4]),K&32&&(Y.items=U[5]),w.$set(Y);const X={};K&16462&&(X.$$scope={dirty:K,ctx:U}),$.$set(X),U[7].visible?F?F.p(U,K):(F=_c(U),F.c(),F.m(e,null)):F&&(F.d(1),F=null)},i(U){z||(Q(w.$$.fragment,U),Q($.$$.fragment,U),z=!0)},o(U){j(w.$$.fragment,U),j($.$$.fragment,U),z=!1},d(U){U&&m(e),ie(w),ie($),F&&F.d(),H=!1,jt(R)}}}function Xv(n){n.stopPropagation()}function Yv(n,e,t){let i,r,l,s,o,a,c;J(n,or,g=>t(10,i=g)),J(n,Xt,g=>t(11,r=g)),J(n,dt,g=>t(3,l=g)),J(n,Er,g=>t(4,s=g)),J(n,Ri,g=>t(5,o=g)),J(n,Tp,g=>t(6,a=g)),J(n,Ms,g=>t(7,c=g));let f,p,d="0:00:00";Lt(()=>{const g=setInterval(()=>{if(!["Listed","Suspend"].includes(f.status)){t(2,d="0:00:00");return}const{fundingInterval:b}=f,P=b/3600;t(2,d=ap(P))},500);return function(){clearInterval(g)}});function h(g){t(1,p=g||{change24hEp:0,change24hStr:"--%",changePercentStr:"--%",high:"-",low:"-",turnoverStr:"-"})}function _(){en.create(I1)}function v(){en.create(xp)}return n.$$.update=()=>{n.$$.dirty&2048&&t(0,f=r),n.$$.dirty&1024&&h(i)},[f,p,d,l,s,o,a,c,_,v,i,r]}let Jv=class extends tt{constructor(e){super(),nt(this,e,Yv,Kv,et,{})}};function Zv(n){let e=n[6](Vt.Claim)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&64&&e!==(e=i[6](Vt.Claim)+"")&&W(t,e)},d(i){i&&m(t)}}}function xv(n){let e=n[6](Vt.Claim)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&64&&e!==(e=i[6](Vt.Claim)+"")&&W(t,e)},d(i){i&&m(t)}}}function gc(n){let e,t,i,r=n[6](Vt.InviteFriends)+"",l,s,o,a=n[6](Vt.Invite1User,{Amount:5e3})+"",c,f,p,d;return p=new Ht({props:{class:"fixed-width",size:"small",type:"primary",$$slots:{default:[eb]},$$scope:{ctx:n}}}),p.$on("click",function(){Tt(n[8](n[5]))&&n[8](n[5]).apply(this,arguments)}),{c(){e=y("div"),t=y("div"),i=y("p"),l=B(r),s=q(),o=y("p"),c=B(a),f=q(),te(p.$$.fragment),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=S(e);t=k(_,"DIV",{});var v=S(t);i=k(v,"P",{class:!0});var g=S(i);l=A(g,r),g.forEach(m),s=M(v),o=k(v,"P",{class:!0});var b=S(o);c=A(b,a),b.forEach(m),v.forEach(m),f=M(_),re(p.$$.fragment,_),_.forEach(m),this.h()},h(){E(i,"class","title H-1lx7ykb"),E(o,"class","hint mt4 H-1lx7ykb"),E(e,"class","df jcsb aic mt24")},m(h,_){G(h,e,_),u(e,t),u(t,i),u(i,l),u(t,s),u(t,o),u(o,c),u(e,f),ne(p,e,null),d=!0},p(h,_){n=h,(!d||_&64)&&r!==(r=n[6](Vt.InviteFriends)+"")&&W(l,r),(!d||_&64)&&a!==(a=n[6](Vt.Invite1User,{Amount:5e3})+"")&&W(c,a);const v={};_&524352&&(v.$$scope={dirty:_,ctx:n}),p.$set(v)},i(h){d||(Q(p.$$.fragment,h),d=!0)},o(h){j(p.$$.fragment,h),d=!1},d(h){h&&m(e),ie(p)}}}function eb(n){let e=n[6](Vt.Invite)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&64&&e!==(e=i[6](Vt.Invite)+"")&&W(t,e)},d(i){i&&m(t)}}}function tb(n){let e=n[6](Vt.Deposit)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&64&&e!==(e=i[6](Vt.Deposit)+"")&&W(t,e)},d(i){i&&m(t)}}}function nb(n){let e,t,i=n[0].availableBalance4+"",r,l,s,o,a=n[6](Vt.UseTheMethod)+"",c,f,p,d,h,_=n[6](Vt.ClaimedDaily,{Amount:500})+"",v,g,b,P=n[6](Vt.CanClaimOnce,{Amount:500})+"",I,T,C,V,O,w,D,L=n[6](Vt.InsufficientBalance)+"",$,N,z,H=n[6](Vt.BalanceBelowCanReceive,{LowAmount:1e3,Amount:3e3})+"",R,F,U,K,Y,X,ee,Z,ue=n[6](Vt.Deposit)+"",ce,pe,me,oe=n[6](Vt.DepositingFundsWill)+"",ke,Le,ge,ae;C=new Ht({props:{class:"fixed-width",disabled:!n[2],size:"small",type:"primary",$$slots:{default:[Zv]},$$scope:{ctx:n}}}),C.$on("click",n[9](ed)),U=new Ht({props:{class:"fixed-width",disabled:!n[3]||!n[4],size:"small",type:"primary",$$slots:{default:[xv]},$$scope:{ctx:n}}}),U.$on("click",n[9](td));let x=n[1].isMain&&gc(n);return ge=new Ht({props:{class:"fixed-width",href:n[10](),size:"small",target:"_blank",type:"primary",$$slots:{default:[tb]},$$scope:{ctx:n}}}),{c(){e=y("header"),t=B("$"),r=B(i),l=q(),s=y("div"),o=y("div"),c=B(a),f=q(),p=y("div"),d=y("div"),h=y("p"),v=B(_),g=q(),b=y("p"),I=B(P),T=q(),te(C.$$.fragment),V=q(),O=y("div"),w=y("div"),D=y("p"),$=B(L),N=q(),z=y("p"),R=B(H),F=q(),te(U.$$.fragment),K=q(),x&&x.c(),Y=q(),X=y("div"),ee=y("div"),Z=y("p"),ce=B(ue),pe=q(),me=y("p"),ke=B(oe),Le=q(),te(ge.$$.fragment),this.h()},l(le){e=k(le,"HEADER",{class:!0});var fe=S(e);t=A(fe,"$"),r=A(fe,i),fe.forEach(m),l=M(le),s=k(le,"DIV",{class:!0});var Se=S(s);o=k(Se,"DIV",{class:!0});var Pe=S(o);c=A(Pe,a),Pe.forEach(m),f=M(Se),p=k(Se,"DIV",{class:!0});var Ce=S(p);d=k(Ce,"DIV",{});var Ee=S(d);h=k(Ee,"P",{class:!0});var Ie=S(h);v=A(Ie,_),Ie.forEach(m),g=M(Ee),b=k(Ee,"P",{class:!0});var ve=S(b);I=A(ve,P),ve.forEach(m),Ee.forEach(m),T=M(Ce),re(C.$$.fragment,Ce),Ce.forEach(m),V=M(Se),O=k(Se,"DIV",{class:!0});var de=S(O);w=k(de,"DIV",{});var se=S(w);D=k(se,"P",{class:!0});var he=S(D);$=A(he,L),he.forEach(m),N=M(se),z=k(se,"P",{class:!0});var _e=S(z);R=A(_e,H),_e.forEach(m),se.forEach(m),F=M(de),re(U.$$.fragment,de),de.forEach(m),K=M(Se),x&&x.l(Se),Y=M(Se),X=k(Se,"DIV",{class:!0});var be=S(X);ee=k(be,"DIV",{});var Ve=S(ee);Z=k(Ve,"P",{class:!0});var Be=S(Z);ce=A(Be,ue),Be.forEach(m),pe=M(Ve),me=k(Ve,"P",{class:!0});var Fe=S(me);ke=A(Fe,oe),Fe.forEach(m),Ve.forEach(m),Le=M(be),re(ge.$$.fragment,be),be.forEach(m),Se.forEach(m),this.h()},h(){E(e,"class","mt28 lh44 tac f36 T1 b H-1lx7ykb"),E(o,"class","hint H-1lx7ykb"),E(h,"class","title H-1lx7ykb"),E(b,"class","hint mt4 H-1lx7ykb"),E(p,"class","df jcsb aic mt24"),E(D,"class","title H-1lx7ykb"),E(z,"class","hint mt4 H-1lx7ykb"),E(O,"class","df jcsb aic mt24"),E(Z,"class","title H-1lx7ykb"),E(me,"class","hint mt4 H-1lx7ykb"),E(X,"class","df jcsb aic mt24"),E(s,"class","faucet-dialog ph24 mt60 mb32 H-1lx7ykb")},m(le,fe){G(le,e,fe),u(e,t),u(e,r),G(le,l,fe),G(le,s,fe),u(s,o),u(o,c),u(s,f),u(s,p),u(p,d),u(d,h),u(h,v),u(d,g),u(d,b),u(b,I),u(p,T),ne(C,p,null),u(s,V),u(s,O),u(O,w),u(w,D),u(D,$),u(w,N),u(w,z),u(z,R),u(O,F),ne(U,O,null),u(s,K),x&&x.m(s,null),u(s,Y),u(s,X),u(X,ee),u(ee,Z),u(Z,ce),u(ee,pe),u(ee,me),u(me,ke),u(X,Le),ne(ge,X,null),ae=!0},p(le,fe){(!ae||fe&1)&&i!==(i=le[0].availableBalance4+"")&&W(r,i),(!ae||fe&64)&&a!==(a=le[6](Vt.UseTheMethod)+"")&&W(c,a),(!ae||fe&64)&&_!==(_=le[6](Vt.ClaimedDaily,{Amount:500})+"")&&W(v,_),(!ae||fe&64)&&P!==(P=le[6](Vt.CanClaimOnce,{Amount:500})+"")&&W(I,P);const Se={};fe&4&&(Se.disabled=!le[2]),fe&524352&&(Se.$$scope={dirty:fe,ctx:le}),C.$set(Se),(!ae||fe&64)&&L!==(L=le[6](Vt.InsufficientBalance)+"")&&W($,L),(!ae||fe&64)&&H!==(H=le[6](Vt.BalanceBelowCanReceive,{LowAmount:1e3,Amount:3e3})+"")&&W(R,H);const Pe={};fe&24&&(Pe.disabled=!le[3]||!le[4]),fe&524352&&(Pe.$$scope={dirty:fe,ctx:le}),U.$set(Pe),le[1].isMain?x?(x.p(le,fe),fe&2&&Q(x,1)):(x=gc(le),x.c(),Q(x,1),x.m(s,Y)):x&&(ot(),j(x,1,1,()=>{x=null}),at()),(!ae||fe&64)&&ue!==(ue=le[6](Vt.Deposit)+"")&&W(ce,ue),(!ae||fe&64)&&oe!==(oe=le[6](Vt.DepositingFundsWill)+"")&&W(ke,oe);const Ce={};fe&524352&&(Ce.$$scope={dirty:fe,ctx:le}),ge.$set(Ce)},i(le){ae||(Q(C.$$.fragment,le),Q(U.$$.fragment,le),Q(x),Q(ge.$$.fragment,le),ae=!0)},o(le){j(C.$$.fragment,le),j(U.$$.fragment,le),j(x),j(ge.$$.fragment,le),ae=!1},d(le){le&&m(e),le&&m(l),le&&m(s),ie(C),ie(U),x&&x.d(),ie(ge)}}}function ib(n){let e,t,i=n[6](Vt.YourMUSDTBalance)+"",r,l,s,o,a,c;return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),s=y("i"),o=B(""),this.h()},l(f){e=k(f,"DIV",{class:!0,slot:!0});var p=S(e);t=k(p,"DIV",{class:!0});var d=S(t);r=A(d,i),d.forEach(m),l=M(p),s=k(p,"I",{class:!0});var h=S(s);o=A(h,""),h.forEach(m),p.forEach(m),this.h()},h(){E(t,"class","f18 T1"),E(s,"class","iconfont cp T3"),E(e,"class","close ph24 pt22 df jcsb H-1lx7ykb"),E(e,"slot","header")},m(f,p){G(f,e,p),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),a||(c=We(s,"click",n[7]),a=!0)},p(f,p){p&64&&i!==(i=f[6](Vt.YourMUSDTBalance)+"")&&W(r,i)},d(f){f&&m(e),a=!1,c()}}}function rb(n){let e,t;return e=new bn({props:{style:"min-width: 700px;",$$slots:{header:[ib],default:[nb]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&524415&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}const ed=21,td=22;function lb(n,e,t){let i,r,l,s,o,a,c;J(n,Qi,T=>t(13,s=T)),J(n,dt,T=>t(6,o=T)),J(n,Hi,T=>t(0,a=T)),J(n,Ns,T=>t(1,c=T));let{onConfirm:f=null}=e;const p=Kt(),d={SUCCESS:"SUCCESS",FAIL:"FAIL"};let h=!1,_=!1;Lt(()=>{b()});function v(){p("close")}function g(T){return function(){if(Md(T)){Pt.send("toast","info",{message:o(Vt.SuccessfullyCopied)});return}Pt.send("toast","error",{message:o(gm.Failed)})}}async function b(){const C=(await zl.getMockTradingTasks()).data.taskList,V=C.find(L=>L.taskId===ed),O=C.find(L=>L.taskId===td),w=gs.getTodayUTCZeroTime();t(2,h=!(V&&V.finishTime*1e3>w&&V.status===d.SUCCESS));const D=1e3*60*60*24*3;t(3,_=!(O&&Date.now()-O.finishTime*1e3<D&&O.status===d.SUCCESS))}function P(T){return async()=>{const{error:C}=await zl.submitMockTradingTask({taskId:T});if(C){Pt.send("toast","error",C);return}Pt.send("toast","info",{message:o(Vt.SuccessfullyClaimed)}),b()}}function I(){return Yd(s)}return n.$$set=T=>{"onConfirm"in T&&t(11,f=T.onConfirm)},n.$$.update=()=>{n.$$.dirty&2&&t(12,i=c.referralCode||""),n.$$.dirty&12288&&t(5,r=`${location.origin}${s(cn.REGISTER)}?${qd.stringify({referralCode:i})}`),n.$$.dirty&1&&t(4,l=Number(a.accountBalance)<1e3)},[a,c,h,_,l,r,o,v,g,P,I,f,i,s]}let sb=class extends tt{constructor(e){super(),nt(this,e,lb,rb,et,{onConfirm:11})}};function vc(n){let e,t,i=n[1](Vt.ClickTheFaucet)+"",r,l,s,o,a=n[1](He.OK)+"",c,f,p,d,h,_;return{c(){e=y("div"),t=y("p"),r=B(i),l=q(),s=y("div"),o=y("button"),c=B(a),this.h()},l(v){e=k(v,"DIV",{class:!0});var g=S(e);t=k(g,"P",{});var b=S(t);r=A(b,i),b.forEach(m),l=M(g),s=k(g,"DIV",{class:!0});var P=S(s);o=k(P,"BUTTON",{class:!0});var I=S(o);c=A(I,a),I.forEach(m),P.forEach(m),g.forEach(m),this.h()},h(){E(o,"class","btn br8 fw2 BLUE cp H-138w02z"),E(s,"class","df mt16 jcfe"),E(e,"class","guide-tips pa br8 f14 H-138w02z")},m(v,g){G(v,e,g),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),u(o,c),d=!0,h||(_=We(o,"click",n[2]),h=!0)},p(v,g){(!d||g&2)&&i!==(i=v[1](Vt.ClickTheFaucet)+"")&&W(r,i),(!d||g&2)&&a!==(a=v[1](He.OK)+"")&&W(c,a)},i(v){d||(jn(()=>{d&&(p&&p.end(1),f=Ts(e,Ol,{}),f.start())}),d=!0)},o(v){f&&f.invalidate(),p=ws(e,Ol,{}),d=!1},d(v){v&&m(e),v&&p&&p.end(),h=!1,_()}}}function ob(n){let e,t,i;const r=n[4].default,l=Br(r,n,n[3],null);let s=n[0]&&vc(n);return{c(){e=y("div"),l&&l.c(),t=q(),s&&s.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=S(e);l&&l.l(a),t=M(a),s&&s.l(a),a.forEach(m),this.h()},h(){E(e,"class","df pr")},m(o,a){G(o,e,a),l&&l.m(e,null),u(e,t),s&&s.m(e,null),i=!0},p(o,[a]){l&&l.p&&(!i||a&8)&&Ar(l,r,o,o[3],i?Qr(r,o[3],a,null):zr(o[3]),null),o[0]?s?(s.p(o,a),a&1&&Q(s,1)):(s=vc(o),s.c(),Q(s,1),s.m(e,null)):s&&(ot(),j(s,1,1,()=>{s=null}),at())},i(o){i||(Q(l,o),Q(s),i=!0)},o(o){j(l,o),j(s),i=!1},d(o){o&&m(e),l&&l.d(o),s&&s.d()}}}function ab(n,e,t){let i;J(n,dt,a=>t(1,i=a));let{$$slots:r={},$$scope:l}=e,s=xi.showFaucetGuide();function o(){xi.disableFaucetGuide(),t(0,s=!1)}return n.$$set=a=>{"$$scope"in a&&t(3,l=a.$$scope)},[s,i,o,l,r]}let cb=class extends tt{constructor(e){super(),nt(this,e,ab,ob,et,{})}};function fb(n){let e,t;return e=new cb({props:{$$slots:{default:[ub]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&64&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function ub(n){let e,t,i,r;return{c(){e=y("img"),this.h()},l(l){e=k(l,"IMG",{class:!0,height:!0,src:!0,alt:!0}),this.h()},h(){E(e,"class","icon cp H-1b8vr4u"),E(e,"height","26"),hn(e.src,t=n[2])||E(e,"src",t),E(e,"alt","faucet")},m(l,s){G(l,e,s),i||(r=We(e,"click",n[3]),i=!0)},p:rt,d(l){l&&m(e),i=!1,r()}}}function pb(n){let e,t,i,r,l;t=new Jv({});let s=n[1]&&fb(n);return{c(){e=y("header"),te(t.$$.fragment),i=q(),r=y("div"),s&&s.c(),this.h()},l(o){e=k(o,"HEADER",{class:!0});var a=S(e);re(t.$$.fragment,a),i=M(a),r=k(a,"DIV",{class:!0});var c=S(r);s&&s.l(c),c.forEach(m),a.forEach(m),this.h()},h(){E(r,"class","right df aic pr H-1b8vr4u"),E(e,"class","df aic pr16 B1 H-1b8vr4u"),Te(e,"ml6",n[0]===bi.Left),Te(e,"mr6",n[0]===bi.Right)},m(o,a){G(o,e,a),ne(t,e,null),u(e,i),u(e,r),s&&s.m(r,null),l=!0},p(o,[a]){o[1]&&s.p(o,a),(!l||a&1)&&Te(e,"ml6",o[0]===bi.Left),(!l||a&1)&&Te(e,"mr6",o[0]===bi.Right)},i(o){l||(Q(t.$$.fragment,o),Q(s),l=!0)},o(o){j(t.$$.fragment,o),j(s),l=!1},d(o){o&&m(e),ie(t),s&&s.d()}}}function db(n,e,t){let i,r,l;J(n,Yn,c=>t(4,i=c)),J(n,Qi,c=>t(5,r=c)),J(n,ml,c=>t(0,l=c));const s=xi.isMock(),o=hl.IMG_URL+"/v1/b17eefe5/faucet.gif";function a(){if(!i){Xl.gotoLogin(r(cn.LOGIN));return}en.create(sb,{})}return Lt(async function(){if(!s||!i)return;const p=(await zl.getMockTradingTasks()).data.taskList,d=27,h=p.find(_=>_.taskId===d);(!h||h.status!=="SUCCESS")&&zl.submitMockTradingTask({taskId:d})}),[l,s,o,a]}let mb=class extends tt{constructor(e){super(),nt(this,e,db,pb,et,{})}};const hb=["BTCUSDT","ETHUSDT","BTCUSD","cETHUSD"],nd=new Jn(hb),_b=gr([nd,ri]).pipe(qn(([n,e])=>n.length>0),Cn(([n,e])=>n.map(t=>e.get(t)).filter(Boolean)),Fr([]),Zu(1)),gb=Nd(()=>Jd(()=>import("/trade/js/chunk-10576bff.js").then(n=>n.eE),[])).pipe(Hd(3),Zu(1));gb.pipe(Cn(n=>n.dndzone));const vb=new jr;vb.pipe(xu(nd),Cn(([{symbol:n,orderNum:e},t])=>bb({symbols:t,symbol:n,orderNum:e}))).subscribe();function bb({symbols:n,symbol:e,orderNum:t}){const i=n.findIndex(s=>s===e),r=t>-1&&t<n.length;if(i<0||!r)return n;const l=[...n];return l.splice(t,0,l.splice(i,1)[0]),l}function Eb(n){let e,t,i=n[0].pairName+"",r,l,s,o=n[0].close+"",a,c,f,p=n[0].changePercentStr+"",d,h,_;return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("span"),a=B(o),c=q(),f=y("span"),d=B(p),this.h()},l(v){e=k(v,"DIV",{class:!0});var g=S(e);t=k(g,"SPAN",{class:!0});var b=S(t);r=A(b,i),b.forEach(m),l=M(g),s=k(g,"SPAN",{class:!0});var P=S(s);a=A(P,o),P.forEach(m),c=M(g),f=k(g,"SPAN",{class:!0});var I=S(f);d=A(I,p),I.forEach(m),g.forEach(m),this.h()},h(){E(t,"class","ml4 T1"),E(s,"class","df aic ml8 wsn T1"),E(f,"class","ml4 wsn"),Te(f,"up",n[0].changePercent>0),Te(f,"down",n[0].changePercent<0),E(e,"class","item df aic br4 lh28 f12 cp H-ymdv5i")},m(v,g){G(v,e,g),u(e,t),u(t,r),u(e,l),u(e,s),u(s,a),u(e,c),u(e,f),u(f,d),h||(_=We(e,"click",n[1]),h=!0)},p(v,[g]){g&1&&i!==(i=v[0].pairName+"")&&W(r,i),g&1&&o!==(o=v[0].close+"")&&W(a,o),g&1&&p!==(p=v[0].changePercentStr+"")&&W(d,p),g&1&&Te(f,"up",v[0].changePercent>0),g&1&&Te(f,"down",v[0].changePercent<0)},i:rt,o:rt,d(v){v&&m(e),h=!1,_()}}}function yb(n,e,t){let{market:i}=e;function r(){Pt.send("trade-pair","change",{type:"Perpetual",symbol:i.symbol})}return n.$$set=l=>{"market"in l&&t(0,i=l.market)},[i,r]}let kb=class extends tt{constructor(e){super(),nt(this,e,yb,Eb,et,{market:0})}};function bc(n,e,t){const i=n.slice();return i[2]=e[t],i}function Ec(n,e){let t,i,r;return i=new kb({props:{market:e[2]}}),{key:n,first:null,c(){t=ut(),te(i.$$.fragment),this.h()},l(l){t=ut(),re(i.$$.fragment,l),this.h()},h(){this.first=t},m(l,s){G(l,t,s),ne(i,l,s),r=!0},p(l,s){e=l;const o={};s&1&&(o.market=e[2]),i.$set(o)},i(l){r||(Q(i.$$.fragment,l),r=!0)},o(l){j(i.$$.fragment,l),r=!1},d(l){l&&m(t),ie(i,l)}}}function Pb(n){let e,t,i,r,l,s=[],o=new Map,a,c=n[0];const f=p=>p[2].symbol;for(let p=0;p<c.length;p+=1){let d=bc(n,c,p),h=f(d);o.set(h,s[p]=Ec(h,d))}return{c(){e=y("div"),t=y("img"),r=q(),l=y("section");for(let p=0;p<s.length;p+=1)s[p].c();this.h()},l(p){e=k(p,"DIV",{class:!0});var d=S(e);t=k(d,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),r=M(d),l=k(d,"SECTION",{class:!0});var h=S(l);for(let _=0;_<s.length;_+=1)s[_].l(h);h.forEach(m),d.forEach(m),this.h()},h(){E(t,"class","icon H-1k4lng"),hn(t.src,i=n[1])||E(t,"src",i),E(t,"alt","Hot"),E(t,"width","14"),E(t,"height","14"),E(l,"class","drop-wrap df aic H-1k4lng"),E(e,"class","df aic")},m(p,d){G(p,e,d),u(e,t),u(e,r),u(e,l);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(l,null);a=!0},p(p,d){d&1&&(c=p[0],ot(),s=Si(s,d,f,1,p,c,o,l,lr,Ec,null,bc),at())},i(p){if(!a){for(let d=0;d<c.length;d+=1)Q(s[d]);a=!0}},o(p){for(let d=0;d<s.length;d+=1)j(s[d]);a=!1},d(p){p&&m(e);for(let d=0;d<s.length;d+=1)s[d].d()}}}function Sb(n){let e,t;return e=new Vp({props:{$$slots:{default:[Pb]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&33&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Cb(n,e,t){let i;J(n,_b,l=>t(0,i=l));const r=hl.STATIC_URL+"/pubimg/8967795c520324b3b7438dd7f329a6dad00f4fca9154ed737c83b827e363331c.png";return[i,r]}let Tb=class extends tt{constructor(e){super(),nt(this,e,Cb,Sb,et,{})}};function yc(n){let e,t,i,r;const l=[Ib,wb],s=[];function o(a,c){return a[0].length>0?0:1}return t=o(n),i=s[t]=l[t](n),{c(){e=y("div"),i.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=S(e);i.l(c),c.forEach(m),this.h()},h(){E(e,"class","wrap H-1tgk27o"),Te(e,"mr6",n[2]===bi.Right),Te(e,"ml6",n[2]===bi.Left)},m(a,c){G(a,e,c),s[t].m(e,null),r=!0},p(a,c){let f=t;t=o(a),t===f?s[t].p(a,c):(ot(),j(s[f],1,1,()=>{s[f]=null}),at(),i=s[t],i?i.p(a,c):(i=s[t]=l[t](a),i.c()),Q(i,1),i.m(e,null)),(!r||c&4)&&Te(e,"mr6",a[2]===bi.Right),(!r||c&4)&&Te(e,"ml6",a[2]===bi.Left)},i(a){r||(Q(i),r=!0)},o(a){j(i),r=!1},d(a){a&&m(e),s[t].d()}}}function wb(n){let e,t;return e=new Tb({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p:rt,i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Ib(n){let e,t;return e=new D1({props:{markets:n[0]}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&1&&(l.markets=i[0]),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Db(n){let e,t,i=n[1]&&yc(n);return{c(){i&&i.c(),e=ut()},l(r){i&&i.l(r),e=ut()},m(r,l){i&&i.m(r,l),G(r,e,l),t=!0},p(r,[l]){r[1]?i?(i.p(r,l),l&2&&Q(i,1)):(i=yc(r),i.c(),Q(i,1),i.m(e.parentNode,e)):i&&(ot(),j(i,1,1,()=>{i=null}),at())},i(r){t||(Q(i),t=!0)},o(r){j(i),t=!1},d(r){i&&i.d(r),r&&m(e)}}}function Vb(n,e,t){let i,r,l,s,o;return J(n,pm,a=>t(3,l=a)),J(n,Zd,a=>t(4,s=a)),J(n,ml,a=>t(2,o=a)),n.$$.update=()=>{n.$$.dirty&16&&t(1,i=xd(s)),n.$$.dirty&8&&t(0,r=l)},[r,i,o,l,s]}let Ob=class extends tt{constructor(e){super(),nt(this,e,Vb,Db,et,{})}};function Lb(n){let e,t,i=n[0](gi.Price)+"",r,l,s,o=n[0](gi.Size)+"",a,c,f,p,d,h,_=n[0](gi.Total)+"",v,g,b,P;return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),s=y("div"),a=B(o),c=B("("),f=B(n[1]),p=B(")"),d=q(),h=y("div"),v=B(_),g=B("("),b=B(n[1]),P=B(")"),this.h()},l(I){e=k(I,"DIV",{class:!0});var T=S(e);t=k(T,"DIV",{class:!0});var C=S(t);r=A(C,i),C.forEach(m),l=M(T),s=k(T,"DIV",{class:!0});var V=S(s);a=A(V,o),c=A(V,"("),f=A(V,n[1]),p=A(V,")"),V.forEach(m),d=M(T),h=k(T,"DIV",{class:!0});var O=S(h);v=A(O,_),g=A(O,"("),b=A(O,n[1]),P=A(O,")"),O.forEach(m),T.forEach(m),this.h()},h(){E(t,"class","f2 pl16 ooo"),E(s,"class","f2 tr ooo"),E(h,"class","f3 pr16 tr ooo"),E(e,"class","df lh20 f12 T2")},m(I,T){G(I,e,T),u(e,t),u(t,r),u(e,l),u(e,s),u(s,a),u(s,c),u(s,f),u(s,p),u(e,d),u(e,h),u(h,v),u(h,g),u(h,b),u(h,P)},p(I,[T]){T&1&&i!==(i=I[0](gi.Price)+"")&&W(r,i),T&1&&o!==(o=I[0](gi.Size)+"")&&W(a,o),T&2&&W(f,I[1]),T&1&&_!==(_=I[0](gi.Total)+"")&&W(v,_),T&2&&W(b,I[1])},i:rt,o:rt,d(I){I&&m(e)}}}function $b(n,e,t){let i,r,l,s;return J(n,Xt,o=>t(2,r=o)),J(n,dt,o=>t(0,l=o)),J(n,an,o=>t(3,s=o)),n.$$.update=()=>{n.$$.dirty&13&&t(1,i=Lr(s,l,He,r))},[l,i,r,s]}let qb=class extends tt{constructor(e){super(),nt(this,e,$b,Lb,et,{})}};function Mb(n){let e=n[1].sizeStr+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&2&&e!==(e=i[1].sizeStr+"")&&W(t,e)},d(i){i&&m(t)}}}function Nb(n){let e,t=n[1].sizeStr+"",i,r,l,s;return{c(){e=y("span"),i=B(t)},l(o){e=k(o,"SPAN",{});var a=S(e);i=A(a,t),a.forEach(m)},m(o,a){G(o,e,a),u(e,i),l||(s=Wt(r=Gt.call(null,e,{text:n[4]})),l=!0)},p(o,a){a&2&&t!==(t=o[1].sizeStr+"")&&W(i,t),r&&Tt(r.update)&&a&16&&r.update.call(null,{text:o[4]})},d(o){o&&m(e),l=!1,s()}}}function Hb(n){let e=n[1].totalStr+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&2&&e!==(e=i[1].totalStr+"")&&W(t,e)},d(i){i&&m(t)}}}function Bb(n){let e,t=n[1].totalStr+"",i,r,l,s;return{c(){e=y("span"),i=B(t)},l(o){e=k(o,"SPAN",{});var a=S(e);i=A(a,t),a.forEach(m)},m(o,a){G(o,e,a),u(e,i),l||(s=Wt(r=Gt.call(null,e,{text:n[3](gi.ClickToCancel)})),l=!0)},p(o,a){a&2&&t!==(t=o[1].totalStr+"")&&W(i,t),r&&Tt(r.update)&&a&8&&r.update.call(null,{text:o[3](gi.ClickToCancel)})},d(o){o&&m(e),l=!1,s()}}}function Ab(n){let e,t,i=n[1].price+"",r,l,s,o,a,c,f,p,d,h,_,v,g,b,P;function I(D,L){return D[5]?Nb:Mb}let T=I(n),C=T(n);function V(D,L){return D[5]?Bb:Hb}let O=V(n),w=O(n);return{c(){e=y("div"),t=y("div"),r=B(i),s=q(),o=y("div"),C.c(),c=q(),f=y("div"),p=y("i"),d=q(),w.c(),_=q(),v=y("i"),g=B(""),this.h()},l(D){e=k(D,"DIV",{class:!0});var L=S(e);t=k(L,"DIV",{class:!0,"data-price":!0});var $=S(t);r=A($,i),$.forEach(m),s=M(L),o=k(L,"DIV",{class:!0,"data-size":!0});var N=S(o);C.l(N),N.forEach(m),c=M(L),f=k(L,"DIV",{class:!0,"data-total":!0});var z=S(f);p=k(z,"I",{class:!0,style:!0}),S(p).forEach(m),d=M(z),w.l(z),z.forEach(m),_=M(L),v=k(L,"I",{class:!0});var H=S(v);g=A(H,""),H.forEach(m),L.forEach(m),this.h()},h(){E(t,"class","order-price f2 pl16 H-1mlbn0r"),E(t,"data-price",l=n[1].price),E(o,"class","order-size f2 pr ph16 tr T1 H-1mlbn0r"),E(o,"data-size",a=n[1].size),Te(o,"up1",n[1].ss===1&&n[1].bid),Te(o,"up2",n[1].ss===2&&n[1].bid),Te(o,"dw1",n[1].ss===3&&n[1].ask),Te(o,"dw2",n[1].ss===4&&n[1].ask),Te(o,"BLUE",n[5]),E(p,"class","bar H-1mlbn0r"),Jt(p,"width",n[1].percent+"%"),E(f,"class","order-total f3 pr pr16 tr T1 H-1mlbn0r"),E(f,"data-total",h=n[1].total),Te(f,"BLUE",n[5]),E(v,"class","iconfont pa f12 BLUE H-1mlbn0r"),E(e,"class","wrap df pr lh22 cp usn H-1mlbn0r"),Te(e,"special-row",n[5]),Te(e,"bid",n[1].bid),Te(e,"ask",n[1].ask),Te(e,"shading",n[0]>-1?n[1].bid?n[0]>=n[2]:n[2]>=n[0]:!1)},m(D,L){G(D,e,L),u(e,t),u(t,r),u(e,s),u(e,o),C.m(o,null),u(e,c),u(e,f),u(f,p),u(f,d),w.m(f,null),u(e,_),u(e,v),u(v,g),n[11](e),b||(P=[We(v,"click",function(){Tt(n[7](n[1]))&&n[7](n[1]).apply(this,arguments)}),We(e,"click",n[10]),We(e,"mouseenter",n[8]),We(e,"mouseleave",n[9])],b=!0)},p(D,[L]){n=D,L&2&&i!==(i=n[1].price+"")&&W(r,i),L&2&&l!==(l=n[1].price)&&E(t,"data-price",l),T===(T=I(n))&&C?C.p(n,L):(C.d(1),C=T(n),C&&(C.c(),C.m(o,null))),L&2&&a!==(a=n[1].size)&&E(o,"data-size",a),L&2&&Te(o,"up1",n[1].ss===1&&n[1].bid),L&2&&Te(o,"up2",n[1].ss===2&&n[1].bid),L&2&&Te(o,"dw1",n[1].ss===3&&n[1].ask),L&2&&Te(o,"dw2",n[1].ss===4&&n[1].ask),L&32&&Te(o,"BLUE",n[5]),L&2&&Jt(p,"width",n[1].percent+"%"),O===(O=V(n))&&w?w.p(n,L):(w.d(1),w=O(n),w&&(w.c(),w.m(f,null))),L&2&&h!==(h=n[1].total)&&E(f,"data-total",h),L&32&&Te(f,"BLUE",n[5]),L&32&&Te(e,"special-row",n[5]),L&2&&Te(e,"bid",n[1].bid),L&2&&Te(e,"ask",n[1].ask),L&7&&Te(e,"shading",n[0]>-1?n[1].bid?n[0]>=n[2]:n[2]>=n[0]:!1)},i:rt,o:rt,d(D){D&&m(e),C.d(),w.d(),n[11](null),b=!1,jt(P)}}}function zb(n,e,t){let i,r;J(n,Xt,I=>t(13,i=I)),J(n,dt,I=>t(3,r=I));let{item:l=null}=e,{index:s=-1}=e,{curIndex:o=-1}=e,a="",c=!1,f=null,p;function d(I){return function(){const{orders:T}=I,C={type:i.type,by:"orderBook",goal:"cancel"};T.forEach(V=>Mi(V,C))}}function h(I,T){const{orders:C,price:V}=I;if(C.length<1)return;const O=C.reduce((w,D)=>Number(D.displayQty)>0&&Number(D.displayQty)<D.orderQty?Re(w).add(D.displayQty).toNumber():w+D.orderQty,0);O>0&&t(4,a=T(gi.YouAreBidding,{Size:O,Price:V}))}function _(I){I.orders&&t(5,c=I.orders.length>0)}function v(){t(0,o=s);let I=document.getElementById("tooltip-holder");I||(I=document.createElement("div"),I.setAttribute("id","tooltip-holder"),document.body.appendChild(I)),f=new V1({target:I,props:{anchorNode:p,item:l,index:s}}),f.$set({visible:!0}),So.next({state:"open"}),O1.next({index:s,type:l.bid?"bids":l.ask?"asks":"none"})}function g(){t(0,o=-1),So.next({state:"close"}),f&&!f.isHover&&(f.$set({visible:!1}),f.$destroy())}function b(I){$i.call(this,n,I)}function P(I){De[I?"unshift":"push"](()=>{p=I,t(6,p)})}return n.$$set=I=>{"item"in I&&t(1,l=I.item),"index"in I&&t(2,s=I.index),"curIndex"in I&&t(0,o=I.curIndex)},n.$$.update=()=>{n.$$.dirty&10&&h(l,r),n.$$.dirty&2&&_(l)},[o,l,s,r,a,c,p,d,v,g,b,P]}let Qb=class extends tt{constructor(e){super(),nt(this,e,zb,Ab,Bd,{item:1,index:2,curIndex:0})}};function kc(n,e,t){const i=n.slice();return i[5]=e[t],i[7]=t,i}function Pc(n){let e,t,i;function r(s){n[4](s)}let l={item:n[5],index:n[7]};return n[2]!==void 0&&(l.curIndex=n[2]),e=new Qb({props:l}),De.push(()=>qe(e,"curIndex",r)),e.$on("click",function(){Tt(n[3](n[5]))&&n[3](n[5]).apply(this,arguments)}),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){n=s;const a={};o&1&&(a.item=n[5]),!t&&o&4&&(t=!0,a.curIndex=n[2],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function Rb(n){let e,t,i=n[0],r=[];for(let s=0;s<i.length;s+=1)r[s]=Pc(kc(n,i,s));const l=s=>j(r[s],1,1,()=>{r[s]=null});return{c(){e=y("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);for(let a=0;a<r.length;a+=1)r[a].l(o);o.forEach(m),this.h()},h(){E(e,"class","f1 f12 fw2 H-ljan74"),Te(e,"ask",n[1])},m(s,o){G(s,e,o);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);t=!0},p(s,[o]){if(o&13){i=s[0];let a;for(a=0;a<i.length;a+=1){const c=kc(s,i,a);r[a]?(r[a].p(c,o),Q(r[a],1)):(r[a]=Pc(c),r[a].c(),Q(r[a],1),r[a].m(e,null))}for(ot(),a=i.length;a<r.length;a+=1)l(a);at()}(!t||o&2)&&Te(e,"ask",s[1])},i(s){if(!t){for(let o=0;o<i.length;o+=1)Q(r[o]);t=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)j(r[o]);t=!1},d(s){s&&m(e),wn(r,s)}}}function Fb(n,e,t){let{items:i=[]}=e,{ask:r=!1}=e,l=-1;function s(a){return function(){Pt.send("global","price-click",{price:a.price})}}function o(a){l=a,t(2,l)}return n.$$set=a=>{"items"in a&&t(0,i=a.items),"ask"in a&&t(1,r=a.ask)},[i,r,l,s,o]}let Rl=class extends tt{constructor(e){super(),nt(this,e,Fb,Rb,et,{items:0,ask:1})}};function jb(n){let e,t,i,r,l,s,o,a,c=n[0].markPrice+"",f,p,d,h,_;return t=new Mp({props:{showArrow:!0,tooltipText:n[1](vt.LastPrice),size:"f16",symbol:n[0].symbol,market:n[2],items:n[3]}}),{c(){e=y("div"),te(t.$$.fragment),i=q(),r=y("div"),l=y("i"),s=B(""),o=q(),a=y("span"),f=B(c),this.h()},l(v){e=k(v,"DIV",{class:!0});var g=S(e);re(t.$$.fragment,g),i=M(g),r=k(g,"DIV",{class:!0});var b=S(r);l=k(b,"I",{class:!0});var P=S(l);s=A(P,""),P.forEach(m),o=M(b),a=k(b,"SPAN",{class:!0});var I=S(a);f=A(I,c),I.forEach(m),b.forEach(m),g.forEach(m),this.h()},h(){E(l,"class","iconfont mark-price-icon f12 T2 H-1cfl5e2"),E(a,"class","T1"),E(r,"class","mark-price-wrap df f14 cp H-1cfl5e2"),E(e,"class","wrap df aic ph16 f16 fw2 H-1cfl5e2")},m(v,g){G(v,e,g),ne(t,e,null),u(e,i),u(e,r),u(r,l),u(l,s),u(r,o),u(r,a),u(a,f),d=!0,h||(_=[Wt(p=Gt.call(null,r,{text:n[1](vt.MarkPrice)+`<a href=${n[4](cn.CMS_MARK_PRICE)} class="ml4" target="_blank">${n[1](vt.ClickHereTo)}</a>`,hideDelay:100})),We(r,"click",n[5])],h=!0)},p(v,[g]){const b={};g&2&&(b.tooltipText=v[1](vt.LastPrice)),g&1&&(b.symbol=v[0].symbol),g&4&&(b.market=v[2]),g&8&&(b.items=v[3]),t.$set(b),(!d||g&1)&&c!==(c=v[0].markPrice+"")&&W(f,c),p&&Tt(p.update)&&g&18&&p.update.call(null,{text:v[1](vt.MarkPrice)+`<a href=${v[4](cn.CMS_MARK_PRICE)} class="ml4" target="_blank">${v[1](vt.ClickHereTo)}</a>`,hideDelay:100})},i(v){d||(Q(t.$$.fragment,v),d=!0)},o(v){j(t.$$.fragment,v),d=!1},d(v){v&&m(e),ie(t),h=!1,jt(_)}}}function Ub(n,e,t){let i,r,l,s,o;J(n,or,f=>t(6,i=f)),J(n,dt,f=>t(1,r=f)),J(n,Er,f=>t(2,l=f)),J(n,Ri,f=>t(3,s=f)),J(n,Yl,f=>t(4,o=f));let a;function c(){Pt.send("global","price-click",{price:a.markPrice})}return n.$$.update=()=>{n.$$.dirty&64&&t(0,a=i)},[a,r,l,s,o,c,i]}let io=class extends tt{constructor(e){super(),nt(this,e,Ub,jb,et,{})}};function Wb(n){let e,t,i,r;return e=new io({}),i=new Rl({props:{items:n[2]}}),{c(){te(e.$$.fragment),t=q(),te(i.$$.fragment)},l(l){re(e.$$.fragment,l),t=M(l),re(i.$$.fragment,l)},m(l,s){ne(e,l,s),G(l,t,s),ne(i,l,s),r=!0},p(l,s){const o={};s&4&&(o.items=l[2]),i.$set(o)},i(l){r||(Q(e.$$.fragment,l),Q(i.$$.fragment,l),r=!0)},o(l){j(e.$$.fragment,l),j(i.$$.fragment,l),r=!1},d(l){ie(e,l),l&&m(t),ie(i,l)}}}function Gb(n){let e,t,i,r;return e=new Rl({props:{ask:!0,items:n[3].reverse()}}),i=new io({}),{c(){te(e.$$.fragment),t=q(),te(i.$$.fragment)},l(l){re(e.$$.fragment,l),t=M(l),re(i.$$.fragment,l)},m(l,s){ne(e,l,s),G(l,t,s),ne(i,l,s),r=!0},p(l,s){const o={};s&8&&(o.items=l[3].reverse()),e.$set(o)},i(l){r||(Q(e.$$.fragment,l),Q(i.$$.fragment,l),r=!0)},o(l){j(e.$$.fragment,l),j(i.$$.fragment,l),r=!1},d(l){ie(e,l),l&&m(t),ie(i,l)}}}function Kb(n){let e,t,i,r,l,s;return e=new Rl({props:{ask:!0,items:n[3].reverse()}}),i=new io({}),l=new Rl({props:{items:n[2]}}),{c(){te(e.$$.fragment),t=q(),te(i.$$.fragment),r=q(),te(l.$$.fragment)},l(o){re(e.$$.fragment,o),t=M(o),re(i.$$.fragment,o),r=M(o),re(l.$$.fragment,o)},m(o,a){ne(e,o,a),G(o,t,a),ne(i,o,a),G(o,r,a),ne(l,o,a),s=!0},p(o,a){const c={};a&8&&(c.items=o[3].reverse()),e.$set(c);const f={};a&4&&(f.items=o[2]),l.$set(f)},i(o){s||(Q(e.$$.fragment,o),Q(i.$$.fragment,o),Q(l.$$.fragment,o),s=!0)},o(o){j(e.$$.fragment,o),j(i.$$.fragment,o),j(l.$$.fragment,o),s=!1},d(o){ie(e,o),o&&m(t),ie(i,o),o&&m(r),ie(l,o)}}}function Sc(n){let e,t,i,r;const l=[Kb,Gb,Wb],s=[];function o(a,c){return a[6]===cs.DEFAULT?0:a[6]===cs.SELL?1:a[6]===cs.BUY?2:-1}return~(t=o(n))&&(i=s[t]=l[t](n)),{c(){e=y("div"),i&&i.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=S(e);i&&i.l(c),c.forEach(m),this.h()},h(){E(e,"class","df fdc f1")},m(a,c){G(a,e,c),~t&&s[t].m(e,null),r=!0},p(a,c){let f=t;t=o(a),t===f?~t&&s[t].p(a,c):(i&&(ot(),j(s[f],1,1,()=>{s[f]=null}),at()),~t?(i=s[t],i?i.p(a,c):(i=s[t]=l[t](a),i.c()),Q(i,1),i.m(e,null)):i=null)},i(a){r||(Q(i),r=!0)},o(a){j(i),r=!1},d(a){a&&m(e),~t&&s[t].d()}}}function Xb(n){let e,t,i,r,l,s,o,a,c,f,p,d=n[1],h,_,v;i=new L1({});function g(I){n[12](I)}let b={options:n[4]};n[0]!==void 0&&(b.value=n[0]),s=new Yr({props:b}),De.push(()=>qe(s,"value",g)),s.$on("change",n[7]),f=new qb({});let P=Sc(n);return _=new $1({}),{c(){e=y("div"),t=y("div"),te(i.$$.fragment),r=q(),l=y("div"),te(s.$$.fragment),a=q(),c=y("div"),te(f.$$.fragment),p=q(),P.c(),h=q(),te(_.$$.fragment),this.h()},l(I){e=k(I,"DIV",{class:!0});var T=S(e);t=k(T,"DIV",{class:!0});var C=S(t);re(i.$$.fragment,C),r=M(C),l=k(C,"DIV",{class:!0});var V=S(l);re(s.$$.fragment,V),V.forEach(m),C.forEach(m),a=M(T),c=k(T,"DIV",{class:!0});var O=S(c);re(f.$$.fragment,O),p=M(O),P.l(O),h=M(O),re(_.$$.fragment,O),O.forEach(m),T.forEach(m),this.h()},h(){E(l,"class","options H-1ikc1bk"),E(t,"class","header df aic jcsb ph16 H-1ikc1bk"),E(c,"class","body f1 df fdc B1 H-1ikc1bk"),E(e,"class","df fdc B1 f1"),Te(e,"no-animation",n[5].orderBookAnimations===!1)},m(I,T){G(I,e,T),u(e,t),ne(i,t,null),u(t,r),u(t,l),ne(s,l,null),u(e,a),u(e,c),ne(f,c,null),u(c,p),P.m(c,null),u(c,h),ne(_,c,null),v=!0},p(I,[T]){const C={};T&16&&(C.options=I[4]),!o&&T&1&&(o=!0,C.value=I[0],Me(()=>o=!1)),s.$set(C),T&2&&et(d,d=I[1])?(ot(),j(P,1,1,rt),at(),P=Sc(I),P.c(),Q(P,1),P.m(c,h)):P.p(I,T),(!v||T&32)&&Te(e,"no-animation",I[5].orderBookAnimations===!1)},i(I){v||(Q(i.$$.fragment,I),Q(s.$$.fragment,I),Q(f.$$.fragment,I),Q(P),Q(_.$$.fragment,I),v=!0)},o(I){j(i.$$.fragment,I),j(s.$$.fragment,I),j(f.$$.fragment,I),j(P),j(_.$$.fragment,I),v=!1},d(I){I&&m(e),ie(i),ie(s),ie(f),P.d(I),ie(_)}}}function Cc(n,e){return n.map(t=>Yb(e,t))}function Yb(n,e){const t=n.filter(i=>i.priceEp===e.priceEp&&!i.removable);return Object.assign(Object.assign({},e),{orders:t})}function Jb(n,e,t){let i,r,l,s,o,a,c;J(n,nm,I=>t(4,i=I)),J(n,Xt,I=>t(8,r=I)),J(n,cr,I=>t(9,l=I)),J(n,_l,I=>t(10,s=I)),J(n,Ci,I=>t(11,o=I)),J(n,xn,I=>t(5,a=I)),J(n,Co,I=>t(6,c=I));let f="",p=[],d=[];vn.readContractStorage().orderBookType;let h=0;Lt(()=>{const T=gr([cp,Co]).pipe(Cn(([C,V])=>[C.items.find(({id:O})=>O==="BookTradesView"),V]),Cn(q1)).subscribe(C=>cl.next({type:"order-book-depth",depth:C}));return function(){T.unsubscribe()}});function _(I,T){if(I.reset){t(1,f=I.symbol),t(2,p=[]),t(3,d=[]);return}const C=T.filter(V=>V.symbol===I.symbol);t(2,p=Cc(I.bids,C)),t(3,d=Cc(I.asks,C))}function v(I){const T=I.detail;Pi.next({symbol:r.symbol,kv:{tickSizeEp:T}})}function g(I,T){if(I.symbol!==T.symbol)return;const{kv:C}=T,V=C.tickSizeEp,O=i.map(w=>w.value);t(0,h=O.includes(V)?V:I.tickSizeEp)}function b(I){cl.next({type:"book-step-size",tradeType:"Perpetual",stepSizeEx:I})}function P(I){h=I,t(0,h)}return n.$$.update=()=>{n.$$.dirty&3072&&_(o,s),n.$$.dirty&768&&g(r,l),n.$$.dirty&1&&b(h)},[h,f,p,d,i,a,c,v,r,l,s,o,P]}let Zb=class extends tt{constructor(e){super(),nt(this,e,Jb,Xb,et,{})}};const ur={RecentTrades:"38f930",Price:"24170f",Size:"9bd5a3",Time:"edcf00"};function xb(n){let e,t,i=n[0](ur.Price)+"",r,l,s,o=n[0](ur.Size)+"",a,c,f,p,d,h,_=n[0](ur.Time)+"",v;return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),s=y("div"),a=B(o),c=B("("),f=B(n[1]),p=B(")"),d=q(),h=y("div"),v=B(_),this.h()},l(g){e=k(g,"DIV",{class:!0});var b=S(e);t=k(b,"DIV",{class:!0});var P=S(t);r=A(P,i),P.forEach(m),l=M(b),s=k(b,"DIV",{class:!0});var I=S(s);a=A(I,o),c=A(I,"("),f=A(I,n[1]),p=A(I,")"),I.forEach(m),d=M(b),h=k(b,"DIV",{class:!0});var T=S(h);v=A(T,_),T.forEach(m),b.forEach(m),this.h()},h(){E(t,"class","pl16 f2"),E(s,"class","col f2 tr wsn ooo"),E(h,"class","pr16 f3 tr"),E(e,"class","row df lh24 mt5 T2")},m(g,b){G(g,e,b),u(e,t),u(t,r),u(e,l),u(e,s),u(s,a),u(s,c),u(s,f),u(s,p),u(e,d),u(e,h),u(h,v)},p(g,[b]){b&1&&i!==(i=g[0](ur.Price)+"")&&W(r,i),b&1&&o!==(o=g[0](ur.Size)+"")&&W(a,o),b&2&&W(f,g[1]),b&1&&_!==(_=g[0](ur.Time)+"")&&W(v,_)},i:rt,o:rt,d(g){g&&m(e)}}}function eE(n,e,t){let i,r,l,s;return J(n,Xt,o=>t(2,r=o)),J(n,dt,o=>t(0,l=o)),J(n,an,o=>t(3,s=o)),n.$$.update=()=>{n.$$.dirty&13&&t(1,i=Lr(s,l,He,r))},[l,i,r,s]}let tE=class extends tt{constructor(e){super(),nt(this,e,eE,xb,et,{})}};function nE(n){let e,t,i=n[0].price+"",r,l,s,o,a=n[0].sizeStr+"",c,f,p,d,h=n[0].time+"",_;return{c(){e=y("div"),t=y("div"),r=B(i),s=q(),o=y("div"),c=B(a),p=q(),d=y("div"),_=B(h),this.h()},l(v){e=k(v,"DIV",{class:!0});var g=S(e);t=k(g,"DIV",{class:!0,"data-price":!0});var b=S(t);r=A(b,i),b.forEach(m),s=M(g),o=k(g,"DIV",{class:!0,"data-size":!0});var P=S(o);c=A(P,a),P.forEach(m),p=M(g),d=k(g,"DIV",{class:!0});var I=S(d);_=A(I,h),I.forEach(m),g.forEach(m),this.h()},h(){E(t,"class","f2 pl16 cp trade-price H-161kxdm"),E(t,"data-price",l=n[0].price),Te(t,"up",n[0].up),Te(t,"down",n[0].down),E(o,"class","f2 tr cp trade-size T1 H-161kxdm"),E(o,"data-size",f=n[0].size),E(d,"class","time f3 tr T1 H-161kxdm"),E(e,"class","row f1 df lh22 fw2 H-161kxdm"),Te(e,"buy",n[0].buy),Te(e,"sell",n[0].sell),Te(e,"fa",n[0].fa),Te(e,"fb",n[0].fb)},m(v,g){G(v,e,g),u(e,t),u(t,r),u(e,s),u(e,o),u(o,c),u(e,p),u(e,d),u(d,_)},p(v,[g]){g&1&&i!==(i=v[0].price+"")&&W(r,i),g&1&&l!==(l=v[0].price)&&E(t,"data-price",l),g&1&&Te(t,"up",v[0].up),g&1&&Te(t,"down",v[0].down),g&1&&a!==(a=v[0].sizeStr+"")&&W(c,a),g&1&&f!==(f=v[0].size)&&E(o,"data-size",f),g&1&&h!==(h=v[0].time+"")&&W(_,h),g&1&&Te(e,"buy",v[0].buy),g&1&&Te(e,"sell",v[0].sell),g&1&&Te(e,"fa",v[0].fa),g&1&&Te(e,"fb",v[0].fb)},i:rt,o:rt,d(v){v&&m(e)}}}function iE(n,e,t){let{item:i=null}=e;return n.$$set=r=>{"item"in r&&t(0,i=r.item)},[i]}let rE=class extends tt{constructor(e){super(),nt(this,e,iE,nE,et,{item:0})}};function Tc(n,e,t){const i=n.slice();return i[2]=e[t],i}function wc(n){let e,t;return e=new rE({props:{item:n[2]}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&1&&(l.item=i[2]),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function lE(n){let e,t,i,r,l,s,o;t=new tE({});let a=n[0],c=[];for(let p=0;p<a.length;p+=1)c[p]=wc(Tc(n,a,p));const f=p=>j(c[p],1,1,()=>{c[p]=null});return{c(){e=y("div"),te(t.$$.fragment),i=q(),r=y("div");for(let p=0;p<c.length;p+=1)c[p].c();this.h()},l(p){e=k(p,"DIV",{class:!0});var d=S(e);re(t.$$.fragment,d),i=M(d),r=k(d,"DIV",{class:!0});var h=S(r);for(let _=0;_<c.length;_+=1)c[_].l(h);h.forEach(m),d.forEach(m),this.h()},h(){E(r,"class","body sv H-wic5zo"),E(e,"class","wrap df fdc f1 B1 f12 H-wic5zo")},m(p,d){G(p,e,d),ne(t,e,null),u(e,i),u(e,r);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(r,null);l=!0,s||(o=We(r,"click",n[1]),s=!0)},p(p,[d]){if(d&1){a=p[0];let h;for(h=0;h<a.length;h+=1){const _=Tc(p,a,h);c[h]?(c[h].p(_,d),Q(c[h],1)):(c[h]=wc(_),c[h].c(),Q(c[h],1),c[h].m(r,null))}for(ot(),h=a.length;h<c.length;h+=1)f(h);at()}},i(p){if(!l){Q(t.$$.fragment,p);for(let d=0;d<a.length;d+=1)Q(c[d]);l=!0}},o(p){j(t.$$.fragment,p),c=c.filter(Boolean);for(let d=0;d<c.length;d+=1)j(c[d]);l=!1},d(p){p&&m(e),ie(t),wn(c,p),s=!1,o()}}}function sE(n,e,t){let i;J(n,e1,l=>t(0,i=l));function r(l){if(l.target.classList.contains("trade-price")){const s=l.target.dataset.price;Pt.send("global","price-click",{price:s});return}if(l.target.classList.contains("trade-size")){const s=l.target.dataset.size;Pt.send("global","quantity-click",{quantity:s})}}return[i,r]}let oE=class extends tt{constructor(e){super(),nt(this,e,sE,lE,et,{})}};function Ic(n,e,t){const i=n.slice();return i[7]=e[t],i}function Dc(n){let e,t=n[7].text+"",i,r,l;return{c(){e=y("div"),i=B(t),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);i=A(o,t),o.forEach(m),this.h()},h(){E(e,"class","tab cp f14 T2 fw2 H-v8nxh6"),Te(e,"active",n[7].value===n[0])},m(s,o){G(s,e,o),u(e,i),r||(l=[We(e,"click",function(){Tt(n[2](n[7]))&&n[2](n[7]).apply(this,arguments)}),We(e,"mousedown",Zn(n[5]))],r=!0)},p(s,o){n=s,o&2&&t!==(t=n[7].text+"")&&W(i,t),o&3&&Te(e,"active",n[7].value===n[0])},d(s){s&&m(e),r=!1,jt(l)}}}function Vc(n){let e,t;return e=new Zb({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Oc(n){let e,t;return e=new oE({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function aE(n){let e,t,i,r,l,s,o,a,c=n[1],f=[];for(let h=0;h<c.length;h+=1)f[h]=Dc(Ic(n,c,h));let p=n[0]==="Book"&&Vc(),d=n[0]==="Trade"&&Oc();return{c(){e=y("div"),t=y("span");for(let h=0;h<f.length;h+=1)f[h].c();i=q(),r=y("div"),p&&p.c(),l=q(),d&&d.c(),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=S(e);t=k(_,"SPAN",{class:!0});var v=S(t);for(let b=0;b<f.length;b+=1)f[b].l(v);v.forEach(m),i=M(_),r=k(_,"DIV",{class:!0});var g=S(r);p&&p.l(g),l=M(g),d&&d.l(g),g.forEach(m),_.forEach(m),this.h()},h(){E(t,"class","tabs df aic usn H-v8nxh6"),E(r,"class","df f1"),E(e,"class","wrap df fdc bsbb ovh H-v8nxh6")},m(h,_){G(h,e,_),u(e,t);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(t,null);u(e,i),u(e,r),p&&p.m(r,null),u(r,l),d&&d.m(r,null),s=!0,o||(a=We(r,"mousedown",Zn(n[4])),o=!0)},p(h,[_]){if(_&7){c=h[1];let v;for(v=0;v<c.length;v+=1){const g=Ic(h,c,v);f[v]?f[v].p(g,_):(f[v]=Dc(g),f[v].c(),f[v].m(t,null))}for(;v<f.length;v+=1)f[v].d(1);f.length=c.length}h[0]==="Book"?p?_&1&&Q(p,1):(p=Vc(),p.c(),Q(p,1),p.m(r,l)):p&&(ot(),j(p,1,1,()=>{p=null}),at()),h[0]==="Trade"?d?_&1&&Q(d,1):(d=Oc(),d.c(),Q(d,1),d.m(r,null)):d&&(ot(),j(d,1,1,()=>{d=null}),at())},i(h){s||(Q(p),Q(d),s=!0)},o(h){j(p),j(d),s=!1},d(h){h&&m(e),wn(f,h),p&&p.d(),d&&d.d(),o=!1,a()}}}function cE(n,e,t){let i;J(n,dt,f=>t(3,i=f));let r="Book",l=[];function s(f){t(1,l=[{text:f(gi.OrderBook),value:"Book"},{text:f(ur.RecentTrades),value:"Trade"}])}function o(f){return()=>{t(0,r=f.value)}}function a(f){$i.call(this,n,f)}function c(f){$i.call(this,n,f)}return n.$$.update=()=>{n.$$.dirty&8&&s(i)},[r,l,o,i,a,c]}let fE=class extends tt{constructor(e){super(),nt(this,e,cE,aE,et,{})}};const Ss="Compare";function uE(n){return{async create(e,t){const i=dE(n,Ss);if(i){n.getStudyById(i.id).applyOverrides({symbol:e,"Plot.color":Cs(t)}),n.getPanes()[0].getMainSourcePriceScale().setMode(0);return}const r=await n.createStudy(Ss,!1,!1,{source:"close",symbol:e},{visible:!1,"Plot.linewidth":1,"Plot.color":Cs(t)}),l=n.getStudyById(r);pE(l,t),n.getPanes()[0].getMainSourcePriceScale().setMode(0)}}}function pE(n,e){n&&n.applyOverrides({"Plot.color":Cs(e)})}function Cs(n){return n===fp.Dark?"#0055ff":"#003398"}function dE(n,e){return n.getAllStudies().find(({name:i})=>i===e)}function mE(n){if(!n)return;const t=n.getAllStudies().find(({name:i})=>i===Ss);t&&n.removeEntity(t.id)}function Lc(n,e,t){const i=n.slice();return i[4]=e[t],i}function $c(n){let e,t,i=n[4].transactTime+"",r,l,s,o=n[4].execPrice+"",a,c,f=(["Market","Stop","MarketIfTouched"].includes(n[4].ordType)?"Market":n[4].price)+"",p,d,h,_=n[4].execDisplayQty+"",v,g,b=n[4].orderDisplayQty+"",P,I,T,C=n[4].execFee+"",V,O;return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),s=y("div"),a=B(o),c=B(" / "),p=B(f),d=q(),h=y("div"),v=B(_),g=B(" / "),P=B(b),I=q(),T=y("div"),V=B(C),O=q(),this.h()},l(w){e=k(w,"DIV",{class:!0});var D=S(e);t=k(D,"DIV",{class:!0});var L=S(t);r=A(L,i),L.forEach(m),l=M(D),s=k(D,"DIV",{class:!0});var $=S(s);a=A($,o),c=A($," / "),p=A($,f),$.forEach(m),d=M(D),h=k(D,"DIV",{class:!0});var N=S(h);v=A(N,_),g=A(N," / "),P=A(N,b),N.forEach(m),I=M(D),T=k(D,"DIV",{class:!0});var z=S(T);V=A(z,C),z.forEach(m),O=M(D),D.forEach(m),this.h()},h(){E(t,"class","H-s0cwri"),E(s,"class","H-s0cwri"),E(h,"class","wsn H-s0cwri"),E(T,"class","tr H-s0cwri"),E(e,"class","tds T2 lh30 H-s0cwri")},m(w,D){G(w,e,D),u(e,t),u(t,r),u(e,l),u(e,s),u(s,a),u(s,c),u(s,p),u(e,d),u(e,h),u(h,v),u(h,g),u(h,P),u(e,I),u(e,T),u(T,V),u(e,O)},p(w,D){D&1&&i!==(i=w[4].transactTime+"")&&W(r,i),D&1&&o!==(o=w[4].execPrice+"")&&W(a,o),D&1&&f!==(f=(["Market","Stop","MarketIfTouched"].includes(w[4].ordType)?"Market":w[4].price)+"")&&W(p,f),D&1&&_!==(_=w[4].execDisplayQty+"")&&W(v,_),D&1&&b!==(b=w[4].orderDisplayQty+"")&&W(P,b),D&1&&C!==(C=w[4].execFee+"")&&W(V,C)},d(w){w&&m(e)}}}function hE(n){let e,t,i=n[1](zt.Detail)+"",r,l,s,o,a,c,f,p,d=n[1](bt.Time)+"",h,_,v,g=n[1](bt.ExecPrice)+"",b,P,I=n[1](bt.OrderPrice)+"",T,C,V,O=n[1](bt.ExecSize)+"",w,D,L=n[1](He.Size)+"",$,N,z,H=n[1](bt.FeePaid)+"",R,F,U,K,Y=n[0],X=[];for(let ee=0;ee<Y.length;ee+=1)X[ee]=$c(Lc(n,Y,ee));return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("i"),o=B(""),a=q(),c=y("div"),f=y("div"),p=y("div"),h=B(d),_=q(),v=y("div"),b=B(g),P=B(" / "),T=B(I),C=q(),V=y("div"),w=B(O),D=B(" / "),$=B(L),N=q(),z=y("div"),R=B(H),F=q();for(let ee=0;ee<X.length;ee+=1)X[ee].c();this.h()},l(ee){e=k(ee,"DIV",{class:!0});var Z=S(e);t=k(Z,"SPAN",{class:!0});var ue=S(t);r=A(ue,i),ue.forEach(m),l=M(Z),s=k(Z,"I",{class:!0});var ce=S(s);o=A(ce,""),ce.forEach(m),Z.forEach(m),a=M(ee),c=k(ee,"DIV",{class:!0});var pe=S(c);f=k(pe,"DIV",{class:!0});var me=S(f);p=k(me,"DIV",{class:!0});var oe=S(p);h=A(oe,d),oe.forEach(m),_=M(me),v=k(me,"DIV",{class:!0});var ke=S(v);b=A(ke,g),P=A(ke," / "),T=A(ke,I),ke.forEach(m),C=M(me),V=k(me,"DIV",{class:!0});var Le=S(V);w=A(Le,O),D=A(Le," / "),$=A(Le,L),Le.forEach(m),N=M(me),z=k(me,"DIV",{class:!0});var ge=S(z);R=A(ge,H),ge.forEach(m),me.forEach(m),F=M(pe);for(let ae=0;ae<X.length;ae+=1)X[ae].l(pe);pe.forEach(m),this.h()},h(){E(t,"class","H-s0cwri"),E(s,"class","iconfont close f16 cp H-s0cwri"),E(e,"class","header ph16 T1 df aic jcsb H-s0cwri"),E(p,"class","H-s0cwri"),E(v,"class","H-s0cwri"),E(V,"class","H-s0cwri"),E(z,"class","tr H-s0cwri"),E(f,"class","ths T1 lh30 ps H-s0cwri"),E(c,"class","body ph16 sv H-s0cwri")},m(ee,Z){G(ee,e,Z),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),G(ee,a,Z),G(ee,c,Z),u(c,f),u(f,p),u(p,h),u(f,_),u(f,v),u(v,b),u(v,P),u(v,T),u(f,C),u(f,V),u(V,w),u(V,D),u(V,$),u(f,N),u(f,z),u(z,R),u(c,F);for(let ue=0;ue<X.length;ue+=1)X[ue]&&X[ue].m(c,null);U||(K=We(s,"click",n[2]),U=!0)},p(ee,Z){if(Z&2&&i!==(i=ee[1](zt.Detail)+"")&&W(r,i),Z&2&&d!==(d=ee[1](bt.Time)+"")&&W(h,d),Z&2&&g!==(g=ee[1](bt.ExecPrice)+"")&&W(b,g),Z&2&&I!==(I=ee[1](bt.OrderPrice)+"")&&W(T,I),Z&2&&O!==(O=ee[1](bt.ExecSize)+"")&&W(w,O),Z&2&&L!==(L=ee[1](He.Size)+"")&&W($,L),Z&2&&H!==(H=ee[1](bt.FeePaid)+"")&&W(R,H),Z&1){Y=ee[0];let ue;for(ue=0;ue<Y.length;ue+=1){const ce=Lc(ee,Y,ue);X[ue]?X[ue].p(ce,Z):(X[ue]=$c(ce),X[ue].c(),X[ue].m(c,null))}for(;ue<X.length;ue+=1)X[ue].d(1);X.length=Y.length}},d(ee){ee&&m(e),ee&&m(a),ee&&m(c),wn(X,ee),U=!1,K()}}}function _E(n){let e,t;return e=new bn({props:{style:"width: 800px; max-width: 800px; border-radius: 4px; background: var(--B2);",$$slots:{default:[hE]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&131&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function gE(n,e,t){let i;J(n,dt,o=>t(1,i=o));let{orders:r=[]}=e;const l=Kt();function s(){l("close")}return n.$$set=o=>{"orders"in o&&t(0,r=o.orders)},[r,i,s]}let vE=class extends tt{constructor(e){super(),nt(this,e,gE,_E,et,{orders:0})}};const bE=gr([Sn,_n]).pipe(Cn(([n,e])=>{if(e===Ct.OneWay){const t=n.find(i=>i.posMode===Ct.OneWay);if(t.size>0)return{mode:Ct.OneWay,position:t}}if(e===Ct.Hedge){const t=n.find(({posMode:r,posSide:l})=>r===Ct.Hedge&&l==="Long"),i=n.find(({posMode:r,posSide:l})=>r===Ct.Hedge&&l==="Short");return{mode:Ct.Hedge,position:t,shortPosition:i}}return{mode:"",position:null}}));function EE(n){let e,t=(n[0]||n[1](yt.ConfirmToCloseAll))+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ph16 pb12 T3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&3&&t!==(t=(r[0]||r[1](yt.ConfirmToCloseAll))+"")&&W(i,t)},d(r){r&&m(e)}}}function yE(n){let e,t,i,r,l;return{c(){e=y("div"),t=y("i"),i=B(""),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);t=k(o,"I",{class:!0});var a=S(t);i=A(a,""),a.forEach(m),o.forEach(m),this.h()},h(){E(t,"class","iconfont cp T3"),E(e,"class","ph16 pt10 df jcfe b f16 T2"),E(e,"slot","header")},m(s,o){G(s,e,o),u(e,t),u(t,i),r||(l=We(t,"click",n[3]),r=!0)},p:rt,d(s){s&&m(e),r=!1,l()}}}function kE(n){let e=n[1](He.No)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&2&&e!==(e=i[1](He.No)+"")&&W(t,e)},d(i){i&&m(t)}}}function PE(n){let e=n[1](He.Yes)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&2&&e!==(e=i[1](He.Yes)+"")&&W(t,e)},d(i){i&&m(t)}}}function SE(n){let e,t,i,r,l;return t=new Ht({props:{size:"small",$$slots:{default:[kE]},$$scope:{ctx:n}}}),t.$on("click",n[2]),r=new Ht({props:{size:"small",type:"primary",$$slots:{default:[PE]},$$scope:{ctx:n}}}),r.$on("click",n[4]),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);re(t.$$.fragment,o),i=M(o),re(r.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","footer df jcfe tr H-yslft9"),E(e,"slot","footer")},m(s,o){G(s,e,o),ne(t,e,null),u(e,i),ne(r,e,null),l=!0},p(s,o){const a={};o&130&&(a.$$scope={dirty:o,ctx:s}),t.$set(a);const c={};o&130&&(c.$$scope={dirty:o,ctx:s}),r.$set(c)},i(s){l||(Q(t.$$.fragment,s),Q(r.$$.fragment,s),l=!0)},o(s){j(t.$$.fragment,s),j(r.$$.fragment,s),l=!1},d(s){s&&m(e),ie(t),ie(r)}}}function CE(n){let e,t;return e=new bn({props:{style:"min-width: 320px;",$$slots:{footer:[SE],header:[yE],default:[EE]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&131&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function TE(n,e,t){let i;J(n,dt,f=>t(1,i=f));let{onConfirm:r}=e,{confirmText:l=""}=e;const s=Kt();function o(){s("close")}function a(){s("close")}function c(){r(),s("close")}return n.$$set=f=>{"onConfirm"in f&&t(5,r=f.onConfirm),"confirmText"in f&&t(0,l=f.confirmText)},[l,i,o,a,c,r]}let id=class extends tt{constructor(e){super(),nt(this,e,TE,CE,et,{onConfirm:5,confirmText:0})}};const Zt={TrailingStop:"374995",TrailingStopActPrice:"77c767",TrailValue:"d52514",ActPrice:"c6257c",ActivationPrice:"df4efb",Optional:"490ac1",IfTheLastPrice:"1c8f1e",ThisOrderWill:"c6bb83",IfTheLastPrice2:"937f73",ThisOrderWill2:"4a5c50",GoesDown:"42ef45",GoesUp:"7107ce",IncorrectTrailingStop:"31c144",Value:"992f83",Ratio:"9425fc",TrailRatio:"e2c59a",TS:"dd4251"};function qc(n){let e,t,i;function r(o,a){return o[1]!==0?IE:wE}let l=r(n),s=l(n);return{c(){e=y("div"),t=y("div"),s.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=S(e);t=k(a,"DIV",{class:!0});var c=S(t);s.l(c),c.forEach(m),a.forEach(m),this.h()},h(){E(t,"class","msg lh22 f12 T3 H-m45j0o"),E(e,"class",i="df aic mt10 mh40 "+n[3]+" H-m45j0o")},m(o,a){G(o,e,a),u(e,t),s.m(t,null)},p(o,a){l===(l=r(o))&&s?s.p(o,a):(s.d(1),s=l(o),s&&(s.c(),s.m(t,null))),a&8&&i!==(i="df aic mt10 mh40 "+o[3]+" H-m45j0o")&&E(e,"class",i)},d(o){o&&m(e),s.d()}}}function wE(n){let e=n[8](Zt.IfTheLastPrice2,{TrailValue:n[6]})+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&320&&e!==(e=i[8](Zt.IfTheLastPrice2,{TrailValue:i[6]})+"")&&W(t,e)},d(i){i&&m(t)}}}function IE(n){let e=n[8](Zt.IfTheLastPrice,{TrailValue:n[7]})+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&384&&e!==(e=i[8](Zt.IfTheLastPrice,{TrailValue:i[7]})+"")&&W(t,e)},d(i){i&&m(t)}}}function Mc(n){let e,t,i;function r(o,a){return o[1]!==0?VE:DE}let l=r(n),s=l(n);return{c(){e=y("div"),t=y("div"),s.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=S(e);t=k(a,"DIV",{class:!0});var c=S(t);s.l(c),c.forEach(m),a.forEach(m),this.h()},h(){E(t,"class","msg lh22 f12 T3 H-m45j0o"),E(e,"class",i="df aic mt10 mh40 "+n[3]+" H-m45j0o")},m(o,a){G(o,e,a),u(e,t),s.m(t,null)},p(o,a){l===(l=r(o))&&s?s.p(o,a):(s.d(1),s=l(o),s&&(s.c(),s.m(t,null))),a&8&&i!==(i="df aic mt10 mh40 "+o[3]+" H-m45j0o")&&E(e,"class",i)},d(o){o&&m(e),s.d()}}}function DE(n){let e=n[8](Zt.ThisOrderWill2,{Direction:n[8](n[0].closeEp<n[2]?Zt.GoesUp:Zt.GoesDown),Price:n[5],TrailValue:n[6]})+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&357&&e!==(e=i[8](Zt.ThisOrderWill2,{Direction:i[8](i[0].closeEp<i[2]?Zt.GoesUp:Zt.GoesDown),Price:i[5],TrailValue:i[6]})+"")&&W(t,e)},d(i){i&&m(t)}}}function VE(n){let e=n[8](Zt.ThisOrderWill,{Direction:n[8](n[0].closeEp<n[2]?Zt.GoesUp:Zt.GoesDown),Price:n[5],TrailValue:n[7]})+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&421&&e!==(e=i[8](Zt.ThisOrderWill,{Direction:i[8](i[0].closeEp<i[2]?Zt.GoesUp:Zt.GoesDown),Price:i[5],TrailValue:i[7]})+"")&&W(t,e)},d(i){i&&m(t)}}}function OE(n){let e,t,i=n[4]&&n[2]===0&&qc(n),r=n[4]&&n[2]>0&&Mc(n);return{c(){i&&i.c(),e=q(),r&&r.c(),t=ut()},l(l){i&&i.l(l),e=M(l),r&&r.l(l),t=ut()},m(l,s){i&&i.m(l,s),G(l,e,s),r&&r.m(l,s),G(l,t,s)},p(l,[s]){l[4]&&l[2]===0?i?i.p(l,s):(i=qc(l),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),l[4]&&l[2]>0?r?r.p(l,s):(r=Mc(l),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:rt,o:rt,d(l){i&&i.d(l),l&&m(e),r&&r.d(l),l&&m(t)}}}function LE(n,e,t){let i,r,l,s,o,a;J(n,or,g=>t(11,o=g)),J(n,dt,g=>t(8,a=g));let{contract:c=null}=e,{market:f}=e,{trailValueEp:p=0}=e,{trailRatioEp:d=0}=e,{activationPriceEp:h=0}=e,{class:_=""}=e;function v(g,b){const T=(b.type==="PerpetualV2"?0:8)-2,C=Math.pow(10,T);return Re(g).div(C).toNumber()}return n.$$set=g=>{"contract"in g&&t(9,c=g.contract),"market"in g&&t(0,f=g.market),"trailValueEp"in g&&t(1,p=g.trailValueEp),"trailRatioEp"in g&&t(10,d=g.trailRatioEp),"activationPriceEp"in g&&t(2,h=g.activationPriceEp),"class"in g&&t(3,_=g.class)},n.$$.update=()=>{n.$$.dirty&2048&&t(0,f=o),n.$$.dirty&514&&t(7,i=xe.floor(p,c.pricePrecision,c.priceScale)),n.$$.dirty&1536&&t(6,r=v(d,c)+"%"),n.$$.dirty&516&&t(5,l=xe.floor(h,c.pricePrecision,c.priceScale)),n.$$.dirty&1026&&t(4,s=p!==0||d!==0)},[f,p,h,_,s,l,r,i,a,c,d,o]}let $E=class extends tt{constructor(e){super(),nt(this,e,LE,OE,et,{contract:9,market:0,trailValueEp:1,trailRatioEp:10,activationPriceEp:2,class:3})}};function qE(n){let e,t,i,r,l,s;const o=[{class:"trail-ratio"},{label:n[9](Zt.TrailRatio)},{operation:!1},{isInline:!1},{unit:"%"},n[11]];function a(f){n[32](f)}let c={};for(let f=0;f<o.length;f+=1)c=pn(c,o[f]);return n[5]!==void 0&&(c.valueEx=n[5]),e=new Pr({props:c}),De.push(()=>qe(e,"valueEx",a)),l=new yp({props:{percents:n[15],triangle:!0,round:!0}}),l.$on("change",n[16]),{c(){te(e.$$.fragment),i=q(),r=y("div"),te(l.$$.fragment),this.h()},l(f){re(e.$$.fragment,f),i=M(f),r=k(f,"DIV",{class:!0});var p=S(r);re(l.$$.fragment,p),p.forEach(m),this.h()},h(){E(r,"class","mt12")},m(f,p){ne(e,f,p),G(f,i,p),G(f,r,p),ne(l,r,null),s=!0},p(f,p){const d=p[0]&2560?dn(o,[o[0],p[0]&512&&{label:f[9](Zt.TrailRatio)},o[2],o[3],o[4],p[0]&2048&&mn(f[11])]):{};!t&&p[0]&32&&(t=!0,d.valueEx=f[5],Me(()=>t=!1)),e.$set(d)},i(f){s||(Q(e.$$.fragment,f),Q(l.$$.fragment,f),s=!0)},o(f){j(e.$$.fragment,f),j(l.$$.fragment,f),s=!1},d(f){ie(e,f),f&&m(i),f&&m(r),ie(l)}}}function ME(n){let e,t,i;function r(s){n[31](s)}let l={class:"trail-value auto-grow",factor:n[0].priceFactor,label:n[9](Zt.TrailValue),maxPriceEp:n[0].maxPriceEp,operation:!1,isInline:!1,precision:n[0].pricePrecision,scale:n[0].priceScale,tickSizeEp:n[0].tickSizeEp,unit:n[14]};return n[4]!==void 0&&(l.priceEp=n[4]),e=new yn({props:l}),De.push(()=>qe(e,"priceEp",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o[0]&1&&(a.factor=s[0].priceFactor),o[0]&512&&(a.label=s[9](Zt.TrailValue)),o[0]&1&&(a.maxPriceEp=s[0].maxPriceEp),o[0]&1&&(a.precision=s[0].pricePrecision),o[0]&1&&(a.scale=s[0].priceScale),o[0]&1&&(a.tickSizeEp=s[0].tickSizeEp),o[0]&16384&&(a.unit=s[14]),!t&&o[0]&16&&(t=!0,a.priceEp=s[4],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function Nc(n){let e,t,i,r,l,s,o,a,c,f=n[9](Je.AvailableSize)+"",p,d,h,_,v,g,b;const P=[{label:n[9](He.Size)},{class:"quantity mt12"},{isInline:!1},{operation:!1},{unit:n[13]},n[12]];function I(O){n[33](O)}let T={};for(let O=0;O<P.length;O+=1)T=pn(T,P[O]);n[7]!==void 0&&(T.valueEx=n[7]),e=new Pr({props:T}),De.push(()=>qe(e,"valueEx",I)),e.$on("valueChange",n[17]);function C(O){n[34](O)}let V={type:"quantity"};return n[10]!==void 0&&(V.value=n[10]),l=new ji({props:V}),De.push(()=>qe(l,"value",C)),l.$on("change",n[18]),{c(){te(e.$$.fragment),i=q(),r=y("div"),te(l.$$.fragment),o=q(),a=y("div"),c=y("span"),p=B(f),d=q(),h=y("span"),_=B(n[8]),v=q(),g=B(n[13]),this.h()},l(O){re(e.$$.fragment,O),i=M(O),r=k(O,"DIV",{class:!0});var w=S(r);re(l.$$.fragment,w),w.forEach(m),o=M(O),a=k(O,"DIV",{class:!0});var D=S(a);c=k(D,"SPAN",{class:!0});var L=S(c);p=A(L,f),d=M(L),h=k(L,"SPAN",{class:!0});var $=S(h);_=A($,n[8]),v=M($),g=A($,n[13]),$.forEach(m),L.forEach(m),D.forEach(m),this.h()},h(){E(r,"class","mt32 H-1h6w6tm"),E(h,"class","T1"),E(c,"class","f12"),E(a,"class","mt16 tar H-1h6w6tm")},m(O,w){ne(e,O,w),G(O,i,w),G(O,r,w),ne(l,r,null),G(O,o,w),G(O,a,w),u(a,c),u(c,p),u(c,d),u(c,h),u(h,_),u(h,v),u(h,g),b=!0},p(O,w){const D=w[0]&12800?dn(P,[w[0]&512&&{label:O[9](He.Size)},P[1],P[2],P[3],w[0]&8192&&{unit:O[13]},w[0]&4096&&mn(O[12])]):{};!t&&w[0]&128&&(t=!0,D.valueEx=O[7],Me(()=>t=!1)),e.$set(D);const L={};!s&&w[0]&1024&&(s=!0,L.value=O[10],Me(()=>s=!1)),l.$set(L),(!b||w[0]&512)&&f!==(f=O[9](Je.AvailableSize)+"")&&W(p,f),(!b||w[0]&256)&&W(_,O[8]),(!b||w[0]&8192)&&W(g,O[13])},i(O){b||(Q(e.$$.fragment,O),Q(l.$$.fragment,O),b=!0)},o(O){j(e.$$.fragment,O),j(l.$$.fragment,O),b=!1},d(O){ie(e,O),O&&m(i),O&&m(r),ie(l),O&&m(o),O&&m(a)}}}function NE(n){let e,t,i,r=n[9](Zt.TrailingStop)+"",l,s,o,a,c,f,p,d,h,_,v,g,b,P,I=n[9](Zt.ActivationPrice)+" "+n[9](Zt.Optional),T,C,V,O,w,D;function L(K){n[30](K)}let $={options:Ji.createTrailingStopOptions(n[9],Zt)};n[3]!==void 0&&($.value=n[3]),o=new gp({props:$}),De.push(()=>qe(o,"value",L));const N=[ME,qE],z=[];function H(K,Y){return K[3]==="value"?0:1}p=H(n),d=z[p]=N[p](n);let R=n[1]==="Partial"&&Nc(n);v=new $E({props:{activationPriceEp:n[6],class:"ts-info-box",contract:n[0],trailRatioEp:n[5],trailValueEp:n[4]}});function F(K){n[35](K)}let U={class:"activation-price mt12",factor:n[0].priceFactor,isInline:!1,label:n[9](Je.TriggerPrice),maxPriceEp:n[0].maxPriceEp,operation:!1,precision:n[0].pricePrecision,scale:n[0].priceScale,tickSizeEp:n[0].tickSizeEp,unit:n[14]};return n[6]!==void 0&&(U.priceEp=n[6]),V=new yn({props:U}),De.push(()=>qe(V,"priceEp",F)),{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),s=q(),te(o.$$.fragment),c=q(),f=y("div"),d.c(),h=q(),R&&R.c(),_=q(),te(v.$$.fragment),g=q(),b=y("div"),P=y("div"),T=B(I),C=q(),te(V.$$.fragment),this.h()},l(K){e=k(K,"DIV",{class:!0});var Y=S(e);t=k(Y,"DIV",{class:!0});var X=S(t);i=k(X,"SPAN",{class:!0});var ee=S(i);l=A(ee,r),ee.forEach(m),s=M(X),re(o.$$.fragment,X),X.forEach(m),c=M(Y),f=k(Y,"DIV",{class:!0});var Z=S(f);d.l(Z),Z.forEach(m),h=M(Y),R&&R.l(Y),_=M(Y),re(v.$$.fragment,Y),g=M(Y),b=k(Y,"DIV",{class:!0});var ue=S(b);P=k(ue,"DIV",{class:!0});var ce=S(P);T=A(ce,I),ce.forEach(m),C=M(ue),re(V.$$.fragment,ue),ue.forEach(m),Y.forEach(m),this.h()},h(){E(i,"class","T1"),E(t,"class","df jcsb aic"),E(f,"class","ts mt12"),E(P,"class","T1"),E(b,"class","mt20"),E(e,"class",w="wrap T3 "+n[2]+" H-1h6w6tm")},m(K,Y){G(K,e,Y),u(e,t),u(t,i),u(i,l),u(t,s),ne(o,t,null),u(e,c),u(e,f),z[p].m(f,null),u(e,h),R&&R.m(e,null),u(e,_),ne(v,e,null),u(e,g),u(e,b),u(b,P),u(P,T),u(b,C),ne(V,b,null),D=!0},p(K,Y){(!D||Y[0]&512)&&r!==(r=K[9](Zt.TrailingStop)+"")&&W(l,r);const X={};Y[0]&512&&(X.options=Ji.createTrailingStopOptions(K[9],Zt)),!a&&Y[0]&8&&(a=!0,X.value=K[3],Me(()=>a=!1)),o.$set(X);let ee=p;p=H(K),p===ee?z[p].p(K,Y):(ot(),j(z[ee],1,1,()=>{z[ee]=null}),at(),d=z[p],d?d.p(K,Y):(d=z[p]=N[p](K),d.c()),Q(d,1),d.m(f,null)),K[1]==="Partial"?R?(R.p(K,Y),Y[0]&2&&Q(R,1)):(R=Nc(K),R.c(),Q(R,1),R.m(e,_)):R&&(ot(),j(R,1,1,()=>{R=null}),at());const Z={};Y[0]&64&&(Z.activationPriceEp=K[6]),Y[0]&1&&(Z.contract=K[0]),Y[0]&32&&(Z.trailRatioEp=K[5]),Y[0]&16&&(Z.trailValueEp=K[4]),v.$set(Z),(!D||Y[0]&512)&&I!==(I=K[9](Zt.ActivationPrice)+" "+K[9](Zt.Optional))&&W(T,I);const ue={};Y[0]&1&&(ue.factor=K[0].priceFactor),Y[0]&512&&(ue.label=K[9](Je.TriggerPrice)),Y[0]&1&&(ue.maxPriceEp=K[0].maxPriceEp),Y[0]&1&&(ue.precision=K[0].pricePrecision),Y[0]&1&&(ue.scale=K[0].priceScale),Y[0]&1&&(ue.tickSizeEp=K[0].tickSizeEp),Y[0]&16384&&(ue.unit=K[14]),!O&&Y[0]&64&&(O=!0,ue.priceEp=K[6],Me(()=>O=!1)),V.$set(ue),(!D||Y[0]&4&&w!==(w="wrap T3 "+K[2]+" H-1h6w6tm"))&&E(e,"class",w)},i(K){D||(Q(o.$$.fragment,K),Q(d),Q(R),Q(v.$$.fragment,K),Q(V.$$.fragment,K),D=!0)},o(K){j(o.$$.fragment,K),j(d),j(R),j(v.$$.fragment,K),j(V.$$.fragment,K),D=!1},d(K){K&&m(e),ie(o),z[p].d(),R&&R.d(),ie(v),ie(V)}}}function HE(n){const i=(n.type==="PerpetualV2"?0:8)-2,r=Math.pow(10,i),l=1,s=0,o=100*r,a=Math.pow(10,-l)*r;return{scale:i,factor:r,precision:l,minEx:s,maxEx:o,tickSizeEx:a}}function BE(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_;J(n,dt,x=>t(9,d=x)),J(n,An,x=>t(28,h=x)),J(n,zn,x=>t(29,_=x));let{contract:v}=e,{market:g}=e,{targetPosition:b}=e,{order:P=null}=e,{closeMode:I="Partial"}=e,{availableSize:T}=e,{form:C}=e;const V=Es.createTrailingStopPercents(),O=Kt();let{class:w=""}=e,D="value",L=0,$=0,N=0,z=0,H=100,R=0;function F(x,le,fe,Se){return!fe||!Se?0:Number(Qt.convert(x,le,fe,Se.avgEntryPrice))}function U(x){if(!x){t(7,z=R*r),t(4,L=0),t(5,$=0),t(6,N=0),t(3,D="value");return}t(7,z=Number(Qt.convert(v,i,x.orderQty||0,b.avgEntryPrice))*r),t(4,L=Math.abs(x.pegOffsetValueEp)),t(3,D=x.pegOffsetProportionEr?"ratio":"value"),t(5,$=Math.abs(x.pegOffsetProportionEr||0)),t(6,N=x.activationPriceEp||0),Z()}function K(x,le,fe,Se,Pe,Ce,Ee){Se.type==="Perpetual"&&Se.contractSide<0&&(x=x===we.Cont?we.Cont:we.Base);const Ie=ei(x,le,fe,Se,Pe,Ce);return Object.assign(Object.assign({},Ie),{maxEx:Number(Re(Ee).mul(r)),placeholder:""})}function Y(x,le){let fe;return x.type==="Perpetual"&&(fe=x.qtyScale),x.type==="PerpetualV2"&&(fe=le===we.Base?x.valueScale:x.qtyScale),Math.pow(10,fe)}function X(x,le,fe,Se,Pe,Ce){const Ee=pe(le,Ce),Ie={orderQty:I==="Entire"?0:Ee,activationPriceEp:Pe};x==="value"&&(Ie.pegOffsetValueEp=b.side==="Buy"?-fe:fe),x==="ratio"&&(Ie.pegOffsetProportionEr=b.side==="Buy"?-Se:Se),t(19,C=Ie),O("change",C)}function ee(x){const le=x.detail.value;t(5,$=Re(100).mul(le).mul(p.factor).toNumber())}function Z(){t(10,H=R===0?0:Math.floor(Re(z).div(r).div(R).mul(100)))}function ue(){const x=T===0?0:Re(H).div(100).times(T).toNumber();t(7,z=Re(Qt.convert(v,i,x,b.avgEntryPrice)).times(r))}function ce(){t(4,L=0),t(5,$=0)}function pe(x,le){const fe=Re(R).times(r).toNumber();return le>=fe?x:Lp(le,i,b.avgEntryPriceEp,v,!0)}function me(x){D=x,t(3,D)}function oe(x){L=x,t(4,L)}function ke(x){$=x,t(5,$)}function Le(x){z=x,t(7,z)}function ge(x){H=x,t(10,H)}function ae(x){N=x,t(6,N)}return n.$$set=x=>{"contract"in x&&t(0,v=x.contract),"market"in x&&t(20,g=x.market),"targetPosition"in x&&t(21,b=x.targetPosition),"order"in x&&t(22,P=x.order),"closeMode"in x&&t(1,I=x.closeMode),"availableSize"in x&&t(23,T=x.availableSize),"form"in x&&t(19,C=x.form),"class"in x&&t(2,w=x.class)},n.$$.update=()=>{n.$$.dirty[0]&8&&ce(),n.$$.dirty[0]&805306369&&t(24,i=v.type==="Perpetual"?_:h),n.$$.dirty[0]&16777217&&(r=Y(v,i)),n.$$.dirty[0]&27262977&&t(8,R=F(v,i,T,b)),n.$$.dirty[0]&4194304&&U(P),n.$$.dirty[0]&8388856&&X(D,T,L,$,N,z),n.$$.dirty[0]&1048576&&t(27,l=g.closeEp),n.$$.dirty[0]&134217729&&t(26,s=li(v,l)),n.$$.dirty[0]&1&&t(25,o=si(v)),n.$$.dirty[0]&1&&t(14,a=v.quoteCurrency),n.$$.dirty[0]&16777217&&t(13,c=Qt.getUnit(v,i)),n.$$.dirty[0]&117441281&&t(12,f=K(i,d,Je,v,s,o,R)),n.$$.dirty[0]&1&&t(11,p=HE(v))},[v,I,w,D,L,$,N,z,R,d,H,p,f,c,a,V,ee,Z,ue,C,g,b,P,T,i,o,s,l,h,_,me,oe,ke,Le,ge,ae]}let AE=class extends tt{constructor(e){super(),nt(this,e,BE,NE,et,{contract:0,market:20,targetPosition:21,order:22,closeMode:1,availableSize:23,form:19,class:2},null,[-1,-1])}};const ol={calcTailingStopContext(n,e){const t=n.closeEp,{pegOffsetValueEp:i,pegOffsetProportionEr:r,activationPriceEp:l}=e,s=l>0;if(i)return{lastPriceEp:t,pegPriceType:s?"TrailingTakeProfitPeg":"TrailingStopPeg",stopPxEp:Number(s?l:t)+i};if(r)return{lastPriceEp:t,pegPriceType:s?"TrailingTakeProfitByProportionPeg":"TrailingStopByProportionPeg",stopPxEp:Number(s?l:t)}},async createTrailingStopOrder(n,e,t,{type:i,pricePrecision:r},l){const{lastPriceEp:s,stopPxEp:o,pegPriceType:a}=e,{pegOffsetValueEp:c,pegOffsetProportionEr:f,orderQty:p}=t,d=zE({orderQty:p,position:n,stopPxEp:o,priceEp:s,pegPriceType:a,pegOffsetValueEp:c,pegOffsetProportionEr:f,type:i,pricePrecision:r});return await fr(d,{by:l,goal:"create_ts"})},async handleTrailingStop(n,e,t,i,{type:r,pricePrecision:l},s){if(t){if(i){const{pegOffsetValueEp:a,pegOffsetProportionEr:c,orderQty:f}=i,p=ol.calcTailingStopContext(n,i),{pegPriceType:d,stopPxEp:h}=p;if(t.pegPriceType===d){const v={type:r};return r==="Perpetual"&&Object.assign(v,{stopPxEp:h,orderQty:f},a?{pegOffsetValueEp:a}:{pegOffsetProportionEr:c}),r==="PerpetualV2"&&Object.assign(v,{orderQtyRq:f.toString(),stopPxRp:xe.floor(h,l),posSide:t.posSide},a?{pegOffsetValueRp:a+""}:{pegOffsetProportionRr:c+""}),await Gi(t,v,{by:"position",goal:"replace_ts"})}return await Mi(t,{type:r,by:"position",goal:"cancel_ts_pegPriceChange"}),await ol.createTrailingStopOrder(e,p,i,{type:r,pricePrecision:l},s)}return await Mi(t,{type:r,by:"position",goal:"cancel_ts"})}if(i){const o=ol.calcTailingStopContext(n,i);return await ol.createTrailingStopOrder(e,o,i,{type:r,pricePrecision:l},s)}return!0}};function zE({orderQty:n=0,position:e,stopPxEp:t,priceEp:i,pegOffsetValueEp:r=0,pegOffsetProportionEr:l,pegPriceType:s="UNSPECIFIED",type:o,pricePrecision:a}){const c={actionBy:"FromPosition",symbol:e.symbol,side:e.side==="Buy"?"Sell":"Buy",ordType:"Stop",triggerType:"ByLastPrice",timeInForce:"ImmediateOrCancel",closeOnTrigger:!0,pegPriceType:s,type:o};return o==="Perpetual"&&Object.assign(c,{priceEp:i,stopPxEp:t,orderQty:n},r?{pegOffsetValueEp:r}:{pegOffsetProportionEr:l}),o==="PerpetualV2"&&Object.assign(c,{posSide:e.posSide,priceRp:i.toString(),stopPxRp:xe.floor(t,a),orderQtyRq:n.toString()},r?{pegOffsetValueRp:r+""}:{pegOffsetProportionRr:l+""}),c}function Hc(n){let e,t=n[32](Je.OnlyOneTPSL)+"",i,r,l,s=n[32](Je.GotIt)+"",o,a,c;return{c(){e=y("div"),i=B(t),r=q(),l=y("span"),o=B(s),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=S(e);i=A(p,t),r=M(p),l=k(p,"SPAN",{class:!0});var d=S(l);o=A(d,s),d.forEach(m),p.forEach(m),this.h()},h(){E(l,"class","BLUE cp"),E(e,"class","info H-14s7i89")},m(f,p){G(f,e,p),u(e,i),u(e,r),u(e,l),u(l,o),a||(c=We(l,"click",n[37]("hideTpslEntireInfo")),a=!0)},p(f,p){p[1]&2&&t!==(t=f[32](Je.OnlyOneTPSL)+"")&&W(i,t),p[1]&2&&s!==(s=f[32](Je.GotIt)+"")&&W(o,s)},d(f){f&&m(e),a=!1,c()}}}function Bc(n){let e,t=n[32](Je.OnlyOneType,{tpslMode:n[32](Je.PartialTPSL)})+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","forbid H-14s7i89")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[1]&2&&t!==(t=r[32](Je.OnlyOneType,{tpslMode:r[32](Je.PartialTPSL)})+"")&&W(i,t)},d(r){r&&m(e)}}}function Ac(n){let e,t,i,r;function l(a){n[42](a)}function s(a){n[43](a)}let o={class:"mt20",type:"TakeProfit",contract:n[1],source:n[0],market:n[10],stopPxEp:n[3],targetPosition:n[2],order:n[7],closeMode:"Entire",availableSize:n[26],disabled:n[5]==="Partial"};return n[12]!==void 0&&(o.form=n[12]),n[21]!==void 0&&(o.trackWhenSubmit=n[21]),e=new nr({props:o}),De.push(()=>qe(e,"form",l)),De.push(()=>qe(e,"trackWhenSubmit",s)),e.$on("change",n[44]),{c(){te(e.$$.fragment)},l(a){re(e.$$.fragment,a)},m(a,c){ne(e,a,c),r=!0},p(a,c){const f={};c[0]&2&&(f.contract=a[1]),c[0]&1&&(f.source=a[0]),c[0]&1024&&(f.market=a[10]),c[0]&8&&(f.stopPxEp=a[3]),c[0]&4&&(f.targetPosition=a[2]),c[0]&128&&(f.order=a[7]),c[0]&67108864&&(f.availableSize=a[26]),c[0]&32&&(f.disabled=a[5]==="Partial"),!t&&c[0]&4096&&(t=!0,f.form=a[12],Me(()=>t=!1)),!i&&c[0]&2097152&&(i=!0,f.trackWhenSubmit=a[21],Me(()=>i=!1)),e.$set(f)},i(a){r||(Q(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){ie(e,a)}}}function zc(n){let e,t,i,r;function l(a){n[45](a)}function s(a){n[46](a)}let o={class:"mt20",type:"StopLoss",contract:n[1],source:n[0],market:n[10],stopPxEp:n[4],targetPosition:n[2],order:n[8],closeMode:"Entire",availableSize:n[25],disabled:n[5]==="Partial"};return n[14]!==void 0&&(o.form=n[14]),n[22]!==void 0&&(o.trackWhenSubmit=n[22]),e=new nr({props:o}),De.push(()=>qe(e,"form",l)),De.push(()=>qe(e,"trackWhenSubmit",s)),e.$on("change",n[47]),{c(){te(e.$$.fragment)},l(a){re(e.$$.fragment,a)},m(a,c){ne(e,a,c),r=!0},p(a,c){const f={};c[0]&2&&(f.contract=a[1]),c[0]&1&&(f.source=a[0]),c[0]&1024&&(f.market=a[10]),c[0]&16&&(f.stopPxEp=a[4]),c[0]&4&&(f.targetPosition=a[2]),c[0]&256&&(f.order=a[8]),c[0]&33554432&&(f.availableSize=a[25]),c[0]&32&&(f.disabled=a[5]==="Partial"),!t&&c[0]&16384&&(t=!0,f.form=a[14],Me(()=>t=!1)),!i&&c[0]&4194304&&(i=!0,f.trackWhenSubmit=a[22],Me(()=>i=!1)),e.$set(f)},i(a){r||(Q(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){ie(e,a)}}}function QE(n){let e,t,i,r,l,s=n[32](Je.LastPrice)+"",o,a,c,f,p,d,h,_=n[32](Je.MarkPrice)+"",v,g,b,P,I,T,C,V=["","tp"].includes(n[6]),O,w=["","sl"].includes(n[6]),D,L,$=n[5]!=="Partial"&&!n[18]&&Hc(n),N=n[5]==="Partial"&&Bc(n);T=new ts({props:{position:n[2]}});let z=V&&Ac(n),H=w&&zc(n);return{c(){$&&$.c(),e=q(),N&&N.c(),t=q(),i=y("div"),r=y("div"),l=y("span"),o=B(s),a=q(),c=y("span"),f=B(n[28]),p=q(),d=y("div"),h=y("span"),v=B(_),g=q(),b=y("span"),P=B(n[27]),I=q(),te(T.$$.fragment),C=q(),z&&z.c(),O=q(),H&&H.c(),D=ut(),this.h()},l(R){$&&$.l(R),e=M(R),N&&N.l(R),t=M(R),i=k(R,"DIV",{class:!0});var F=S(i);r=k(F,"DIV",{class:!0});var U=S(r);l=k(U,"SPAN",{class:!0});var K=S(l);o=A(K,s),K.forEach(m),a=M(U),c=k(U,"SPAN",{class:!0});var Y=S(c);f=A(Y,n[28]),Y.forEach(m),U.forEach(m),p=M(F),d=k(F,"DIV",{class:!0});var X=S(d);h=k(X,"SPAN",{class:!0});var ee=S(h);v=A(ee,_),ee.forEach(m),g=M(X),b=k(X,"SPAN",{class:!0});var Z=S(b);P=A(Z,n[27]),Z.forEach(m),X.forEach(m),F.forEach(m),I=M(R),re(T.$$.fragment,R),C=M(R),z&&z.l(R),O=M(R),H&&H.l(R),D=ut(),this.h()},h(){E(l,"class","price-label ooo H-14s7i89"),E(c,"class","price-box tr T1 H-14s7i89"),E(r,"class","df aic"),E(h,"class","price-label H-14s7i89"),E(b,"class","price-box tr T1 H-14s7i89"),E(d,"class","df aic"),E(i,"class","df jcsb T3 lh20 f12")},m(R,F){$&&$.m(R,F),G(R,e,F),N&&N.m(R,F),G(R,t,F),G(R,i,F),u(i,r),u(r,l),u(l,o),u(r,a),u(r,c),u(c,f),u(i,p),u(i,d),u(d,h),u(h,v),u(d,g),u(d,b),u(b,P),G(R,I,F),ne(T,R,F),G(R,C,F),z&&z.m(R,F),G(R,O,F),H&&H.m(R,F),G(R,D,F),L=!0},p(R,F){R[5]!=="Partial"&&!R[18]?$?$.p(R,F):($=Hc(R),$.c(),$.m(e.parentNode,e)):$&&($.d(1),$=null),R[5]==="Partial"?N?N.p(R,F):(N=Bc(R),N.c(),N.m(t.parentNode,t)):N&&(N.d(1),N=null),(!L||F[1]&2)&&s!==(s=R[32](Je.LastPrice)+"")&&W(o,s),(!L||F[0]&268435456)&&W(f,R[28]),(!L||F[1]&2)&&_!==(_=R[32](Je.MarkPrice)+"")&&W(v,_),(!L||F[0]&134217728)&&W(P,R[27]);const U={};F[0]&4&&(U.position=R[2]),T.$set(U),F[0]&64&&(V=["","tp"].includes(R[6])),V?z?(z.p(R,F),F[0]&64&&Q(z,1)):(z=Ac(R),z.c(),Q(z,1),z.m(O.parentNode,O)):z&&(ot(),j(z,1,1,()=>{z=null}),at()),F[0]&64&&(w=["","sl"].includes(R[6])),w?H?(H.p(R,F),F[0]&64&&Q(H,1)):(H=zc(R),H.c(),Q(H,1),H.m(D.parentNode,D)):H&&(ot(),j(H,1,1,()=>{H=null}),at())},i(R){L||(Q(T.$$.fragment,R),Q(z),Q(H),L=!0)},o(R){j(T.$$.fragment,R),j(z),j(H),L=!1},d(R){$&&$.d(R),R&&m(e),N&&N.d(R),R&&m(t),R&&m(i),R&&m(I),ie(T,R),R&&m(C),z&&z.d(R),R&&m(O),H&&H.d(R),R&&m(D)}}}function Qc(n){let e,t=n[32](Je.MultipleTPSL)+"",i,r,l,s=n[32](Je.GotIt)+"",o,a,c;return{c(){e=y("div"),i=B(t),r=q(),l=y("span"),o=B(s),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=S(e);i=A(p,t),r=M(p),l=k(p,"SPAN",{class:!0});var d=S(l);o=A(d,s),d.forEach(m),p.forEach(m),this.h()},h(){E(l,"class","BLUE cp"),E(e,"class","info H-14s7i89")},m(f,p){G(f,e,p),u(e,i),u(e,r),u(e,l),u(l,o),a||(c=We(l,"click",n[37]("hideTpslPartialInfo")),a=!0)},p(f,p){p[1]&2&&t!==(t=f[32](Je.MultipleTPSL)+"")&&W(i,t),p[1]&2&&s!==(s=f[32](Je.GotIt)+"")&&W(o,s)},d(f){f&&m(e),a=!1,c()}}}function Rc(n){let e,t=n[32](Je.OnlyOneType,{tpslMode:n[32](Je.EntireTPSL)})+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","forbid H-14s7i89")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[1]&2&&t!==(t=r[32](Je.OnlyOneType,{tpslMode:r[32](Je.EntireTPSL)})+"")&&W(i,t)},d(r){r&&m(e)}}}function Fc(n){let e,t,i,r;function l(a){n[48](a)}function s(a){n[49](a)}let o={class:"mt20",type:"TakeProfit",contract:n[1],market:n[10],source:n[0],stopPxEp:n[3],targetPosition:n[2],order:n[7],closeMode:"Partial",availableSize:n[26],disabled:n[5]==="Entire"};return n[12]!==void 0&&(o.form=n[12]),n[21]!==void 0&&(o.trackWhenSubmit=n[21]),e=new nr({props:o}),De.push(()=>qe(e,"form",l)),De.push(()=>qe(e,"trackWhenSubmit",s)),e.$on("change",n[50]),{c(){te(e.$$.fragment)},l(a){re(e.$$.fragment,a)},m(a,c){ne(e,a,c),r=!0},p(a,c){const f={};c[0]&2&&(f.contract=a[1]),c[0]&1024&&(f.market=a[10]),c[0]&1&&(f.source=a[0]),c[0]&8&&(f.stopPxEp=a[3]),c[0]&4&&(f.targetPosition=a[2]),c[0]&128&&(f.order=a[7]),c[0]&67108864&&(f.availableSize=a[26]),c[0]&32&&(f.disabled=a[5]==="Entire"),!t&&c[0]&4096&&(t=!0,f.form=a[12],Me(()=>t=!1)),!i&&c[0]&2097152&&(i=!0,f.trackWhenSubmit=a[21],Me(()=>i=!1)),e.$set(f)},i(a){r||(Q(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){ie(e,a)}}}function jc(n){let e,t,i,r;function l(a){n[51](a)}function s(a){n[52](a)}let o={class:"mt20",type:"StopLoss",contract:n[1],market:n[10],source:n[0],stopPxEp:n[4],targetPosition:n[2],order:n[8],closeMode:"Partial",availableSize:n[25],disabled:n[5]==="Entire"};return n[14]!==void 0&&(o.form=n[14]),n[22]!==void 0&&(o.trackWhenSubmit=n[22]),e=new nr({props:o}),De.push(()=>qe(e,"form",l)),De.push(()=>qe(e,"trackWhenSubmit",s)),e.$on("change",n[53]),{c(){te(e.$$.fragment)},l(a){re(e.$$.fragment,a)},m(a,c){ne(e,a,c),r=!0},p(a,c){const f={};c[0]&2&&(f.contract=a[1]),c[0]&1024&&(f.market=a[10]),c[0]&1&&(f.source=a[0]),c[0]&16&&(f.stopPxEp=a[4]),c[0]&4&&(f.targetPosition=a[2]),c[0]&256&&(f.order=a[8]),c[0]&33554432&&(f.availableSize=a[25]),c[0]&32&&(f.disabled=a[5]==="Entire"),!t&&c[0]&16384&&(t=!0,f.form=a[14],Me(()=>t=!1)),!i&&c[0]&4194304&&(i=!0,f.trackWhenSubmit=a[22],Me(()=>i=!1)),e.$set(f)},i(a){r||(Q(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){ie(e,a)}}}function RE(n){let e,t,i,r,l=n[32](Je.LastPrice)+"",s,o,a,c,f,p,d=n[32](Je.MarkPrice)+"",h,_,v,g,b,P,I,T=["","tp"].includes(n[6]),C,V=["","sl"].includes(n[6]),O,w,D=n[5]!=="Entire"&&!n[19]&&Qc(n),L=n[5]==="Entire"&&Rc(n);P=new ts({props:{position:n[2]}});let $=T&&Fc(n),N=V&&jc(n);return{c(){D&&D.c(),e=q(),L&&L.c(),t=q(),i=y("div"),r=y("div"),s=B(l),o=B(": "),a=y("span"),c=B(n[28]),f=q(),p=y("div"),h=B(d),_=B(": "),v=y("span"),g=B(n[27]),b=q(),te(P.$$.fragment),I=q(),$&&$.c(),C=q(),N&&N.c(),O=ut(),this.h()},l(z){D&&D.l(z),e=M(z),L&&L.l(z),t=M(z),i=k(z,"DIV",{class:!0});var H=S(i);r=k(H,"DIV",{});var R=S(r);s=A(R,l),o=A(R,": "),a=k(R,"SPAN",{class:!0});var F=S(a);c=A(F,n[28]),F.forEach(m),R.forEach(m),f=M(H),p=k(H,"DIV",{});var U=S(p);h=A(U,d),_=A(U,": "),v=k(U,"SPAN",{class:!0});var K=S(v);g=A(K,n[27]),K.forEach(m),U.forEach(m),H.forEach(m),b=M(z),re(P.$$.fragment,z),I=M(z),$&&$.l(z),C=M(z),N&&N.l(z),O=ut(),this.h()},h(){E(a,"class","T1"),E(v,"class","T1"),E(i,"class","df jcsb T3")},m(z,H){D&&D.m(z,H),G(z,e,H),L&&L.m(z,H),G(z,t,H),G(z,i,H),u(i,r),u(r,s),u(r,o),u(r,a),u(a,c),u(i,f),u(i,p),u(p,h),u(p,_),u(p,v),u(v,g),G(z,b,H),ne(P,z,H),G(z,I,H),$&&$.m(z,H),G(z,C,H),N&&N.m(z,H),G(z,O,H),w=!0},p(z,H){z[5]!=="Entire"&&!z[19]?D?D.p(z,H):(D=Qc(z),D.c(),D.m(e.parentNode,e)):D&&(D.d(1),D=null),z[5]==="Entire"?L?L.p(z,H):(L=Rc(z),L.c(),L.m(t.parentNode,t)):L&&(L.d(1),L=null),(!w||H[1]&2)&&l!==(l=z[32](Je.LastPrice)+"")&&W(s,l),(!w||H[0]&268435456)&&W(c,z[28]),(!w||H[1]&2)&&d!==(d=z[32](Je.MarkPrice)+"")&&W(h,d),(!w||H[0]&134217728)&&W(g,z[27]);const R={};H[0]&4&&(R.position=z[2]),P.$set(R),H[0]&64&&(T=["","tp"].includes(z[6])),T?$?($.p(z,H),H[0]&64&&Q($,1)):($=Fc(z),$.c(),Q($,1),$.m(C.parentNode,C)):$&&(ot(),j($,1,1,()=>{$=null}),at()),H[0]&64&&(V=["","sl"].includes(z[6])),V?N?(N.p(z,H),H[0]&64&&Q(N,1)):(N=jc(z),N.c(),Q(N,1),N.m(O.parentNode,O)):N&&(ot(),j(N,1,1,()=>{N=null}),at())},i(z){w||(Q(P.$$.fragment,z),Q($),Q(N),w=!0)},o(z){j(P.$$.fragment,z),j($),j(N),w=!1},d(z){D&&D.d(z),z&&m(e),L&&L.d(z),z&&m(t),z&&m(i),z&&m(b),ie(P,z),z&&m(I),$&&$.d(z),z&&m(C),N&&N.d(z),z&&m(O)}}}function FE(n){let e,t,i=n[32](Je.LastPrice)+"",r,l,s,o,a,c,f=n[32](Je.MarkPrice)+"",p,d,h,_,v,g,b,P,I,T,C;g=new ts({props:{position:n[2]}});function V(w){n[54](w)}let O={availableSize:n[24],closeMode:"Partial",contract:n[1],market:n[10],order:n[9],targetPosition:n[2]};return n[16]!==void 0&&(O.form=n[16]),I=new AE({props:O}),De.push(()=>qe(I,"form",V)),I.$on("change",n[55]),{c(){e=y("div"),t=y("div"),r=B(i),l=B(": "),s=y("span"),o=B(n[28]),a=q(),c=y("div"),p=B(f),d=B(": "),h=y("span"),_=B(n[27]),v=q(),te(g.$$.fragment),b=q(),P=y("div"),te(I.$$.fragment),this.h()},l(w){e=k(w,"DIV",{class:!0});var D=S(e);t=k(D,"DIV",{});var L=S(t);r=A(L,i),l=A(L,": "),s=k(L,"SPAN",{class:!0});var $=S(s);o=A($,n[28]),$.forEach(m),L.forEach(m),a=M(D),c=k(D,"DIV",{});var N=S(c);p=A(N,f),d=A(N,": "),h=k(N,"SPAN",{class:!0});var z=S(h);_=A(z,n[27]),z.forEach(m),N.forEach(m),D.forEach(m),v=M(w),re(g.$$.fragment,w),b=M(w),P=k(w,"DIV",{class:!0});var H=S(P);re(I.$$.fragment,H),H.forEach(m),this.h()},h(){E(s,"class","T1"),E(h,"class","T1"),E(e,"class","df jcsb T3"),E(P,"class","mt16")},m(w,D){G(w,e,D),u(e,t),u(t,r),u(t,l),u(t,s),u(s,o),u(e,a),u(e,c),u(c,p),u(c,d),u(c,h),u(h,_),G(w,v,D),ne(g,w,D),G(w,b,D),G(w,P,D),ne(I,P,null),C=!0},p(w,D){(!C||D[1]&2)&&i!==(i=w[32](Je.LastPrice)+"")&&W(r,i),(!C||D[0]&268435456)&&W(o,w[28]),(!C||D[1]&2)&&f!==(f=w[32](Je.MarkPrice)+"")&&W(p,f),(!C||D[0]&134217728)&&W(_,w[27]);const L={};D[0]&4&&(L.position=w[2]),g.$set(L);const $={};D[0]&16777216&&($.availableSize=w[24]),D[0]&2&&($.contract=w[1]),D[0]&1024&&($.market=w[10]),D[0]&512&&($.order=w[9]),D[0]&4&&($.targetPosition=w[2]),!T&&D[0]&65536&&(T=!0,$.form=w[16],Me(()=>T=!1)),I.$set($)},i(w){C||(Q(g.$$.fragment,w),Q(I.$$.fragment,w),C=!0)},o(w){j(g.$$.fragment,w),j(I.$$.fragment,w),C=!1},d(w){w&&m(e),w&&m(v),ie(g,w),w&&m(b),w&&m(P),ie(I)}}}function jE(n){let e,t,i,r,l,s,o;return t=new gn({props:{active:n[11]==="entire-tpsl",$$slots:{default:[QE]},$$scope:{ctx:n}}}),r=new gn({props:{active:n[11]==="partial-tpsl",$$slots:{default:[RE]},$$scope:{ctx:n}}}),s=new gn({props:{active:n[11]==="ts",$$slots:{default:[FE]},$$scope:{ctx:n}}}),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),l=q(),te(s.$$.fragment),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=S(e);re(t.$$.fragment,c),i=M(c),re(r.$$.fragment,c),l=M(c),re(s.$$.fragment,c),c.forEach(m),this.h()},h(){E(e,"class","body H-14s7i89")},m(a,c){G(a,e,c),ne(t,e,null),u(e,i),ne(r,e,null),u(e,l),ne(s,e,null),o=!0},p(a,c){const f={};c[0]&2048&&(f.active=a[11]==="entire-tpsl"),c[0]&509933055|c[1]&2|c[2]&32&&(f.$$scope={dirty:c,ctx:a}),t.$set(f);const p={};c[0]&2048&&(p.active=a[11]==="partial-tpsl"),c[0]&510195199|c[1]&2|c[2]&32&&(p.$$scope={dirty:c,ctx:a}),r.$set(p);const d={};c[0]&2048&&(d.active=a[11]==="ts"),c[0]&419628550|c[1]&2|c[2]&32&&(d.$$scope={dirty:c,ctx:a}),s.$set(d)},i(a){o||(Q(t.$$.fragment,a),Q(r.$$.fragment,a),Q(s.$$.fragment,a),o=!0)},o(a){j(t.$$.fragment,a),j(r.$$.fragment,a),j(s.$$.fragment,a),o=!1},d(a){a&&m(e),ie(t),ie(r),ie(s)}}}function Uc(n){let e,t;return e=new Kn({props:{active:n[11]==="entire-tpsl",class:"fw3 "+(n[11]==="entire-tpsl"?"active":""),$$slots:{default:[UE]},$$scope:{ctx:n}}}),e.$on("click",n[36]("entire-tpsl")),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&2048&&(l.active=i[11]==="entire-tpsl"),r[0]&2048&&(l.class="fw3 "+(i[11]==="entire-tpsl"?"active":"")),r[1]&2|r[2]&32&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function UE(n){let e=n[32](Je.EntireTPSL)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[1]&2&&e!==(e=i[32](Je.EntireTPSL)+"")&&W(t,e)},d(i){i&&m(t)}}}function Wc(n){let e,t;return e=new Kn({props:{active:n[11]==="partial-tpsl",class:"fw3 "+(n[11]==="partial-tpsl"?"active":""),$$slots:{default:[WE]},$$scope:{ctx:n}}}),e.$on("click",n[36]("partial-tpsl")),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&2048&&(l.active=i[11]==="partial-tpsl"),r[0]&2048&&(l.class="fw3 "+(i[11]==="partial-tpsl"?"active":"")),r[1]&2|r[2]&32&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function WE(n){let e=n[32](Je.PartialTPSL)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[1]&2&&e!==(e=i[32](Je.PartialTPSL)+"")&&W(t,e)},d(i){i&&m(t)}}}function Gc(n){let e,t;return e=new Kn({props:{active:n[11]==="ts",class:"fw3 "+(n[11]==="ts"?"active":""),$$slots:{default:[GE]},$$scope:{ctx:n}}}),e.$on("click",n[36]("ts")),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&2048&&(l.active=i[11]==="ts"),r[0]&2048&&(l.class="fw3 "+(i[11]==="ts"?"active":"")),r[1]&2|r[2]&32&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function GE(n){let e=n[32](Zt.TrailingStop)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[1]&2&&e!==(e=i[32](Zt.TrailingStop)+"")&&W(t,e)},d(i){i&&m(t)}}}function KE(n){let e,t,i,r,l,s,o,a,c,f,p=!(n[31]&&n[5]==="Partial"||n[30])&&Uc(n),d=!(n[31]&&n[5]==="Entire"||n[30])&&Wc(n),h=(n[29]||n[30])&&Gc(n);return{c(){e=y("div"),t=y("div"),p&&p.c(),i=q(),d&&d.c(),r=q(),h&&h.c(),l=q(),s=y("i"),o=B(""),this.h()},l(_){e=k(_,"DIV",{class:!0,slot:!0});var v=S(e);t=k(v,"DIV",{class:!0});var g=S(t);p&&p.l(g),i=M(g),d&&d.l(g),r=M(g),h&&h.l(g),g.forEach(m),l=M(v),s=k(v,"I",{class:!0});var b=S(s);o=A(b,""),b.forEach(m),v.forEach(m),this.h()},h(){E(t,"class","tpsl-main df aic jcc wsn"),E(s,"class","iconfont cp"),E(e,"class","tpsl-header p24 lh24 df jcsb f20 T1 H-14s7i89"),E(e,"slot","header")},m(_,v){G(_,e,v),u(e,t),p&&p.m(t,null),u(t,i),d&&d.m(t,null),u(t,r),h&&h.m(t,null),u(e,l),u(e,s),u(s,o),a=!0,c||(f=We(s,"click",n[34]),c=!0)},p(_,v){_[31]&&_[5]==="Partial"||_[30]?p&&(ot(),j(p,1,1,()=>{p=null}),at()):p?(p.p(_,v),v[0]&1073741856|v[1]&1&&Q(p,1)):(p=Uc(_),p.c(),Q(p,1),p.m(t,i)),_[31]&&_[5]==="Entire"||_[30]?d&&(ot(),j(d,1,1,()=>{d=null}),at()):d?(d.p(_,v),v[0]&1073741856|v[1]&1&&Q(d,1)):(d=Wc(_),d.c(),Q(d,1),d.m(t,r)),_[29]||_[30]?h?(h.p(_,v),v[0]&1610612736&&Q(h,1)):(h=Gc(_),h.c(),Q(h,1),h.m(t,null)):h&&(ot(),j(h,1,1,()=>{h=null}),at())},i(_){a||(Q(p),Q(d),Q(h),a=!0)},o(_){j(p),j(d),j(h),a=!1},d(_){_&&m(e),p&&p.d(),d&&d.d(),h&&h.d(),c=!1,f()}}}function XE(n){let e,t=n[32](He.Cancel)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","f16 fw3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[1]&2&&t!==(t=r[32](He.Cancel)+"")&&W(i,t)},d(r){r&&m(e)}}}function YE(n){let e,t=n[32](He.Confirm)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","f16 fw3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[1]&2&&t!==(t=r[32](He.Confirm)+"")&&W(i,t)},d(r){r&&m(e)}}}function JE(n){let e,t,i,r,l;return t=new Ht({props:{$$slots:{default:[XE]},$$scope:{ctx:n}}}),t.$on("click",n[33]),r=new Ht({props:{disabled:n[23],loading:n[20],type:"primary",$$slots:{default:[YE]},$$scope:{ctx:n}}}),r.$on("click",n[35]),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);re(t.$$.fragment,o),i=M(o),re(r.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","p24 tr"),E(e,"slot","footer")},m(s,o){G(s,e,o),ne(t,e,null),u(e,i),ne(r,e,null),l=!0},p(s,o){const a={};o[1]&2|o[2]&32&&(a.$$scope={dirty:o,ctx:s}),t.$set(a);const c={};o[0]&8388608&&(c.disabled=s[23]),o[0]&1048576&&(c.loading=s[20]),o[1]&2|o[2]&32&&(c.$$scope={dirty:o,ctx:s}),r.$set(c)},i(s){l||(Q(t.$$.fragment,s),Q(r.$$.fragment,s),l=!0)},o(s){j(t.$$.fragment,s),j(r.$$.fragment,s),l=!1},d(s){s&&m(e),ie(t),ie(r)}}}function ZE(n){let e,t;return e=new bn({props:{style:"width:520px;max-width:520px;",$$slots:{footer:[JE],header:[KE],default:[jE]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&2147483647|r[1]&3|r[2]&32&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function xE(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P;J(n,dt,ye=>t(32,_=ye)),J(n,An,ye=>t(38,v=ye)),J(n,zn,ye=>t(39,g=ye)),J(n,ri,ye=>t(40,b=ye)),J(n,br,ye=>t(41,P=ye));let{source:I}=e,{contract:T}=e,{position:C}=e,{tpStopPxEp:V=0}=e,{slStopPxEp:O=0}=e,{closeMode:w="None"}=e,{editType:D=""}=e,{takeProfitOrder:L=null}=e,{stopLossOrder:$=null}=e,{trailingStopOrder:N=null}=e;const z=Kt(),H=vn.readContractStorage();let R=null,F="entire-tpsl",U,K=null,Y=!1,X=null,ee=!1,Z=null,ue=!1,ce=H.hideTpslEntireInfo,pe=H.hideTpslPartialInfo,me=!1,oe,ke;Lt(function(){D==="ts"&&t(11,F="ts"),["","tp","sl"].includes(D)&&t(11,F=w==="Partial"?"partial-tpsl":"entire-tpsl")});function Le(ye){if(ye==="entire-tpsl"){U="Entire";return}if(ye==="partial-tpsl"){U="Partial";return}if(ye==="ts"){U="Partial";return}}function ge(ye,Ke,Qe){let ze=Re(0);const Ue=Re(ye.size);let st=[],Oe=[];if(Qe!=="ts"?(st=s[Qe].Partial,Oe=s[Qe].Entire):st=s[Qe].All,Oe.length===0){const it=st.reduce((ct,ft)=>Ke&&Ke.orderID===ft.orderID?ct:ct.plus(ft.orderQty),Re(0));ze=Ue.minus(it)}return ze<0?0:ze}function ae(ye,Ke){if(Ke&&Ke.has(ye.symbol)){t(10,R=Ke.get(ye.symbol));return}t(10,R=null)}function x(){z("close")}function le(){z("close")}async function fe(){if(!Se())return;Ie(),F!=="ts"&&Y&&oe&&oe(),F!=="ts"&&ee&&ke&&ke(),t(20,me=!0),(await Promise.all([F!=="ts"&&Y&&di.handleTakeProfit(R,C,L,K,T,I),F!=="ts"&&ee&&di.handleStopLoss(R,C,$,X,T,I),F==="ts"&&ue&&ol.handleTrailingStop(R,C,N,Z,T,I)].filter(Boolean))).every(Ke=>Ke===!0)&&z("close"),t(20,me=!1)}function Se(){if(K){if(U==="Partial"&&K.orderQty===0)return Pt.send("toast","error",{message:_(Je.SizeCannotBeEmpty)}),!1;if(K.stopPxEp===0||["LimitIfTouched","StopLimit"].includes(K.ordType)&&!K.priceEp)return Pt.send("toast","error",{message:_(Je.IncorrectTakeProfit)}),!1}if(X){if(U==="Partial"&&X.orderQty===0)return Pt.send("toast","error",{message:_(Je.SizeCannotBeEmpty)}),!1;if(X.stopPxEp===0||["LimitIfTouched","StopLimit"].includes(X.ordType)&&!X.priceEp)return Pt.send("toast","error",{message:_(Je.IncorrectStopLoss)}),!1}if(Z){if(Z.orderQty===0)return Pt.send("toast","error",{message:_(Je.SizeCannotBeEmpty)}),!1;if(!Z.pegOffsetValueEp&&!Z.pegOffsetProportionEr)return Pt.send("toast","error",{message:_(Je.IncorrectTrailingStop)}),!1}return!0}function Pe(ye){return function(){t(11,F=ye),Ee()}}function Ce(ye){return()=>{if(ye==="hideTpslEntireInfo"){t(18,ce=!0),vn.updateContractStorage({hideTpslEntireInfo:ce});return}t(19,pe=!0),vn.updateContractStorage({hideTpslPartialInfo:pe})}}function Ee(){t(12,K=null),t(14,X=null),t(16,Z=null),t(13,Y=!1),t(15,ee=!1),t(17,ue=!1)}function Ie(){const ye={tab:F,source:I,closeMode:w,editType:D,qtyType:c};K&&Object.assign(ye,{takeProfitFormData:K}),X&&Object.assign(ye,{stopLossFormData:X}),Z&&Object.assign(ye,{trailingStopFormData:Z}),pi.track("tp_sl_params",ye)}function ve(ye){K=ye,t(12,K)}function de(ye){oe=ye,t(21,oe)}const se=()=>t(13,Y=!0);function he(ye){X=ye,t(14,X)}function _e(ye){ke=ye,t(22,ke)}const be=()=>t(15,ee=!0);function Ve(ye){K=ye,t(12,K)}function Be(ye){oe=ye,t(21,oe)}const Fe=()=>t(13,Y=!0);function $e(ye){X=ye,t(14,X)}function Ae(ye){ke=ye,t(22,ke)}const Ne=()=>t(15,ee=!0);function Ge(ye){Z=ye,t(16,Z)}const Xe=()=>t(17,ue=!0);return n.$$set=ye=>{"source"in ye&&t(0,I=ye.source),"contract"in ye&&t(1,T=ye.contract),"position"in ye&&t(2,C=ye.position),"tpStopPxEp"in ye&&t(3,V=ye.tpStopPxEp),"slStopPxEp"in ye&&t(4,O=ye.slStopPxEp),"closeMode"in ye&&t(5,w=ye.closeMode),"editType"in ye&&t(6,D=ye.editType),"takeProfitOrder"in ye&&t(7,L=ye.takeProfitOrder),"stopLossOrder"in ye&&t(8,$=ye.stopLossOrder),"trailingStopOrder"in ye&&t(9,N=ye.trailingStopOrder)},n.$$.update=()=>{n.$$.dirty[0]&64&&t(31,i=["tp","sl"].includes(D)),n.$$.dirty[0]&64&&t(30,r=D==="ts"),n.$$.dirty[0]&64&&t(29,l=D===""),n.$$.dirty[0]&6|n.$$.dirty[1]&1024&&(s=P(T.symbol,C.posSide)),n.$$.dirty[0]&2048&&Le(F),n.$$.dirty[0]&2|n.$$.dirty[1]&512&&ae(T,b),n.$$.dirty[0]&1024&&t(28,o=R?R.close:0),n.$$.dirty[0]&1024&&t(27,a=R?R.markPrice:0),n.$$.dirty[0]&2|n.$$.dirty[1]&384&&(c=T.type==="Perpetual"?g:v),n.$$.dirty[0]&132&&t(26,f=ge(C,L,"tp")),n.$$.dirty[0]&260&&t(25,p=ge(C,$,"sl")),n.$$.dirty[0]&516&&t(24,d=ge(C,N,"ts")),n.$$.dirty[0]&2080&&t(23,h=F==="entire-tpsl"&&w==="Partial"||F==="partial-tpsl"&&w==="Entire")},[I,T,C,V,O,w,D,L,$,N,R,F,K,Y,X,ee,Z,ue,ce,pe,me,oe,ke,h,d,p,f,a,o,l,r,i,_,x,le,fe,Pe,Ce,v,g,b,P,ve,de,se,he,_e,be,Ve,Be,Fe,$e,Ae,Ne,Ge,Xe]}let Fl=class extends tt{constructor(e){super(),nt(this,e,xE,ZE,et,{source:0,contract:1,position:2,tpStopPxEp:3,slStopPxEp:4,closeMode:5,editType:6,takeProfitOrder:7,stopLossOrder:8,trailingStopOrder:9},null,[-1,-1,-1])}};function Kc(n,e,t){const i=n.slice();return i[33]=e[t],i}function Xc(n,e,t){const i=n.slice();return i[33]=e[t],i}function Yc(n,e,t){const i=n.slice();return i[33]=e[t],i}function e3(n){let e,t=n[9](He.NoData)+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","no-data tc T3 H-11lp4x6")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&512&&t!==(t=r[9](He.NoData)+"")&&W(i,t)},d(r){r&&m(e)}}}function t3(n){let e,t,i,r=n[5],l=[];for(let f=0;f<r.length;f+=1)l[f]=Jc(Yc(n,r,f));let s=n[4],o=[];for(let f=0;f<s.length;f+=1)o[f]=Zc(Xc(n,s,f));let a=n[3],c=[];for(let f=0;f<a.length;f+=1)c[f]=xc(Kc(n,a,f));return{c(){for(let f=0;f<l.length;f+=1)l[f].c();e=q();for(let f=0;f<o.length;f+=1)o[f].c();t=q();for(let f=0;f<c.length;f+=1)c[f].c();i=ut()},l(f){for(let p=0;p<l.length;p+=1)l[p].l(f);e=M(f);for(let p=0;p<o.length;p+=1)o[p].l(f);t=M(f);for(let p=0;p<c.length;p+=1)c[p].l(f);i=ut()},m(f,p){for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(f,p);G(f,e,p);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(f,p);G(f,t,p);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(f,p);G(f,i,p)},p(f,p){if(p[0]&57895){r=f[5];let d;for(d=0;d<r.length;d+=1){const h=Yc(f,r,d);l[d]?l[d].p(h,p):(l[d]=Jc(h),l[d].c(),l[d].m(e.parentNode,e))}for(;d<l.length;d+=1)l[d].d(1);l.length=r.length}if(p[0]&57879){s=f[4];let d;for(d=0;d<s.length;d+=1){const h=Xc(f,s,d);o[d]?o[d].p(h,p):(o[d]=Zc(h),o[d].c(),o[d].m(t.parentNode,t))}for(;d<o.length;d+=1)o[d].d(1);o.length=s.length}if(p[0]&57871){a=f[3];let d;for(d=0;d<a.length;d+=1){const h=Kc(f,a,d);c[d]?c[d].p(h,p):(c[d]=xc(h),c[d].c(),c[d].m(i.parentNode,i))}for(;d<c.length;d+=1)c[d].d(1);c.length=a.length}},d(f){wn(l,f),f&&m(e),wn(o,f),f&&m(t),wn(c,f),f&&m(i)}}}function Jc(n){let e,t,i,r,l,s=n[15](n[33],n[2],n[0],n[1])+"",o,a,c,f=$r(n[0],n[33])+"",p,d,h,_=qr(n[33],n[9])+"",v,g,b,P,I,T,C,V,O,w;function D(){return n[23](n[33])}function L(){return n[24](n[33])}return{c(){e=y("div"),t=y("div"),i=B("TP"),r=q(),l=y("div"),o=B(s),a=q(),c=y("div"),p=B(f),d=q(),h=y("div"),v=B(_),g=q(),b=y("div"),P=y("i"),I=B(""),T=q(),C=y("i"),V=B(""),this.h()},l($){e=k($,"DIV",{class:!0});var N=S(e);t=k(N,"DIV",{class:!0});var z=S(t);i=A(z,"TP"),z.forEach(m),r=M(N),l=k(N,"DIV",{});var H=S(l);o=A(H,s),H.forEach(m),a=M(N),c=k(N,"DIV",{class:!0});var R=S(c);p=A(R,f),R.forEach(m),d=M(N),h=k(N,"DIV",{});var F=S(h);v=A(F,_),F.forEach(m),g=M(N),b=k(N,"DIV",{class:!0});var U=S(b);P=k(U,"I",{class:!0});var K=S(P);I=A(K,""),K.forEach(m),T=M(U),C=k(U,"I",{class:!0});var Y=S(C);V=A(Y,""),Y.forEach(m),U.forEach(m),N.forEach(m),this.h()},h(){E(t,"class","buy"),E(c,"class","buy"),E(P,"class","iconfont cp"),E(C,"class","iconfont ml20 cp H-11lp4x6"),E(b,"class","tar H-11lp4x6"),E(e,"class","dc T2 H-11lp4x6")},m($,N){G($,e,N),u(e,t),u(t,i),u(e,r),u(e,l),u(l,o),u(e,a),u(e,c),u(c,p),u(e,d),u(e,h),u(h,v),u(e,g),u(e,b),u(b,P),u(P,I),u(b,T),u(b,C),u(C,V),O||(w=[We(P,"click",D),We(C,"click",L)],O=!0)},p($,N){n=$,N[0]&39&&s!==(s=n[15](n[33],n[2],n[0],n[1])+"")&&W(o,s),N[0]&33&&f!==(f=$r(n[0],n[33])+"")&&W(p,f),N[0]&544&&_!==(_=qr(n[33],n[9])+"")&&W(v,_)},d($){$&&m(e),O=!1,jt(w)}}}function Zc(n){let e,t,i,r,l,s=n[15](n[33],n[2],n[0],n[1])+"",o,a,c,f=$r(n[0],n[33])+"",p,d,h,_=qr(n[33],n[9])+"",v,g,b,P,I,T,C,V,O,w;function D(){return n[25](n[33])}function L(){return n[26](n[33])}return{c(){e=y("div"),t=y("div"),i=B("SL"),r=q(),l=y("div"),o=B(s),a=q(),c=y("div"),p=B(f),d=q(),h=y("div"),v=B(_),g=q(),b=y("div"),P=y("i"),I=B(""),T=q(),C=y("i"),V=B(""),this.h()},l($){e=k($,"DIV",{class:!0});var N=S(e);t=k(N,"DIV",{class:!0});var z=S(t);i=A(z,"SL"),z.forEach(m),r=M(N),l=k(N,"DIV",{});var H=S(l);o=A(H,s),H.forEach(m),a=M(N),c=k(N,"DIV",{class:!0});var R=S(c);p=A(R,f),R.forEach(m),d=M(N),h=k(N,"DIV",{});var F=S(h);v=A(F,_),F.forEach(m),g=M(N),b=k(N,"DIV",{class:!0});var U=S(b);P=k(U,"I",{class:!0});var K=S(P);I=A(K,""),K.forEach(m),T=M(U),C=k(U,"I",{class:!0});var Y=S(C);V=A(Y,""),Y.forEach(m),U.forEach(m),N.forEach(m),this.h()},h(){E(t,"class","sell"),E(c,"class","sell"),E(P,"class","iconfont cp"),E(C,"class","iconfont ml20 cp H-11lp4x6"),E(b,"class","tar H-11lp4x6"),E(e,"class","dc T2 H-11lp4x6")},m($,N){G($,e,N),u(e,t),u(t,i),u(e,r),u(e,l),u(l,o),u(e,a),u(e,c),u(c,p),u(e,d),u(e,h),u(h,v),u(e,g),u(e,b),u(b,P),u(P,I),u(b,T),u(b,C),u(C,V),O||(w=[We(P,"click",D),We(C,"click",L)],O=!0)},p($,N){n=$,N[0]&23&&s!==(s=n[15](n[33],n[2],n[0],n[1])+"")&&W(o,s),N[0]&17&&f!==(f=$r(n[0],n[33])+"")&&W(p,f),N[0]&528&&_!==(_=qr(n[33],n[9])+"")&&W(v,_)},d($){$&&m(e),O=!1,jt(w)}}}function xc(n){let e,t,i,r,l,s=n[15](n[33],n[2],n[0],n[1])+"",o,a,c,f=$r(n[0],n[33])+"",p,d,h,_=qr(n[33],n[9])+"",v,g,b,P,I,T,C,V,O,w,D;function L(){return n[27](n[33])}function $(){return n[28](n[33])}return{c(){e=y("div"),t=y("div"),i=B("TS"),r=q(),l=y("div"),o=B(s),a=q(),c=y("div"),p=B(f),d=q(),h=y("div"),v=B(_),g=q(),b=y("div"),P=y("i"),I=B(""),T=q(),C=y("i"),V=B(""),O=q(),this.h()},l(N){e=k(N,"DIV",{class:!0});var z=S(e);t=k(z,"DIV",{});var H=S(t);i=A(H,"TS"),H.forEach(m),r=M(z),l=k(z,"DIV",{});var R=S(l);o=A(R,s),R.forEach(m),a=M(z),c=k(z,"DIV",{});var F=S(c);p=A(F,f),F.forEach(m),d=M(z),h=k(z,"DIV",{});var U=S(h);v=A(U,_),U.forEach(m),g=M(z),b=k(z,"DIV",{class:!0});var K=S(b);P=k(K,"I",{class:!0});var Y=S(P);I=A(Y,""),Y.forEach(m),T=M(K),C=k(K,"I",{class:!0});var X=S(C);V=A(X,""),X.forEach(m),K.forEach(m),O=M(z),z.forEach(m),this.h()},h(){E(P,"class","iconfont cp"),E(C,"class","iconfont ml20 cp H-11lp4x6"),E(b,"class","tar H-11lp4x6"),E(e,"class","dc T2 H-11lp4x6")},m(N,z){G(N,e,z),u(e,t),u(t,i),u(e,r),u(e,l),u(l,o),u(e,a),u(e,c),u(c,p),u(e,d),u(e,h),u(h,v),u(e,g),u(e,b),u(b,P),u(P,I),u(b,T),u(b,C),u(C,V),u(e,O),w||(D=[We(P,"click",L),We(C,"click",$)],w=!0)},p(N,z){n=N,z[0]&15&&s!==(s=n[15](n[33],n[2],n[0],n[1])+"")&&W(o,s),z[0]&9&&f!==(f=$r(n[0],n[33])+"")&&W(p,f),z[0]&520&&_!==(_=qr(n[33],n[9])+"")&&W(v,_)},d(N){N&&m(e),w=!1,jt(D)}}}function n3(n){let e,t,i,r,l=n[9](Je.Type)+"",s,o,a,c=n[9](He.Size)+"",f,p,d,h,_,v,g=n[9](Je.TriggerPrice)+"",b,P,I,T=n[9](Je.OrderPrice)+"",C,V,O,w=n[9](Je.Action)+"",D,L;function $(H,R){return H[6].length>0?t3:e3}let N=$(n),z=N(n);return{c(){e=y("div"),t=y("div"),i=y("div"),r=y("div"),s=B(l),o=q(),a=y("div"),f=B(c),p=B("("),d=B(n[7]),h=B(")"),_=q(),v=y("div"),b=B(g),P=q(),I=y("div"),C=B(T),V=q(),O=y("div"),D=B(w),L=q(),z.c(),this.h()},l(H){e=k(H,"DIV",{class:!0});var R=S(e);t=k(R,"DIV",{class:!0});var F=S(t);i=k(F,"DIV",{class:!0});var U=S(i);r=k(U,"DIV",{});var K=S(r);s=A(K,l),K.forEach(m),o=M(U),a=k(U,"DIV",{});var Y=S(a);f=A(Y,c),p=A(Y,"("),d=A(Y,n[7]),h=A(Y,")"),Y.forEach(m),_=M(U),v=k(U,"DIV",{});var X=S(v);b=A(X,g),X.forEach(m),P=M(U),I=k(U,"DIV",{});var ee=S(I);C=A(ee,T),ee.forEach(m),V=M(U),O=k(U,"DIV",{class:!0});var Z=S(O);D=A(Z,w),Z.forEach(m),U.forEach(m),L=M(F),z.l(F),F.forEach(m),R.forEach(m),this.h()},h(){E(O,"class","tar H-11lp4x6"),E(i,"class","title dc f14 T3 H-11lp4x6"),E(t,"class","grid lh42 H-11lp4x6"),E(e,"class","body H-11lp4x6")},m(H,R){G(H,e,R),u(e,t),u(t,i),u(i,r),u(r,s),u(i,o),u(i,a),u(a,f),u(a,p),u(a,d),u(a,h),u(i,_),u(i,v),u(v,b),u(i,P),u(i,I),u(I,C),u(i,V),u(i,O),u(O,D),u(t,L),z.m(t,null)},p(H,R){R[0]&512&&l!==(l=H[9](Je.Type)+"")&&W(s,l),R[0]&512&&c!==(c=H[9](He.Size)+"")&&W(f,c),R[0]&128&&W(d,H[7]),R[0]&512&&g!==(g=H[9](Je.TriggerPrice)+"")&&W(b,g),R[0]&512&&T!==(T=H[9](Je.OrderPrice)+"")&&W(C,T),R[0]&512&&w!==(w=H[9](Je.Action)+"")&&W(D,w),N===(N=$(H))&&z?z.p(H,R):(z.d(1),z=N(H),z&&(z.c(),z.m(t,null)))},d(H){H&&m(e),z.d()}}}function i3(n){let e,t,i,r=n[9](Je.TPSL)+"",l,s,o=n[0].pairName+"",a,c,f,p=n[9](n[8]?Je.Long:Je.Short)+"",d,h,_,v,g,b;return{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),s=B(" - "),a=B(o),c=q(),f=y("span"),d=B(p),h=q(),_=y("i"),v=B(""),this.h()},l(P){e=k(P,"DIV",{class:!0,slot:!0});var I=S(e);t=k(I,"DIV",{class:!0});var T=S(t);i=k(T,"SPAN",{});var C=S(i);l=A(C,r),s=A(C," - "),a=A(C,o),C.forEach(m),c=M(T),f=k(T,"SPAN",{class:!0});var V=S(f);d=A(V,p),V.forEach(m),T.forEach(m),h=M(I),_=k(I,"I",{class:!0});var O=S(_);v=A(O,""),O.forEach(m),I.forEach(m),this.h()},h(){E(f,"class","side-icon ml8 lh14 br4 f12 H-11lp4x6"),Te(f,"long",n[8]),Te(f,"short",!n[8]),E(t,"class","df aic jcc"),E(_,"class","iconfont cp"),E(e,"class","p24 lh24 df jcsb f16 T1"),E(e,"slot","header")},m(P,I){G(P,e,I),u(e,t),u(t,i),u(i,l),u(i,s),u(i,a),u(t,c),u(t,f),u(f,d),u(e,h),u(e,_),u(_,v),g||(b=We(_,"click",n[11]),g=!0)},p(P,I){I[0]&512&&r!==(r=P[9](Je.TPSL)+"")&&W(l,r),I[0]&1&&o!==(o=P[0].pairName+"")&&W(a,o),I[0]&768&&p!==(p=P[9](P[8]?Je.Long:Je.Short)+"")&&W(d,p),I[0]&256&&Te(f,"long",P[8]),I[0]&256&&Te(f,"short",!P[8])},d(P){P&&m(e),g=!1,b()}}}function r3(n){let e,t=n[9](He.CancelAll)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","f16")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&512&&t!==(t=r[9](He.CancelAll)+"")&&W(i,t)},d(r){r&&m(e)}}}function l3(n){let e,t=n[9](Je.Add)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","f16 fw3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&512&&t!==(t=r[9](Je.Add)+"")&&W(i,t)},d(r){r&&m(e)}}}function s3(n){let e,t,i,r,l;return t=new Ht({props:{disabled:n[6].length===0,$$slots:{default:[r3]},$$scope:{ctx:n}}}),t.$on("click",n[10]),r=new Ht({props:{$$slots:{default:[l3]},$$scope:{ctx:n}}}),r.$on("click",n[12]),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);re(t.$$.fragment,o),i=M(o),re(r.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","p24 tr"),E(e,"slot","footer")},m(s,o){G(s,e,o),ne(t,e,null),u(e,i),ne(r,e,null),l=!0},p(s,o){const a={};o[0]&64&&(a.disabled=s[6].length===0),o[0]&512|o[1]&512&&(a.$$scope={dirty:o,ctx:s}),t.$set(a);const c={};o[0]&512|o[1]&512&&(c.$$scope={dirty:o,ctx:s}),r.$set(c)},i(s){l||(Q(t.$$.fragment,s),Q(r.$$.fragment,s),l=!0)},o(s){j(t.$$.fragment,s),j(r.$$.fragment,s),l=!1},d(s){s&&m(e),ie(t),ie(r)}}}function o3(n){let e,t;return e=new bn({props:{style:"width:520px;max-width:520px;",$$slots:{footer:[s3],header:[i3],default:[n3]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&1023|r[1]&512&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function a3(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v,g,b;J(n,dt,Y=>t(9,d=Y)),J(n,An,Y=>t(18,h=Y)),J(n,zn,Y=>t(19,_=Y)),J(n,ri,Y=>t(20,v=Y)),J(n,br,Y=>t(21,g=Y)),J(n,Kl,Y=>t(22,b=Y));let{source:P}=e,{contract:I}=e,{position:T}=e;const C=Kt();function V(Y,X){if(X&&X.has(Y.symbol)){X.get(Y.symbol);return}}function O(){en.create(id,{confirmText:d(Je.ConfirmToCloseAllOrders),onConfirm:()=>{const Y={type:I.type,by:"position",goal:"cancel_tspl_list"};Mi(a,Y)}})}function w(){C("close")}function D(){en.create(Fl,{source:P,contract:I,position:T,closeMode:i})}function L(Y,X){const ee={source:P,contract:I,position:T,closeMode:i,editType:X};X==="tp"&&Object.assign(ee,{takeProfitOrder:Y}),X==="sl"&&Object.assign(ee,{stopLossOrder:Y}),X==="ts"&&Object.assign(ee,{trailingStopOrder:Y}),en.create(Fl,ee)}function $(Y){const X={type:I.type,by:"position",goal:"cancel_tspl"};Mi(Y,X)}function N(Y,X,ee,Z){return Y.orderQty===0?"PositionSize":Qt.convert(ee,X,Y.orderQty,Z.avgEntryPrice)}const z=Y=>L(Y,"tp"),H=Y=>$(Y),R=Y=>L(Y,"sl"),F=Y=>$(Y),U=Y=>L(Y,"ts"),K=Y=>$(Y);return n.$$set=Y=>{"source"in Y&&t(16,P=Y.source),"contract"in Y&&t(0,I=Y.contract),"position"in Y&&t(1,T=Y.position)},n.$$.update=()=>{n.$$.dirty[0]&4194307&&(i=b(I.symbol,T.posSide)),n.$$.dirty[0]&2097155&&t(17,r=g(I.symbol,T.posSide)),n.$$.dirty[0]&131072&&t(5,l=r.tp.All),n.$$.dirty[0]&131072&&t(4,s=r.sl.All),n.$$.dirty[0]&131072&&t(3,o=r.ts.All),n.$$.dirty[0]&56&&t(6,a=l.concat(s).concat(o)),n.$$.dirty[0]&2&&t(8,c=T.side==="Buy"),n.$$.dirty[0]&1048577&&V(I,v),n.$$.dirty[0]&786433&&t(2,f=I.type==="Perpetual"?_:h),n.$$.dirty[0]&5&&t(7,p=Qt.getUnit(I,f))},[I,T,f,o,s,l,a,p,c,d,O,w,D,L,$,N,P,r,h,_,v,g,b,z,H,R,F,U,K]}let rd=class extends tt{constructor(e){super(),nt(this,e,a3,o3,et,{source:16,contract:0,position:1},null,[-1,-1])}};function ef(n){let e,t,i,r,l,s=n[3](zt.AddTpSl)+"",o,a,c;return{c(){e=y("div"),t=y("i"),i=B(""),r=q(),l=y("span"),o=B(s),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=S(e);t=k(p,"I",{class:!0});var d=S(t);i=A(d,""),d.forEach(m),r=M(p),l=k(p,"SPAN",{class:!0});var h=S(l);o=A(h,s),h.forEach(m),p.forEach(m),this.h()},h(){E(t,"class","iconfont f16"),E(l,"class","T1"),E(e,"class","row single-position lh28 cp H-7um6zv")},m(f,p){G(f,e,p),u(e,t),u(t,i),u(e,r),u(e,l),u(l,o),a||(c=We(e,"click",function(){Tt(n[6](n[2].position))&&n[6](n[2].position).apply(this,arguments)}),a=!0)},p(f,p){n=f,p&8&&s!==(s=n[3](zt.AddTpSl)+"")&&W(o,s)},d(f){f&&m(e),a=!1,c()}}}function tf(n){var l,s,o,a;let e,t,i=((s=(l=n[2])==null?void 0:l.position)==null?void 0:s.size)>0&&nf(n),r=((a=(o=n[2])==null?void 0:o.shortPosition)==null?void 0:a.size)>0&&rf(n);return{c(){i&&i.c(),e=q(),r&&r.c(),t=ut()},l(c){i&&i.l(c),e=M(c),r&&r.l(c),t=ut()},m(c,f){i&&i.m(c,f),G(c,e,f),r&&r.m(c,f),G(c,t,f)},p(c,f){var p,d,h,_;((d=(p=c[2])==null?void 0:p.position)==null?void 0:d.size)>0?i?i.p(c,f):(i=nf(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),((_=(h=c[2])==null?void 0:h.shortPosition)==null?void 0:_.size)>0?r?r.p(c,f):(r=rf(c),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(c){i&&i.d(c),c&&m(e),r&&r.d(c),c&&m(t)}}}function nf(n){let e,t,i,r,l,s=n[3](zt.AddLongTpSl)+"",o,a,c;return{c(){e=y("div"),t=y("i"),i=B(""),r=q(),l=y("span"),o=B(s),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=S(e);t=k(p,"I",{class:!0});var d=S(t);i=A(d,""),d.forEach(m),r=M(p),l=k(p,"SPAN",{class:!0});var h=S(l);o=A(h,s),h.forEach(m),p.forEach(m),this.h()},h(){E(t,"class","iconfont f16"),E(l,"class","T1"),E(e,"class","row long-position lh28 cp H-7um6zv")},m(f,p){G(f,e,p),u(e,t),u(t,i),u(e,r),u(e,l),u(l,o),a||(c=We(e,"click",function(){Tt(n[6](n[2].position))&&n[6](n[2].position).apply(this,arguments)}),a=!0)},p(f,p){n=f,p&8&&s!==(s=n[3](zt.AddLongTpSl)+"")&&W(o,s)},d(f){f&&m(e),a=!1,c()}}}function rf(n){let e,t,i,r,l,s=n[3](zt.AddShortTpSl)+"",o,a,c;return{c(){e=y("div"),t=y("i"),i=B(""),r=q(),l=y("span"),o=B(s),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=S(e);t=k(p,"I",{class:!0});var d=S(t);i=A(d,""),d.forEach(m),r=M(p),l=k(p,"SPAN",{class:!0});var h=S(l);o=A(h,s),h.forEach(m),p.forEach(m),this.h()},h(){E(t,"class","iconfont f16"),E(l,"class","T1"),E(e,"class","row short-position lh28 cp H-7um6zv")},m(f,p){G(f,e,p),u(e,t),u(t,i),u(e,r),u(e,l),u(l,o),a||(c=We(e,"click",function(){Tt(n[6](n[2].shortPosition))&&n[6](n[2].shortPosition).apply(this,arguments)}),a=!0)},p(f,p){n=f,p&8&&s!==(s=n[3](zt.AddShortTpSl)+"")&&W(o,s)},d(f){f&&m(e),a=!1,c()}}}function c3(n){var D,L;let e,t,i,r,l,s,o,a,c,f=n[3](zt.PlaceNewLimitOrder)+"",p,d,h,_,v,g,b,P=n[3](zt.DrawHorizontalLine)+"",I,T,C,V,O=n[2].mode===Ct.OneWay&&((L=(D=n[2])==null?void 0:D.position)==null?void 0:L.size)>0&&ef(n),w=n[2].mode===Ct.Hedge&&tf(n);return{c(){e=y("div"),t=y("div"),O&&O.c(),i=q(),w&&w.c(),r=q(),l=y("div"),s=y("i"),o=B(""),a=q(),c=y("span"),p=B(f),d=q(),h=y("div"),_=y("i"),v=B(""),g=q(),b=y("span"),I=B(P),this.h()},l($){e=k($,"DIV",{class:!0,style:!0});var N=S(e);t=k(N,"DIV",{class:!0});var z=S(t);O&&O.l(z),i=M(z),w&&w.l(z),r=M(z),l=k(z,"DIV",{class:!0});var H=S(l);s=k(H,"I",{class:!0});var R=S(s);o=A(R,""),R.forEach(m),a=M(H),c=k(H,"SPAN",{class:!0});var F=S(c);p=A(F,f),F.forEach(m),H.forEach(m),d=M(z),h=k(z,"DIV",{class:!0});var U=S(h);_=k(U,"I",{class:!0});var K=S(_);v=A(K,""),K.forEach(m),g=M(U),b=k(U,"SPAN",{class:!0});var Y=S(b);I=A(Y,P),Y.forEach(m),U.forEach(m),z.forEach(m),N.forEach(m),this.h()},h(){E(s,"class","iconfont f16"),E(c,"class","T1"),E(l,"class","row new-order lh28 cp H-7um6zv"),E(_,"class","iconfont f16"),E(b,"class","T1"),E(h,"class","row horizontal-line lh28 cp H-7um6zv"),E(t,"class","container T1 H-7um6zv"),jn(()=>n[13].call(t)),E(e,"class","wrap pa br4 ovh H-7um6zv"),E(e,"style",n[1])},m($,N){G($,e,N),u(e,t),O&&O.m(t,null),u(t,i),w&&w.m(t,null),u(t,r),u(t,l),u(l,s),u(s,o),u(l,a),u(l,c),u(c,p),u(t,d),u(t,h),u(h,_),u(_,v),u(h,g),u(h,b),u(b,I),T=hi(t,n[13].bind(t)),C||(V=[We(l,"click",n[4]),We(h,"click",n[5]),We(e,"mousedown",Zn(n[12]))],C=!0)},p($,[N]){var z,H;$[2].mode===Ct.OneWay&&((H=(z=$[2])==null?void 0:z.position)==null?void 0:H.size)>0?O?O.p($,N):(O=ef($),O.c(),O.m(t,i)):O&&(O.d(1),O=null),$[2].mode===Ct.Hedge?w?w.p($,N):(w=tf($),w.c(),w.m(t,r)):w&&(w.d(1),w=null),N&8&&f!==(f=$[3](zt.PlaceNewLimitOrder)+"")&&W(p,f),N&8&&P!==(P=$[3](zt.DrawHorizontalLine)+"")&&W(I,P),N&2&&E(e,"style",$[1])},i:rt,o:rt,d($){$&&m(e),O&&O.d(),w&&w.d(),T(),C=!1,jt(V)}}}function f3(n,e,t){let i,r,l,s,o,a;J(n,Xt,V=>t(14,i=V)),J(n,Kl,V=>t(15,r=V)),J(n,br,V=>t(16,l=V)),J(n,Vi,V=>t(17,s=V)),J(n,bE,V=>t(2,o=V)),J(n,dt,V=>t(3,a=V));let{plusParams:c=null}=e,{movedParams:f}=e,{widget:p=null}=e,{axisSide:d="Right"}=e,{toolbarWidth:h=5}=e,_=0,v={};function g(V,O,w,D){if(!V)return;const{pageX:L,pageY:$}=V,N=D-5;if(w==="Right"){const z=f?f.paneWidth-O-16:L-O-16;t(1,v=`top: ${$+16}px; left: ${z+N}px`)}w==="Left"&&t(1,v=`top: ${$+16}px; left: ${L+16}px`)}function b(){Vi.next(Object.assign(Object.assign({},s),{plusDialog:!1,createOrder:!0})),pi.track("tv_contract_new_limit",{})}function P(){Vi.next(Object.assign(Object.assign({},s),{plusDialog:!1})),p.tv.activeChart().createShape({time:0,price:c.price},{shape:"horizontal_line",lock:!1,disableSelection:!1,disableSave:!1,disableUndo:!1,overrides:{linecolor:"#3d7eff",linewidth:1,linestyle:0}}),pi.track("tv_contract_draw_horizontal_line",{})}function I(V){return function(){pi.track("tv_contract_tp_sl",{side:V.side,mode:o.mode}),Vi.next(Object.assign(Object.assign({},s),{plusDialog:!1}));const{symbol:O,posSide:w,side:D,avgEntryPriceEp:L}=V,$=l(O,w),N=$.tp.All,z=$.sl.All,H=$.ts.All;if(N.length+z.length+H.length===0){const F=r(i.symbol,w),U=xe.roundPriceEp(xe.priceToEp(c.price,i.priceScale),i.tickSizeEp);let K,Y;D==="Buy"&&(U>L?K=U:Y=U),D==="Sell"&&(U>L?Y=U:K=U),en.create(Fl,{source:"tv",contract:i,position:V,closeMode:F,tpStopPxEp:K,slStopPxEp:Y});return}en.create(rd,{source:"tv",contract:i,position:V})}}function T(V){$i.call(this,n,V)}function C(){_=this.offsetWidth,t(0,_)}return n.$$set=V=>{"plusParams"in V&&t(7,c=V.plusParams),"movedParams"in V&&t(8,f=V.movedParams),"widget"in V&&t(9,p=V.widget),"axisSide"in V&&t(10,d=V.axisSide),"toolbarWidth"in V&&t(11,h=V.toolbarWidth)},n.$$.update=()=>{n.$$.dirty&3201&&g(c,_,d,h)},[_,v,o,a,b,P,I,c,f,p,d,h,T,C]}let u3=class extends tt{constructor(e){super(),nt(this,e,f3,c3,et,{plusParams:7,movedParams:8,widget:9,axisSide:10,toolbarWidth:11})}};function p3(n){let e,t,i,r;const l=[{class:"amount wp100 f1 f12"},{height:"20"},{operation:!1},n[8]];function s(c){n[34](c)}function o(c){n[35](c)}let a={};for(let c=0;c<l.length;c+=1)a=pn(a,l[c]);return n[0]!==void 0&&(a.valueEx=n[0]),n[12]!==void 0&&(a.input=n[12]),e=new Pr({props:a}),n[33](e),De.push(()=>qe(e,"valueEx",s)),De.push(()=>qe(e,"input",o)),e.$on("focus",n[17]),{c(){te(e.$$.fragment)},l(c){re(e.$$.fragment,c)},m(c,f){ne(e,c,f),r=!0},p(c,f){const p=f[0]&256?dn(l,[l[0],l[1],l[2],mn(c[8])]):{};!t&&f[0]&1&&(t=!0,p.valueEx=c[0],Me(()=>t=!1)),!i&&f[0]&4096&&(i=!0,p.input=c[12],Me(()=>i=!1)),e.$set(p)},i(c){r||(Q(e.$$.fragment,c),r=!0)},o(c){j(e.$$.fragment,c),r=!1},d(c){n[33](null),ie(e,c)}}}function d3(n){let e,t,i,r,l;return{c(){e=y("div"),t=B(n[3]),i=B("%"),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);t=A(o,n[3]),i=A(o,"%"),o.forEach(m),this.h()},h(){E(e,"class","mt4 tc cp f12")},m(s,o){G(s,e,o),u(e,t),u(e,i),r||(l=We(e,"click",n[16]),r=!0)},p(s,o){o[0]&8&&W(t,s[3])},i:rt,o:rt,d(s){s&&m(e),r=!1,l()}}}function m3(n){let e,t,i,r,l=n[5](zt.Amount)+"",s,o,a,c,f,p,d,h=n[5](zt[n[2]===Wn.Buy?"LimitLong":"LimitShort"])+"",_,v,g,b,P,I,T,C,V,O,w,D,L,$,N;const z=[d3,p3],H=[];function R(K,Y){return K[4]?0:1}a=R(n),c=H[a]=z[a](n);function F(K){n[37](K)}let U={options:n[14]};return n[3]!==void 0&&(U.percent=n[3]),C=new vp({props:U}),De.push(()=>qe(C,"percent",F)),C.$on("change",n[38]),{c(){e=y("div"),t=y("div"),i=y("div"),r=y("div"),s=B(l),o=q(),c.c(),f=q(),p=y("div"),d=y("div"),_=B(h),v=q(),g=y("div"),b=B(n[7]),I=q(),T=y("div"),te(C.$$.fragment),O=q(),w=y("div"),D=B(n[11]),this.h()},l(K){e=k(K,"DIV",{class:!0,style:!0});var Y=S(e);t=k(Y,"DIV",{class:!0});var X=S(t);i=k(X,"DIV",{class:!0});var ee=S(i);r=k(ee,"DIV",{class:!0});var Z=S(r);s=A(Z,l),Z.forEach(m),o=M(ee),c.l(ee),ee.forEach(m),f=M(X),p=k(X,"DIV",{class:!0});var ue=S(p);d=k(ue,"DIV",{});var ce=S(d);_=A(ce,h),ce.forEach(m),v=M(ue),g=k(ue,"DIV",{class:!0});var pe=S(g);b=A(pe,n[7]),pe.forEach(m),ue.forEach(m),X.forEach(m),I=M(Y),T=k(Y,"DIV",{class:!0});var me=S(T);re(C.$$.fragment,me),O=M(me),w=k(me,"DIV",{class:!0});var oe=S(w);D=A(oe,n[11]),oe.forEach(m),me.forEach(m),Y.forEach(m),this.h()},h(){E(r,"class","amount-text f12 T2 fw2 H-m7tvqy"),E(i,"class","ipt f1 df fdc tc ipt-border H-m7tvqy"),E(g,"class","mt4"),E(p,"class","btn df aic fdc jcc br4 cp H-m7tvqy"),Te(p,"pen",n[9]),Te(p,"buy-btn",n[2]===Wn.Buy),Te(p,"sell-btn",n[2]===Wn.Sell),E(t,"class","container df aic T1 H-m7tvqy"),jn(()=>n[36].call(t)),E(w,"class","ml4"),Te(w,"sell",n[2]===Wn.Sell),Te(w,"buy",n[2]===Wn.Buy),E(T,"class","percentage-box df aic f12 tc H-m7tvqy"),E(e,"class","wrap pa br4 ovh H-m7tvqy"),E(e,"style",n[10])},m(K,Y){G(K,e,Y),u(e,t),u(t,i),u(i,r),u(r,s),u(i,o),H[a].m(i,null),u(t,f),u(t,p),u(p,d),u(d,_),u(p,v),u(p,g),u(g,b),P=hi(t,n[36].bind(t)),u(e,I),u(e,T),ne(C,T,null),u(T,O),u(T,w),u(w,D),L=!0,$||(N=[We(p,"click",n[15]),We(e,"mousedown",Zn(n[32]))],$=!0)},p(K,Y){(!L||Y[0]&32)&&l!==(l=K[5](zt.Amount)+"")&&W(s,l);let X=a;a=R(K),a===X?H[a].p(K,Y):(ot(),j(H[X],1,1,()=>{H[X]=null}),at(),c=H[a],c?c.p(K,Y):(c=H[a]=z[a](K),c.c()),Q(c,1),c.m(i,null)),(!L||Y[0]&36)&&h!==(h=K[5](zt[K[2]===Wn.Buy?"LimitLong":"LimitShort"])+"")&&W(_,h),(!L||Y[0]&128)&&W(b,K[7]),(!L||Y[0]&512)&&Te(p,"pen",K[9]),(!L||Y[0]&4)&&Te(p,"buy-btn",K[2]===Wn.Buy),(!L||Y[0]&4)&&Te(p,"sell-btn",K[2]===Wn.Sell);const ee={};!V&&Y[0]&8&&(V=!0,ee.percent=K[3],Me(()=>V=!1)),C.$set(ee),(!L||Y[0]&2048)&&W(D,K[11]),(!L||Y[0]&4)&&Te(w,"sell",K[2]===Wn.Sell),(!L||Y[0]&4)&&Te(w,"buy",K[2]===Wn.Buy),(!L||Y[0]&1024)&&E(e,"style",K[10])},i(K){L||(Q(c),Q(C.$$.fragment,K),L=!0)},o(K){j(c),j(C.$$.fragment,K),L=!1},d(K){K&&m(e),H[a].d(),P(),ie(C),$=!1,jt(N)}}}function h3(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_;J(n,Xt,Pe=>t(24,s=Pe)),J(n,_n,Pe=>t(25,o=Pe)),J(n,kn,Pe=>t(26,a=Pe)),J(n,an,Pe=>t(27,c=Pe)),J(n,Sn,Pe=>t(28,f=Pe)),J(n,Hi,Pe=>t(29,p=Pe)),J(n,dt,Pe=>t(5,d=Pe)),J(n,Vr,Pe=>t(30,h=Pe)),J(n,Er,Pe=>t(31,_=Pe));let{plusParams:v=null}=e,{axisSide:g="Right"}=e;const b=Kt(),P=[25,50,75,100];let I=0,T=0,C=0,V=0,O="0",w=Wn.Buy,D={},L=!1,$={},N=0,z=!1,H="-",R=null,F=null;Lt(()=>R&&R.focus());function U(){Z(w)}function K(Pe,Ce,Ee){if(!Pe)return;const{pageX:Ie,pageY:ve}=Pe;Ee==="Right"&&t(10,$=`top: ${ve}px; left: ${Ie-Ce-16}px`),Ee==="Left"&&t(10,$=`top: ${ve}px; left: ${Ie+16}px`)}function Y(Pe,Ce){const{priceFactor:Ee,pricePrecision:Ie}=Ce,ve=((Pe==null?void 0:Pe.price)||0).toFixed(Ie);t(7,O=xe.delimit(ve)),t(20,I=Re(ve).times(Ee).toNumber())}function X(Pe,Ce){if(!Pe||!Ce)return;const Ee=Number(Ce.close)>Number(Pe.price);t(2,w=Ee>0?Wn.Buy:Wn.Sell)}function ee(Pe){const{factor:Ce,maxQuantity:Ee,minQuantity:Ie,precision:ve,scale:de,tickSizeEx:se}=Pe;t(8,D={factor:Ce,precision:ve,scale:de,tickSizeEx:se,maxEx:Ee,minEx:Ie})}async function Z(Pe){const{type:Ce,symbol:Ee,pricePrecision:Ie}=s,{buyQty:ve,sellQty:de}=hr(s,p,f,a,o,I),se=pe(ve,N,s,c),he=pe(de,N,s,c),_e=ue(z?se:T,c,I,s),be=ue(z?he:T,c,I,s),Ve=Pe==="Buy"?_e:be,Be={type:Ce,side:Pe,symbol:Ee,ordType:"Limit",actionBy:"FromOrderPlacement",timeInForce:"GoodTillCancel"};Ce==="Perpetual"&&Object.assign(Be,{orderQty:Ve,priceEp:I}),Ce==="PerpetualV2"&&Object.assign(Be,{orderQtyRq:String(Ve),priceRp:xe.floor(I,Ie),posSide:kr(a,o,Pe)}),t(9,L=!0);const $e=await fr(Be,{by:"tv",goal:"create_limit"});t(9,L=!1),$e&&b("close")}function ue(Pe,Ce,Ee,Ie){const{type:ve,qtyPrecision:de,qtyScale:se,contPrecision:he,settleValuePrecision:_e,valuePrecision:be,valueScale:Ve}=Ie;let Be=0,Fe=0;ve==="Perpetual"&&(Be=Ce===we.Cont?he:_e,Fe=se),ve==="PerpetualV2"&&(Be=Ce===we.Base?be:de,Fe=Ce===we.Base?Ve:se);const $e=Number(xe.floor(Pe,Be,Fe));if(Ce===we.Cont)return $e;if(Ce===we.Base)return Number(In($e,Ee,Ie));if(Ce===we.Coin)return Number(Dn($e,Ie,Ee))}function ce(Pe,Ce,Ee,Ie,ve,de,se,he,_e,be,Ve,Be){const{buyQty:Fe,sellQty:$e}=hr(Ce,Ie,ve,de,se,he),Ae=pe(Fe,Ee,Ce,_e),Ne=pe($e,Ee,Ce,_e),{precision:Ge,scale:Xe}=D,ye=xe.floor(Ve?Ae:Be,Ge,Xe),Ke=xe.floor(Ve?Ne:Be,Ge,Xe),{settleCurrency:Qe,contractUnderlyingAssets:ze}=Ce,st={[we.Cont]:be(Ye.Cont),[we.Base]:Qe,[we.Coin]:ze}[_e]||"-";t(11,H=(Pe==="Buy"?ye:Ke)+" "+st)}function pe(Pe,Ce,Ee,Ie){const{contractSize:ve,qtyFactor:de,qtyPrecision:se,valuePrecision:he}=Ee,_e=Re(Pe).times(Ce).div(100).times(de);if(Ie===we.Cont)return Oi(_e);if(Ie===we.Base){const be=_r(I,s);return Oi(Re(_e).times(be),he)}return Ie===we.Coin?Oi(Re(_e).times(ve),se):0}function me(Pe){Pe&&(Pe.quickPlaceLimitOrder||b("close"))}async function oe(){t(3,N=0),t(4,z=!1),await Wl(),R&&R.focus()}function ke(){t(3,N=0)}function Le(Pe){$i.call(this,n,Pe)}function ge(Pe){De[Pe?"unshift":"push"](()=>{F=Pe,t(13,F)})}function ae(Pe){T=Pe,t(0,T)}function x(Pe){R=Pe,t(12,R)}function le(){C=this.offsetWidth,V=this.offsetHeight,t(1,C),t(6,V)}function fe(Pe){N=Pe,t(3,N)}const Se=()=>t(4,z=!0);return n.$$set=Pe=>{"plusParams"in Pe&&t(18,v=Pe.plusParams),"axisSide"in Pe&&t(19,g=Pe.axisSide)},n.$$.update=()=>{n.$$.dirty[0]&17039360&&Y(v,s),n.$$.dirty[0]&262144|n.$$.dirty[1]&1&&X(v,_),n.$$.dirty[0]&17825792&&t(23,i=li(s,I)),n.$$.dirty[0]&16777216&&t(22,r=si(s)),n.$$.dirty[0]&163577888&&t(21,l=ei(c,d,zt,s,i,r)),n.$$.dirty[0]&2097152&&ee(l),n.$$.dirty[0]&1073741824&&me(h),n.$$.dirty[0]&786434&&K(v,C,g),n.$$.dirty[0]&1058013245&&ce(w,s,N,p,f,a,o,I,c,d,z,T)},[T,C,w,N,z,d,V,O,D,L,$,H,R,F,P,U,oe,ke,v,g,I,l,r,i,s,o,a,c,f,p,h,_,Le,ge,ae,x,le,fe,Se]}let _3=class extends tt{constructor(e){super(),nt(this,e,h3,m3,et,{plusParams:18,axisSide:19},null,[-1,-1])}};function lf(n){let e,t=n[4].change+"",i,r;return{c(){e=y("div"),i=B(t),this.h()},l(l){e=k(l,"DIV",{class:!0,style:!0});var s=S(e);i=A(s,t),s.forEach(m),this.h()},h(){E(e,"class","wrap pa ph4 tc lh18 H-1qjqs0m"),E(e,"style",n[2]),jn(()=>n[9].call(e))},m(l,s){G(l,e,s),u(e,i),r=hi(e,n[9].bind(e))},p(l,s){s&16&&t!==(t=l[4].change+"")&&W(i,t),s&4&&E(e,"style",l[2])},d(l){l&&m(e),r()}}}function g3(n){let e,t=n[0]&&lf(n);return{c(){t&&t.c(),e=ut()},l(i){t&&t.l(i),e=ut()},m(i,r){t&&t.m(i,r),G(i,e,r)},p(i,[r]){i[0]?t?t.p(i,r):(t=lf(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:rt,o:rt,d(i){t&&t.d(i),i&&m(e)}}}function v3(n,e,t){let i;J(n,Er,v=>t(8,i=v));let{movedParams:r}=e,{axisSide:l="Right"}=e,{visible:s=!1}=e,{toolbarWidth:o=5}=e,a={},c,f,p={changeRr:0,change:"-"};function d(v,g,b,P){if(!v)return;const{offsetY:I,paneWidth:T=12}=v,C=P-5;b==="Right"&&t(2,a=`top: ${I+g/2+1}px; left:  ${T+9+C}px`),b==="Left"&&t(2,a=`top: ${I+g/2+1}px; right: ${T}px`)}function h(v,g){if(!v||!g)return;const{price:b}=v,{close:P}=g,I=(b-P)/P,C=(I>0?"+":"")+xe.floor(I,2,-2)+"%";t(4,p={changeRr:I,change:C})}function _(){c=this.offsetWidth,f=this.offsetHeight,t(3,c),t(1,f)}return n.$$set=v=>{"movedParams"in v&&t(5,r=v.movedParams),"axisSide"in v&&t(6,l=v.axisSide),"visible"in v&&t(0,s=v.visible),"toolbarWidth"in v&&t(7,o=v.toolbarWidth)},n.$$.update=()=>{n.$$.dirty&288&&h(r,i),n.$$.dirty&226&&d(r,f,l,o)},[s,f,a,c,p,r,l,o,i,_]}let b3=class extends tt{constructor(e){super(),nt(this,e,v3,g3,et,{movedParams:5,axisSide:6,visible:0,toolbarWidth:7})}};function sf(n,e,t){const i=n.slice();return i[17]=e[t],i}function of(n){let e,t,i=n[4].filter(cf),r=[];for(let l=0;l<i.length;l+=1)r[l]=af(sf(n,i,l));return{c(){e=y("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=k(l,"DIV",{class:!0,style:!0});var s=S(e);for(let o=0;o<r.length;o+=1)r[o].l(s);s.forEach(m),this.h()},h(){E(e,"class","wrap pa T1 H-1rgg6fp"),E(e,"style",n[2]),jn(()=>n[13].call(e))},m(l,s){G(l,e,s);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);t=hi(e,n[13].bind(e))},p(l,s){if(s&80){i=l[4].filter(cf);let o;for(o=0;o<i.length;o+=1){const a=sf(l,i,o);r[o]?r[o].p(a,s):(r[o]=af(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}s&4&&E(e,"style",l[2])},d(l){l&&m(e),wn(r,l),t()}}}function af(n){let e,t,i=n[6](zt.EstPnl)+"",r,l,s=n[17].pnl+"",o,a;return{c(){e=y("div"),t=y("span"),r=B(i),l=y("span"),o=B(s),a=q(),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=S(e);t=k(f,"SPAN",{class:!0});var p=S(t);r=A(p,i),p.forEach(m),l=k(f,"SPAN",{class:!0});var d=S(l);o=A(d,s),d.forEach(m),a=M(f),f.forEach(m),this.h()},h(){E(t,"class","title H-1rgg6fp"),Te(t,"buy-title",n[17].side==="Buy"),Te(t,"sell-title",n[17].side==="Sell"),E(l,"class","df f1 value H-1rgg6fp"),E(e,"class","tv-est row df f12 H-1rgg6fp"),Te(e,"sell",n[17].pnlEv<0),Te(e,"buy",n[17].pnlEv>0)},m(c,f){G(c,e,f),u(e,t),u(t,r),u(e,l),u(l,o),u(e,a)},p(c,f){f&64&&i!==(i=c[6](zt.EstPnl)+"")&&W(r,i),f&16&&Te(t,"buy-title",c[17].side==="Buy"),f&16&&Te(t,"sell-title",c[17].side==="Sell"),f&16&&s!==(s=c[17].pnl+"")&&W(o,s),f&16&&Te(e,"sell",c[17].pnlEv<0),f&16&&Te(e,"buy",c[17].pnlEv>0)},d(c){c&&m(e)}}}function E3(n){var i;let e,t=((i=n[5])==null?void 0:i.estPnl)&&n[0]&&of(n);return{c(){t&&t.c(),e=ut()},l(r){t&&t.l(r),e=ut()},m(r,l){t&&t.m(r,l),G(r,e,l)},p(r,[l]){var s;(s=r[5])!=null&&s.estPnl&&r[0]?t?t.p(r,l):(t=of(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:rt,o:rt,d(r){t&&t.d(r),r&&m(e)}}}const cf=({size:n})=>n>0;function y3(n,e,t){let i,r,l,s,o;J(n,Xt,T=>t(10,i=T)),J(n,Sn,T=>t(11,r=T)),J(n,_n,T=>t(12,l=T)),J(n,Vr,T=>t(5,s=T)),J(n,dt,T=>t(6,o=T));let{movedParams:a}=e,{visible:c=!1}=e,{axisSide:f="Right"}=e,{toolbarWidth:p=5}=e,d={},h,_,v=[];function g(T,C,V,O){if(T){if(C===Ct.OneWay){const w=V.find(({posSide:L})=>L==="Merged");if(!w)return;const D=b(T,w,O);t(4,v=[Object.assign({side:w.side,size:w.size},D)])}if(C===Ct.Hedge){const w=V.find(({posSide:N})=>N==="Long"),D=V.find(({posSide:N})=>N==="Short");if(!w||!D)return;const L=b(T,w,O),$=b(T,D,O);t(4,v=[Object.assign({side:w.side,size:w.size},L),Object.assign({side:D.side,size:D.size},$)])}}}function b(T,C,V){const{side:O,size:w,avgEntryPriceEp:D}=C,{valuePrecision:L,valueScale:$,contractSide:N,contractSize:z,valueFactor:H,priceFactor:R}=V,F=Re(T.price).times(R);if(w<=0||D<=0||F<=0)return{pnlEv:0,pnl:"-"};const U=Xr({side:O,contractSide:N,contractSize:z,qty:w,entryPriceEp:D,exitPriceEp:F,factor:H,priceFactor:R}),Y=(U>0?"+":"")+xe.floor(U,L,$);return{pnlEv:U,pnl:Y}}function P(T,C,V,O){if(!T)return;const{offsetY:w}=T,D=O-5;V==="Right"&&t(2,d=`top: ${w-C+11}px; right:  100px`),V==="Left"&&t(2,d=`top: ${w-C+11}px; left:  ${D+120}px`)}function I(){h=this.offsetWidth,_=this.offsetHeight,t(3,h),t(1,_)}return n.$$set=T=>{"movedParams"in T&&t(7,a=T.movedParams),"visible"in T&&t(0,c=T.visible),"axisSide"in T&&t(8,f=T.axisSide),"toolbarWidth"in T&&t(9,p=T.toolbarWidth)},n.$$.update=()=>{n.$$.dirty&898&&P(a,_,f,p),n.$$.dirty&7296&&g(a,l,r,i)},[c,_,d,h,v,s,o,a,f,p,i,r,l,I]}let k3=class extends tt{constructor(e){super(),nt(this,e,y3,E3,et,{movedParams:7,visible:0,axisSide:8,toolbarWidth:9})}};function ff(n){let e,t;return e=new u3({props:{plusParams:n[0],widget:n[1],axisSide:n[3],movedParams:n[2],toolbarWidth:n[6]}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&1&&(l.plusParams=i[0]),r&2&&(l.widget=i[1]),r&8&&(l.axisSide=i[3]),r&4&&(l.movedParams=i[2]),r&64&&(l.toolbarWidth=i[6]),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function uf(n){let e,t;return e=new _3({props:{plusParams:n[0],axisSide:n[3]}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&1&&(l.plusParams=i[0]),r&8&&(l.axisSide=i[3]),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function P3(n){let e,t,i,r,l,s,o=n[7].plusDialog&&ff(n),a=n[7].createOrder&&uf(n);return i=new b3({props:{movedParams:n[2],axisSide:n[3],visible:n[5],toolbarWidth:n[6]}}),l=new k3({props:{movedParams:n[2],axisSide:n[3],visible:n[4],toolbarWidth:n[6]}}),{c(){o&&o.c(),e=q(),a&&a.c(),t=q(),te(i.$$.fragment),r=q(),te(l.$$.fragment)},l(c){o&&o.l(c),e=M(c),a&&a.l(c),t=M(c),re(i.$$.fragment,c),r=M(c),re(l.$$.fragment,c)},m(c,f){o&&o.m(c,f),G(c,e,f),a&&a.m(c,f),G(c,t,f),ne(i,c,f),G(c,r,f),ne(l,c,f),s=!0},p(c,[f]){c[7].plusDialog?o?(o.p(c,f),f&128&&Q(o,1)):(o=ff(c),o.c(),Q(o,1),o.m(e.parentNode,e)):o&&(ot(),j(o,1,1,()=>{o=null}),at()),c[7].createOrder?a?(a.p(c,f),f&128&&Q(a,1)):(a=uf(c),a.c(),Q(a,1),a.m(t.parentNode,t)):a&&(ot(),j(a,1,1,()=>{a=null}),at());const p={};f&4&&(p.movedParams=c[2]),f&8&&(p.axisSide=c[3]),f&32&&(p.visible=c[5]),f&64&&(p.toolbarWidth=c[6]),i.$set(p);const d={};f&4&&(d.movedParams=c[2]),f&8&&(d.axisSide=c[3]),f&16&&(d.visible=c[4]),f&64&&(d.toolbarWidth=c[6]),l.$set(d)},i(c){s||(Q(o),Q(a),Q(i.$$.fragment,c),Q(l.$$.fragment,c),s=!0)},o(c){j(o),j(a),j(i.$$.fragment,c),j(l.$$.fragment,c),s=!1},d(c){o&&o.d(c),c&&m(e),a&&a.d(c),c&&m(t),ie(i,c),c&&m(r),ie(l,c)}}}function S3(n,e,t){let i,r,l;J(n,Vi,P=>t(7,i=P)),J(n,dt,P=>t(9,r=P)),J(n,im,P=>t(10,l=P));let{plusParams:s=null}=e,{widget:o=null}=e,a="Right",c,f=!0,p,d=!1,h=0,_=null;Lt(()=>{document.addEventListener("mousedown",I=>{I.stopPropagation(),Vi.next(Object.assign(Object.assign({},i),{plusDialog:!1,createOrder:!1}))});const P=document.querySelectorAll('iframe[id^="tradingview_"]');P.length>0&&(t(8,_=P[0]),_&&_.contentDocument&&(t(8,_.contentDocument.onmousedown=function(I){I.stopPropagation(),Vi.next(Object.assign(Object.assign({},i),{plusDialog:!1,createOrder:!1}))},_),t(8,_.contentDocument.onmouseleave=()=>{t(5,d=!1),clearTimeout(p)},_)))}),Lt(()=>{const P=o==null?void 0:o.tv;P&&P.activeChart().crossHairMoved().subscribe(null,I=>{t(3,a=dm(Hs));const C=P.activeChart().getPanes().find(D=>D.getMainSourcePriceScale()._priceScale._formatter.type==="price");if(C){const{_minValue:D,_maxValue:L}=C.getMainSourcePriceScale()._priceScale.m_priceRange,$=C.getMainSourcePriceScale()._chartModel._width;t(2,c=Object.assign(Object.assign({},I),{minValue:D,maxValue:L,paneWidth:$}))}const{price:V,minValue:O=0,maxValue:w=0}=c;V>O&&V<w?(v(),t(5,d=!0)):(p&&clearTimeout(p),t(2,c=null),t(4,f=!1),t(5,d=!1)),t(6,h=_.contentDocument.getElementById("drawing-toolbar").offsetWidth)})});function v(){t(4,f=!1),p&&clearTimeout(p),p=setTimeout(()=>t(4,f=!0),600)}function g(P,I,T,C){if(!I)return;const V=b(P,T),O=I.contentDocument.getElementsByClassName("valuesAdditionalWrapper-l31H9iuA"),w=I.contentDocument.getElementById("ampl"),D=`${C(zt.Ampl)}  ${V}`;if(w)w.innerHTML=D;else{const L=document.createElement("div");L.id="ampl",L.className="valueItem-l31H9iuA",L.innerHTML=D,O[0]&&O[0].insertAdjacentElement("beforeend",L)}}function b(P,I){var T,C;const V=((C=(T=P==null?void 0:P.entityValues)===null||T===void 0?void 0:T._seriesId)===null||C===void 0?void 0:C.values)||[],O=Object.assign({},...V.map(({title:U,value:K})=>({[U.toLowerCase()+"Rp"]:K}))),{openRp:w=0,highRp:D=0,closeRp:L=0,lowRp:$=0}=O,N=w||I.open,z=L||I.close,H=D||I.high,R=$||I.low,F=Re(N).gt(0)&&Re(z).gt(0)?Re(N).gt(z)?Re(H).minus(R).div(H):Re(H).minus(R).div(R):Re(0);return xe.floor(F.times(100),2)+"%"}return n.$$set=P=>{"plusParams"in P&&t(0,s=P.plusParams),"widget"in P&&t(1,o=P.widget)},n.$$.update=()=>{n.$$.dirty&1796&&g(c,_,l,r)},[s,o,c,a,f,d,h,i,_,r,l]}let C3=class extends tt{constructor(e){super(),nt(this,e,S3,P3,et,{plusParams:0,widget:1})}};class T3 extends rm{render(e,t,i,r,l){if(!document.getElementById(e))return;this.removeTv();const s=n1.isLocal?"/tv/27.003/":`${hl.STATIC_URL}/s/tv/27.003/`,a=Yn.getValue()?"chart_crosshair_menu":"",c={symbol:l,theme:t,container:e,interval:r,datafeed:new lm,timezone:"Etc/UTC",library_path:s,custom_css_url:"./custom-20240531.css",autosize:!0,auto_save_delay:-1,locale:up.getLanguageKey(i),fullscreen:pp.getValue(),disabled_features:["header_widget","volume_force_overlay","auto_enable_symbol_labels"],enabled_features:["side_toolbar_in_fullscreen_mode","display_legend_on_all_charts","hide_left_toolbar_by_default",a],loading_screen:this.createLoadingScreen(t),overrides:this.createOverrides(t),time_frames:[],saved_data:t1.readSettings(Hs),favorites:{chartTypes:[],intervals:["5","30","60","180","360","D","W"]}};this.tv=new window.TradingView.widget(c),this.tv.onChartReady(this.handleChartReady.bind(this))}}function w3(n){let e,t;return{c(){e=y("div"),t=B(n[0]),this.h()},l(i){e=k(i,"DIV",{class:!0});var r=S(e);t=A(r,n[0]),r.forEach(m),this.h()},h(){E(e,"class","ph16 pb20 T3")},m(i,r){G(i,e,r),u(e,t)},p(i,r){r&1&&W(t,i[0])},d(i){i&&m(e)}}}function I3(n){let e,t,i,r,l;return{c(){e=y("div"),t=y("i"),i=B(""),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);t=k(o,"I",{class:!0});var a=S(t);i=A(a,""),a.forEach(m),o.forEach(m),this.h()},h(){E(t,"class","iconfont cp T3"),E(e,"class","ph16 pt10 df jcfe b f16 T2"),E(e,"slot","header")},m(s,o){G(s,e,o),u(e,t),u(t,i),r||(l=We(t,"click",n[3]),r=!0)},p:rt,d(s){s&&m(e),r=!1,l()}}}function D3(n){let e=n[1](He.Cancel)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&2&&e!==(e=i[1](He.Cancel)+"")&&W(t,e)},d(i){i&&m(t)}}}function V3(n){let e=n[1](He.Confirm)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&2&&e!==(e=i[1](He.Confirm)+"")&&W(t,e)},d(i){i&&m(t)}}}function O3(n){let e,t,i,r,l;return t=new Ht({props:{size:"small",$$slots:{default:[D3]},$$scope:{ctx:n}}}),t.$on("click",n[2]),r=new Ht({props:{size:"small",type:"primary",$$slots:{default:[V3]},$$scope:{ctx:n}}}),r.$on("click",n[4]),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);re(t.$$.fragment,o),i=M(o),re(r.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","footer df jcfe tr H-yslft9"),E(e,"slot","footer")},m(s,o){G(s,e,o),ne(t,e,null),u(e,i),ne(r,e,null),l=!0},p(s,o){const a={};o&130&&(a.$$scope={dirty:o,ctx:s}),t.$set(a);const c={};o&130&&(c.$$scope={dirty:o,ctx:s}),r.$set(c)},i(s){l||(Q(t.$$.fragment,s),Q(r.$$.fragment,s),l=!0)},o(s){j(t.$$.fragment,s),j(r.$$.fragment,s),l=!1},d(s){s&&m(e),ie(t),ie(r)}}}function L3(n){let e,t;return e=new bn({props:{style:"min-width: 320px;",$$slots:{footer:[O3],header:[I3],default:[w3]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&131&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function $3(n,e,t){let i;J(n,dt,f=>t(1,i=f));let{onConfirm:r}=e,{content:l=""}=e;const s=Kt();function o(){s("close")}function a(){s("close")}function c(){r(),s("close")}return n.$$set=f=>{"onConfirm"in f&&t(5,r=f.onConfirm),"content"in f&&t(0,l=f.content)},[l,i,o,a,c,r]}let pf=class extends tt{constructor(e){super(),nt(this,e,$3,L3,et,{onConfirm:5,content:0})}};function q3(n,e,t,i,r,l,s,o){const{size:a,side:c,avgEntryPrice:f,unrealisedPnlByMarkPrice:p,lineType:d}=e,h=d==="Liq",_=h?s(zt.LiqPrice):`${s(zt.PNL)} ${p}`,v=l==="Dark",g="#00bd84",b="#f24e53",I=h?"#e8ae1b":c==="Buy"?g:b,T=p>0?g:b,C=bp(t,a,f,i),V=v?"#242629":"#e9ebf0",O=v?"#b7bdc6":"#303236",w=v?"#303339":V,{reversePositionConfirm:D,closePositionConfirm:L,labelPosition:$}=o,N=$==="Left"?80:4;if(n.setText(_).setPrice(Number(f)).setQuantity(C).setLineLength(N).onModify(()=>{}).setProtectTooltip(s(zt.Size)),d==="Normal"&&n.setLineColor(I).setBodyTextColor(V).setBodyBorderColor(w).setBodyBackgroundColor(V).setBodyTextColor(T).setQuantityBorderColor(I).setQuantityBackgroundColor(I).setCloseTooltip(s(zt.ClosePosition)).setCloseButtonBorderColor(w).setCloseButtonBackgroundColor(V).setCloseButtonIconColor(O).setReverseTooltip(s(zt.ReversePosition)).setReverseButtonBorderColor(w).setReverseButtonBackgroundColor(V).setReverseButtonIconColor(O).onReverse("",async function(){const{side:z}=e,H=z==="Buy"?"Sell":"Buy";if(D){en.create(pf,{content:s(zt.ConfirmToReverse),onConfirm:async()=>{await Dl(e,t.type,r)&&await df(e,t.type,r,H)}});return}await Dl(e,t.type,r)&&await df(e,t.type,r,H)}).onClose("closing",async function(z){if(L){en.create(pf,{content:s(zt.ConfirmToClose),onConfirm:async()=>{this.setText(z),await Dl(e,t.type,r)}});return}this.setText(z),await Dl(e,t.type,r)}),d==="Liq"){const z=v?"#e9ecef":"#303236";n.setLineColor(I).setQuantityBorderColor(w).setQuantityBackgroundColor(V).setQuantityTextColor(z).setBodyBorderColor(I).setBodyBackgroundColor(I).setBodyTextColor("#fff")}}function M3(n){var t;const e=(t=n==null?void 0:n.tv)==null?void 0:t.chart();return!e||!e._chartWidget.model().mainSeries().bars().last()?null:e.createPositionLine().setLineStyle(5)}function N3(n){const e=new Map;let t=null;return this.watch=function(i,r,l,s,o,a,c){const f=H3(i,o);let p=Array.from(e.keys()).filter(d=>!f.some(h=>h.symbol+h.posSide+h.lineType===d));(t==null?void 0:t.quickPlaceLimitOrder)!==(o==null?void 0:o.quickPlaceLimitOrder)&&(p=Array.from(e.keys())),p.length>0&&p.forEach(d=>{const h=e.get(d);h&&h.remove(),e.delete(d)}),setTimeout(()=>{f.forEach(d=>{const h=d.symbol+d.posSide+d.lineType,_=e.has(h),v=_?e.get(h):M3(n);v&&q3(v,d,r,l,s,a,c,o),!_&&v&&e.set(h,v)})},500),t=o},this}async function Dl(n,e,t){const{symbol:i,side:r,size:l,posSide:s}=n,o={type:e,symbol:i,side:r==="Buy"?"Sell":"Buy",ordType:"Market",closeOnTrigger:!0,actionBy:"UserClosePosition",timeInForce:"ImmediateOrCancel"},a=t?t.closeEp:0;return e==="Perpetual"&&Object.assign(o,{priceEp:a,orderQty:l}),e==="PerpetualV2"&&Object.assign(o,{posSide:s,priceRp:a,orderQtyRq:l}),await fr(o,{by:"tv",goal:"create_close"})}function H3(n,e){const{positionLine:t,liquidationLine:i}=e,r=n.filter(s=>s.size>0);let l=[];return t&&(l=l.concat(r.map(s=>({...s,lineType:"Normal"})))),i&&(l=l.concat(r.map(s=>({...s,avgEntryPrice:s.liquidationPrice,direction:s.side==="Sell"?"≥":"≤",lineType:"Liq"})))),l}async function df(n,e,t,i){const{symbol:r,size:l}=n,s={type:e,side:i,symbol:r,ordType:"Market",actionBy:"FromOrderPlacement",timeInForce:"ImmediateOrCancel"},o=t?t.closeEp:0;if(e==="Perpetual"&&Object.assign(s,{priceEp:o,orderQty:l}),e==="PerpetualV2"){const c=kn.getValue(),f=_n.getValue();Object.assign(s,{posSide:kr(c,f,i),priceRp:String(o),orderQtyRq:String(l)})}await fr(s,{by:"tv",goal:"create_reverse"})}const Dr={OrderAmendMay:"d03a97",AmendingThisOrder:"25a5fb",PleaseConfirmYour:"b9e2c6"};function B3(n){let e,t=n[2](Dr.AmendingThisOrder,{Price:n[0]})+"",i,r,l,s=n[2](Dr.PleaseConfirmYour)+"",o;return{c(){e=y("div"),i=B(t),r=q(),l=y("div"),o=B(s),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=S(e);i=A(c,t),c.forEach(m),r=M(a),l=k(a,"DIV",{class:!0});var f=S(l);o=A(f,s),f.forEach(m),this.h()},h(){E(e,"class","desc ph24 lh22 f14 T3"),E(l,"class","desc ph24 lh22 f14 T3")},m(a,c){G(a,e,c),u(e,i),G(a,r,c),G(a,l,c),u(l,o)},p(a,c){c&5&&t!==(t=a[2](Dr.AmendingThisOrder,{Price:a[0]})+"")&&W(i,t),c&4&&s!==(s=a[2](Dr.PleaseConfirmYour)+"")&&W(o,s)},d(a){a&&m(e),a&&m(r),a&&m(l)}}}function A3(n){let e,t,i=n[2](Dr.OrderAmendMay)+"",r,l,s,o,a,c;return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("i"),o=B(""),this.h()},l(f){e=k(f,"DIV",{class:!0,slot:!0});var p=S(e);t=k(p,"SPAN",{class:!0});var d=S(t);r=A(d,i),d.forEach(m),l=M(p),s=k(p,"I",{class:!0});var h=S(s);o=A(h,""),h.forEach(m),p.forEach(m),this.h()},h(){E(t,"class","b T2"),E(s,"class","iconfont cp T3"),E(e,"class","p24 lh24 df jcsb f16"),E(e,"slot","header")},m(f,p){G(f,e,p),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),a||(c=We(s,"click",n[4]),a=!0)},p(f,p){p&4&&i!==(i=f[2](Dr.OrderAmendMay)+"")&&W(r,i)},d(f){f&&m(e),a=!1,c()}}}function z3(n){let e,t=n[2](He.DontShowAgain)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ml8 T3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&4&&t!==(t=r[2](He.DontShowAgain)+"")&&W(i,t)},d(r){r&&m(e)}}}function Q3(n){let e=n[2](He.Cancel)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&4&&e!==(e=i[2](He.Cancel)+"")&&W(t,e)},d(i){i&&m(t)}}}function R3(n){let e=n[2](He.Confirm)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&4&&e!==(e=i[2](He.Confirm)+"")&&W(t,e)},d(i){i&&m(t)}}}function F3(n){let e,t,i,r,l,s,o,a,c;function f(d){n[8](d)}let p={class:"usn",$$slots:{default:[z3]},$$scope:{ctx:n}};return n[1]!==void 0&&(p.checked=n[1]),t=new Pn({props:p}),De.push(()=>qe(t,"checked",f)),s=new Ht({props:{$$slots:{default:[Q3]},$$scope:{ctx:n}}}),s.$on("click",n[3]),a=new Ht({props:{type:"primary",$$slots:{default:[R3]},$$scope:{ctx:n}}}),a.$on("click",n[5]),{c(){e=y("div"),te(t.$$.fragment),r=q(),l=y("div"),te(s.$$.fragment),o=q(),te(a.$$.fragment),this.h()},l(d){e=k(d,"DIV",{class:!0,slot:!0});var h=S(e);re(t.$$.fragment,h),r=M(h),l=k(h,"DIV",{});var _=S(l);re(s.$$.fragment,_),o=M(_),re(a.$$.fragment,_),_.forEach(m),h.forEach(m),this.h()},h(){E(e,"class","p24 df aic jcsb mt24"),E(e,"slot","footer")},m(d,h){G(d,e,h),ne(t,e,null),u(e,r),u(e,l),ne(s,l,null),u(l,o),ne(a,l,null),c=!0},p(d,h){const _={};h&1028&&(_.$$scope={dirty:h,ctx:d}),!i&&h&2&&(i=!0,_.checked=d[1],Me(()=>i=!1)),t.$set(_);const v={};h&1028&&(v.$$scope={dirty:h,ctx:d}),s.$set(v);const g={};h&1028&&(g.$$scope={dirty:h,ctx:d}),a.$set(g)},i(d){c||(Q(t.$$.fragment,d),Q(s.$$.fragment,d),Q(a.$$.fragment,d),c=!0)},o(d){j(t.$$.fragment,d),j(s.$$.fragment,d),j(a.$$.fragment,d),c=!1},d(d){d&&m(e),ie(t),ie(s),ie(a)}}}function j3(n){let e,t;return e=new bn({props:{style:"width:640px;max-width: 640px;",$$slots:{footer:[F3],header:[A3],default:[B3]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&1031&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function U3(n,e,t){let i;J(n,dt,h=>t(2,i=h));let{price:r="0"}=e,{cancelAction:l=null}=e,{confirmAction:s=null}=e;const o=Kt();let a=!1;function c(){l(),o("close")}function f(){l(),o("close")}function p(){s(),o("close"),a&&ar("orderAmendPriceWouldMatch",!1).then()}function d(h){a=h,t(1,a)}return n.$$set=h=>{"price"in h&&t(0,r=h.price),"cancelAction"in h&&t(6,l=h.cancelAction),"confirmAction"in h&&t(7,s=h.confirmAction)},[r,a,i,c,f,p,l,s,d]}let ld=class extends tt{constructor(e){super(),nt(this,e,U3,j3,et,{price:0,cancelAction:6,confirmAction:7})}};function W3(n,e,t){const{side:i,timeInForce:r}=n;if(r==="PostOnly"){const{bid1Ep:l,ask1Ep:s}=t;if(i==="Buy"&&e>=s)return l;if(i==="Sell"&&e<=l)return s}return e}function G3(n,e,t){const{orderAmendPriceWouldMatch:i}=xn.getValue();if(!i)return!1;const{side:r}=n,{bid1Ep:l,ask1Ep:s}=t;return r==="Buy"&&e>=s||r==="Sell"&&e<=l}async function K3(n,e,t,i,r){const{pricePrecision:l,priceScale:s}=n,o=xe.floor(e,l,s);return await en.wait(ld,a=>({price:o,cancelAction(){const[c,f]=ls(i,r);t.setText(c),t.setPrice(f),a(!1)},confirmAction(){a(!0)}}))}function X3(n,e,t,i,r){Ci.pipe(qn(l=>l.ask1Ep>0&&l.bid1Ep>0),hs(1)).subscribe(l=>{(async()=>{const s=xe.roundPriceEp(xe.priceToEp(i,n.priceScale),n.tickSizeEp),o=W3(t,s,l);if(G3(t,o,l)){if(await K3(n,s,e,t,r)){await mf(n,t,o,e,r);return}const[c,f]=ls(t,r);e.setText(c),e.setPrice(f);return}await mf(n,t,o,e,r)})()})}function Y3(n,e,t,i,r){var c;if(!e.tv)return null;const l=(c=e==null?void 0:e.tv)==null?void 0:c.chart();if(!l||!l._chartWidget.model().mainSeries().bars().last())return null;const s=(r==null?void 0:r.labelPosition)==="Left"?80:4,o=fl(t),a=l.createOrderLine().setLineStyle(5).setLineLength(s).onCancel("Cancel...",function(f){this.setText(f);const p={type:n.type,by:"tv",goal:"cancel_line"};Mi(t,p).then()});return o?a:a.onMove("Amending...",function(f){const p=this;p.setText(f);const{price:d}=p._line._points[0];X3(n,p,t,d,i)})}function J3(n,e,t,i,r,l,s){const[o,a]=ls(e,l),{tag:c,orderQty:f}=e,p=bp(t,f,a,i),d=r==="Dark",h=d?"#242629":"#e9ebf0",_=c?"#003fe6":e.side==="Sell"?"#f24e53":"#00bd84",v=d?"#b7bdc6":"#303236",g=d?"#e9ecef":"#303236",b=(s==null?void 0:s.labelPosition)==="Left"?80:4,P=d?"#303339":h;n.setLineLength(b).setText(o).setPrice(a).setQuantity(p).setLineColor(_).setQuantityBorderColor(P).setQuantityBackgroundColor(h).setQuantityTextColor(g).setBodyBorderColor(_).setBodyBackgroundColor(_).setBodyTextColor("#fff").setCancelButtonBorderColor(P).setCancelButtonBackgroundColor(h).onModify(()=>{}).setModifyTooltip(l(zt.Size)).setCancelButtonIconColor(v)}function mf(n,e,t,i,r){const l=ii.isConditionalOrder(e.ordType),{type:s,pricePrecision:o,priceScale:a}=n,c={type:s};if(s==="Perpetual"&&(l&&Object.assign(c,{stopPxEp:t}),l||Object.assign(c,{priceEp:t})),s==="PerpetualV2"){const p=xe.floor(t,o,a),{posSide:d}=e;l&&Object.assign(c,{stopPxRp:p,posSide:d}),l||Object.assign(c,{priceRp:p,posSide:d})}Gi(e,c,{by:"tv",goal:"drag-order-line"}).then(p=>{if(p)return;const[d,h]=ls(e,r);i.setPrice(h),i.setText(d)})}function ls(n,e){const{ordType:t,stopPx:i,price:r,tag:l}=n,s=ii.isConditionalOrder(t),o=l||e(zt.Conditional);return[s?o:e(zt.Limit),s?i:r]}function Z3(n){const e=new Map;let t=null;return this.watch=function(i,r,l,s,o,a,c,f){const p=x3(r,l,o,s,i,f);let d=Array.from(e.keys()).filter(h=>!p.some(_=>_.orderID===h));(t==null?void 0:t.quickPlaceLimitOrder)!==(o==null?void 0:o.quickPlaceLimitOrder)&&(d=Array.from(e.keys())),d.length>0&&d.forEach(h=>{const _=e.get(h);_&&_.remove(),e.delete(h)}),setTimeout(()=>{p.forEach(h=>{const _=h.orderID,v=e.has(_),g=v?e.get(_):Y3(i,n,h,f,o);g&&J3(g,h,i,a,c,f,o),!v&&g&&e.set(_,g)})},500),t=o},this}function x3(n,e,t,i,r,l){const{activeOrderLine:s,conditionalOrderLine:o,takeProfitStopLossLine:a}=t;let c=[];s&&(c=c.concat(n.filter(({ordStatus:h})=>["New","PartiallyFilled"].includes(h))));const f=e.filter(({ordStatus:h})=>["Inactive","Untriggered","New","PartiallyFilled"].includes(h)),p=i.map(h=>h.term),d=f.filter(h=>p.includes(h.curPosTerm)&&h.actionBy==="FromPosition"&&(Ml(h)||Nl(h)||fl(h)));if(o){const h=d.map(_=>_.orderID);c=c.concat(f.filter(_=>!h.includes(_.orderID)))}if(a){const h=ps(d,Ml,i,l(zt.TP)),_=ps(d,Nl,i,l(zt.SL)),v=ps(d,fl,i,l(zt.TS));c=c.concat(h).concat(_).concat(v)}return c.filter(({symbol:h})=>h===r.symbol)}function ey(n,e){return e.find(({type:t,symbol:i,term:r,posSide:l})=>t==="Perpetual"?n.symbol===i&&n.curPosTerm===r:n.symbol===i&&n.posSide===l&&n.curPosTerm===r)}function ps(n,e,t,i){return n.filter(e).map(r=>{const l=ey(r,t);return{...r,tag:i,orderQty:r.orderQty===0&&l?l.size:r.orderQty}})}function ty(n,e,t){var o;const i=(o=n==null?void 0:n.tv)==null?void 0:o.chart(),r=e.direction==="LONG",l=(e==null?void 0:e.text)??t(r?Xi.BuyOrders:Xi.SellOrders),s=r?"#00bd84":"#f24e53";return i.createOrderLine({disableUndo:!0}).setPrice(e.price).setLineStyle(1).setLineColor(s).setLineLength(80).setText(e.index>0?`${l} ${e.index}`:l).setBodyTextColor("#fff").setBodyBackgroundColor(s).setBodyBorderColor(s).setQuantity("")}function ny(n){const e=new Map;let t=[];return this.watch=function(i,r){var l;if(!iy(t,i)){t=i;for(const[s,o]of e)o.remove();e.clear(),i.forEach(s=>{e.set(s.price,ty(n,s,r))}),i.length>0&&((l=n==null?void 0:n.tv)==null||l.chart().executeActionById("chartReset"))}},this}function iy(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++){const i=n[t],r=e[t];if(i.price!==r.price||i.index!==r.index||i.direction!==r.direction)return!1}return!0}function hf(n){let e;return{c(){e=y("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),S(e).forEach(m),this.h()},h(){E(e,"class","empty pa H-1lkb4ni")},m(t,i){G(t,e,i)},d(t){t&&m(e)}}}function _f(n){let e,t;return e=new C3({props:{plusParams:n[3],widget:n[6]}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&8&&(l.plusParams=i[3]),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function ry(n){let e,t,i,r,l,s,o,a,c,f;function p(v){n[29](v)}let d={chartReady:n[1],widget:n[6]};n[2]!==void 0&&(d.interval=n[2]),t=new M1({props:d}),De.push(()=>qe(t,"interval",p)),t.$on("intervalChange",n[7]);let h=n[4]&&hf(),_=n[1]&&_f(n);return{c(){e=y("div"),te(t.$$.fragment),r=q(),l=y("div"),s=y("div"),o=q(),h&&h.c(),a=q(),_&&_.c(),this.h()},l(v){e=k(v,"DIV",{class:!0});var g=S(e);re(t.$$.fragment,g),r=M(g),l=k(g,"DIV",{class:!0});var b=S(l);s=k(b,"DIV",{id:!0,class:!0}),S(s).forEach(m),o=M(b),h&&h.l(b),a=M(b),_&&_.l(b),b.forEach(m),g.forEach(m),this.h()},h(){E(s,"id",n[5]),E(s,"class","container f1 B1 H-1lkb4ni"),E(l,"class","pr df f1"),E(e,"class",c="wrap f1 df fdc "+n[0]+" H-1lkb4ni")},m(v,g){G(v,e,g),ne(t,e,null),u(e,r),u(e,l),u(l,s),u(l,o),h&&h.m(l,null),u(l,a),_&&_.m(l,null),f=!0},p(v,g){const b={};g[0]&2&&(b.chartReady=v[1]),!i&&g[0]&4&&(i=!0,b.interval=v[2],Me(()=>i=!1)),t.$set(b),v[4]?h||(h=hf(),h.c(),h.m(l,a)):h&&(h.d(1),h=null),v[1]?_?(_.p(v,g),g[0]&2&&Q(_,1)):(_=_f(v),_.c(),Q(_,1),_.m(l,null)):_&&(ot(),j(_,1,1,()=>{_=null}),at()),(!f||g[0]&1&&c!==(c="wrap f1 df fdc "+v[0]+" H-1lkb4ni"))&&E(e,"class",c)},i(v){f||(Q(t.$$.fragment,v),Q(_),f=!0)},o(v){j(t.$$.fragment,v),j(_),f=!1},d(v){v&&m(e),ie(t),h&&h.d(),_&&_.d()}}}function ly(n){n.length>0&&n.map(({shape:e})=>e.remove())}function sy(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,V;J(n,Vi,ae=>t(30,l=ae)),J(n,Ur,ae=>t(13,s=ae)),J(n,dp,ae=>t(14,o=ae)),J(n,dt,ae=>t(15,a=ae)),J(n,i1,ae=>t(16,c=ae)),J(n,Bs,ae=>t(17,f=ae)),J(n,_l,ae=>t(18,p=ae)),J(n,Vr,ae=>t(19,d=ae)),J(n,Er,ae=>t(20,h=ae)),J(n,Sn,ae=>t(21,_=ae)),J(n,r1,ae=>t(22,v=ae)),J(n,An,ae=>t(23,g=ae)),J(n,zn,ae=>t(24,b=ae)),J(n,sm,ae=>t(25,P=ae)),J(n,wo,ae=>t(26,I=ae)),J(n,fs,ae=>t(27,T=ae)),J(n,Xt,ae=>t(28,C=ae)),J(n,vs,ae=>t(4,V=ae));let{class:O=""}=e;const w=`tv_${((1+Math.random())*65536|0).toString(16).substring(1)}`,D=new T3,L=new N3(D),$=new Z3(D),N=new ny(D);Kt();let z,H,R,F=[],U=[],K=!1,Y=null;Lt(()=>fs.pipe(qn(Boolean),hs(1)).subscribe(()=>{setTimeout(()=>{var ae;const x=(ae=D==null?void 0:D.tv)===null||ae===void 0?void 0:ae.chart();x&&x.getTimeScale().setRightOffset(14)},0)})),Lt(()=>{const ae=l1.pipe(qn(x=>x>1)).subscribe(()=>{D.removeTv(),X(o)});return function(){ae.unsubscribe(),D.removeTv()}});function X(ae){setTimeout(()=>D.render(w,s,ae,H,R),0)}function ee(ae,x){if(!ae)return;const le=x==null?void 0:x.tv;le&&(le==null||le.subscribe("drawing_event",(fe,Se)=>{if(Se!=="click")return;const Pe=U.find(Ce=>Ce.shape._line&&fe===Ce.shape._line._id);Pe&&en.create(vE,{orders:Pe.orders})}),le==null||le.subscribe("onPlusClick",fe=>{t(3,Y=fe),Vi.next(Object.assign(Object.assign({},l),{plusDialog:!0}))}))}async function Z(ae,x,le,fe,Se){var Pe;if(!ae||!Se)return;const Ce=(Pe=ae.tv)===null||Pe===void 0?void 0:Pe.chart();if(!Ce)return;if(x!==Ei.Last){mE(Ce);return}await uE(Ce).create(le.markSymbol,fe)}function ue(ae){fs.pipe(qn(Boolean),hs(1)).subscribe(()=>D.changeTheme(ae))}function ce(ae){wo.next(ae.detail)}function pe(ae,x,le,fe,Se){var Pe;if(!ae)return;const Ce=(Pe=x==null?void 0:x.tv)===null||Pe===void 0?void 0:Pe.chart();Ce&&(t(10,K=!1),Ce.onDataLoaded().subscribe(null,()=>t(10,K=!0),!0))}function me(ae,x,le,fe){!ae||!x||N.watch(le,fe)}function oe(ae,x,le,fe,Se,Pe,Ce,Ee,Ie,ve,de){ae&&x&&(L.watch(fe,le,Se,Pe,Ce,Ee,Ie),$.watch(le,ve,de,fe,Ce,Se,Ee,Ie))}function ke(ae,x,le,fe,Se,Pe,Ce,Ee,Ie,ve){var de;if(!ae)return;const se=(de=x==null?void 0:x.tv)===null||de===void 0?void 0:de.chart();se&&le&&(ly(U),Ee.orderHistory&&Le(Se,fe,Ie,se))}function Le(ae,x,le,fe){ae.map(({orders:Se})=>{if(Se.length<=0)return;const Pe=Se.reduce((Fe,{execQty:$e,execPrice:Ae})=>{const Ne=isNaN(Number($e))?0:$e,Ge=Qt.convert(x,r,Ne,Ae);return $l(Fe,isNaN(Number(Ge))?0:Ge)},0),Ce=Se.reduce((Fe,$e)=>$l(Fe,$e.execPrice),0),Ee=ll(Ce,Se.length),Ie=xe.floor(Ee,x.pricePrecision),{side:ve,price:de,transactTimestamp:se}=Se[0],he=ve==="Buy"?"#00bd84":"#f24e53",_e=ve.toLowerCase(),be=Math.floor(se/1e3),Ve=le(zt.SideAveragePrice,{Side:le(zt[ve]),Price:Ie,Size:Pe+" "+Qt.getUnit(x,r)}),Be=fe==null?void 0:fe.createExecutionShape().setArrowHeight(12).setArrowColor(he).setDirection(_e).setTime(be).setTooltip(Ve).setPrice(Number(de));U.push({shape:Be,orders:Se})})}function ge(ae){H=ae,t(2,H),t(26,I)}return n.$$set=ae=>{"class"in ae&&t(0,O=ae.class)},n.$$.update=()=>{n.$$.dirty[0]&268435456&&t(12,i=C),n.$$.dirty[0]&134217728&&t(1,z=T),n.$$.dirty[0]&67108864&&t(2,H=I),n.$$.dirty[0]&4198400&&t(8,R=N1(i,v)),n.$$.dirty[0]&33558532&&t(9,F=H1(P,i,H)),n.$$.dirty[0]&4198406&&pe(z,D),n.$$.dirty[0]&8192&&ue(s),n.$$.dirty[0]&16384&&X(o),n.$$.dirty[0]&258&&D.watch(R,z),n.$$.dirty[0]&4206594&&Z(D,v,i,s,z),n.$$.dirty[0]&25169920&&t(11,r=i.type==="Perpetual"?b:g),n.$$.dirty[0]&2&&B1(z,D,Hs),n.$$.dirty[0]&4759046&&ke(z,D,K,i,F,H,r,d,a),n.$$.dirty[0]&4111362&&oe(z,K,i,_,r,h,d,s,a,p,f),n.$$.dirty[0]&99330&&me(z,K,c,a),n.$$.dirty[0]&2&&ee(z,D)},[O,z,H,Y,V,w,D,ce,R,F,K,r,i,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,ge]}let sd=class extends tt{constructor(e){super(),nt(this,e,sy,ry,et,{class:0},null,[-1,-1])}};function jl(n){n.setTransform(1,0,0,1,0,0)}function ds(n,{H:e}){n.setTransform(1,0,0,-1,0,e)}function od(n,{left:e,top:t,yRuleWidth:i,xRuleWidth:r,yRuleHeight:l,xOffset:s}){n.setTransform(-1,0,0,-1,e+i+r-s,t+l)}function ad(n,{left:e,top:t,yRuleWidth:i,xRuleWidth:r,yRuleHeight:l,xOffset:s,lineSize:o}){n.setTransform(1,0,0,-1,e+i+r+o+s,t+l)}function oy({x:n,y:e},{left:t,top:i,yRuleWidth:r,xRuleWidth:l,yRuleHeight:s,xOffset:o}){return{x:-n+t+r+l-o,y:-e+i+s}}function ay({x:n,y:e},{left:t,top:i,yRuleWidth:r,xRuleWidth:l,yRuleHeight:s,xOffset:o,lineSize:a}){return{x:n-(t+r+l+o+a),y:-e+i+s}}function cy({x:n,y:e},{left:t,top:i,yRuleWidth:r,xRuleWidth:l,yRuleHeight:s,xOffset:o}){return{x:-n+t+r+l-o,y:-e+i+s}}function fy({x:n,y:e},{left:t,top:i,yRuleWidth:r,xRuleWidth:l,yRuleHeight:s,xOffset:o,lineSize:a}){return{x:n+(t+r+l+o+a),y:-e+i+s}}function uy(n,e,t){if(n===0&&e===0)return-1;const i=oy({x:n,y:e},t),r=ay({x:n,y:e},t);return Math.max(i.x,r.x,0)/t.xStep+.5|0}function el(n,e){return Math.ceil(n.measureText(e).width)}class py{constructor(e){this.chart=e}draw(){const e=this;e.drawMiddleLine(),e.drawAxisX(),e.drawAxisY()}drawMiddleLine(){const{ctx:e,theme:t,scope:i}=this.chart,{left:r,bottom:l,xRuleHeight:s,xRuleWidth:o,yRuleWidth:a,yRuleHeight:c,lineSize:f}=i;e.save(),ds(e,i),e.lineWidth=f,e.strokeStyle=t.middleLine,e.beginPath();const p=r+a+o+f/2;e.moveTo(p,l+s),e.lineTo(p,l+s+c),e.stroke(),e.restore()}drawAxisX(){const{ctx:e,theme:t,scope:i}=this.chart,{W:r,left:l,right:s,bottom:o,xRuleHeight:a,yRuleWidth:c,lineSize:f}=i;e.save(),ds(e,i),e.lineWidth=f,e.strokeStyle=t.axis,e.beginPath();const p=o+a-f/2;e.moveTo(l+c-f,p),e.lineTo(r-s,p),e.stroke(),e.restore()}drawAxisY(){const{ctx:e,theme:t,scope:i}=this.chart,{left:r,scaleLength:l,bottom:s,xRuleHeight:o,yRuleWidth:a,yRuleHeight:c,lineSize:f}=i;e.save(),ds(e,i),e.lineWidth=f,e.strokeStyle=t.axis,e.beginPath();const p=r+a-f/2;e.moveTo(p,s+o-f),e.lineTo(p,s+o+c+l),e.stroke(),e.restore()}}function gf(n,e){if(n===e)return"0.0%";const t=(Math.floor(Math.abs(n-e)*1e3/e)/10).toFixed(1);return n>e?"+"+t+"%":n<e?"-"+t+"%":"0.0%"}class dy{constructor(e){this.chart=e,this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.init()}init(){const{canvas:e}=this.chart;e.addEventListener("mousemove",this.handleMouseMove,!1),e.addEventListener("mouseleave",this.handleMouseLeave,!1)}dispose(){const{canvas:e}=this.chart;e.removeEventListener("mousemove",this.handleMouseMove,!1),e.removeEventListener("mousemove",this.handleMouseLeave,!1)}handleMouseMove(e){const{canvas:t,ctx:i,scope:r}=this.chart,{left:l,top:s,yRuleWidth:o,xRuleWidth:a,yRuleHeight:c}=r,f=t.getBoundingClientRect(),p=(e.clientX-f.left)*2,d=(e.clientY-f.top)*2;i.rect(l+o,s,a*2,c),this.chart.updateMouse(i.isPointInPath(p,d)?{x:p,y:d}:{x:0,y:0})}handleMouseLeave(){this.chart.updateMouse({x:0,y:0})}draw(){const{ctx:e,theme:t,scope:i,data:r,activeData:l}=this.chart,{activeIndex:s}=l;if(s<0)return;const{bids:o,asks:a,bidsCount:c,asksCount:f,minTotal:p}=r,{xStep:d,yScale:h,xOffset:_,yOffset:v,fontPadding:g}=i;if(e.save(),e.lineWidth=1,c>0){const b=c>s?o[s]:o[c-1];e.strokeStyle=t.bidHover,e.fillStyle=t.bidHover,od(e,i);const P=s*d,I=(b.total-p)*h+v;e.beginPath(),e.moveTo(-_,I),e.lineTo(P,I),e.stroke(),e.beginPath(),e.arc(P,I,4,0,Math.PI*2),e.arc(-_,I,4,0,Math.PI*2),e.fill(),jl(e),e.fillStyle=t.text,e.textAlign="center",e.textBaseline="bottom";const{x:T,y:C}=cy({x:(P-_)/2,y:I+g},i);e.fillText(gf(b.priceEp,o[0].priceEp),T,C)}if(f){const b=f>s?a[s]:a[f-1];e.strokeStyle=t.askHover,e.fillStyle=t.askHover,ad(e,i);const P=s*d,I=(b.total-p)*h+v;e.beginPath(),e.moveTo(-_,I),e.lineTo(P,I),e.stroke(),e.beginPath(),e.arc(P,I,4,0,Math.PI*2),e.arc(-_,I,4,0,Math.PI*2),e.fill(),jl(e),e.fillStyle=t.text,e.textAlign="center",e.textBaseline="bottom";const{x:T,y:C}=fy({x:(P-_)/2,y:I+g},i);e.fillText(gf(b.priceEp,a[0].priceEp),T,C)}e.restore()}}class my{constructor(e){this.chart=e}draw(){this.drawBids(),this.drawAsks()}drawBids(){if(this.chart.data.bidsCount<1)return;const{ctx:e,theme:t,scope:i,data:{bids:r,minTotal:l},activeData:{activeIndex:s}}=this.chart,o=s>-1;e.save(),od(e,i),e.lineWidth=i.polylineSize,e.fillStyle=o?t.bidFillLight:t.bidFill,this.drawPolygon(e,r,l,!1,s,i),o&&(e.fillStyle=t.bidFill,this.drawPolygon(e,r.slice(0,s+1),l,!0,s,i)),e.strokeStyle=t.bidLine,this.drawPolyline(e,r,l,!1,i),o&&(e.strokeStyle=t.bidLineLight,this.drawPolyline(e,r.slice(0,s+1),l,!0,i)),e.restore()}drawAsks(){if(this.chart.data.asksCount<1)return;const{ctx:e,theme:t,scope:i,data:{asks:r,minTotal:l},activeData:{activeIndex:s}}=this.chart,o=s>-1;e.save(),ad(e,i),e.lineWidth=i.polylineSize,e.fillStyle=o?t.askFillLight:t.askFill,this.drawPolygon(e,r,l,!1,s,i),o&&(e.fillStyle=t.askFill,this.drawPolygon(e,r.slice(0,s+1),l,!0,s,i)),e.strokeStyle=t.askLine,this.drawPolyline(e,r,l,!1,i),o&&(e.strokeStyle=t.askLineLight,this.drawPolyline(e,r.slice(0,s+1),l,!0,i)),e.restore()}buildCommonPath(e,t,i,r,l,{xStep:s,yScale:o,yOffset:a}){e.beginPath(),e.moveTo(0,0),t.forEach((c,f)=>{e.lineTo(s*f,(c.total-r)*o+a),f<i-1&&e.lineTo(s*(f+1),(c.total-r)*o+a)})}drawPolygon(e,t,i,r,l,{xStep:s,yScale:o,xOffset:a,yOffset:c,xRuleWidth:f}){const p=t.length;this.buildCommonPath(e,t,p,i,r,{xStep:s,yScale:o,yOffset:c});const d=(t[p-1].total-i)*o+c;if(r){const h=s*l;e.lineTo(h,d),e.lineTo(h,0)}else{const h=f-a;e.lineTo(h,d),e.lineTo(h,0)}e.closePath(),e.fill()}drawPolyline(e,t,i,r,{xStep:l,yScale:s,xOffset:o,yOffset:a,xRuleWidth:c}){const f=t.length;this.buildCommonPath(e,t,f,i,r,{xStep:l,yScale:s,yOffset:a}),r||e.lineTo(c-o,(t[f-1].total-i)*s+a),e.stroke()}}function hy({bids:n,bidsCount:e,asks:t,asksCount:i}){return e>0?n[0].price:i>0?t[0].price:"0"}function _y(n,{bids:e,bidsCount:t},{left:i,yRuleWidth:r,lineSize:l},s){if(t>0){const o=e[t-1].price;return{x:i+r-l/2,text:o,width:el(n,o),color:s}}return null}function gy(n,{bids:e,bidsCount:t,asks:i,asksCount:r},{left:l,yRuleWidth:s,xRuleWidth:o,lineSize:a},c){if(t>0||r>0){const f=hy({bids:e,bidsCount:t,asks:i,asksCount:r});return{x:l+s+o+a/2,text:f,width:el(n,f),color:c}}return null}function vy(n,{asks:e,asksCount:t},{W:i,right:r},l){if(t>0){const s=e[t-1].price,o=el(n,s);return{x:i-o/2-r,text:s,width:o,color:l}}return null}function by(n,e,{bids:t,bidsCount:i},{left:r,xOffset:l,xStep:s,yRuleWidth:o,xRuleWidth:a,lineSize:c},f){if(i>e){const p=t[e].price;return{x:r+o+a-(e*s+l)-c/2,text:p,width:el(n,p),color:f}}return null}function Ey(n,e,{asks:t,asksCount:i},{left:r,xOffset:l,xStep:s,yRuleWidth:o,xRuleWidth:a,lineSize:c},f){if(i>e){const p=t[e].price;return{x:r+o+a+c+(e*s+l)-c/2,text:p,width:el(n,p),color:f}}return null}function yy({bids:n,bidsCount:e,asks:t,asksCount:i,bidMax:r,askMax:l},{top:s},o){const a=r&&l&&r.total>l.total||r&&!l,c=r&&l&&l.total>r.total||l&&!r;return a?{y:s,text:Hr(r.total),color:o.bidText}:c?{y:s,text:Hr(l.total),color:o.askText}:null}function ky({bids:n,bidsCount:e,asks:t,asksCount:i,bidMax:r,askMax:l,minTotal:s},{top:o,yScale:a,yOffset:c,yRuleHeight:f},p){const d=r&&l&&r.total<l.total||r&&!l,h=r&&l&&l.total<r.total||l&&!r;return d?{y:o+f-(r.total-s)*a-c,text:Hr(r.total),color:p.bidText}:h?{y:o+f-(l.total-s)*a-c,text:Hr(l.total),color:p.askText}:null}function Py({top:n,yRuleHeight:e,lineSize:t},i){return{y:n+e-t/2,text:"0",color:i}}function Hr(n){return n<1e3?n.toFixed(1):n<1e6?(n/1e3).toFixed(1)+"K":n<1e9?(n/1e6).toFixed(1)+"M":(n/1e6).toFixed(1)+"G"}function Sy(n,e){return n.sort((t,i)=>t.y-i.y).reduce((t,i)=>(i.y-t.y>e&&(t.items.push(i),t.y=i.y),t),{items:[],y:0}).items}function Cy(n){return n.sort((e,t)=>e.x-t.x).reduce((e,t)=>(t.x-e.x>t.width&&(e.items.push(t),e.x=t.x),e),{items:[],x:0}).items}class Ty{constructor(e){this.chart=e}draw(){const e=this;e.drawX(),e.drawY()}collectXItems(){const{ctx:e,theme:t,data:i,activeData:{activeIndex:r},scope:l}=this.chart,s=[_y(e,i,l,t.text),gy(e,i,l,t.text),vy(e,i,l,t.text)];return r>-1&&(s.push(by(e,r,i,l,t.bidText)),s.push(Ey(e,r,i,l,t.askText))),s.filter(Boolean)}collectYItems(){const{data:e,data:{minTotal:t},activeData:{activeBid:i,activeAsk:r},theme:l,scope:s}=this.chart,{top:o,yRuleHeight:a,yScale:c,yOffset:f}=s,p=[Py(s,l.text),ky(e,s,l),yy(e,s,l)];return i&&p.push({y:o+a-(i.total-t)*c-f,text:Hr(i.total),color:l.bidText}),r&&p.push({y:o+a-(r.total-t)*c-f,text:Hr(r.total),color:l.askText}),p.filter(Boolean)}drawX(){const e=Cy(this.collectXItems()),{ctx:t,theme:i,scope:r}=this.chart;t.save();const{top:l,fontPadding:s,scaleLength:o,yRuleHeight:a,lineSize:c}=r;jl(t),t.lineWidth=c,t.textAlign="center",t.textBaseline="top";const f=l+a+c;t.beginPath(),t.strokeStyle=i.axis,e.forEach(({x:p,text:d,color:h})=>{t.fillStyle=h,t.moveTo(p,f),t.lineTo(p,f+o),t.fillText(d,p,f+o+s)}),t.stroke(),t.restore()}drawY(){const{ctx:e,theme:t,scope:i}=this.chart;e.save();const{left:r,fontPadding:l,scaleLength:s,yRuleWidth:o,lineSize:a,fontSize:c}=i;jl(e),e.lineWidth=a,e.textAlign="right",e.textBaseline="middle";const f=r+o-a,p=Sy(this.collectYItems(),c);e.beginPath(),e.strokeStyle=t.axis,p.forEach(({y:d,text:h,color:_})=>{e.fillStyle=_,e.moveTo(f-s,d),e.lineTo(f,d),e.fillText(h,f-l-s,d)}),e.stroke(),e.restore()}}const wy={theme:"light",width:500,height:400,left:20,right:20,top:28,bottom:16,fontSize:24,fontPadding:8,scaleLength:10,lineSize:1,polylineSize:2,xOffset:40,yOffset:40},rl={light:{bidText:"#3bc7a4",bidHover:"#99e1cf",bidLine:"#3bc7a4",bidLineLight:"rgba(59,199,164,.4)",bidFill:"#9de3d1",bidFillLight:"rgba(157,227,209,.4)",askText:"#ff6666",askHover:"#ea8d8a",askLine:"#ff6666",askLineLight:"rgba(220,74,69,.4)",askFill:"#eda4a2",askFillLight:"rgba(237,164,162,.4)",middleLine:"#d2d5d9",axis:"#d9d9d9",text:"#303236"},dark:{bidText:"#1cc198",bidHover:"#99e1cf",bidLine:"#1cc198",bidLineLight:"rgba(59,199,164,.4)",bidFill:"#1f6c63",bidFillLight:"rgba(62,206,169,.2)",askText:"#ff6666",askHover:"#ea8d8a",askLine:"#ff6666",askLineLight:"rgba(220,74,69,.4)",askFill:"#7a2d34",askFillLight:"rgba(242,81,75,.2)",middleLine:"rgba(255, 255, 255, 0.1)",axis:"rgba(255, 255, 255, 0.1)",text:"rgba(255, 255, 255, 0.9)"}};function Iy(n,e,t,i){return e>0&&i>0?Math.min(n[0].total,t[0].total):e>0?n[0].total:i>0?t[0].total:0}function Dy(n,e,t,i){return e>0&&i>0?Math.max(n[e-1].total,t[i-1].total):e>0?n[e-1].total:i>0?t[i-1].total:0}class Vy{constructor(e,t,i){this.container=e,this.options={...wy,...i},this.initTheme(),this.initScope(),this.initCanvas(t),this.ctx=this.canvas.getContext("2d"),this.data={bids:[],asks:[],bidsCount:0,asksCount:0,bidMax:null,askMax:null,maxTotal:0,minTotal:0},this.mouse={x:0,y:0},this.activeData={activeIndex:-1,activeBid:null,activeAsk:null},this.axis=new py(this),this.polygon=new my(this),this.scale=new Ty(this),this.eventsHandler=new dy(this)}initTheme(){const{theme:e}=this.options;if(typeof e=="string"&&rl[e]){this.theme=rl[e];return}if(typeof e=="object"){this.theme=e;return}this.theme=rl.light}initScope(){const{clientWidth:e,clientHeight:t}=this.container,{left:i,right:r,top:l,bottom:s,fontSize:o,fontPadding:a,scaleLength:c,lineSize:f,polylineSize:p,xOffset:d,yOffset:h}=this.options;this.scope={W:e*2,H:t*2,left:i*2,right:r*2,top:l*2,bottom:s*2,fontSize:o,fontPadding:a,scaleLength:c,lineSize:f,polylineSize:p,xOffset:d,yOffset:h,yRuleWidth:0,yTextHeight:0,xRuleHeight:0,xRuleWidth:0,yRuleHeight:0,xStep:0,yScale:0}}initCanvas(e){const{W:t,H:i}=this.scope;e.width=t,e.height=i,e.style.width=t/2+"px",e.style.height=i/2+"px",this.canvas=e}updateData(e,t){this.data.bids=e,this.data.asks=t,this.render()}updateMouse({x:e,y:t}){const{mouse:i}=this;i.x=e,i.y=t,this.render()}updateTheme(e){if(typeof e=="string"&&rl[e]){this.theme=rl[e],this.render();return}typeof e=="object"&&(this.theme=e,this.render())}resize(){const{container:e,canvas:t,scope:i}=this,{clientWidth:r,clientHeight:l}=e;t.width=i.W=r*2,t.height=i.H=l*2,t.style.width=r+"px",t.style.height=l+"px",this.render()}syncData(){const{data:e}=this,{bids:t,asks:i}=e,r=e.bidsCount=t.length,l=e.asksCount=i.length;e.bidMax=r>0?t[r-1]:null,e.askMax=l>0?i[l-1]:null,e.minTotal=Iy(t,r,i,l),e.maxTotal=Dy(t,r,i,l)}syncScope(){const{minTotal:e,maxTotal:t,bidsCount:i,asksCount:r}=this.data,{W:l,H:s,left:o,right:a,top:c,bottom:f,fontSize:p,fontPadding:d,scaleLength:h,lineSize:_,xOffset:v,yOffset:g}=this.scope,P=el(this.ctx,t)+d+h+_,I=p,T=_+h+d+p,C=(l-o-a-P-_)/2,V=s-c-f-T,O=(C-v)/Math.max(i,r,1),w=(V-g)/(t-e);this.scope=Object.assign(this.scope,{yRuleWidth:P,yTextHeight:I,xRuleHeight:T,xRuleWidth:C,yRuleHeight:V,xStep:O,yScale:w})}syncActiveData(){const{data:e,activeData:t,mouse:i,scope:r}=this,{bids:l,bidsCount:s,asks:o,asksCount:a}=e,c=t.activeIndex=uy(i.x,i.y,r);t.activeBid=c>-1&&s>c?l[c]:null,t.activeAsk=c>-1&&a>c?o[c]:null}resetContext(){const{ctx:e,scope:{W:t,H:i,fontSize:r}}=this;e.font=`${r}px BASE, "Helvetica Neue", Helvetica, PingFangSC, -apple-system, "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif`,e.clearRect(0,0,t,i)}render(){this.syncData(),this.syncScope(),this.syncActiveData(),this.resetContext(),this.polygon.draw(),this.axis.draw(),this.scale.draw(),this.eventsHandler.draw()}dispose(){this.eventsHandler&&this.eventsHandler.dispose(),this.container=null,this.canvas=null,this.ctx=null}}function Oy(n){let e,t,i,r,l,s;return{c(){e=y("div"),t=y("div"),i=y("canvas"),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=S(e);t=k(a,"DIV",{class:!0});var c=S(t);i=k(c,"CANVAS",{class:!0}),S(i).forEach(m),c.forEach(m),a.forEach(m),this.h()},h(){E(i,"class","pa B1 H-6p2aww"),E(t,"class","wp100 f1 pr usn B1"),E(e,"class","wrap f1 df fdc"),jn(()=>n[10].call(e))},m(o,a){G(o,e,a),u(e,t),u(t,i),n[8](i),n[9](t),r=hi(e,n[10].bind(e)),l||(s=We(e,"mousedown",Zn(n[7])),l=!0)},p:rt,i:rt,o:rt,d(o){o&&m(e),n[8](null),n[9](null),r(),l=!1,s()}}}function Ly(n,e,t){let i,r;J(n,s1,v=>t(5,i=v)),J(n,Ur,v=>t(6,r=v));let l=null,s=null,o=null,a=0,c=0;Lt(()=>(t(4,o=new Vy(l,s,{})),setTimeout(()=>o&&o.resize()),window.addEventListener("resize",f),function(){o&&o.dispose(),t(4,o=null),window.removeEventListener("resize",f)}));function f(...v){o&&o.resize()}function p(v){$i.call(this,n,v)}function d(v){De[v?"unshift":"push"](()=>{s=v,t(3,s)})}function h(v){De[v?"unshift":"push"](()=>{l=v,t(2,l)})}function _(){a=this.clientWidth,c=this.clientHeight,t(0,a),t(1,c)}return n.$$.update=()=>{if(n.$$.dirty&80&&o&&o.updateTheme(r.toLowerCase()),n.$$.dirty&48&&o){const{asks:v,bids:g}=i;o.updateData(g,v)}n.$$.dirty&3&&f(a,c)},[a,c,l,s,o,i,r,p,d,h,_]}let $y=class extends tt{constructor(e){super(),nt(this,e,Ly,Oy,et,{})}};const vf={Chart:"3a3df4",Depth:"89293f",CopyTrade:"262c76"};function bf(n,e,t){const i=n.slice();return i[10]=e[t],i}function Ef(n){let e,t=n[10].text+"",i,r,l;return{c(){e=y("div"),i=B(t),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);i=A(o,t),o.forEach(m),this.h()},h(){E(e,"class","chart-tab cp f14 T2 fw2 H-z3oa03"),Te(e,"active",n[10].value===n[1])},m(s,o){G(s,e,o),u(e,i),r||(l=[We(e,"click",function(){Tt(n[4](n[10]))&&n[4](n[10]).apply(this,arguments)}),We(e,"mousedown",Zn(n[7]))],r=!0)},p(s,o){n=s,o&1&&t!==(t=n[10].text+"")&&W(i,t),o&3&&Te(e,"active",n[10].value===n[1])},d(s){s&&m(e),r=!1,jt(l)}}}function qy(n){let e,t,i,r;e=new sd({props:{class:n[1]===dr.Chart?"":"dn"}});let l=n[1]===dr.Depth&&yf();return{c(){te(e.$$.fragment),t=q(),l&&l.c(),i=ut()},l(s){re(e.$$.fragment,s),t=M(s),l&&l.l(s),i=ut()},m(s,o){ne(e,s,o),G(s,t,o),l&&l.m(s,o),G(s,i,o),r=!0},p(s,o){const a={};o&2&&(a.class=s[1]===dr.Chart?"":"dn"),e.$set(a),s[1]===dr.Depth?l?o&2&&Q(l,1):(l=yf(),l.c(),Q(l,1),l.m(i.parentNode,i)):l&&(ot(),j(l,1,1,()=>{l=null}),at())},i(s){r||(Q(e.$$.fragment,s),Q(l),r=!0)},o(s){j(e.$$.fragment,s),j(l),r=!1},d(s){ie(e,s),s&&m(t),l&&l.d(s),s&&m(i)}}}function My(n){let e=n[3].symbol,t,i,r=kf(n);return{c(){r.c(),t=ut()},l(l){r.l(l),t=ut()},m(l,s){r.m(l,s),G(l,t,s),i=!0},p(l,s){s&8&&et(e,e=l[3].symbol)?(ot(),j(r,1,1,rt),at(),r=kf(l),r.c(),Q(r,1),r.m(t.parentNode,t)):r.p(l,s)},i(l){i||(Q(r),i=!0)},o(l){j(r),i=!1},d(l){l&&m(t),r.d(l)}}}function yf(n){let e,t;return e=new $y({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function kf(n){let e,t;return e=new hm({props:{tradePair:n[3]}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&8&&(l.tradePair=i[3]),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Ny(n){let e,t,i,r,l,s,o,a=n[0],c=[];for(let h=0;h<a.length;h+=1)c[h]=Ef(bf(n,a,h));const f=[My,qy],p=[];function d(h,_){return h[2]?0:1}return l=d(n),s=p[l]=f[l](n),{c(){e=y("div"),t=y("span");for(let h=0;h<c.length;h+=1)c[h].c();i=q(),r=y("div"),s.c(),this.h()},l(h){e=k(h,"DIV",{class:!0});var _=S(e);t=k(_,"SPAN",{class:!0});var v=S(t);for(let b=0;b<c.length;b+=1)c[b].l(v);v.forEach(m),i=M(_),r=k(_,"DIV",{class:!0});var g=S(r);s.l(g),g.forEach(m),_.forEach(m),this.h()},h(){E(t,"class","chart-tabs df aic H-z3oa03"),E(r,"class","chat-view df H-z3oa03"),E(e,"class","df fdc wp100")},m(h,_){G(h,e,_),u(e,t);for(let v=0;v<c.length;v+=1)c[v]&&c[v].m(t,null);u(e,i),u(e,r),p[l].m(r,null),o=!0},p(h,[_]){if(_&19){a=h[0];let g;for(g=0;g<a.length;g+=1){const b=bf(h,a,g);c[g]?c[g].p(b,_):(c[g]=Ef(b),c[g].c(),c[g].m(t,null))}for(;g<c.length;g+=1)c[g].d(1);c.length=a.length}let v=l;l=d(h),l===v?p[l].p(h,_):(ot(),j(p[v],1,1,()=>{p[v]=null}),at(),s=p[l],s?s.p(h,_):(s=p[l]=f[l](h),s.c()),Q(s,1),s.m(r,null))},i(h){o||(Q(s),o=!0)},o(h){j(s),o=!1},d(h){h&&m(e),wn(c,h),p[l].d()}}}function Hy(n,e,t){let i,r,l,s;J(n,Ur,d=>t(5,i=d)),J(n,dt,d=>t(6,r=d)),J(n,mm,d=>t(2,l=d)),J(n,Xt,d=>t(3,s=d));let o=[],a=dr.Chart;function c(d){t(0,o=[{text:d(vf.Chart),value:dr.Chart},{text:d(vf.Depth),value:dr.Depth}])}function f(d){return()=>{t(1,a=d.value)}}function p(d){$i.call(this,n,d)}return n.$$.update=()=>{n.$$.dirty&64&&c(r),n.$$.dirty&32&&(i===fp.Dark?bs.COPY_TRADE_DARK:bs.COPY_TRADE_LIGHT)},[o,a,l,s,f,i,r,p]}let By=class extends tt{constructor(e){super(),nt(this,e,Hy,Ny,et,{})}};const xt={PleaseLoginTo:"d4d8b1",OpenPositions:"edf870",ClosedPositions:"b590c5",ActiveOrders:"d439ae",ConditionalOrders:"98c691",Fills:"4790c3",OrderHistory:"6b1a96",PNLHistory:"6bddfd",PNLHistoryCan:"15f094",ViewOnlyThe:"f1528a",TotalPnl:"224bfd",TradingBot:"e5cfc7",Active:"f94513",History:"eb8c83"};function Pf(n,e,t){const i=n.slice();return i[7]=e[t],i[9]=t,i}function Sf(n){let e,t,i=n[7].text+"",r,l,s,o;function a(){return n[5](n[7])}return{c(){e=y("li"),t=y("span"),r=B(i),l=q(),this.h()},l(c){e=k(c,"LI",{class:!0});var f=S(e);t=k(f,"SPAN",{class:!0});var p=S(t);r=A(p,i),p.forEach(m),l=M(f),f.forEach(m),this.h()},h(){E(t,"class","dib"),E(e,"class","ph12 fw2 cp H-nbgy0"),Te(e,"special",n[7].value===n[0])},m(c,f){G(c,e,f),u(e,t),u(t,r),u(e,l),s||(o=We(e,"click",a),s=!0)},p(c,f){n=c,f&3&&Te(e,"special",n[7].value===n[0])},d(c){c&&m(e),s=!1,o()}}}function Ay(n){let e,t,i,r=n[2][n[0]]+"",l,s,o,a,c,f,p,d,h,_,v=n[1],g=[];for(let b=0;b<v.length;b+=1)g[b]=Sf(Pf(n,v,b));return{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),s=q(),o=y("img"),c=q(),f=y("div"),p=y("div"),d=y("ul");for(let b=0;b<g.length;b+=1)g[b].c();this.h()},l(b){e=k(b,"DIV",{class:!0});var P=S(e);t=k(P,"DIV",{class:!0,style:!0});var I=S(t);i=k(I,"SPAN",{});var T=S(i);l=A(T,r),T.forEach(m),s=M(I),o=k(I,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),I.forEach(m),c=M(P),f=k(P,"DIV",{class:!0});var C=S(f);p=k(C,"DIV",{class:!0});var V=S(p);d=k(V,"UL",{});var O=S(d);for(let w=0;w<g.length;w+=1)g[w].l(O);O.forEach(m),V.forEach(m),C.forEach(m),P.forEach(m),this.h()},h(){hn(o.src,a="https://img.phemex.com/v1/aff2d7fe-2719-441d-a297-2e3dcc1a98b7/arrow.svg")||E(o,"src",a),E(o,"alt","arrow"),E(o,"width","12px"),E(o,"height","12px"),E(o,"class","H-nbgy0"),E(t,"class","df fdr aic cp T3"),Jt(t,"gap","4px"),E(p,"class","wrap df B2 T2 br8 ovh H-nbgy0"),E(f,"class","dropdown pa H-nbgy0"),E(e,"class","menu H-nbgy0")},m(b,P){G(b,e,P),u(e,t),u(t,i),u(i,l),u(t,s),u(t,o),u(e,c),u(e,f),u(f,p),u(p,d);for(let I=0;I<g.length;I+=1)g[I]&&g[I].m(d,null);h||(_=We(e,"mousedown",zy),h=!0)},p(b,[P]){if(P&1&&r!==(r=b[2][b[0]]+"")&&W(l,r),P&11){v=b[1];let I;for(I=0;I<v.length;I+=1){const T=Pf(b,v,I);g[I]?g[I].p(T,P):(g[I]=Sf(T),g[I].c(),g[I].m(d,null))}for(;I<g.length;I+=1)g[I].d(1);g.length=v.length}},i:rt,o:rt,d(b){b&&m(e),wn(g,b),h=!1,_()}}}const zy=n=>n.stopPropagation();function Qy(n,e,t){let i,r;J(n,Eo,f=>t(4,i=f)),J(n,dt,f=>t(6,r=f));const l=[{text:r(xt.Active),value:"Active"},{text:r(xt.History),value:"History"}],s={Active:l[0].text,History:l[1].text};let o;function a(f){t(0,o=f),Eo.next(f)}const c=f=>a(f.value);return n.$$.update=()=>{n.$$.dirty&16&&t(0,o=i??"Active")},[o,l,s,a,i,c]}let Ry=class extends tt{constructor(e){super(),nt(this,e,Qy,Ay,et,{})}};const mi=new Jn(vn.readContractStorage().hideOtherSymbols);mi.subscribe(n=>{vn.updateContractStorage({hideOtherSymbols:n})});const Fy="positionSetting",cd=new Is(1),Cf=new Jn([]),ss=new Jn(Ei.Last),jy=new Jn(!1),fd=new Is(1),ud=new Is(1);_m.pipe(Cn(n=>n.filter(e=>e.status==="Listed"))).subscribe(n=>ud.next(n));Ai.pipe(qn(n=>n&&n.length>0),Cn(n=>n.filter(e=>e.size>0))).subscribe(n=>fd.next(n));gr([fd,ud]).pipe(Rr(3e4),Cn(Uy),qn(Boolean),Fr([])).subscribe(n=>cd.next(n));function Uy([n,e]){return n.map(t=>e.find(({symbol:i})=>t.symbol===i))}o1.subscribe(n=>{const e=n.find(t=>t.bizKey===Fy);if(e){const t=JSON.parse(e.bizVal);ss.next(t.priceSelectionBasis)}});function Wy(n){let e,t,i,r,l,s,o,a;return{c(){e=y("div"),t=y("i"),i=B(""),r=q(),l=y("i"),s=B(""),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=S(e);t=k(f,"I",{class:!0});var p=S(t);i=A(p,""),p.forEach(m),r=M(f),l=k(f,"I",{class:!0});var d=S(l);s=A(d,""),d.forEach(m),f.forEach(m),this.h()},h(){E(t,"class","iconfont up-arrow lh6 f10 H-1sepruc"),Te(t,"active",n[1]==="up"),E(l,"class","iconfont down-arrow lh6 f10 H-1sepruc"),Te(l,"active",n[1]==="down"),E(e,"class","sort-wrap df fdc ml4 usn T4 cp H-1sepruc"),Te(e,"visible",n[0])},m(c,f){G(c,e,f),u(e,t),u(t,i),u(e,r),u(e,l),u(l,s),o||(a=We(e,"click",n[3]),o=!0)},p(c,[f]){f&2&&Te(t,"active",c[1]==="up"),f&2&&Te(l,"active",c[1]==="down"),f&1&&Te(e,"visible",c[0])},i:rt,o:rt,d(c){c&&m(e),o=!1,a()}}}function Gy(n,e,t){let{active:i}=e,{sortDirection:r}=e;const l=Kt(),s=()=>l("sort");return n.$$set=o=>{"active"in o&&t(0,i=o.active),"sortDirection"in o&&t(1,r=o.sortDirection)},[i,r,l,s]}let nn=class extends tt{constructor(e){super(),nt(this,e,Gy,Wy,et,{active:0,sortDirection:1})}};function Tf(n){let e,t,i=n[5](yt[n[3]===Ei.Mark?"UnrealizedMarkPrice":"UnrealizedLastPrice"])+"",r,l,s,o=n[5](yt.PriceSelectionBasis)+"",a,c,f,p,d,h,_,v,g,b,P,I,T,C,V;function O($){n[8]($)}let w={class:"cp",value:Ei.Last,$$slots:{default:[Ky]},$$scope:{ctx:n}};n[3]!==void 0&&(w.group=n[3]),d=new ki({props:w}),De.push(()=>qe(d,"group",O));function D($){n[9]($)}let L={class:"cp",value:Ei.Mark,$$slots:{default:[Xy]},$$scope:{ctx:n}};return n[3]!==void 0&&(L.group=n[3]),v=new ki({props:L}),De.push(()=>qe(v,"group",D)),{c(){e=y("div"),t=y("div"),r=B(i),l=q(),s=y("div"),a=B(o),c=q(),f=y("div"),p=y("span"),te(d.$$.fragment),_=q(),te(v.$$.fragment),b=q(),P=y("div"),I=y("div"),this.h()},l($){e=k($,"DIV",{class:!0,"data-popper-placement":!0,role:!0});var N=S(e);t=k(N,"DIV",{class:!0});var z=S(t);r=A(z,i),z.forEach(m),l=M(N),s=k(N,"DIV",{class:!0});var H=S(s);a=A(H,o),H.forEach(m),c=M(N),f=k(N,"DIV",{class:!0});var R=S(f);p=k(R,"SPAN",{class:!0});var F=S(p);re(d.$$.fragment,F),F.forEach(m),_=M(R),re(v.$$.fragment,R),R.forEach(m),b=M(N),P=k(N,"DIV",{class:!0,"data-popper-arrow":!0});var U=S(P);I=k(U,"DIV",{class:!0}),S(I).forEach(m),U.forEach(m),N.forEach(m),this.h()},h(){E(t,"class","title T1 H-4c14mb"),E(s,"class","mt10 lh20 T3"),E(p,"class","mr10"),E(f,"class","mt4 H-4c14mb"),Te(f,"disabled",!n[4]),E(I,"class","arrow2 H-4c14mb"),E(P,"class","arrow H-4c14mb"),E(P,"data-popper-arrow",""),E(e,"class","tooltip B2 br4 H-4c14mb"),E(e,"data-popper-placement",Jy),E(e,"role","tooltip")},m($,N){G($,e,N),u(e,t),u(t,r),u(e,l),u(e,s),u(s,a),u(e,c),u(e,f),u(f,p),ne(d,p,null),u(f,_),ne(v,f,null),u(e,b),u(e,P),u(P,I),n[10](e),T=!0,C||(V=[We(e,"mouseleave",n[6]),We(e,"mouseenter",n[11])],C=!0)},p($,N){(!T||N&40)&&i!==(i=$[5](yt[$[3]===Ei.Mark?"UnrealizedMarkPrice":"UnrealizedLastPrice"])+"")&&W(r,i),(!T||N&32)&&o!==(o=$[5](yt.PriceSelectionBasis)+"")&&W(a,o);const z={};N&65568&&(z.$$scope={dirty:N,ctx:$}),!h&&N&8&&(h=!0,z.group=$[3],Me(()=>h=!1)),d.$set(z);const H={};N&65568&&(H.$$scope={dirty:N,ctx:$}),!g&&N&8&&(g=!0,H.group=$[3],Me(()=>g=!1)),v.$set(H),(!T||N&16)&&Te(f,"disabled",!$[4])},i($){T||(Q(d.$$.fragment,$),Q(v.$$.fragment,$),T=!0)},o($){j(d.$$.fragment,$),j(v.$$.fragment,$),T=!1},d($){$&&m(e),ie(d),ie(v),n[10](null),C=!1,jt(V)}}}function Ky(n){let e=n[5](yt.LastPrice)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&32&&e!==(e=i[5](yt.LastPrice)+"")&&W(t,e)},d(i){i&&m(t)}}}function Xy(n){let e=n[5](yt.MarkPrice)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&32&&e!==(e=i[5](yt.MarkPrice)+"")&&W(t,e)},d(i){i&&m(t)}}}function Yy(n){let e,t,i=n[1]&&Tf(n);return{c(){i&&i.c(),e=ut()},l(r){i&&i.l(r),e=ut()},m(r,l){i&&i.m(r,l),G(r,e,l),t=!0},p(r,[l]){r[1]?i?(i.p(r,l),l&2&&Q(i,1)):(i=Tf(r),i.c(),Q(i,1),i.m(e.parentNode,e)):i&&(ot(),j(i,1,1,()=>{i=null}),at())},i(r){t||(Q(i),t=!0)},o(r){j(i),t=!1},d(r){i&&i.d(r),r&&m(e)}}}let Jy="top";function Zy(n,e,t){let i,r,l;J(n,yo,P=>t(12,i=P)),J(n,Yn,P=>t(4,r=P)),J(n,dt,P=>t(5,l=P));let{visible:s=!1}=e,{anchorNode:o=null}=e,{tooltipNode:a=null}=e,{isHover:c=!1}=e;Kt();let f=(i==null?void 0:i.priceSelectionBasis)||"Last";function p(P,I){!I||!P||ep(P,I,{placement:"top"})}function d(P){!r||P===i.priceSelectionBasis||(yo.next(Object.assign(Object.assign({},i),{priceSelectionBasis:P})),a1.next(void 0),ss.next(P))}function h(){t(1,s=!1),t(2,c=!1)}function _(P){f=P,t(3,f)}function v(P){f=P,t(3,f)}function g(P){De[P?"unshift":"push"](()=>{a=P,t(0,a)})}const b=()=>t(2,c=!0);return n.$$set=P=>{"visible"in P&&t(1,s=P.visible),"anchorNode"in P&&t(7,o=P.anchorNode),"tooltipNode"in P&&t(0,a=P.tooltipNode),"isHover"in P&&t(2,c=P.isHover)},n.$$.update=()=>{n.$$.dirty&129&&p(o,a),n.$$.dirty&8&&d(f)},[a,s,c,f,r,l,h,o,_,v,g,b]}let xy=class extends tt{constructor(e){super(),nt(this,e,Zy,Yy,et,{visible:1,anchorNode:7,tooltipNode:0,isHover:2})}get visible(){return this.$$.ctx[1]}set visible(e){this.$$set({visible:e}),ni()}get anchorNode(){return this.$$.ctx[7]}set anchorNode(e){this.$$set({anchorNode:e}),ni()}get tooltipNode(){return this.$$.ctx[0]}set tooltipNode(e){this.$$set({tooltipNode:e}),ni()}get isHover(){return this.$$.ctx[2]}set isHover(e){this.$$set({isHover:e}),ni()}};function wf(n){let e,t,i=n[3](yt.MarginLevel)+"",r,l,s,o,a,c,f;return o=new nn({props:{active:n[0]==="marginRatio"&&n[1],sortDirection:n[0]==="marginRatio"?n[1]:""}}),o.$on("sort",n[14]),{c(){e=y("div"),t=y("span"),r=B(i),s=q(),te(o.$$.fragment),this.h()},l(p){e=k(p,"DIV",{class:!0});var d=S(e);t=k(d,"SPAN",{class:!0});var h=S(t);r=A(h,i),h.forEach(m),s=M(d),re(o.$$.fragment,d),d.forEach(m),this.h()},h(){E(t,"class","tdud ch H-10k5k0v"),E(e,"class","cell tl H-10k5k0v")},m(p,d){G(p,e,d),u(e,t),u(t,r),u(e,s),ne(o,e,null),a=!0,c||(f=Wt(l=Gt.call(null,t,{text:n[3](vt.MarginLevel)+`<a href=${n[5](cn.PROFIT_REINVESTMENT)} class="ml4" target="_blank">${n[3](He.LearnMore)}</a>`,hideDelay:100})),c=!0)},p(p,d){(!a||d&8)&&i!==(i=p[3](yt.MarginLevel)+"")&&W(r,i),l&&Tt(l.update)&&d&40&&l.update.call(null,{text:p[3](vt.MarginLevel)+`<a href=${p[5](cn.PROFIT_REINVESTMENT)} class="ml4" target="_blank">${p[3](He.LearnMore)}</a>`,hideDelay:100});const h={};d&3&&(h.active=p[0]==="marginRatio"&&p[1]),d&3&&(h.sortDirection=p[0]==="marginRatio"?p[1]:""),o.$set(h)},i(p){a||(Q(o.$$.fragment,p),a=!0)},o(p){j(o.$$.fragment,p),a=!1},d(p){p&&m(e),ie(o),c=!1,f()}}}function e4(n){let e,t,i,r=n[3](yt.Symbol)+"",l,s,o,a,c,f,p=n[3](yt.Size)+"",d,h,_,v,g=n[3](yt.EntryPrice)+"",b,P,I,T,C,V,O,w=n[3](yt.MarkPrice)+"",D,L,$,N,z,H,R,F=n[3](yt.LiqPrice2)+"",U,K,Y,X,ee,Z,ue,ce,pe=n[3](yt.Margin)+"",me,oe,ke,Le,ge,ae,x,le=n[3](yt.UnrealisedPNL)+"",fe,Se,Pe,Ce,Ee,Ie,ve=n[3](yt.RealisedPNL)+"",de,se,he,_e,be,Ve,Be,Fe=n[3](yt.TPSL)+"",$e,Ae,Ne=n[3](Zt.TS)+"",Ge,Xe,ye,Ke,Qe,ze=n[3](yt.ADL)+"",Ue,st,Oe,it,ct=n[3](yt.CloseAllPosition)+"",ft,_t,Et,gt,Dt;o=new nn({props:{active:n[0]==="symbol"&&n[1],sortDirection:n[0]==="symbol"?n[1]:""}}),o.$on("sort",n[10]),T=new nn({props:{active:n[0]==="entryPrice"&&n[1],sortDirection:n[0]==="entryPrice"?n[1]:""}}),T.$on("sort",n[11]),N=new nn({props:{active:n[0]==="markPrice"&&n[1],sortDirection:n[0]==="markPrice"?n[1]:""}}),N.$on("sort",n[12]),X=new nn({props:{active:n[0]==="liqPrice"&&n[1],sortDirection:n[0]==="liqPrice"?n[1]:""}}),X.$on("sort",n[13]);let It=n[4]&&wf(n);return Le=new nn({props:{active:n[0]==="margin"&&n[1],sortDirection:n[0]==="margin"?n[1]:""}}),Le.$on("sort",n[15]),Pe=new nn({props:{active:n[0]==="unrealisedPNL"&&n[1],sortDirection:n[0]==="unrealisedPNL"?n[1]:""}}),Pe.$on("sort",n[17]),_e=new nn({props:{active:n[0]==="realisedPNL"&&n[1],sortDirection:n[0]==="realisedPNL"?n[1]:""}}),_e.$on("sort",n[18]),{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),s=q(),te(o.$$.fragment),a=q(),c=y("div"),f=y("span"),d=B(p),h=q(),_=y("div"),v=y("span"),b=B(g),I=q(),te(T.$$.fragment),C=q(),V=y("div"),O=y("span"),D=B(w),$=q(),te(N.$$.fragment),z=q(),H=y("div"),R=y("span"),U=B(F),Y=q(),te(X.$$.fragment),ee=q(),It&&It.c(),Z=q(),ue=y("div"),ce=y("span"),me=B(pe),ke=q(),te(Le.$$.fragment),ge=q(),ae=y("div"),x=y("span"),fe=B(le),Se=q(),te(Pe.$$.fragment),Ce=q(),Ee=y("div"),Ie=y("span"),de=B(ve),he=q(),te(_e.$$.fragment),be=q(),Ve=y("div"),Be=y("span"),$e=B(Fe),Ae=B("("),Ge=B(Ne),Xe=B(")"),Ke=q(),Qe=y("div"),Ue=B(ze),st=q(),Oe=y("div"),it=y("span"),ft=B(ct),this.h()},l(pt){e=k(pt,"DIV",{class:!0});var mt=S(e);t=k(mt,"DIV",{class:!0});var Nt=S(t);i=k(Nt,"SPAN",{});var Rt=S(i);l=A(Rt,r),Rt.forEach(m),s=M(Nt),re(o.$$.fragment,Nt),Nt.forEach(m),a=M(mt),c=k(mt,"DIV",{class:!0});var je=S(c);f=k(je,"SPAN",{class:!0});var lt=S(f);d=A(lt,p),lt.forEach(m),je.forEach(m),h=M(mt),_=k(mt,"DIV",{class:!0});var Yt=S(_);v=k(Yt,"SPAN",{class:!0});var tn=S(v);b=A(tn,g),tn.forEach(m),I=M(Yt),re(T.$$.fragment,Yt),Yt.forEach(m),C=M(mt),V=k(mt,"DIV",{class:!0});var Ze=S(V);O=k(Ze,"SPAN",{class:!0});var St=S(O);D=A(St,w),St.forEach(m),$=M(Ze),re(N.$$.fragment,Ze),Ze.forEach(m),z=M(mt),H=k(mt,"DIV",{class:!0});var kt=S(H);R=k(kt,"SPAN",{class:!0});var $t=S(R);U=A($t,F),$t.forEach(m),Y=M(kt),re(X.$$.fragment,kt),kt.forEach(m),ee=M(mt),It&&It.l(mt),Z=M(mt),ue=k(mt,"DIV",{class:!0});var ht=S(ue);ce=k(ht,"SPAN",{class:!0});var At=S(ce);me=A(At,pe),At.forEach(m),ke=M(ht),re(Le.$$.fragment,ht),ht.forEach(m),ge=M(mt),ae=k(mt,"DIV",{class:!0});var Mt=S(ae);x=k(Mt,"SPAN",{class:!0});var fn=S(x);fe=A(fn,le),fn.forEach(m),Se=M(Mt),re(Pe.$$.fragment,Mt),Mt.forEach(m),Ce=M(mt),Ee=k(mt,"DIV",{class:!0});var oi=S(Ee);Ie=k(oi,"SPAN",{class:!0});var Ti=S(Ie);de=A(Ti,ve),Ti.forEach(m),he=M(oi),re(_e.$$.fragment,oi),oi.forEach(m),be=M(mt),Ve=k(mt,"DIV",{class:!0});var ti=S(Ve);Be=k(ti,"SPAN",{class:!0});var Qn=S(Be);$e=A(Qn,Fe),Ae=A(Qn,"("),Ge=A(Qn,Ne),Xe=A(Qn,")"),Qn.forEach(m),ti.forEach(m),Ke=M(mt),Qe=k(mt,"DIV",{class:!0});var ai=S(Qe);Ue=A(ai,ze),ai.forEach(m),st=M(mt),Oe=k(mt,"DIV",{class:!0});var Rn=S(Oe);it=k(Rn,"SPAN",{class:!0});var Ui=S(it);ft=A(Ui,ct),Ui.forEach(m),Rn.forEach(m),mt.forEach(m),this.h()},h(){E(t,"class","cell pl16 H-10k5k0v"),E(f,"class","pl16"),E(c,"class","cell tl H-10k5k0v"),E(v,"class","tdud ch H-10k5k0v"),E(_,"class","cell tl H-10k5k0v"),E(O,"class","tdud ch H-10k5k0v"),E(V,"class","cell tl H-10k5k0v"),E(R,"class","tdud ch H-10k5k0v"),E(H,"class","cell tl H-10k5k0v"),E(ce,"class","tdud ch H-10k5k0v"),E(ue,"class","cell tl H-10k5k0v"),E(x,"class","tdud ch H-10k5k0v"),E(ae,"class","cell tl H-10k5k0v"),E(Ie,"class","tdud ch H-10k5k0v"),E(Ee,"class","cell tl H-10k5k0v"),E(Be,"class","tdud ch H-10k5k0v"),E(Ve,"class","cell tl H-10k5k0v"),E(Qe,"class","cell tl H-10k5k0v"),E(it,"class","tdud cp H-10k5k0v"),E(Oe,"class","cell jcfe H-10k5k0v"),E(e,"class","row lh28 H-10k5k0v")},m(pt,mt){G(pt,e,mt),u(e,t),u(t,i),u(i,l),u(t,s),ne(o,t,null),u(e,a),u(e,c),u(c,f),u(f,d),u(e,h),u(e,_),u(_,v),u(v,b),u(_,I),ne(T,_,null),u(e,C),u(e,V),u(V,O),u(O,D),u(V,$),ne(N,V,null),u(e,z),u(e,H),u(H,R),u(R,U),u(H,Y),ne(X,H,null),u(e,ee),It&&It.m(e,null),u(e,Z),u(e,ue),u(ue,ce),u(ce,me),u(ue,ke),ne(Le,ue,null),u(e,ge),u(e,ae),u(ae,x),u(x,fe),n[16](x),u(ae,Se),ne(Pe,ae,null),u(e,Ce),u(e,Ee),u(Ee,Ie),u(Ie,de),u(Ee,he),ne(_e,Ee,null),u(e,be),u(e,Ve),u(Ve,Be),u(Be,$e),u(Be,Ae),u(Be,Ge),u(Be,Xe),u(e,Ke),u(e,Qe),u(Qe,Ue),u(e,st),u(e,Oe),u(Oe,it),u(it,ft),Et=!0,gt||(Dt=[Wt(P=Gt.call(null,v,{text:n[3](vt.EntryPrice)})),Wt(L=Gt.call(null,O,{text:n[3](vt.MarkPrice)})),Wt(K=Gt.call(null,R,{text:n[3](vt.LiqPrice2)})),Wt(oe=Gt.call(null,ce,{text:n[3](vt.Margin)})),We(x,"mouseenter",n[8]),We(x,"mouseleave",n[9]),Wt(se=Gt.call(null,Ie,{text:n[3](vt.RealisedPNL)})),Wt(ye=Gt.call(null,Be,{text:n[3](vt.TPSL)})),We(it,"click",n[6]),Wt(_t=Gt.call(null,it,{text:n[3](vt.CloseAllPosition)}))],gt=!0)},p(pt,[mt]){(!Et||mt&8)&&r!==(r=pt[3](yt.Symbol)+"")&&W(l,r);const Nt={};mt&3&&(Nt.active=pt[0]==="symbol"&&pt[1]),mt&3&&(Nt.sortDirection=pt[0]==="symbol"?pt[1]:""),o.$set(Nt),(!Et||mt&8)&&p!==(p=pt[3](yt.Size)+"")&&W(d,p),(!Et||mt&8)&&g!==(g=pt[3](yt.EntryPrice)+"")&&W(b,g),P&&Tt(P.update)&&mt&8&&P.update.call(null,{text:pt[3](vt.EntryPrice)});const Rt={};mt&3&&(Rt.active=pt[0]==="entryPrice"&&pt[1]),mt&3&&(Rt.sortDirection=pt[0]==="entryPrice"?pt[1]:""),T.$set(Rt),(!Et||mt&8)&&w!==(w=pt[3](yt.MarkPrice)+"")&&W(D,w),L&&Tt(L.update)&&mt&8&&L.update.call(null,{text:pt[3](vt.MarkPrice)});const je={};mt&3&&(je.active=pt[0]==="markPrice"&&pt[1]),mt&3&&(je.sortDirection=pt[0]==="markPrice"?pt[1]:""),N.$set(je),(!Et||mt&8)&&F!==(F=pt[3](yt.LiqPrice2)+"")&&W(U,F),K&&Tt(K.update)&&mt&8&&K.update.call(null,{text:pt[3](vt.LiqPrice2)});const lt={};mt&3&&(lt.active=pt[0]==="liqPrice"&&pt[1]),mt&3&&(lt.sortDirection=pt[0]==="liqPrice"?pt[1]:""),X.$set(lt),pt[4]?It?(It.p(pt,mt),mt&16&&Q(It,1)):(It=wf(pt),It.c(),Q(It,1),It.m(e,Z)):It&&(ot(),j(It,1,1,()=>{It=null}),at()),(!Et||mt&8)&&pe!==(pe=pt[3](yt.Margin)+"")&&W(me,pe),oe&&Tt(oe.update)&&mt&8&&oe.update.call(null,{text:pt[3](vt.Margin)});const Yt={};mt&3&&(Yt.active=pt[0]==="margin"&&pt[1]),mt&3&&(Yt.sortDirection=pt[0]==="margin"?pt[1]:""),Le.$set(Yt),(!Et||mt&8)&&le!==(le=pt[3](yt.UnrealisedPNL)+"")&&W(fe,le);const tn={};mt&3&&(tn.active=pt[0]==="unrealisedPNL"&&pt[1]),mt&3&&(tn.sortDirection=pt[0]==="unrealisedPNL"?pt[1]:""),Pe.$set(tn),(!Et||mt&8)&&ve!==(ve=pt[3](yt.RealisedPNL)+"")&&W(de,ve),se&&Tt(se.update)&&mt&8&&se.update.call(null,{text:pt[3](vt.RealisedPNL)});const Ze={};mt&3&&(Ze.active=pt[0]==="realisedPNL"&&pt[1]),mt&3&&(Ze.sortDirection=pt[0]==="realisedPNL"?pt[1]:""),_e.$set(Ze),(!Et||mt&8)&&Fe!==(Fe=pt[3](yt.TPSL)+"")&&W($e,Fe),(!Et||mt&8)&&Ne!==(Ne=pt[3](Zt.TS)+"")&&W(Ge,Ne),ye&&Tt(ye.update)&&mt&8&&ye.update.call(null,{text:pt[3](vt.TPSL)}),(!Et||mt&8)&&ze!==(ze=pt[3](yt.ADL)+"")&&W(Ue,ze),(!Et||mt&8)&&ct!==(ct=pt[3](yt.CloseAllPosition)+"")&&W(ft,ct),_t&&Tt(_t.update)&&mt&8&&_t.update.call(null,{text:pt[3](vt.CloseAllPosition)})},i(pt){Et||(Q(o.$$.fragment,pt),Q(T.$$.fragment,pt),Q(N.$$.fragment,pt),Q(X.$$.fragment,pt),Q(It),Q(Le.$$.fragment,pt),Q(Pe.$$.fragment,pt),Q(_e.$$.fragment,pt),Et=!0)},o(pt){j(o.$$.fragment,pt),j(T.$$.fragment,pt),j(N.$$.fragment,pt),j(X.$$.fragment,pt),j(It),j(Le.$$.fragment,pt),j(Pe.$$.fragment,pt),j(_e.$$.fragment,pt),Et=!1},d(pt){pt&&m(e),ie(o),ie(T),ie(N),ie(X),It&&It.d(),ie(Le),n[16](null),ie(Pe),ie(_e),gt=!1,jt(Dt)}}}function t4(n,e,t){let i,r,l,s;J(n,Ai,w=>t(20,i=w)),J(n,dt,w=>t(3,r=w)),J(n,sr,w=>t(4,l=w)),J(n,Yl,w=>t(5,s=w));let{sortKey:o=""}=e,{sortDirection:a=""}=e,c=null,f=null;function p(){pi.track("close_all_positions",{}),i.filter(D=>D.size>0).length!==0&&en.create(id,{onConfirm:om})}function d(w){if(o===w){if(a==="up"){t(1,a="down");return}if(a==="down"){t(1,a="");return}if(a===""){t(1,a="up");return}}t(0,o=w),t(1,a="up")}function h(){let w=document.getElementById("tooltip-holder");w||(w=document.createElement("div"),w.setAttribute("id","tooltip-holder"),document.body.appendChild(w)),c=new xy({target:w,props:{anchorNode:f}}),c.$set({visible:!0}),jy.next(c)}function _(){setTimeout(()=>{c&&!c.isHover&&(c.$set({visible:!1}),c.$destroy())},0)}const v=()=>d("symbol"),g=()=>d("entryPrice"),b=()=>d("markPrice"),P=()=>d("liqPrice"),I=()=>d("marginRatio"),T=()=>d("margin");function C(w){De[w?"unshift":"push"](()=>{f=w,t(2,f)})}const V=()=>d("unrealisedPNL"),O=()=>d("realisedPNL");return n.$$set=w=>{"sortKey"in w&&t(0,o=w.sortKey),"sortDirection"in w&&t(1,a=w.sortDirection)},[o,a,f,r,l,s,p,d,h,_,v,g,b,P,I,T,C,V,O]}let n4=class extends tt{constructor(e){super(),nt(this,e,t4,e4,et,{sortKey:0,sortDirection:1})}};function i4(n){let e,t,i,r,l,s,o;return{c(){e=y("div"),t=y("span"),i=B(n[0]),r=q(),l=y("span"),s=B(" "),o=B(n[1]),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=S(e);t=k(c,"SPAN",{class:!0});var f=S(t);i=A(f,n[0]),f.forEach(m),r=M(c),l=k(c,"SPAN",{class:!0});var p=S(l);s=A(p," "),o=A(p,n[1]),p.forEach(m),c.forEach(m),this.h()},h(){E(t,"class","T3"),E(l,"class","f1 tr T2"),E(e,"class","df lh26")},m(a,c){G(a,e,c),u(e,t),u(t,i),u(e,r),u(e,l),u(l,s),u(l,o)},p(a,[c]){c&1&&W(i,a[0]),c&2&&W(o,a[1])},i:rt,o:rt,d(a){a&&m(e)}}}function r4(n,e,t){let{label:i=""}=e,{info:r=""}=e;return n.$$set=l=>{"label"in l&&t(0,i=l.label),"info"in l&&t(1,r=l.info)},[i,r]}let al=class extends tt{constructor(e){super(),nt(this,e,r4,i4,et,{label:0,info:1})}};function If(n){let e,t;return e=new al({props:{label:n[10](On.AvailableBalance),info:n[2].availableBalanceWU}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&1024&&(l.label=i[10](On.AvailableBalance)),r&4&&(l.info=i[2].availableBalanceWU),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Df(n){let e,t;return e=new al({props:{label:n[10](On.MaxRemovable),info:n[1].maxRemovableWU}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&1024&&(l.label=i[10](On.MaxRemovable)),r&2&&(l.info=i[1].maxRemovableWU),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function l4(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v;function g(C){n[21](C)}function b(C){n[22](C)}let P={isInline:!1,label:n[10](On.Amount),unit:n[2].currency,tickSizeEv:n[0].tickSizeEv,factor:n[0].valueFactor,scale:n[0].valueScale,precision:n[0].valuePrecision,maxValueEv:n[7]};n[5]!==void 0&&(P.input=n[5]),n[4]!==void 0&&(P.valueEv=n[4]),i=new Ip({props:P}),De.push(()=>qe(i,"input",g)),De.push(()=>qe(i,"valueEv",b));let I=n[3]===fi.Add&&If(n),T=n[3]===fi.Remove&&Df(n);return f=new al({props:{label:n[10](On.CurrentlyAssignedMargin),info:n[1].marginWU}}),d=new al({props:{label:n[10](On.AdjustedMargin),info:n[8]}}),_=new al({props:{label:n[10](On.EstimatedLiquidationPrice),info:n[9]}}),{c(){e=y("div"),t=y("div"),te(i.$$.fragment),s=q(),o=y("div"),I&&I.c(),a=q(),T&&T.c(),c=q(),te(f.$$.fragment),p=q(),te(d.$$.fragment),h=q(),te(_.$$.fragment),this.h()},l(C){e=k(C,"DIV",{class:!0});var V=S(e);t=k(V,"DIV",{});var O=S(t);re(i.$$.fragment,O),O.forEach(m),s=M(V),o=k(V,"DIV",{class:!0});var w=S(o);I&&I.l(w),a=M(w),T&&T.l(w),c=M(w),re(f.$$.fragment,w),p=M(w),re(d.$$.fragment,w),h=M(w),re(_.$$.fragment,w),w.forEach(m),V.forEach(m),this.h()},h(){E(o,"class","mt8"),E(e,"class","body H-redz0r")},m(C,V){G(C,e,V),u(e,t),ne(i,t,null),u(e,s),u(e,o),I&&I.m(o,null),u(o,a),T&&T.m(o,null),u(o,c),ne(f,o,null),u(o,p),ne(d,o,null),u(o,h),ne(_,o,null),v=!0},p(C,V){const O={};V&1024&&(O.label=C[10](On.Amount)),V&4&&(O.unit=C[2].currency),V&1&&(O.tickSizeEv=C[0].tickSizeEv),V&1&&(O.factor=C[0].valueFactor),V&1&&(O.scale=C[0].valueScale),V&1&&(O.precision=C[0].valuePrecision),V&128&&(O.maxValueEv=C[7]),!r&&V&32&&(r=!0,O.input=C[5],Me(()=>r=!1)),!l&&V&16&&(l=!0,O.valueEv=C[4],Me(()=>l=!1)),i.$set(O),C[3]===fi.Add?I?(I.p(C,V),V&8&&Q(I,1)):(I=If(C),I.c(),Q(I,1),I.m(o,a)):I&&(ot(),j(I,1,1,()=>{I=null}),at()),C[3]===fi.Remove?T?(T.p(C,V),V&8&&Q(T,1)):(T=Df(C),T.c(),Q(T,1),T.m(o,c)):T&&(ot(),j(T,1,1,()=>{T=null}),at());const w={};V&1024&&(w.label=C[10](On.CurrentlyAssignedMargin)),V&2&&(w.info=C[1].marginWU),f.$set(w);const D={};V&1024&&(D.label=C[10](On.AdjustedMargin)),V&256&&(D.info=C[8]),d.$set(D);const L={};V&1024&&(L.label=C[10](On.EstimatedLiquidationPrice)),V&512&&(L.info=C[9]),_.$set(L)},i(C){v||(Q(i.$$.fragment,C),Q(I),Q(T),Q(f.$$.fragment,C),Q(d.$$.fragment,C),Q(_.$$.fragment,C),v=!0)},o(C){j(i.$$.fragment,C),j(I),j(T),j(f.$$.fragment,C),j(d.$$.fragment,C),j(_.$$.fragment,C),v=!1},d(C){C&&m(e),ie(i),I&&I.d(),T&&T.d(),ie(f),ie(d),ie(_)}}}function s4(n){let e=n[10](On.Add)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&1024&&e!==(e=i[10](On.Add)+"")&&W(t,e)},d(i){i&&m(t)}}}function o4(n){let e=n[10](On.Remove)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&1024&&e!==(e=i[10](On.Remove)+"")&&W(t,e)},d(i){i&&m(t)}}}function a4(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v;function g(T){n[19](T)}let b={class:"cp",value:fi.Add,$$slots:{default:[s4]},$$scope:{ctx:n}};n[3]!==void 0&&(b.group=n[3]),i=new ki({props:b}),De.push(()=>qe(i,"group",g));function P(T){n[20](T)}let I={class:"cp",value:fi.Remove,$$slots:{default:[o4]},$$scope:{ctx:n}};return n[3]!==void 0&&(I.group=n[3]),a=new ki({props:I}),De.push(()=>qe(a,"group",P)),{c(){e=y("div"),t=y("div"),te(i.$$.fragment),l=q(),s=y("span"),o=q(),te(a.$$.fragment),f=q(),p=y("i"),d=B(""),this.h()},l(T){e=k(T,"DIV",{class:!0,slot:!0});var C=S(e);t=k(C,"DIV",{class:!0});var V=S(t);re(i.$$.fragment,V),l=M(V),s=k(V,"SPAN",{class:!0}),S(s).forEach(m),o=M(V),re(a.$$.fragment,V),V.forEach(m),f=M(C),p=k(C,"I",{class:!0});var O=S(p);d=A(O,""),O.forEach(m),C.forEach(m),this.h()},h(){E(s,"class","ml24 H-redz0r"),E(t,"class","T2"),E(p,"class","iconfont cp"),E(e,"class","p16 lh22 df aic jcsb T2"),E(e,"slot","header")},m(T,C){G(T,e,C),u(e,t),ne(i,t,null),u(t,l),u(t,s),u(t,o),ne(a,t,null),u(e,f),u(e,p),u(p,d),h=!0,_||(v=We(p,"click",n[12]),_=!0)},p(T,C){const V={};C&1073742848&&(V.$$scope={dirty:C,ctx:T}),!r&&C&8&&(r=!0,V.group=T[3],Me(()=>r=!1)),i.$set(V);const O={};C&1073742848&&(O.$$scope={dirty:C,ctx:T}),!c&&C&8&&(c=!0,O.group=T[3],Me(()=>c=!1)),a.$set(O)},i(T){h||(Q(i.$$.fragment,T),Q(a.$$.fragment,T),h=!0)},o(T){j(i.$$.fragment,T),j(a.$$.fragment,T),h=!1},d(T){T&&m(e),ie(i),ie(a),_=!1,v()}}}function c4(n){let e=n[10](He.Cancel)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&1024&&e!==(e=i[10](He.Cancel)+"")&&W(t,e)},d(i){i&&m(t)}}}function f4(n){let e=n[10](He.Confirm)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&1024&&e!==(e=i[10](He.Confirm)+"")&&W(t,e)},d(i){i&&m(t)}}}function u4(n){let e,t,i,r,l;return t=new Ht({props:{size:"small",$$slots:{default:[c4]},$$scope:{ctx:n}}}),t.$on("click",n[11]),r=new Ht({props:{size:"small",type:"primary",disabled:n[4]<=0,loading:n[6],$$slots:{default:[f4]},$$scope:{ctx:n}}}),r.$on("click",n[13]),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);re(t.$$.fragment,o),i=M(o),re(r.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","p16 tr"),E(e,"slot","footer")},m(s,o){G(s,e,o),ne(t,e,null),u(e,i),ne(r,e,null),l=!0},p(s,o){const a={};o&1073742848&&(a.$$scope={dirty:o,ctx:s}),t.$set(a);const c={};o&16&&(c.disabled=s[4]<=0),o&64&&(c.loading=s[6]),o&1073742848&&(c.$$scope={dirty:o,ctx:s}),r.$set(c)},i(s){l||(Q(t.$$.fragment,s),Q(r.$$.fragment,s),l=!0)},o(s){j(t.$$.fragment,s),j(r.$$.fragment,s),l=!1},d(s){s&&m(e),ie(t),ie(r)}}}function p4(n){let e,t;return e=new bn({props:{style:"max-width: 320px;",$$slots:{footer:[u4],header:[a4],default:[l4]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&1073743871&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function d4(n,e,t){let i,r,l,s,o,a;J(n,dl,U=>t(14,i=U)),J(n,sr,U=>t(15,r=U)),J(n,Ni,U=>t(16,l=U)),J(n,vr,U=>t(17,s=U)),J(n,mp,U=>t(18,o=U)),J(n,dt,U=>t(10,a=U));let{contract:c=null}=e,{position:f=null}=e;const p=Kt();let d=null,h=!1,_,v=fi.Add,g=0,b=0,P="0",I="-";Lt(()=>T());function T(...U){d&&d.focus()}function C(...U){t(4,g=0)}function V(U,K,Y){t(7,b=U===fi.Add?K.availableBalanceEv:Y.maxRemovableEv)}function O(U,K){const{valuePrecision:Y,valueScale:X,settleCurrency:ee}=c;t(8,P=xe.floor(f.marginEv+(U===fi.Add?K:-K),Y,X)+" "+ee)}function w(U,K,Y,X,ee,Z,ue,ce,pe){const{marginBalanceEv:me}=Y;if(!K||!U)return"-";const{leverageEr:oe,side:ke,size:Le,avgEntryPriceEp:ge,marginEv:ae}=K;if(oe===0&&me===0)return"-";const x=Hp(K,X);if(!x)return"-";const{type:le,contractSide:fe,pricePrecision:Se,priceScale:Pe,valueFactor:Ce,ratioFactor:Ee}=U,Ie={side:ke,orderQty:Le,priceEp:ge},ve=Z===fi.Add?ee:-ee,de=Bp(U,Ie)*Ce,{maintenanceMarginRateRr:se,maintenanceAmountRv:he}=Vs(U,K,ue),_e=le==="Perpetual"?x.maintenanceMarginEr:se,be=le==="Perpetual"?0:he,Ve=Re(de).times(_e).minus(be).div(Ee).toNumber(),Fe=le==="PerpetualV2"&&ce?Jm(Object.assign(Object.assign({},K),{assignedPosBalanceEv:ae+ve}),be,_e,pe):Ks(fe,ke,ae+ve,Ve,de,pe),$e=Zl(U,Le,Fe);return xe.round($e,Se,Pe)}function D(){p("close")}function L(){p("close")}async function $(){t(6,h=!0);const U=await am(c,(v===fi.Add?1:-1)*g,f.posSide);t(6,h=!1),U&&p("close")}function N(U,K){t(2,_=hp.findAccount(K,U.settleCurrency))}function z(U){v=U,t(3,v)}function H(U){v=U,t(3,v)}function R(U){d=U,t(5,d)}function F(U){g=U,t(4,g)}return n.$$set=U=>{"contract"in U&&t(0,c=U.contract),"position"in U&&t(1,f=U.position)},n.$$.update=()=>{n.$$.dirty&8&&T(v),n.$$.dirty&8&&C(v),n.$$.dirty&262145&&N(c,o),n.$$.dirty&14&&V(v,_,f),n.$$.dirty&24&&O(v,g),n.$$.dirty&245791&&t(9,I=w(c,f,_,s,g,v,l,r,i))},[c,f,_,v,g,d,h,b,P,I,a,D,L,$,i,r,l,s,o,z,H,R,F]}let m4=class extends tt{constructor(e){super(),nt(this,e,d4,p4,et,{contract:0,position:1})}};function Vf(n){var r;let e,t=n[3](ul.MinPositionWillClose,{Min:(r=n[7])==null?void 0:r.minOrderQty,Unit:n[1]})+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(l){e=k(l,"DIV",{class:!0});var s=S(e);i=A(s,t),s.forEach(m),this.h()},h(){E(e,"class","pa mt5 sell f12")},m(l,s){G(l,e,s),u(e,i)},p(l,s){var o;s[0]&138&&t!==(t=l[3](ul.MinPositionWillClose,{Min:(o=l[7])==null?void 0:o.minOrderQty,Unit:l[1]})+"")&&W(i,t)},d(l){l&&m(e)}}}function h4(n){var I;let e,t,i,r,l,s,o,a,c,f,p;const d=[{class:"market-close-quantity"},{isInline:!1},n[2]];function h(T){n[18](T)}function _(T){n[19](T)}let v={};for(let T=0;T<d.length;T+=1)v=pn(v,d[T]);n[4]!==void 0&&(v.input=n[4]),n[0]!==void 0&&(v.quantity=n[0]),i=new Un({props:v}),De.push(()=>qe(i,"input",h)),De.push(()=>qe(i,"quantity",_));let g=((I=n[7])==null?void 0:I.minClosePosTipVisible)&&Vf(n);function b(T){n[20](T)}let P={};return n[5]!==void 0&&(P.value=n[5]),c=new ji({props:P}),De.push(()=>qe(c,"value",b)),c.$on("input",n[10]),{c(){e=y("div"),t=y("div"),te(i.$$.fragment),s=q(),g&&g.c(),o=q(),a=y("div"),te(c.$$.fragment),this.h()},l(T){e=k(T,"DIV",{class:!0});var C=S(e);t=k(C,"DIV",{class:!0});var V=S(t);re(i.$$.fragment,V),s=M(V),g&&g.l(V),V.forEach(m),o=M(C),a=k(C,"DIV",{class:!0});var O=S(a);re(c.$$.fragment,O),O.forEach(m),C.forEach(m),this.h()},h(){E(t,"class","pr"),E(a,"class","slider H-1aabdby"),E(e,"class","body H-1aabdby")},m(T,C){G(T,e,C),u(e,t),ne(i,t,null),u(t,s),g&&g.m(t,null),u(e,o),u(e,a),ne(c,a,null),p=!0},p(T,C){var w;const V=C[0]&4?dn(d,[d[0],d[1],mn(T[2])]):{};!r&&C[0]&16&&(r=!0,V.input=T[4],Me(()=>r=!1)),!l&&C[0]&1&&(l=!0,V.quantity=T[0],Me(()=>l=!1)),i.$set(V),(w=T[7])!=null&&w.minClosePosTipVisible?g?g.p(T,C):(g=Vf(T),g.c(),g.m(t,null)):g&&(g.d(1),g=null);const O={};!f&&C[0]&32&&(f=!0,O.value=T[5],Me(()=>f=!1)),c.$set(O)},i(T){p||(Q(i.$$.fragment,T),Q(c.$$.fragment,T),p=!0)},o(T){j(i.$$.fragment,T),j(c.$$.fragment,T),p=!1},d(T){T&&m(e),ie(i),g&&g.d(),ie(c)}}}function _4(n){let e,t=n[3](ul.CloseByMarket)+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0,slot:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","p16 lh22 df b T2"),E(e,"slot","header")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&8&&t!==(t=r[3](ul.CloseByMarket)+"")&&W(i,t)},d(r){r&&m(e)}}}function g4(n){let e=n[3](He.Cancel)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[0]&8&&e!==(e=i[3](He.Cancel)+"")&&W(t,e)},d(i){i&&m(t)}}}function v4(n){let e=n[3](He.Confirm)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[0]&8&&e!==(e=i[3](He.Confirm)+"")&&W(t,e)},d(i){i&&m(t)}}}function b4(n){let e,t,i,r,l;return t=new Ht({props:{class:"market-close-cancel",size:"small",$$slots:{default:[g4]},$$scope:{ctx:n}}}),t.$on("click",n[8]),r=new Ht({props:{class:"market-close-confirm",size:"small",type:"primary",loading:n[6],$$slots:{default:[v4]},$$scope:{ctx:n}}}),r.$on("click",n[9]),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);re(t.$$.fragment,o),i=M(o),re(r.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","p16 tr"),E(e,"slot","footer")},m(s,o){G(s,e,o),ne(t,e,null),u(e,i),ne(r,e,null),l=!0},p(s,o){const a={};o[0]&8|o[1]&1&&(a.$$scope={dirty:o,ctx:s}),t.$set(a);const c={};o[0]&64&&(c.loading=s[6]),o[0]&8|o[1]&1&&(c.$$scope={dirty:o,ctx:s}),r.$set(c)},i(s){l||(Q(t.$$.fragment,s),Q(r.$$.fragment,s),l=!0)},o(s){j(t.$$.fragment,s),j(r.$$.fragment,s),l=!1},d(s){s&&m(e),ie(t),ie(r)}}}function E4(n){let e,t;return e=new bn({props:{style:"max-width: 480px;",$$slots:{footer:[b4],header:[_4],default:[h4]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&255|r[1]&1&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function y4(n,e){return e&&e.has(n.symbol)?e.get(n.symbol):null}function k4(n,e,t){let i,r,l,s,o,a;J(n,dt,K=>t(3,l=K)),J(n,An,K=>t(16,s=K)),J(n,zn,K=>t(17,o=K)),J(n,ri,K=>t(21,a=K));let{contract:c=null}=e,{position:f=null}=e;const p=Kt();let d=y4(c,a),h=null,_=0,v=100,g,b,P,I=!1,T;Lt(()=>{h&&h.focus()});function C(){p("close")}async function V(){if(!z())return;const{type:K,qtyStepSize:Y}=c,{size:X,side:ee,avgEntryPriceEp:Z}=f,ue={symbol:f.symbol,side:ee==="Buy"?"Sell":"Buy",ordType:"Market",timeInForce:"ImmediateOrCancel",closeOnTrigger:!0,actionBy:"UserClosePosition",type:K},ce=d?d.closeEp:0,pe=O(_,r,Z,c),me=Re(pe).div(X).gte(.95)?X:pe,oe=K==="Perpetual"?1:Y,ke=me<oe?oe:me;K==="Perpetual"&&Object.assign(ue,{priceEp:ce,orderQty:ke}),K==="PerpetualV2"&&Object.assign(ue,{priceRp:ce,orderQtyRq:ke,posSide:f.posSide}),t(6,I=!0);const ae=await fr(ue,{by:"position",goal:"create_close_market_dialog"},{percentValue:v});t(6,I=!1),ae&&p("close")}function O(K,Y,X,ee){const{type:Z,contractSide:ue,qtyPrecision:ce,qtyScale:pe,contPrecision:me,settleValuePrecision:oe,valuePrecision:ke,valueScale:Le,contractSize:ge}=ee;let ae=0,x=0;Z==="Perpetual"&&(ae=Y===we.Cont?me:oe,x=pe),Z==="PerpetualV2"&&(ae=Y===we.Base?ke:ce,x=Y===we.Base?Le:pe);const le=Number(xe.floor(K,ae,x));if(Y===we.Cont)return le;if(Y===we.Base){if(ue>0)return Number(In(le,X,ee,!0));if(ue<0)return Number(xe.floor(Number(Re(le).div(ge)),me))}if(Y===we.Coin){if(ue>0)return Number(Dn(le,ee,X));if(ue<0)return Number(In(le,X,ee,!0))}return 0}function w(K,Y,X){const{type:ee,contractSide:Z,settleCurrency:ue,contractUnderlyingAssets:ce}=Y;return ee==="Perpetual"?{[we.Cont]:X(ul.Cont),[we.Base]:Z>0?ue:ce,[we.Coin]:Z>0?ce:ue}[K]:ee==="PerpetualV2"?K===we.Base?ue:ce:""}function D(K,Y,X){const{type:ee,qtyFactor:Z}=K,{size:ue,value:ce,avgEntryPrice:pe}=Y;if(ee==="PerpetualV2")return{[we.Base]:ce,[we.Coin]:ue}[X];if(ee==="Perpetual"){const me={[we.Cont]:Qt.toContQuantity(K,ue),[we.Base]:Qt.toValueQuantity(K,ue,pe),[we.Coin]:Qt.toCoinQuantity(K,ue,pe)};return Re(me[X]).times(Z)}return 0}function L(K,Y,X,ee){const{type:Z,contractSide:ue,pricePrecision:ce,qtyScale:pe,contPrecision:me,qtyFactor:oe,contTickSizeEv:ke,valueFactor:Le,valuePrecision:ge,tickSizeEv:ae,contractSizePrecision:x}=K;if(Z==="Perpetual"){const le=X===we.Cont?ke:0;let fe=me,Se=ke;return X===we.Cont&&(fe=me,Se=ke),X===we.Base&&(ue>0&&(fe=ce,Se=Math.pow(10,pe-ce)),ue<0&&(fe=ge,Se=Math.pow(10,pe-ge))),X===we.Coin&&(ue>0&&(fe=x,Se=Math.pow(10,pe-x)),ue<0&&(fe=ge,Se=Math.pow(10,pe-ge))),{maxQuantity:Number.MAX_SAFE_INTEGER,minQuantity:le,scale:pe,factor:oe,precision:fe,tickSizeEx:Se,unit:ee}}if(Z==="PerpetualV2")return X===we.Coin?{precision:me,factor:oe,scale:pe,tickSizeEx:ke,maxQuantity:Number.MAX_SAFE_INTEGER,unit:ee}:{precision:ge,factor:Le,scale:pe,tickSizeEx:ae,maxQuantity:Number.MAX_SAFE_INTEGER,unit:ee}}function $(){N()}function N(K){const{tickSizeEx:Y}=P,X=Number(Re(b).times(v).div(100));t(0,_=X>0&&X<Y?Y:X)}function z(){return _===0?(Pt.send("toast","info",{message:l(Ye.QtyError)}),!1):!0}function H(K,Y){if(K<=0)return;const X=Number(Re(K).div(Y).times(100).toFixed(0));t(5,v=X>100?100:X)}function R(K){h=K,t(4,h)}function F(K){_=K,t(0,_)}function U(K){v=K,t(5,v)}return n.$$set=K=>{"contract"in K&&t(11,c=K.contract),"position"in K&&t(12,f=K.position)},n.$$.update=()=>{n.$$.dirty[0]&198656&&t(14,r=c.type==="Perpetual"?o:s),n.$$.dirty[0]&18440&&t(1,g=w(r,c,l)),n.$$.dirty[0]&18442&&t(2,P=L(c,l,r,g)),n.$$.dirty[0]&51205&&t(7,T=is(r,_,i,c,P)),n.$$.dirty[0]&22528&&t(13,b=D(c,f,r)),n.$$.dirty[0]&16384&&N(),n.$$.dirty[0]&8193&&H(_,b)},t(15,i=d?d.closeEp:0),[_,g,P,l,h,v,I,T,C,V,$,c,f,b,r,i,s,o,R,F,U]}let P4=class extends tt{constructor(e){super(),nt(this,e,k4,E4,et,{contract:11,position:12},null,[-1,-1])}};const{Map:S4}=Ad;function Of(n,e,t){const i=n.slice();return i[8]=e[t],i[10]=t,i}function Lf(n,e){let t;return{key:n,first:null,c(){t=y("div"),this.h()},l(i){t=k(i,"DIV",{class:!0,style:!0}),S(t).forEach(m),this.h()},h(){E(t,"class","light H-1mzf1nw"),Jt(t,"opacity",e[8]),Te(t,"none",e[8]===.1),this.first=t},m(i,r){G(i,t,r)},p(i,r){e=i,r&1&&Jt(t,"opacity",e[8]),r&1&&Te(t,"none",e[8]===.1)},d(i){i&&m(t)}}}function C4(n){let e,t=[],i=new S4,r,l,s,o=n[0];const a=c=>c[10];for(let c=0;c<o.length;c+=1){let f=Of(n,o,c),p=a(f);i.set(p,t[c]=Lf(p,f))}return{c(){e=y("div");for(let c=0;c<t.length;c+=1)t[c].c();this.h()},l(c){e=k(c,"DIV",{class:!0});var f=S(e);for(let p=0;p<t.length;p+=1)t[p].l(f);f.forEach(m),this.h()},h(){E(e,"class","df")},m(c,f){G(c,e,f);for(let p=0;p<t.length;p+=1)t[p]&&t[p].m(e,null);l||(s=Wt(r=Gt.call(null,e,{text:n[3](n[1],n[2]),hideDelay:500})),l=!0)},p(c,[f]){f&1&&(o=c[0],t=Si(t,f,a,1,c,o,i,e,Ju,Lf,null,Of)),r&&Tt(r.update)&&f&6&&r.update.call(null,{text:c[3](c[1],c[2]),hideDelay:500})},i:rt,o:rt,d(c){c&&m(e);for(let f=0;f<t.length;f+=1)t[f].d();l=!1,s()}}}function T4(n,e){if(!n)return 1;const{type:t,posSide:i,symbol:r}=n,l=t==="PerpetualV2"?r+i:r;return e.has(l)?e.get(l).light:1}function w4(n,e,t){let i,r;J(n,dt,p=>t(1,i=p)),J(n,Yl,p=>t(2,r=p));let{position:l=null}=e;const s=[1,2,3,4,5];let o,a=new Map;cl.pipe(qn(p=>p.type==="adl")).subscribe(({data:p})=>t(5,a=p.adl));function c(p,d){return`${p(vt.AutoDeleveraged)} <a target="_blank" href="${d(cn.PHEMEX_ADL)}">${p(He.ClickHereTo)}</a>`}function f(p){return s.map(d=>d>p?.1:d*.2)}return n.$$set=p=>{"position"in p&&t(4,l=p.position)},n.$$.update=()=>{n.$$.dirty&48&&t(0,o=f(T4(l,a)))},[o,i,r,c,l,a]}let I4=class extends tt{constructor(e){super(),nt(this,e,w4,C4,et,{position:4})}};function $f(n,e,t){const i=n.slice();return i[4]=e[t],i}function qf(n){let e,t=n[4]+"",i,r,l,s;return{c(){e=y("span"),i=B(t),r=B("%"),this.h()},l(o){e=k(o,"SPAN",{class:!0});var a=S(e);i=A(a,t),r=A(a,"%"),a.forEach(m),this.h()},h(){E(e,"class","f1 br2 B3 tc T3 cp H-5mxt03"),Te(e,"active",n[4]===n[0])},m(o,a){G(o,e,a),u(e,i),u(e,r),l||(s=We(e,"click",n[2](n[4])),l=!0)},p(o,a){n=o,a&3&&Te(e,"active",n[4]===n[0])},d(o){o&&m(e),l=!1,s()}}}function D4(n){let e,t=n[1],i=[];for(let r=0;r<t.length;r+=1)i[r]=qf($f(n,t,r));return{c(){e=y("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);for(let s=0;s<i.length;s+=1)i[s].l(l);l.forEach(m),this.h()},h(){E(e,"class","wrap df br4 pr H-5mxt03")},m(r,l){G(r,e,l);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null)},p(r,[l]){if(l&7){t=r[1];let s;for(s=0;s<t.length;s+=1){const o=$f(r,t,s);i[s]?i[s].p(o,l):(i[s]=qf(o),i[s].c(),i[s].m(e,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=t.length}},i:rt,o:rt,d(r){r&&m(e),wn(i,r)}}}function V4(n,e,t){let{percent:i=0}=e;const r=[10,25,50,75,100],l=Kt();function s(o){return function(){t(0,i=o),l("change")}}return n.$$set=o=>{"percent"in o&&t(0,i=o.percent)},[i,r,s]}let O4=class extends tt{constructor(e){super(),nt(this,e,V4,D4,et,{percent:0})}};function Mf(n,e,t){const i=n.slice();return i[6]=e[t],i}function Nf(n){let e,t,i=n[2](yt.CloseAt,{Qty:n[6].orderQty,Price:n[6].price})+"",r,l,s,o,a,c,f;return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("i"),o=B(""),a=q(),this.h()},l(p){e=k(p,"DIV",{class:!0});var d=S(e);t=k(d,"SPAN",{});var h=S(t);r=A(h,i),h.forEach(m),l=M(d),s=k(d,"I",{class:!0});var _=S(s);o=A(_,""),_.forEach(m),a=M(d),d.forEach(m),this.h()},h(){E(s,"class","iconfont ml10 T3 f12 cp H-7euncv"),E(e,"class","row df jcsb aic.splice(0, 10) lh32 f12 T2 H-7euncv")},m(p,d){G(p,e,d),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),u(e,a),c||(f=We(s,"click",function(){Tt(n[3](n[6]))&&n[3](n[6]).apply(this,arguments)}),c=!0)},p(p,d){n=p,d&6&&i!==(i=n[2](yt.CloseAt,{Qty:n[6].orderQty,Price:n[6].price})+"")&&W(r,i)},d(p){p&&m(e),c=!1,f()}}}function L4(n){let e,t,i=n[1],r=[];for(let l=0;l<i.length;l+=1)r[l]=Nf(Mf(n,i,l));return{c(){e=y("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=k(l,"DIV",{class:!0});var s=S(e);for(let o=0;o<r.length;o+=1)r[o].l(s);s.forEach(m),this.h()},h(){E(e,"class","wrap br4 sv H-7euncv"),jn(()=>n[5].call(e))},m(l,s){G(l,e,s);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);t=hi(e,n[5].bind(e))},p(l,[s]){if(s&14){i=l[1];let o;for(o=0;o<i.length;o+=1){const a=Mf(l,i,o);r[o]?r[o].p(a,s):(r[o]=Nf(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},i:rt,o:rt,d(l){l&&m(e),wn(r,l),t()}}}function $4(n,e,t){let i;J(n,dt,c=>t(2,i=c));let{closeOrders:r=[]}=e,{popperHeight:l=44}=e,{contract:s}=e;function o(c){return function(){if(!s)return;const f={type:s.type,by:"position",goal:"cancel_close_limit"};Mi(c,f)}}function a(){l=this.offsetHeight,t(0,l)}return n.$$set=c=>{"closeOrders"in c&&t(1,r=c.closeOrders),"popperHeight"in c&&t(0,l=c.popperHeight),"contract"in c&&t(4,s=c.contract)},[l,r,i,o,s,a]}let q4=class extends tt{constructor(e){super(),nt(this,e,$4,L4,et,{closeOrders:1,popperHeight:0,contract:4})}};function Hf(n){let e,t,i,r,l;function s(c){n[35](c)}let o={};n[5]!==void 0&&(o.percent=n[5]),t=new O4({props:o}),De.push(()=>qe(t,"percent",s)),t.$on("change",n[20]);let a=n[1]&&n[2]&&Bf(n);return{c(){e=y("div"),te(t.$$.fragment),r=q(),a&&a.c(),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=S(e);re(t.$$.fragment,f),r=M(f),a&&a.l(f),f.forEach(m),this.h()},h(){E(e,"class","btn-group pa H-2t3q1a")},m(c,f){G(c,e,f),ne(t,e,null),u(e,r),a&&a.m(e,null),l=!0},p(c,f){const p={};!i&&f[0]&32&&(i=!0,p.percent=c[5],Me(()=>i=!1)),t.$set(p),c[1]&&c[2]?a?a.p(c,f):(a=Bf(c),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(c){l||(Q(t.$$.fragment,c),l=!0)},o(c){j(t.$$.fragment,c),l=!1},d(c){c&&m(e),ie(t),a&&a.d()}}}function Bf(n){var c;let e,t=n[4](yt.EstimatedPNL)+"",i,r,l,s,o=((c=n[0])==null?void 0:c.settleCurrency)+"",a;return{c(){e=y("div"),i=B(t),r=B(": "),l=y("span"),s=B(n[11]),a=B(o),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=S(e);i=A(p,t),r=A(p,": "),l=k(p,"SPAN",{});var d=S(l);s=A(d,n[11]),a=A(d,o),d.forEach(m),p.forEach(m),this.h()},h(){Te(l,"buy",n[11]>0),Te(l,"sell",n[11]<0),E(e,"class","est-pnl H-2t3q1a")},m(f,p){G(f,e,p),u(e,i),u(e,r),u(e,l),u(l,s),u(l,a)},p(f,p){var d;p[0]&16&&t!==(t=f[4](yt.EstimatedPNL)+"")&&W(i,t),p[0]&2048&&W(s,f[11]),p[0]&1&&o!==(o=((d=f[0])==null?void 0:d.settleCurrency)+"")&&W(a,o),p[0]&2048&&Te(l,"buy",f[11]>0),p[0]&2048&&Te(l,"sell",f[11]<0)},d(f){f&&m(e)}}}function Af(n){let e,t,i;function r(s){n[36](s)}let l={closeOrders:n[13],contract:n[0]};return n[10]!==void 0&&(l.popperHeight=n[10]),e=new q4({props:l}),De.push(()=>qe(e,"popperHeight",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o[0]&8192&&(a.closeOrders=s[13]),o[0]&1&&(a.contract=s[0]),!t&&o[0]&1024&&(t=!0,a.popperHeight=s[10],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function M4(n){let e,t,i,r,l,s,o,a,c,f,p=n[4](yt.Limit)+"",d,h=n[13].length>0?`(${n[13].length})`:"",_,v,g,b,P,I;function T($){n[32]($)}let C={class:"ipt f1",height:"30",isInline:!1,operation:!1,tickSizeEp:n[0].tickSizeEp,placeholder:n[4](yt.Price),precision:n[0].pricePrecision,maxPriceEp:n[0].maxPriceEp,factor:n[0].priceFactor,scale:n[0].priceScale};n[1]!==void 0&&(C.priceEp=n[1]),e=new yn({props:C}),De.push(()=>qe(e,"priceEp",T)),e.$on("valueChange",n[33]);const V=[n[12],{class:"ipt"},{height:"30"},{isInline:!1},{operation:!1},{placeholder:n[4](yt.Size)}];function O($){n[34]($)}let w={};for(let $=0;$<V.length;$+=1)w=pn(w,V[$]);n[2]!==void 0&&(w.quantity=n[2]),l=new Un({props:w}),De.push(()=>qe(l,"quantity",O)),l.$on("click",n[15]),l.$on("focus",n[15]),l.$on("input",n[16]);let D=n[8]&&Hf(n),L=n[6]&&n[13].length>0&&Af(n);return{c(){te(e.$$.fragment),i=q(),r=y("div"),te(l.$$.fragment),o=q(),D&&D.c(),a=q(),c=y("div"),f=y("button"),d=B(p),_=B(h),v=q(),g=y("div"),L&&L.c(),this.h()},l($){re(e.$$.fragment,$),i=M($),r=k($,"DIV",{class:!0,style:!0});var N=S(r);re(l.$$.fragment,N),o=M(N),D&&D.l(N),N.forEach(m),a=M($),c=k($,"DIV",{class:!0});var z=S(c);f=k(z,"BUTTON",{class:!0});var H=S(f);d=A(H,p),_=A(H,h),H.forEach(m),v=M(z),g=k(z,"DIV",{class:!0});var R=S(g);L&&L.l(R),R.forEach(m),z.forEach(m),this.h()},h(){E(r,"class","df aic pr ml4 mr4"),Jt(r,"height","100%"),E(f,"class","position-limit limit lh30 fw2 T1 cp ooo H-2t3q1a"),f.disabled=n[7],E(g,"class","close-order H-2t3q1a"),E(c,"class","limit-btn")},m($,N){ne(e,$,N),G($,i,N),G($,r,N),ne(l,r,null),u(r,o),D&&D.m(r,null),G($,a,N),G($,c,N),u(c,f),u(f,d),u(f,_),u(c,v),u(c,g),L&&L.m(g,null),n[37](g),b=!0,P||(I=[We(r,"mouseleave",n[14]),We(f,"click",n[17]),We(g,"mousedown",N4),We(c,"mousedown",n[19]),We(c,"mouseenter",n[18]),We(c,"mouseleave",n[19])],P=!0)},p($,N){const z={};N[0]&1&&(z.tickSizeEp=$[0].tickSizeEp),N[0]&16&&(z.placeholder=$[4](yt.Price)),N[0]&1&&(z.precision=$[0].pricePrecision),N[0]&1&&(z.maxPriceEp=$[0].maxPriceEp),N[0]&1&&(z.factor=$[0].priceFactor),N[0]&1&&(z.scale=$[0].priceScale),!t&&N[0]&2&&(t=!0,z.priceEp=$[1],Me(()=>t=!1)),e.$set(z);const H=N[0]&4112?dn(V,[N[0]&4096&&mn($[12]),V[1],V[2],V[3],V[4],N[0]&16&&{placeholder:$[4](yt.Size)}]):{};!s&&N[0]&4&&(s=!0,H.quantity=$[2],Me(()=>s=!1)),l.$set(H),$[8]?D?(D.p($,N),N[0]&256&&Q(D,1)):(D=Hf($),D.c(),Q(D,1),D.m(r,null)):D&&(ot(),j(D,1,1,()=>{D=null}),at()),(!b||N[0]&16)&&p!==(p=$[4](yt.Limit)+"")&&W(d,p),(!b||N[0]&8192)&&h!==(h=$[13].length>0?`(${$[13].length})`:"")&&W(_,h),(!b||N[0]&128)&&(f.disabled=$[7]),$[6]&&$[13].length>0?L?(L.p($,N),N[0]&8256&&Q(L,1)):(L=Af($),L.c(),Q(L,1),L.m(g,null)):L&&(ot(),j(L,1,1,()=>{L=null}),at())},i($){b||(Q(e.$$.fragment,$),Q(l.$$.fragment,$),Q(D),Q(L),b=!0)},o($){j(e.$$.fragment,$),j(l.$$.fragment,$),j(D),j(L),b=!1},d($){ie(e,$),$&&m(i),$&&m(r),ie(l),D&&D.d(),$&&m(a),$&&m(c),L&&L.d(),n[37](null),P=!1,jt(I)}}}const N4=n=>n.stopPropagation();function H4(n,e,t){let i,r,l,s,o,a,c,f,p,d;J(n,dt,fe=>t(4,s=fe)),J(n,Cf,fe=>t(27,o=fe)),J(n,Xt,fe=>t(38,a=fe)),J(n,cd,fe=>t(28,c=fe)),J(n,_l,fe=>t(29,f=fe)),J(n,An,fe=>t(30,p=fe)),J(n,zn,fe=>t(31,d=fe));let{contract:h=null}=e,{item:_=null}=e,{index:v=0}=e,{scrollTop:g=0}=e,{formEle:b}=e,P=0,I=0,T=0,C=!1,V=!1,O=!1,w=null,D=44,L,$,N=!1;Lt(()=>Pt.subscribe("global","price-click",fe=>{a.symbol===h.symbol&&(t(1,P=xe.roundPriceEp(xe.priceToEp(fe.price,h.priceScale),h.tickSizeEp)),t(3,N=!0))}));function z(fe,Se){const{symbol:Pe,posSide:Ce}=_;if(fe.includes(Pe+Ce))return;const Ee=Se.find(Ie=>(Ie==null?void 0:Ie.symbol)===Pe);Ee&&t(1,P=Ee.closeEp)}function H(){t(8,O=!1),b&&t(21,b.style="z-index: 9",b)}function R(){t(8,O=!0),b&&t(21,b.style="z-index: 11",b)}function F(){t(5,T=0),U()}function U(){Cf.next([...new Set([...o,_.symbol+_.posSide])])}async function K(){if(!Z())return;t(7,V=!0);const{type:fe,qtyStepSize:Se,pricePrecision:Pe}=h,{size:Ce,side:Ee,avgEntryPriceEp:Ie}=_,ve={type:fe,symbol:_.symbol,side:Ee==="Buy"?"Sell":"Buy",ordType:"Limit",timeInForce:"GoodTillCancel",closeOnTrigger:!0,actionBy:"UserClosePosition"},de=ce(I,i,Ie,h),se=Re(de).div(Ce).gte(.95)?Ce:de,he=fe==="Perpetual"?1:Se,_e=se<he?he:se;fe==="Perpetual"&&Object.assign(ve,{priceEp:P,orderQty:_e}),fe==="PerpetualV2"&&Object.assign(ve,{orderQtyRq:_e,priceRp:xe.floor(P,Pe),posSide:_.posSide}),t(6,C=!1),await fr(ve,{by:"position",goal:"create_close_limit"}),t(7,V=!1)}function Y(){ee(D),t(6,C=!0),b&&t(21,b.style="z-index: 11",b)}function X(){t(6,C=!1),b&&t(21,b.style="z-index: 9",b)}function ee(fe){w&&t(9,w.style=`top: ${70-fe+v*64-g}px`,w)}function Z(){return P===0?(Pt.send("toast","info",{message:s(Ye.PriceError)}),!1):I===0?(Pt.send("toast","info",{message:s(Ye.QtyError)}),!1):!0}function ue(){const{tickSizeEx:fe}=l,Se=Number(Re(L).times(T).div(100));t(2,I=Se>0&&Se<fe?fe:Se),U()}function ce(fe,Se,Pe,Ce){const{type:Ee,contractSide:Ie,qtyPrecision:ve,qtyScale:de,contPrecision:se,settleValuePrecision:he,valuePrecision:_e,valueScale:be,contractSize:Ve}=Ce;let Be=0,Fe=0;Ee==="Perpetual"&&(Be=Se===we.Cont?se:he,Fe=de),Ee==="PerpetualV2"&&(Be=Se===we.Base?_e:ve,Fe=Se===we.Base?be:de);const $e=Number(xe.floor(fe,Be,Fe));if(Se===we.Cont)return $e;if(Se===we.Base){if(Ie>0)return Number(In($e,Pe,Ce,!0));if(Ie<0)return Number(xe.floor(Number(Re($e).div(Ve)),se))}if(Se===we.Coin){if(Ie>0)return Number(Dn($e,Ce,Pe));if(Ie<0)return Number(In($e,Pe,Ce,!0))}return 0}function pe(fe,Se,Pe){const{type:Ce,qtyFactor:Ee}=fe,{size:Ie,value:ve,avgEntryPrice:de}=Se;if(Ce==="PerpetualV2"){const se={[we.Base]:Number(ve),[we.Coin]:Ie};return Re(se[Pe])}if(Ce==="Perpetual"){const se={[we.Cont]:Qt.toContQuantity(fe,Ie),[we.Base]:Qt.toValueQuantity(fe,Ie,de),[we.Coin]:Qt.toCoinQuantity(fe,Ie,de)};return Re(se[Pe]).times(Ee)}return Re(0)}function me(fe,Se,Pe){const{type:Ce,contractSide:Ee,pricePrecision:Ie,qtyScale:ve,contPrecision:de,qtyFactor:se,contTickSizeEv:he,valueFactor:_e,valuePrecision:be,tickSizeEv:Ve,contractSizePrecision:Be}=fe;if(Ce==="Perpetual"){const Fe=Pe===we.Cont?he:0;let $e=de,Ae=he;return Pe===we.Cont&&($e=de,Ae=he),Pe===we.Base&&(Ee>0&&($e=Ie,Ae=Math.pow(10,ve-Ie)),Ee<0&&($e=be,Ae=Math.pow(10,ve-be))),Pe===we.Coin&&(Ee>0&&($e=Be,Ae=Math.pow(10,ve-Be)),Ee<0&&($e=be,Ae=Math.pow(10,ve-be))),{maxQuantity:Number.MAX_SAFE_INTEGER,minQuantity:Fe,scale:ve,factor:se,precision:$e,tickSizeEx:Ae}}if(Ce==="PerpetualV2")return Pe===we.Coin?{precision:de,factor:se,scale:ve,tickSizeEx:he,maxQuantity:Number.MAX_SAFE_INTEGER}:{precision:be,factor:_e,scale:ve,tickSizeEx:Ve,maxQuantity:Number.MAX_SAFE_INTEGER}}function oe(fe,Se,Pe,Ce,Ee){const{contractSide:Ie,contractSize:ve,valueFactor:de,priceFactor:se,valuePrecision:he,valueScale:_e}=Se,{side:be,avgEntryPriceEp:Ve,size:Be}=fe;let Fe=Re(Ee).toNumber()!==0?Re(Be).mul(Ce).div(Ee):0;Fe=Fe>Be?Be:Fe;const $e=Xr({side:be,contractSide:Ie,contractSize:ve,qty:Fe,entryPriceEp:Ve,exitPriceEp:Pe,factor:de,priceFactor:se});return Number(xe.floor($e,he,_e))}function ke(fe){P=fe,t(1,P)}const Le=()=>t(3,N=!0);function ge(fe){I=fe,t(2,I)}function ae(fe){T=fe,t(5,T)}function x(fe){D=fe,t(10,D)}function le(fe){De[fe?"unshift":"push"](()=>{w=fe,t(9,w)})}return n.$$set=fe=>{"contract"in fe&&t(0,h=fe.contract),"item"in fe&&t(22,_=fe.item),"index"in fe&&t(23,v=fe.index),"scrollTop"in fe&&t(24,g=fe.scrollTop),"formEle"in fe&&t(21,b=fe.formEle)},n.$$.update=()=>{n.$$.dirty[0]&1073741825|n.$$.dirty[1]&1&&t(26,i=h.type==="Perpetual"?d:p),n.$$.dirty[0]&541065216&&t(13,r=c1(f,_)),n.$$.dirty[0]&71303169&&t(25,L=pe(h,_,i)),n.$$.dirty[0]&67108881&&t(12,l=me(h,s,i)),n.$$.dirty[0]&37748743&&t(11,$=oe(_,h,P,I,L)),n.$$.dirty[0]&402653192&&!N&&z(o,c)},[h,P,I,N,s,T,C,V,O,w,D,$,l,r,H,R,F,K,Y,X,ue,b,_,v,g,L,i,o,c,f,p,d,ke,Le,ge,ae,x,le]}let B4=class extends tt{constructor(e){super(),nt(this,e,H4,M4,et,{contract:0,item:22,index:23,scrollTop:24,formEle:21},null,[-1,-1])}};function zf(n){let e,t=n[0].leverage+"",i,r;return{c(){e=y("div"),i=B(t),r=B("X"),this.h()},l(l){e=k(l,"DIV",{class:!0,style:!0});var s=S(e);i=A(s,t),r=A(s,"X"),s.forEach(m),this.h()},h(){E(e,"class","f1"),Jt(e,"width","55px")},m(l,s){G(l,e,s),u(e,i),u(e,r)},p(l,s){s&1&&t!==(t=l[0].leverage+"")&&W(i,t)},d(l){l&&m(e)}}}function A4(n){let e,t=n[0].pnl+"",i,r,l,s=n[1].settleCurrency+"",o;return{c(){e=y("span"),i=B(t),r=q(),l=y("span"),o=B(s),this.h()},l(a){e=k(a,"SPAN",{});var c=S(e);i=A(c,t),c.forEach(m),r=M(a),l=k(a,"SPAN",{class:!0});var f=S(l);o=A(f,s),f.forEach(m),this.h()},h(){E(l,"class","f24")},m(a,c){G(a,e,c),u(e,i),G(a,r,c),G(a,l,c),u(l,o)},p(a,c){c&1&&t!==(t=a[0].pnl+"")&&W(i,t),c&2&&s!==(s=a[1].settleCurrency+"")&&W(o,s)},d(a){a&&m(e),a&&m(r),a&&m(l)}}}function z4(n){let e,t=n[0].roi+"",i;return{c(){e=y("span"),i=B(t)},l(r){e=k(r,"SPAN",{});var l=S(e);i=A(l,t),l.forEach(m)},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&1&&t!==(t=r[0].roi+"")&&W(i,t)},d(r){r&&m(e)}}}function Q4(n){let e,t,i,r,l,s,o,a,c=n[0].side==="Buy"?"Long":"Sell",f,p,d=Number(n[0].leverage),h,_,v=n[1].pairName+"",g,b,P=n[6](He.PerpetualComplete)+"",I,T,C,V,O,w,D=n[6](yt.OpenPrice)+"",L,$,N=n[0].openPrice+"",z,H,R,F=n[6](yt[n[3]==="open"?"CurrentPrice":"ClosePrice"])+"",U,K,Y=n[0].closePrice+"",X,ee,Z,ue,ce,pe,me,oe,ke,Le=n[6](He.ReferralCode)+"",ge,ae,x,le=n[7].referralCode+"",fe,Se,Pe,Ce=n[6](He.ScanQRCode)+"",Ee,Ie=d&&zf(n);function ve(he,_e){return he[2]==="roi"?z4:A4}let de=ve(n),se=de(n);return{c(){e=y("div"),t=y("div"),i=y("img"),l=q(),s=y("div"),o=y("div"),a=y("div"),f=B(c),p=q(),Ie&&Ie.c(),h=q(),_=y("span"),g=B(v),b=q(),I=B(P),T=q(),C=y("div"),se.c(),V=q(),O=y("div"),w=y("span"),L=B(D),$=y("span"),z=B(N),H=q(),R=y("span"),U=B(F),K=y("span"),X=B(Y),ee=q(),Z=y("div"),ue=y("div"),ce=y("img"),me=q(),oe=y("div"),ke=y("div"),ge=B(Le),ae=q(),x=y("div"),fe=B(le),Se=q(),Pe=y("span"),Ee=B(Ce),this.h()},l(he){e=k(he,"DIV",{class:!0,style:!0});var _e=S(e);t=k(_e,"DIV",{class:!0});var be=S(t);i=k(be,"IMG",{alt:!0,height:!0,src:!0,width:!0,class:!0}),be.forEach(m),l=M(_e),s=k(_e,"DIV",{class:!0,style:!0});var Ve=S(s);o=k(Ve,"DIV",{class:!0});var Be=S(o);a=k(Be,"DIV",{class:!0});var Fe=S(a);f=A(Fe,c),Fe.forEach(m),p=M(Be),Ie&&Ie.l(Be),Be.forEach(m),h=M(Ve),_=k(Ve,"SPAN",{class:!0});var $e=S(_);g=A($e,v),b=M($e),I=A($e,P),$e.forEach(m),Ve.forEach(m),T=M(_e),C=k(_e,"DIV",{class:!0});var Ae=S(C);se.l(Ae),Ae.forEach(m),V=M(_e),O=k(_e,"DIV",{class:!0});var Ne=S(O);w=k(Ne,"SPAN",{});var Ge=S(w);L=A(Ge,D),Ge.forEach(m),$=k(Ne,"SPAN",{});var Xe=S($);z=A(Xe,N),Xe.forEach(m),H=M(Ne),R=k(Ne,"SPAN",{});var ye=S(R);U=A(ye,F),ye.forEach(m),K=k(Ne,"SPAN",{});var Ke=S(K);X=A(Ke,Y),Ke.forEach(m),Ne.forEach(m),ee=M(_e),Z=k(_e,"DIV",{class:!0});var Qe=S(Z);ue=k(Qe,"DIV",{class:!0});var ze=S(ue);ce=k(ze,"IMG",{alt:!0,height:!0,src:!0,width:!0}),me=M(ze),oe=k(ze,"DIV",{class:!0});var Ue=S(oe);ke=k(Ue,"DIV",{class:!0,style:!0});var st=S(ke);ge=A(st,Le),st.forEach(m),ae=M(Ue),x=k(Ue,"DIV",{class:!0,style:!0});var Oe=S(x);fe=A(Oe,le),Oe.forEach(m),Se=M(Ue),Pe=k(Ue,"SPAN",{class:!0,style:!0});var it=S(Pe);Ee=A(it,Ce),it.forEach(m),Ue.forEach(m),ze.forEach(m),Qe.forEach(m),_e.forEach(m),this.h()},h(){E(i,"alt","phemex logo"),E(i,"height","28"),hn(i.src,r=Xn.LOGO_LIGHT)||E(i,"src",r),E(i,"width","120"),E(i,"class","H-wnn1p8"),E(t,"class","header df aic jcsb H-wnn1p8"),E(a,"class","side-item f1 H-wnn1p8"),E(o,"class","side-box df lh22 tc H-wnn1p8"),E(_,"class","ml10"),E(s,"class","df aic"),Jt(s,"--share-color","var("+(n[0].side==="Buy"?"--buy":"--sell")+")"),E(C,"class","profit fw3 H-wnn1p8"),Te(C,"buy",n[4]),Te(C,"sell",!n[4]),E(O,"class","prices f14 H-wnn1p8"),E(ce,"alt","app download qr code"),E(ce,"height","66"),hn(ce.src,pe=bs.APP_DOWNLOAD_QR_CODE)||E(ce,"src",pe),E(ce,"width","66"),E(ke,"class","f14 lh18"),Jt(ke,"color","#fff"),Jt(ke,"opacity","0.6"),E(x,"class","f24 lh30"),Jt(x,"color","#fff"),E(Pe,"class","f14 lh20"),Jt(Pe,"color","#3CEAF3"),E(oe,"class","ml12"),E(ue,"class","df aic"),E(Z,"class","mt38 mb16 H-wnn1p8"),E(e,"class","body pr ovh H-wnn1p8"),Jt(e,"background-image","url("+n[5]+")")},m(he,_e){G(he,e,_e),u(e,t),u(t,i),u(e,l),u(e,s),u(s,o),u(o,a),u(a,f),u(o,p),Ie&&Ie.m(o,null),u(s,h),u(s,_),u(_,g),u(_,b),u(_,I),u(e,T),u(e,C),se.m(C,null),u(e,V),u(e,O),u(O,w),u(w,L),u(O,$),u($,z),u(O,H),u(O,R),u(R,U),u(O,K),u(K,X),u(e,ee),u(e,Z),u(Z,ue),u(ue,ce),u(ue,me),u(ue,oe),u(oe,ke),u(ke,ge),u(oe,ae),u(oe,x),u(x,fe),u(oe,Se),u(oe,Pe),u(Pe,Ee)},p(he,[_e]){_e&1&&c!==(c=he[0].side==="Buy"?"Long":"Sell")&&W(f,c),_e&1&&(d=Number(he[0].leverage)),d?Ie?Ie.p(he,_e):(Ie=zf(he),Ie.c(),Ie.m(o,null)):Ie&&(Ie.d(1),Ie=null),_e&2&&v!==(v=he[1].pairName+"")&&W(g,v),_e&64&&P!==(P=he[6](He.PerpetualComplete)+"")&&W(I,P),_e&1&&Jt(s,"--share-color","var("+(he[0].side==="Buy"?"--buy":"--sell")+")"),de===(de=ve(he))&&se?se.p(he,_e):(se.d(1),se=de(he),se&&(se.c(),se.m(C,null))),_e&16&&Te(C,"buy",he[4]),_e&16&&Te(C,"sell",!he[4]),_e&64&&D!==(D=he[6](yt.OpenPrice)+"")&&W(L,D),_e&1&&N!==(N=he[0].openPrice+"")&&W(z,N),_e&72&&F!==(F=he[6](yt[he[3]==="open"?"CurrentPrice":"ClosePrice"])+"")&&W(U,F),_e&1&&Y!==(Y=he[0].closePrice+"")&&W(X,Y),_e&64&&Le!==(Le=he[6](He.ReferralCode)+"")&&W(ge,Le),_e&128&&le!==(le=he[7].referralCode+"")&&W(fe,le),_e&64&&Ce!==(Ce=he[6](He.ScanQRCode)+"")&&W(Ee,Ce),_e&32&&Jt(e,"background-image","url("+he[5]+")")},i:rt,o:rt,d(he){he&&m(e),Ie&&Ie.d(),se.d()}}}function R4(n,e,t){let i,r,l,s;J(n,dt,p=>t(6,l=p)),J(n,Ns,p=>t(7,s=p));let{shareInfo:o}=e,{contract:a}=e,{mode:c}=e,{type:f}=e;return Kt(),n.$$set=p=>{"shareInfo"in p&&t(0,o=p.shareInfo),"contract"in p&&t(1,a=p.contract),"mode"in p&&t(2,c=p.mode),"type"in p&&t(3,f=p.type)},n.$$.update=()=>{n.$$.dirty&1&&t(4,i=!o.pnl.startsWith("-")),n.$$.dirty&16&&t(5,r=i?Xn.POSITION_SHARE_BG2:Xn.POSITION_SHARE_BG)},[o,a,c,f,i,r,l,s]}let pd=class extends tt{constructor(e){super(),nt(this,e,R4,Q4,et,{shareInfo:0,contract:1,mode:2,type:3})}};function F4(n){let e,t,i;return t=new pd({props:{mode:n[3],shareInfo:n[1],contract:n[2]}}),{c(){e=y("section"),te(t.$$.fragment),this.h()},l(r){e=k(r,"SECTION",{id:!0,class:!0});var l=S(e);re(t.$$.fragment,l),l.forEach(m),this.h()},h(){e.hidden=!0,E(e,"id","downloadMirror"),E(e,"class","H-1ffjaa8")},m(r,l){G(r,e,l),ne(t,e,null),n[4](e),i=!0},p(r,[l]){const s={};l&8&&(s.mode=r[3]),l&2&&(s.shareInfo=r[1]),l&4&&(s.contract=r[2]),t.$set(s)},i(r){i||(Q(t.$$.fragment,r),i=!0)},o(r){j(t.$$.fragment,r),i=!1},d(r){r&&m(e),ie(t),n[4](null)}}}function j4(n,e,t){let{shareInfo:i}=e,{contract:r}=e,{mode:l}=e,{saveElement:s}=e;Kt();function o(a){De[a?"unshift":"push"](()=>{s=a,t(0,s)})}return n.$$set=a=>{"shareInfo"in a&&t(1,i=a.shareInfo),"contract"in a&&t(2,r=a.contract),"mode"in a&&t(3,l=a.mode),"saveElement"in a&&t(0,s=a.saveElement)},[s,i,r,l,o]}let U4=class extends tt{constructor(e){super(),nt(this,e,j4,F4,et,{shareInfo:1,contract:2,mode:3,saveElement:0})}};function W4(n){let e,t,i,r,l,s,o,a,c,f,p,d;return e=new pd({props:{mode:n[3],shareInfo:n[0],contract:n[1],type:n[2]}}),e.$on("close",n[7]),{c(){te(e.$$.fragment),t=q(),i=y("div"),r=y("i"),l=B(""),s=q(),o=y("div"),a=y("i"),c=B(""),this.h()},l(h){re(e.$$.fragment,h),t=M(h),i=k(h,"DIV",{class:!0});var _=S(i);r=k(_,"I",{class:!0});var v=S(r);l=A(v,""),v.forEach(m),_.forEach(m),s=M(h),o=k(h,"DIV",{class:!0});var g=S(o);a=k(g,"I",{class:!0});var b=S(a);c=A(b,""),b.forEach(m),g.forEach(m),this.h()},h(){E(r,"class","iconfont dib f24 H-1r8wb86"),E(i,"class","arrow left-arrow tc usn H-1r8wb86"),E(a,"class","iconfont dib f24 H-1r8wb86"),E(o,"class","arrow right-arrow tc usn H-1r8wb86")},m(h,_){ne(e,h,_),G(h,t,_),G(h,i,_),u(i,r),u(r,l),G(h,s,_),G(h,o,_),u(o,a),u(a,c),f=!0,p||(d=[We(i,"click",n[9]),We(o,"click",n[9])],p=!0)},p(h,_){const v={};_&8&&(v.mode=h[3]),_&1&&(v.shareInfo=h[0]),_&2&&(v.contract=h[1]),_&4&&(v.type=h[2]),e.$set(v)},i(h){f||(Q(e.$$.fragment,h),f=!0)},o(h){j(e.$$.fragment,h),f=!1},d(h){ie(e,h),h&&m(t),h&&m(i),h&&m(s),h&&m(o),p=!1,jt(d)}}}function Qf(n){let e,t;return e=new Ep({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function G4(n){let e,t,i,r,l=n[5](He.Cancel)+"",s,o,a,c,f,p,d,h,_=n[5](Xi.SaveImage)+"",v,g,b,P,I,T=n[6].loading&&Qf();return{c(){e=y("div"),t=y("div"),i=y("div"),r=y("span"),s=B(l),o=q(),a=y("div"),c=y("div"),f=y("img"),d=q(),h=y("span"),v=B(_),g=q(),T&&T.c(),this.h()},l(C){e=k(C,"DIV",{class:!0,slot:!0});var V=S(e);t=k(V,"DIV",{class:!0});var O=S(t);i=k(O,"DIV",{class:!0});var w=S(i);r=k(w,"SPAN",{});var D=S(r);s=A(D,l),D.forEach(m),w.forEach(m),o=M(O),a=k(O,"DIV",{class:!0});var L=S(a);c=k(L,"DIV",{class:!0,style:!0});var $=S(c);f=k($,"IMG",{width:!0,height:!0,src:!0,alt:!0}),$.forEach(m),d=M(L),h=k(L,"SPAN",{class:!0});var N=S(h);v=A(N,_),N.forEach(m),g=M(L),T&&T.l(L),L.forEach(m),O.forEach(m),V.forEach(m),this.h()},h(){E(i,"class","copy df aic jcc f1 br8 cp lh54 H-1r8wb86"),E(f,"width","24"),E(f,"height","24"),hn(f.src,p=Xn.SAVE)||E(f,"src",p),E(f,"alt","save image"),E(c,"class","df pr"),Jt(c,"width","24px"),Jt(c,"height","24px"),E(h,"class","ml4"),E(a,"class","save f1 br8 df aic jcc pr ml10 cp lh54 H-1r8wb86"),E(t,"class","bottom df aic ph24 H-1r8wb86"),E(e,"class","pr"),E(e,"slot","footer")},m(C,V){G(C,e,V),u(e,t),u(t,i),u(i,r),u(r,s),u(t,o),u(t,a),u(a,c),u(c,f),u(a,d),u(a,h),u(h,v),u(a,g),T&&T.m(a,null),b=!0,P||(I=[We(i,"click",n[7]),We(a,"click",n[8])],P=!0)},p(C,V){(!b||V&32)&&l!==(l=C[5](He.Cancel)+"")&&W(s,l),(!b||V&32)&&_!==(_=C[5](Xi.SaveImage)+"")&&W(v,_),C[6].loading?T?V&64&&Q(T,1):(T=Qf(),T.c(),Q(T,1),T.m(a,null)):T&&(ot(),j(T,1,1,()=>{T=null}),at())},i(C){b||(Q(T),b=!0)},o(C){j(T),b=!1},d(C){C&&m(e),T&&T.d(),P=!1,jt(I)}}}function K4(n){let e,t,i,r,l;e=new bn({props:{class:"share-dialog",style:"min-width:600px;",$$slots:{footer:[G4],default:[W4]},$$scope:{ctx:n}}});function s(a){n[12](a)}let o={mode:n[3],shareInfo:n[0],contract:n[1]};return n[4]!==void 0&&(o.saveElement=n[4]),i=new U4({props:o}),De.push(()=>qe(i,"saveElement",s)),{c(){te(e.$$.fragment),t=q(),te(i.$$.fragment)},l(a){re(e.$$.fragment,a),t=M(a),re(i.$$.fragment,a)},m(a,c){ne(e,a,c),G(a,t,c),ne(i,a,c),l=!0},p(a,[c]){const f={};c&32879&&(f.$$scope={dirty:c,ctx:a}),e.$set(f);const p={};c&8&&(p.mode=a[3]),c&1&&(p.shareInfo=a[0]),c&2&&(p.contract=a[1]),!r&&c&16&&(r=!0,p.saveElement=a[4],Me(()=>r=!1)),i.$set(p)},i(a){l||(Q(e.$$.fragment,a),Q(i.$$.fragment,a),l=!0)},o(a){j(e.$$.fragment,a),j(i.$$.fragment,a),l=!1},d(a){ie(e,a),a&&m(t),ie(i,a)}}}function X4(n,e,t){let i,r,l,s;J(n,Ns,b=>t(10,i=b)),J(n,Qi,b=>t(11,r=b)),J(n,dt,b=>t(5,l=b)),J(n,f1,b=>t(6,s=b));let{shareInfo:o}=e,{contract:a}=e,{type:c}=e;const f=Kt();let p="roi",d=null;function h(){f("close")}function _(){d&&p1.next({element:d,fileName:"phemex_share.jpeg"})}function v(){t(3,p=p==="roi"?"pnl":"roi")}function g(b){d=b,t(4,d)}return n.$$set=b=>{"shareInfo"in b&&t(0,o=b.shareInfo),"contract"in b&&t(1,a=b.contract),"type"in b&&t(2,c=b.type)},n.$$.update=()=>{n.$$.dirty&3072&&u1({fixLink:r,path:cn.STRATEGY_SQUARE,referralCode:i.referralCode})},[o,a,c,p,d,l,s,h,_,v,i,r,g]}let dd=class extends tt{constructor(e){super(),nt(this,e,X4,K4,et,{shareInfo:0,contract:1,type:2})}};function Rf(n){let e,t;return{c(){e=y("div"),t=B("Coin-M"),this.h()},l(i){e=k(i,"DIV",{class:!0});var r=S(e);t=A(r,"Coin-M"),r.forEach(m),this.h()},h(){E(e,"class","coin-margin mr4 br4 wsn lh16 f12 T2 H-qqualh")},m(i,r){G(i,e,r),u(e,t)},d(i){i&&m(e)}}}function Ff(n){let e,t=(["MUSDT","USDT"].includes(n[0].settleCurrency)?n[0].marginRatio:"--")+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","margin-level H-qqualh")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&1&&t!==(t=(["MUSDT","USDT"].includes(r[0].settleCurrency)?r[0].marginRatio:"--")+"")&&W(i,t)},d(r){r&&m(e)}}}function Y4(n){let e,t=n[0].marginWU+"",i,r,l,s,o,a;return{c(){e=y("div"),i=B(t),r=q(),l=y("i"),s=B(""),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=S(e);i=A(f,t),r=M(f),l=k(f,"I",{class:!0});var p=S(l);s=A(p,""),p.forEach(m),f.forEach(m),this.h()},h(){E(l,"class","iconfont f14 T2 cp H-qqualh"),E(e,"class","lh18 cp editable H-qqualh")},m(c,f){G(c,e,f),u(e,i),u(e,r),u(e,l),u(l,s),o||(a=We(e,"click",n[18]),o=!0)},p(c,f){f[0]&1&&t!==(t=c[0].marginWU+"")&&W(i,t)},d(c){c&&m(e),o=!1,a()}}}function J4(n){let e,t=n[0].marginWU+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","lh18 f12")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&1&&t!==(t=r[0].marginWU+"")&&W(i,t)},d(r){r&&m(e)}}}function jf(n){let e=n[0].marginFiatWU+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[0]&1&&e!==(e=i[0].marginFiatWU+"")&&W(t,e)},d(i){i&&m(t)}}}function Z4(n){let e,t,i=n[0].unrealisedPnlByLastPriceWU+"",r,l,s,o,a,c,f,p=n[0].roiByLastPrice+"",d,h,_=n[0].unrealisedPnlByLastPriceFiatWU+"",v;return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),s=y("i"),o=B(""),a=q(),c=y("div"),f=B("("),d=B(p),h=B(") "),v=B(_),this.h()},l(g){e=k(g,"DIV",{});var b=S(e);t=k(b,"DIV",{class:!0});var P=S(t);r=A(P,i),l=M(P),s=k(P,"I",{class:!0});var I=S(s);o=A(I,""),I.forEach(m),P.forEach(m),a=M(b),c=k(b,"DIV",{class:!0});var T=S(c);f=A(T,"("),d=A(T,p),h=A(T,") "),v=A(T,_),T.forEach(m),b.forEach(m),this.h()},h(){E(s,"class","iconfont ml2 f12 T2 cp H-qqualh"),E(t,"class","df aic lh18 f12 H-qqualh"),Te(t,"up",n[0].unrealisedPnlEvByLastPrice>0),Te(t,"down",n[0].unrealisedPnlEvByLastPrice<0),E(c,"class","min-text lh18 f10 fw1 T2 H-qqualh")},m(g,b){G(g,e,b),u(e,t),u(t,r),u(t,l),u(t,s),u(s,o),u(e,a),u(e,c),u(c,f),u(c,d),u(c,h),u(c,v)},p(g,b){b[0]&1&&i!==(i=g[0].unrealisedPnlByLastPriceWU+"")&&W(r,i),b[0]&1&&Te(t,"up",g[0].unrealisedPnlEvByLastPrice>0),b[0]&1&&Te(t,"down",g[0].unrealisedPnlEvByLastPrice<0),b[0]&1&&p!==(p=g[0].roiByLastPrice+"")&&W(d,p),b[0]&1&&_!==(_=g[0].unrealisedPnlByLastPriceFiatWU+"")&&W(v,_)},d(g){g&&m(e)}}}function x4(n){let e,t,i=n[0].unrealisedPnlByMarkPriceWU+"",r,l,s,o,a,c,f,p=n[0].roiByMarkPrice+"",d,h,_=n[0].unrealisedPnlByMarkPriceFiatWU+"",v;return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),s=y("i"),o=B(""),a=q(),c=y("div"),f=B("("),d=B(p),h=B(") "),v=B(_),this.h()},l(g){e=k(g,"DIV",{});var b=S(e);t=k(b,"DIV",{class:!0});var P=S(t);r=A(P,i),l=M(P),s=k(P,"I",{class:!0});var I=S(s);o=A(I,""),I.forEach(m),P.forEach(m),a=M(b),c=k(b,"DIV",{class:!0});var T=S(c);f=A(T,"("),d=A(T,p),h=A(T,") "),v=A(T,_),T.forEach(m),b.forEach(m),this.h()},h(){E(s,"class","iconfont ml2 f12 T2 cp H-qqualh"),E(t,"class","df aic lh18 f12 H-qqualh"),Te(t,"up",n[0].unrealisedPnlEvByMarkPrice>0),Te(t,"down",n[0].unrealisedPnlEvByMarkPrice<0),E(c,"class","min-text lh18 f10 fw1 T2 H-qqualh")},m(g,b){G(g,e,b),u(e,t),u(t,r),u(t,l),u(t,s),u(s,o),u(e,a),u(e,c),u(c,f),u(c,d),u(c,h),u(c,v)},p(g,b){b[0]&1&&i!==(i=g[0].unrealisedPnlByMarkPriceWU+"")&&W(r,i),b[0]&1&&Te(t,"up",g[0].unrealisedPnlEvByMarkPrice>0),b[0]&1&&Te(t,"down",g[0].unrealisedPnlEvByMarkPrice<0),b[0]&1&&p!==(p=g[0].roiByMarkPrice+"")&&W(d,p),b[0]&1&&_!==(_=g[0].unrealisedPnlByMarkPriceFiatWU+"")&&W(v,_)},d(g){g&&m(e)}}}function Uf(n){let e,t=n[0].realisedPnlFiatWU+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","min-text lh18 f10 fw1 T2 H-qqualh")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&1&&t!==(t=r[0].realisedPnlFiatWU+"")&&W(i,t)},d(r){r&&m(e)}}}function Wf(n){let e,t=n[12](Do.ViewMore)+"",i,r,l,s,o,a,c,f;return{c(){e=y("div"),i=B(t),r=q(),l=B(n[8]),s=q(),o=y("i"),a=B(""),this.h()},l(p){e=k(p,"DIV",{class:!0});var d=S(e);i=A(d,t),r=M(d),l=A(d,n[8]),s=M(d),o=k(d,"I",{class:!0});var h=S(o);a=A(h,""),h.forEach(m),d.forEach(m),this.h()},h(){E(o,"class","iconfont leverage-arrow H-qqualh"),E(e,"class","min-text lh20 f10 T3 cp H-qqualh")},m(p,d){G(p,e,d),u(e,i),u(e,r),u(e,l),u(e,s),u(e,o),u(o,a),c||(f=We(e,"click",n[19]),c=!0)},p(p,d){d[0]&4096&&t!==(t=p[12](Do.ViewMore)+"")&&W(i,t),d[0]&256&&W(l,p[8])},d(p){p&&m(e),c=!1,f()}}}function ek(n){let e,t,i,r,l,s=n[3].pairName+"",o,a,c,f=n[12](He[n[3].type])+"",p,d,h,_,v,g,b=n[21](n[0],n[14])+"",P,I,T,C,V,O,w,D,L,$,N,z=n[0].avgEntryPrice+"",H,R,F,U=n[0].markPrice+"",K,Y,X,ee=Tn(n[0].liquidationPrice,n[3].tickSize)+"",Z,ue,ce,pe,me,oe,ke,Le,ge=(n[0].isCross?n[12](on.Cross):n[12](on.Isolated))+"",ae,x,le,fe,Se,Pe,Ce,Ee,Ie=n[0].realisedPnlWU+"",ve,de,se,he,_e,be=di.displayTPSL(n[6][0],n[5][0])+"",Ve,Be,Fe=Gf(n[4][0])+"",$e,Ae,Ne,Ge,Xe,ye,Ke,Qe,ze,Ue,st,Oe,it,ct,ft,_t=n[12](yt.Market)+"",Et,gt,Dt,It,pt=n[3].contractSide<0&&Rf(),mt=n[15]&&Ff(n);function Nt($t,ht){return $t[0].isCross?J4:Y4}let Rt=Nt(n),je=Rt(n),lt=n[0].marginFiatWU&&jf(n);function Yt($t,ht){return $t[11]===Ei.Mark?x4:Z4}let tn=Yt(n),Ze=tn(n),St=n[0].realisedPnlFiatWU&&Uf(n),kt=n[9]&&Wf(n);return Qe=new I4({props:{position:n[0]}}),st=new B4({props:{contract:n[3],item:n[0],index:n[2],scrollTop:n[1],formEle:n[7]}}),{c(){e=y("div"),t=y("div"),i=y("div"),r=y("div"),l=y("span"),o=B(s),a=q(),c=y("span"),p=B(f),d=q(),h=y("div"),pt&&pt.c(),_=q(),v=y("div"),g=y("span"),P=B(b),I=q(),T=y("i"),C=B(""),V=q(),O=y("div"),w=y("div"),D=B(n[10]),$=q(),N=y("div"),H=B(z),R=q(),F=y("div"),K=B(U),Y=q(),X=y("div"),Z=B(ee),ue=q(),mt&&mt.c(),ce=q(),pe=y("div"),me=y("div"),je.c(),oe=q(),ke=y("div"),lt&&lt.c(),Le=B(`
        (`),ae=B(ge),x=B(")"),le=q(),fe=y("div"),Se=y("div"),Ze.c(),Pe=q(),Ce=y("div"),Ee=y("div"),ve=B(Ie),de=q(),St&&St.c(),se=q(),he=y("div"),_e=y("div"),Ve=B(be),Be=B(`
      (`),$e=B(Fe),Ae=B(`)
      `),Ne=y("i"),Ge=B(""),Xe=q(),kt&&kt.c(),ye=q(),Ke=y("div"),te(Qe.$$.fragment),ze=q(),Ue=y("div"),te(st.$$.fragment),Oe=q(),it=y("div"),ct=q(),ft=y("button"),Et=B(_t),this.h()},l($t){e=k($t,"DIV",{class:!0});var ht=S(e);t=k(ht,"DIV",{class:!0});var At=S(t);i=k(At,"DIV",{style:!0});var Mt=S(i);r=k(Mt,"DIV",{class:!0});var fn=S(r);l=k(fn,"SPAN",{});var oi=S(l);o=A(oi,s),oi.forEach(m),a=M(fn),c=k(fn,"SPAN",{class:!0});var Ti=S(c);p=A(Ti,f),Ti.forEach(m),fn.forEach(m),d=M(Mt),h=k(Mt,"DIV",{class:!0});var ti=S(h);pt&&pt.l(ti),_=M(ti),v=k(ti,"DIV",{class:!0});var Qn=S(v);g=k(Qn,"SPAN",{});var ai=S(g);P=A(ai,b),ai.forEach(m),I=M(Qn),T=k(Qn,"I",{class:!0});var Rn=S(T);C=A(Rn,""),Rn.forEach(m),Qn.forEach(m),ti.forEach(m),Mt.forEach(m),At.forEach(m),V=M(ht),O=k(ht,"DIV",{class:!0,"data-size":!0});var Ui=S(O);w=k(Ui,"DIV",{class:!0});var lo=S(w);D=A(lo,n[10]),lo.forEach(m),Ui.forEach(m),$=M(ht),N=k(ht,"DIV",{class:!0});var so=S(N);H=A(so,z),so.forEach(m),R=M(ht),F=k(ht,"DIV",{class:!0});var oo=S(F);K=A(oo,U),oo.forEach(m),Y=M(ht),X=k(ht,"DIV",{class:!0});var ao=S(X);Z=A(ao,ee),ao.forEach(m),ue=M(ht),mt&&mt.l(ht),ce=M(ht),pe=k(ht,"DIV",{class:!0});var co=S(pe);me=k(co,"DIV",{class:!0});var bl=S(me);je.l(bl),oe=M(bl),ke=k(bl,"DIV",{class:!0});var tl=S(ke);lt&&lt.l(tl),Le=A(tl,`
        (`),ae=A(tl,ge),x=A(tl,")"),tl.forEach(m),bl.forEach(m),co.forEach(m),le=M(ht),fe=k(ht,"DIV",{class:!0});var fo=S(fe);Se=k(fo,"DIV",{class:!0});var uo=S(Se);Ze.l(uo),uo.forEach(m),fo.forEach(m),Pe=M(ht),Ce=k(ht,"DIV",{class:!0});var El=S(Ce);Ee=k(El,"DIV",{class:!0});var po=S(Ee);ve=A(po,Ie),po.forEach(m),de=M(El),St&&St.l(El),El.forEach(m),se=M(ht),he=k(ht,"DIV",{class:!0});var yl=S(he);_e=k(yl,"DIV",{class:!0});var Cr=S(_e);Ve=A(Cr,be),Be=A(Cr,`
      (`),$e=A(Cr,Fe),Ae=A(Cr,`)
      `),Ne=k(Cr,"I",{class:!0});var mo=S(Ne);Ge=A(mo,""),mo.forEach(m),Cr.forEach(m),Xe=M(yl),kt&&kt.l(yl),yl.forEach(m),ye=M(ht),Ke=k(ht,"DIV",{class:!0});var ho=S(Ke);re(Qe.$$.fragment,ho),ho.forEach(m),ze=M(ht),Ue=k(ht,"DIV",{class:!0});var Tr=S(Ue);re(st.$$.fragment,Tr),Oe=M(Tr),it=k(Tr,"DIV",{class:!0}),S(it).forEach(m),ct=M(Tr),ft=k(Tr,"BUTTON",{class:!0});var _o=S(ft);Et=A(_o,_t),_o.forEach(m),Tr.forEach(m),ht.forEach(m),this.h()},h(){E(c,"class","ml4 mr4"),E(r,"class","df aic lh18"),E(T,"class","iconfont leverage-arrow H-qqualh"),E(v,"class","leverage br4 wsn lh16 f12 T3 H-qqualh"),Te(v,"long",n[0].side==="Buy"),Te(v,"short",n[0].side==="Sell"),E(h,"class","df mt2"),Jt(i,"line-height","normal"),Te(i,"linear-gradient-symbol",n[13]-320<1200),E(t,"class","symbol pr ps cp B1 H-qqualh"),Te(t,"sell-c",n[0].side==="Sell"),Te(t,"buy-c",n[0].side==="Buy"),E(w,"class","pl16"),E(O,"class","position-size H-qqualh"),E(O,"data-size",L=n[0].size),E(N,"class","H-qqualh"),E(F,"class","H-qqualh"),E(X,"class","H-qqualh"),Te(X,"liq",!n[15]),E(ke,"class","min-text lh18 f10 fw1 H-qqualh"),E(me,"class","df fdc jcfe left H-qqualh"),E(pe,"class","pv4 H-qqualh"),E(Se,"class","editable df fdc jcfe left cp H-qqualh"),E(fe,"class","pv4 H-qqualh"),E(Ee,"class","lh18 f12 H-qqualh"),Te(Ee,"up",n[0].realisedPnlEv>0),Te(Ee,"down",n[0].realisedPnlEv<0),E(Ce,"class","pv4 fdc pnl H-qqualh"),E(Ne,"class","iconfont f14 T2 H-qqualh"),E(_e,"class","tp-sl editable lh20 cp H-qqualh"),E(he,"class","tpsl fdc two-line H-qqualh"),E(Ke,"class","adl H-qqualh"),E(it,"class","split H-qqualh"),E(ft,"class","position-market market lh30 cp ooo fw2 H-qqualh"),E(Ue,"class","action pr ps pr16 pl8 B1 H-qqualh"),Te(Ue,"linear-gradient-action",n[13]-320<1200),E(e,"class","history-list wrap fw2 T1 H-qqualh")},m($t,ht){G($t,e,ht),u(e,t),u(t,i),u(i,r),u(r,l),u(l,o),u(r,a),u(r,c),u(c,p),u(i,d),u(i,h),pt&&pt.m(h,null),u(h,_),u(h,v),u(v,g),u(g,P),u(v,I),u(v,T),u(T,C),u(e,V),u(e,O),u(O,w),u(w,D),u(e,$),u(e,N),u(N,H),u(e,R),u(e,F),u(F,K),u(e,Y),u(e,X),u(X,Z),u(e,ue),mt&&mt.m(e,null),u(e,ce),u(e,pe),u(pe,me),je.m(me,null),u(me,oe),u(me,ke),lt&&lt.m(ke,null),u(ke,Le),u(ke,ae),u(ke,x),u(e,le),u(e,fe),u(fe,Se),Ze.m(Se,null),u(e,Pe),u(e,Ce),u(Ce,Ee),u(Ee,ve),u(Ce,de),St&&St.m(Ce,null),u(e,se),u(e,he),u(he,_e),u(_e,Ve),u(_e,Be),u(_e,$e),u(_e,Ae),u(_e,Ne),u(Ne,Ge),u(he,Xe),kt&&kt.m(he,null),u(e,ye),u(e,Ke),ne(Qe,Ke,null),u(e,ze),u(e,Ue),ne(st,Ue,null),u(Ue,Oe),u(Ue,it),u(Ue,ct),u(Ue,ft),u(ft,Et),n[31](Ue),gt=!0,Dt||(It=[We(v,"click",Zn(function(){Tt(n[22](n[0]))&&n[22](n[0]).apply(this,arguments)})),We(t,"click",n[16]),We(O,"click",n[17]),We(Se,"click",n[23]),We(_e,"click",n[19]),We(ft,"click",n[20])],Dt=!0)},p($t,ht){n=$t,(!gt||ht[0]&8)&&s!==(s=n[3].pairName+"")&&W(o,s),(!gt||ht[0]&4104)&&f!==(f=n[12](He[n[3].type])+"")&&W(p,f),n[3].contractSide<0?pt||(pt=Rf(),pt.c(),pt.m(h,_)):pt&&(pt.d(1),pt=null),(!gt||ht[0]&16385)&&b!==(b=n[21](n[0],n[14])+"")&&W(P,b),(!gt||ht[0]&1)&&Te(v,"long",n[0].side==="Buy"),(!gt||ht[0]&1)&&Te(v,"short",n[0].side==="Sell"),(!gt||ht[0]&8192)&&Te(i,"linear-gradient-symbol",n[13]-320<1200),(!gt||ht[0]&1)&&Te(t,"sell-c",n[0].side==="Sell"),(!gt||ht[0]&1)&&Te(t,"buy-c",n[0].side==="Buy"),(!gt||ht[0]&1024)&&W(D,n[10]),(!gt||ht[0]&1&&L!==(L=n[0].size))&&E(O,"data-size",L),(!gt||ht[0]&1)&&z!==(z=n[0].avgEntryPrice+"")&&W(H,z),(!gt||ht[0]&1)&&U!==(U=n[0].markPrice+"")&&W(K,U),(!gt||ht[0]&9)&&ee!==(ee=Tn(n[0].liquidationPrice,n[3].tickSize)+"")&&W(Z,ee),(!gt||ht[0]&32768)&&Te(X,"liq",!n[15]),n[15]?mt?mt.p(n,ht):(mt=Ff(n),mt.c(),mt.m(e,ce)):mt&&(mt.d(1),mt=null),Rt===(Rt=Nt(n))&&je?je.p(n,ht):(je.d(1),je=Rt(n),je&&(je.c(),je.m(me,oe))),n[0].marginFiatWU?lt?lt.p(n,ht):(lt=jf(n),lt.c(),lt.m(ke,Le)):lt&&(lt.d(1),lt=null),(!gt||ht[0]&4097)&&ge!==(ge=(n[0].isCross?n[12](on.Cross):n[12](on.Isolated))+"")&&W(ae,ge),tn===(tn=Yt(n))&&Ze?Ze.p(n,ht):(Ze.d(1),Ze=tn(n),Ze&&(Ze.c(),Ze.m(Se,null))),(!gt||ht[0]&1)&&Ie!==(Ie=n[0].realisedPnlWU+"")&&W(ve,Ie),(!gt||ht[0]&1)&&Te(Ee,"up",n[0].realisedPnlEv>0),(!gt||ht[0]&1)&&Te(Ee,"down",n[0].realisedPnlEv<0),n[0].realisedPnlFiatWU?St?St.p(n,ht):(St=Uf(n),St.c(),St.m(Ce,null)):St&&(St.d(1),St=null),(!gt||ht[0]&96)&&be!==(be=di.displayTPSL(n[6][0],n[5][0])+"")&&W(Ve,be),(!gt||ht[0]&16)&&Fe!==(Fe=Gf(n[4][0])+"")&&W($e,Fe),n[9]?kt?kt.p(n,ht):(kt=Wf(n),kt.c(),kt.m(he,null)):kt&&(kt.d(1),kt=null);const At={};ht[0]&1&&(At.position=n[0]),Qe.$set(At);const Mt={};ht[0]&8&&(Mt.contract=n[3]),ht[0]&1&&(Mt.item=n[0]),ht[0]&4&&(Mt.index=n[2]),ht[0]&2&&(Mt.scrollTop=n[1]),ht[0]&128&&(Mt.formEle=n[7]),st.$set(Mt),(!gt||ht[0]&4096)&&_t!==(_t=n[12](yt.Market)+"")&&W(Et,_t),(!gt||ht[0]&8192)&&Te(Ue,"linear-gradient-action",n[13]-320<1200)},i($t){gt||(Q(Qe.$$.fragment,$t),Q(st.$$.fragment,$t),gt=!0)},o($t){j(Qe.$$.fragment,$t),j(st.$$.fragment,$t),gt=!1},d($t){$t&&m(e),pt&&pt.d(),mt&&mt.d(),je.d(),lt&&lt.d(),Ze.d(),St&&St.d(),kt&&kt.d(),ie(Qe),ie(st),n[31](null),Dt=!1,jt(It)}}}function Gf(n){return n?["TrailingTakeProfitByProportionPeg","TrailingStopByProportionPeg"].includes(n.pegPriceType)?n.pegOffsetProportion:n.pegOffsetValue:"-"}function tk(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C,V,O,w,D,L;J(n,ss,ge=>t(11,d=ge)),J(n,vr,ge=>t(33,h=ge)),J(n,Ni,ge=>t(34,_=ge)),J(n,Ls,ge=>t(35,v=ge)),J(n,Ds,ge=>t(36,g=ge)),J(n,Ai,ge=>t(37,b=ge)),J(n,dt,ge=>t(12,P=ge)),J(n,br,ge=>t(26,I=ge)),J(n,Kl,ge=>t(27,T=ge)),J(n,An,ge=>t(28,C=ge)),J(n,zn,ge=>t(29,V=ge)),J(n,Ri,ge=>t(30,O=ge)),J(n,Bi,ge=>t(13,w=ge)),J(n,d1,ge=>t(14,D=ge)),J(n,sr,ge=>t(15,L=ge));let{item:$}=e,{scrollTop:N=0}=e,{index:z=0}=e,H=null,R=null;function F(ge,ae){return{[we.Cont]:ae.sizeByContWU,[we.Base]:ae.sizeByValueWU,[we.Coin]:ae.sizeByCoinWU}[ge]}function U(){Pt.send("trade-pair","change",{type:"Perpetual",symbol:$.symbol})}function K(ge){if(ge.target.classList.contains("position-size")){const ae=ge.target.dataset.size;Pt.send("global","quantity-click",{quantity:ae})}}function Y(){en.create(m4,{contract:R,position:$})}function X(){if(p===0)return Z();ee()}function ee(){en.create(rd,{source:"position",contract:R,position:$})}function Z(){en.create(Fl,{source:"position",contract:R,position:$,closeMode:l})}function ue(){en.create(P4,{contract:R,position:$})}function ce(ge,ae){const{leverage:x,side:le,actualLeverage:fe,isCross:Se}=ge,Pe=P(le==="Buy"?He.Long:He.Short),Ce=Se&&ae===m1.Actual?fe:x;return`${Pe} ${Ce}X`}function pe(ge,ae,x){return ge.length>1||ae.length>1||x.length>1}function me(ge){return function(){const ae=oe(R,ge,b,g,v,_);en.create(Zp,ae)}}function oe(ge,ae,x,le,fe,Se){const Pe=ui.createRawRiskLimitOptions(ge,h),Ce=ui.createRealRiskLimit(ae,Pe,fe),{type:Ee}=ge;if(Ee==="Perpetual"){const Ie=Ki(ge,ae,le,Ce,Se);return{positions:[ae],contract:ge,leverageOptions:Ie}}if(Ee==="PerpetualV2"){const Ie=x.filter(({symbol:de})=>ae.symbol===de);if(Ie.every(({posMode:de})=>de===Ct.OneWay)){const de=Ki(ge,ae,le,Ce,Se);return{posMode:Ct.OneWay,positions:[ae],contract:ge,leverageOptions:de}}else{const de=Ie.filter(({posSide:Be})=>["Short","Long"].includes(Be)).find(({posSide:Be})=>Be!==ae.posSide),se=ui.createRealRiskLimit(de,Pe,fe),he=Ki(ge,ae,le,Ce,Se),_e=Ki(ge,de,le,se,Se),be=ae.posSide==="Long"?he:_e,Ve=ae.posSide==="Long"?_e:he;return{posMode:Ct.Hedge,positions:Ie,contract:ge,leverageOptions:be,leverageOptionsShort:Ve}}}}function ke(){const ge={side:$.side,leverage:`${Math.abs(Number($.leverage))}`,openPrice:$.avgEntryPrice,closePrice:$.markPrice,pnl:d===Ei.Mark?$.unrealisedPnlByMarkPrice:$.unrealisedPnlByLastPrice,roi:d===Ei.Mark?$.roiByMarkPrice:$.roiByLastPrice};en.create(dd,{type:"open",contract:R,shareInfo:ge})}function Le(ge){De[ge?"unshift":"push"](()=>{H=ge,t(7,H)})}return n.$$set=ge=>{"item"in ge&&t(0,$=ge.item),"scrollTop"in ge&&t(1,N=ge.scrollTop),"index"in ge&&t(2,z=ge.index)},n.$$.update=()=>{n.$$.dirty[0]&1073741825&&t(3,R=er.findContract(O,$.symbol)),n.$$.dirty[0]&805306376&&t(25,i=R.type==="Perpetual"?V:C),n.$$.dirty[0]&33554433&&t(10,r=F(i,$)),n.$$.dirty[0]&134217737&&(l=T(R.symbol,$.posSide)),n.$$.dirty[0]&67108865&&t(24,s=I($.symbol,$.posSide)),n.$$.dirty[0]&16777216&&t(6,o=s.tp.All),n.$$.dirty[0]&16777216&&t(5,a=s.sl.All),n.$$.dirty[0]&16777216&&t(4,c=s.ts.All),n.$$.dirty[0]&112&&t(9,f=pe(o,a,c)),n.$$.dirty[0]&112&&t(8,p=o.length+a.length+c.length)},[$,N,z,R,c,a,o,H,p,f,r,d,P,w,D,L,U,K,Y,X,ue,ce,me,ke,s,i,I,T,C,V,O,Le]}let nk=class extends tt{constructor(e){super(),nt(this,e,tk,ek,et,{item:0,scrollTop:1,index:2},null,[-1,-1])}};function Kf(n,e,t){const i=n.slice();return i[18]=e[t],i[20]=t,i}function ik(n){let e,t=n[7](He.NoData)+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","no-data tc T3 H-32j4jr")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&128&&t!==(t=r[7](He.NoData)+"")&&W(i,t)},i:rt,o:rt,d(r){r&&m(e)}}}function rk(n){let e,t;return e=new Ep({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p:rt,i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function lk(n){let e=[],t=new Map,i,r,l=n[4];const s=o=>o[18].symbol+o[18].posSide;for(let o=0;o<l.length;o+=1){let a=Kf(n,l,o),c=s(a);t.set(c,e[o]=Xf(c,a))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();i=ut()},l(o){for(let a=0;a<e.length;a+=1)e[a].l(o);i=ut()},m(o,a){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,a);G(o,i,a),r=!0},p(o,a){a&17&&(l=o[4],ot(),e=Si(e,a,s,1,o,l,t,i.parentNode,lr,Xf,i,Kf),at())},i(o){if(!r){for(let a=0;a<l.length;a+=1)Q(e[a]);r=!0}},o(o){for(let a=0;a<e.length;a+=1)j(e[a]);r=!1},d(o){for(let a=0;a<e.length;a+=1)e[a].d(o);o&&m(i)}}}function Xf(n,e){let t,i,r;return i=new nk({props:{item:e[18],index:e[20],scrollTop:e[0]}}),{key:n,first:null,c(){t=ut(),te(i.$$.fragment),this.h()},l(l){t=ut(),re(i.$$.fragment,l),this.h()},h(){this.first=t},m(l,s){G(l,t,s),ne(i,l,s),r=!0},p(l,s){e=l;const o={};s&16&&(o.item=e[18]),s&16&&(o.index=e[20]),s&1&&(o.scrollTop=e[0]),i.$set(o)},i(l){r||(Q(i.$$.fragment,l),r=!0)},o(l){j(i.$$.fragment,l),r=!1},d(l){l&&m(t),ie(i,l)}}}function sk(n){let e,t,i,r,l,s,o,a,c;function f(g){n[13](g)}function p(g){n[14](g)}let d={};n[3]!==void 0&&(d.sortDirection=n[3]),n[2]!==void 0&&(d.sortKey=n[2]),i=new n4({props:d}),De.push(()=>qe(i,"sortDirection",f)),De.push(()=>qe(i,"sortKey",p));const h=[lk,rk,ik],_=[];function v(g,b){return g[4].length>0?0:g[6]&&!g[1]?1:2}return o=v(n),a=_[o]=h[o](n),{c(){e=y("div"),t=y("div"),te(i.$$.fragment),s=q(),a.c(),this.h()},l(g){e=k(g,"DIV",{class:!0});var b=S(e);t=k(b,"DIV",{class:!0});var P=S(t);re(i.$$.fragment,P),s=M(P),a.l(P),P.forEach(m),b.forEach(m),this.h()},h(){E(t,"class","grid H-32j4jr"),Te(t,"gtc10",!n[5]),Te(t,"gtc11",n[5]),E(e,"class","wrap f12 H-32j4jr")},m(g,b){G(g,e,b),u(e,t),ne(i,t,null),u(t,s),_[o].m(t,null),c=!0},p(g,[b]){const P={};!r&&b&8&&(r=!0,P.sortDirection=g[3],Me(()=>r=!1)),!l&&b&4&&(l=!0,P.sortKey=g[2],Me(()=>l=!1)),i.$set(P);let I=o;o=v(g),o===I?_[o].p(g,b):(ot(),j(_[I],1,1,()=>{_[I]=null}),at(),a=_[o],a?a.p(g,b):(a=_[o]=h[o](g),a.c()),Q(a,1),a.m(t,null)),(!c||b&32)&&Te(t,"gtc10",!g[5]),(!c||b&32)&&Te(t,"gtc11",g[5])},i(g){c||(Q(i.$$.fragment,g),Q(a),c=!0)},o(g){j(i.$$.fragment,g),j(a),c=!1},d(g){g&&m(e),ie(i),_[o].d()}}}function ok(n,e,t){let i,r,l,s,o,a,c,f;J(n,Ri,C=>t(15,i=C)),J(n,ss,C=>t(9,r=C)),J(n,Xt,C=>t(10,l=C)),J(n,mi,C=>t(11,s=C)),J(n,Ai,C=>t(12,o=C)),J(n,sr,C=>t(5,a=C)),J(n,Yn,C=>t(6,c=C)),J(n,dt,C=>t(7,f=C));let{scrollTop:p=0}=e,{posCount:d=""}=e,h=[],_,v="",g="";function b(C,V,O,w,D,L){if(!C)return;t(4,h=C.filter(({symbol:N,size:z})=>V?N===O.symbol&&z>0:z>0).sort((N,z)=>N.symbol.localeCompare(z.symbol)));const $=h.length;t(8,d=$>0?`(${$})`:""),P([...h],w,D,L)}function P(C,V,O,w){if(!V||!O)return;const D=(N,z)=>(H,R)=>{const F=Number(xe.unAbbreviateNumber(H[z]))-Number(xe.unAbbreviateNumber(R[z]));return O==="up"?F:-F},L=w===Ei.Mark?"unrealisedPnlByMarkPriceFiat":"unrealisedPnlByLastPriceFiat",$={symbol:(N,z)=>{const H=er.findContract(i,N.symbol),R=er.findContract(i,z.symbol),F=H.pairName.localeCompare(R.pairName);return O==="up"?F:-F},entryPrice:D("entryPrice","avgEntryPrice"),markPrice:D("markPrice","markPrice"),liqPrice:D("liqPrice","liquidationPrice"),margin:D("margin","marginFiat"),unrealisedPNL:D("unrealisedPNL",L),realisedPNL:D("realisedPNL","realisedPnlFiat"),marginRatio:D("marginRatio","marginRatioRr")};t(4,h=C.sort($[V]))}function I(C){g=C,t(3,g)}function T(C){v=C,t(2,v)}return n.$$set=C=>{"scrollTop"in C&&t(0,p=C.scrollTop),"posCount"in C&&t(8,d=C.posCount)},n.$$.update=()=>{n.$$.dirty&4096&&t(1,_=o),n.$$.dirty&3598&&b(_,s,l,v,g,r)},[p,_,v,g,h,a,c,f,d,r,l,s,o,I,T]}let ak=class extends tt{constructor(e){super(),nt(this,e,ok,sk,et,{scrollTop:0,posCount:8})}};const md=new Jn([]),hd=new Jn([]);h1.pipe(Rr(200),Cn(n=>n.filter(({eventType:t})=>["closePosition"].includes(t)).length>0),qn(Boolean)).subscribe(()=>_d());async function _d(){const n={limit:20},{data:e,error:t}=await vm.getClosedPositions(n);e&&md.next(e),t&&Pt.send("toast","error",t)}gr([md,Xt,zi,mi,ri,_1,g1]).pipe(Cn(([n,e,t,i,r,l,s])=>n.filter(o=>i?o.symbol===e.symbol:o).map(o=>ck(t,o,r,l,s)))).subscribe(n=>hd.next(n));function ck(n,e,t,i,r){const l=n.get(e.symbol);if(!l)return null;const s=r.find(z=>z.symbol==="PT"),o=s&&s.valuePrecision||8,{side:a,openedTimeNs:c,updatedTimeNs:f,closedSizeRq:p,closedPnlRv:d,exchangeFeeRv:h,fundingFeeRv:_,realizedPnlRv:v,closePrice:g,openPrice:b,roi:P,termPtFeeRv:I}=e,{symbol:T,pairName:C,settleCurrency:V,pricePrecision:O,valuePrecision:w,type:D}=l,L=b?xe.floor(b,O):"-",$=t.get(T),N=$?$.indexPriceEp:0;return{...e,symbol:T,pairName:C,settleCurrency:V,side:a===1?"Buy":"Sell",type:D,updatedTimeNs:f,openedTime:gs.formatDateTime(c),updatedTime:gs.formatDateTime(f),closedSizeStr:xe.delimit(p),closedSizeStrByCont:Qt.toCont(l,p),closedSizeStrByValue:Qt.toValue(l,p,L),closedSizeStrByCoin:Qt.toCoin(l,p,L),closedPnl:xe.floor(d,w),closedPnlMoney:Vl(l,i,d,N),exchangeFee:xe.floor(h||0,w),exchangeFeeMoney:Vl(l,i,h,N),exchangePtFee:xe.floor(I||0,o),fundingFee:xe.floor(_,w),fundingFeeMoney:Vl(l,i,_,N),realizedPnl:xe.floor(v,w),realizedPnlMoney:Vl(l,i,v,N),openPrice:L,closePrice:g?xe.floor(g,O):"-",roi:g?xe.floor(P,2,-2):"-"}}function Vl(n,e,t,i){if(!e)return"";const{contractSide:r,valueScale:l}=n,s=(e==null?void 0:e.priceFactor)||1,o=Re(t).times(s).div(e.priceEp);return r>0?xe.floor(o,ko):xe.floor(Re(o).times(i),ko,l)}function fk(n){let e,t,i=n[2](yt.Symbol)+"",r,l,s,o,a,c,f=n[2](yt.TotalSize)+"",p,d,h,_,v=n[2](yt.OpenPrice)+"",g,b,P,I,T,C,V,O=n[2](yt.ClosePrice)+"",w,D,L,$,N,z,H=n[2](yt.ClosedPNL)+"",R,F,U,K,Y,X=n[2](yt.ExchangeFeePaid)+"",ee,Z,ue,ce,pe,me=n[2](yt.ExchangeFeePaid)+"",oe,ke,Le,ge,ae=n[2](yt.FundingFeePaid)+"",x,le,fe,Se,Pe,Ce=n[2](yt.RealisedPNL)+"",Ee,Ie,ve,de,se,he=n[2](yt.ROI)+"",_e,be,Ve,Be,Fe,$e=n[2](yt.OpenedTime)+"",Ae,Ne,Ge,Xe=n[2](yt.CloseTime)+"",ye,Ke,Qe,ze;return s=new nn({props:{active:n[1]==="symbol",sortDirection:n[1]==="symbol"?n[0]:""}}),s.$on("sort",n[4]),I=new nn({props:{active:n[1]==="openPrice",sortDirection:n[1]==="openPrice"?n[0]:""}}),I.$on("sort",n[5]),$=new nn({props:{active:n[1]==="closePrice",sortDirection:n[1]==="closePrice"?n[0]:""}}),$.$on("sort",n[6]),U=new nn({props:{active:n[1]==="closedPnl",sortDirection:n[1]==="closedPnl"?n[0]:""}}),U.$on("sort",n[7]),ue=new nn({props:{active:n[1]==="exchangeFee",sortDirection:n[1]==="exchangeFee"?n[0]:""}}),ue.$on("sort",n[8]),fe=new nn({props:{active:n[1]==="fundingFee",sortDirection:n[1]==="fundingFee"?n[0]:""}}),fe.$on("sort",n[9]),ve=new nn({props:{active:n[1]==="realizedPnl",sortDirection:n[1]==="realizedPnl"?n[0]:""}}),ve.$on("sort",n[10]),Ve=new nn({props:{active:n[1]==="Roi",sortDirection:n[1]==="roi"?n[0]:""}}),Ve.$on("sort",n[11]),{c(){e=y("div"),t=y("div"),r=B(i),l=q(),te(s.$$.fragment),o=q(),a=y("div"),c=y("span"),p=B(f),d=q(),h=y("div"),_=y("span"),g=B(v),P=q(),te(I.$$.fragment),T=q(),C=y("div"),V=y("span"),w=B(O),L=q(),te($.$$.fragment),N=q(),z=y("div"),R=B(H),F=q(),te(U.$$.fragment),K=q(),Y=y("div"),ee=B(X),Z=q(),te(ue.$$.fragment),ce=q(),pe=y("div"),oe=B(me),ke=B(" (PT)"),Le=q(),ge=y("div"),x=B(ae),le=q(),te(fe.$$.fragment),Se=q(),Pe=y("div"),Ee=B(Ce),Ie=q(),te(ve.$$.fragment),de=q(),se=y("div"),_e=B(he),be=q(),te(Ve.$$.fragment),Be=q(),Fe=y("div"),Ae=B($e),Ne=q(),Ge=y("div"),ye=B(Xe),this.h()},l(Ue){e=k(Ue,"DIV",{class:!0});var st=S(e);t=k(st,"DIV",{class:!0});var Oe=S(t);r=A(Oe,i),l=M(Oe),re(s.$$.fragment,Oe),Oe.forEach(m),o=M(st),a=k(st,"DIV",{class:!0});var it=S(a);c=k(it,"SPAN",{class:!0});var ct=S(c);p=A(ct,f),ct.forEach(m),it.forEach(m),d=M(st),h=k(st,"DIV",{class:!0});var ft=S(h);_=k(ft,"SPAN",{class:!0});var _t=S(_);g=A(_t,v),_t.forEach(m),P=M(ft),re(I.$$.fragment,ft),ft.forEach(m),T=M(st),C=k(st,"DIV",{class:!0});var Et=S(C);V=k(Et,"SPAN",{class:!0});var gt=S(V);w=A(gt,O),gt.forEach(m),L=M(Et),re($.$$.fragment,Et),Et.forEach(m),N=M(st),z=k(st,"DIV",{class:!0});var Dt=S(z);R=A(Dt,H),F=M(Dt),re(U.$$.fragment,Dt),Dt.forEach(m),K=M(st),Y=k(st,"DIV",{class:!0});var It=S(Y);ee=A(It,X),Z=M(It),re(ue.$$.fragment,It),It.forEach(m),ce=M(st),pe=k(st,"DIV",{class:!0});var pt=S(pe);oe=A(pt,me),ke=A(pt," (PT)"),pt.forEach(m),Le=M(st),ge=k(st,"DIV",{class:!0});var mt=S(ge);x=A(mt,ae),le=M(mt),re(fe.$$.fragment,mt),mt.forEach(m),Se=M(st),Pe=k(st,"DIV",{class:!0});var Nt=S(Pe);Ee=A(Nt,Ce),Ie=M(Nt),re(ve.$$.fragment,Nt),Nt.forEach(m),de=M(st),se=k(st,"DIV",{class:!0});var Rt=S(se);_e=A(Rt,he),be=M(Rt),re(Ve.$$.fragment,Rt),Rt.forEach(m),Be=M(st),Fe=k(st,"DIV",{class:!0});var je=S(Fe);Ae=A(je,$e),je.forEach(m),Ne=M(st),Ge=k(st,"DIV",{class:!0});var lt=S(Ge);ye=A(lt,Xe),lt.forEach(m),st.forEach(m),this.h()},h(){E(t,"class","cell ps pl16 H-1uc6v7i"),E(c,"class","pl16"),E(a,"class","cell H-1uc6v7i"),E(_,"class","tdud ch"),E(h,"class","cell H-1uc6v7i"),E(V,"class","tdud ch"),E(C,"class","cell H-1uc6v7i"),E(z,"class","cell H-1uc6v7i"),E(Y,"class","cell H-1uc6v7i"),E(pe,"class","cell H-1uc6v7i"),E(ge,"class","cell H-1uc6v7i"),E(Pe,"class","cell H-1uc6v7i"),E(se,"class","cell H-1uc6v7i"),E(Fe,"class","cell pr16 H-1uc6v7i"),E(Ge,"class","cell jcfe pr16 H-1uc6v7i"),E(e,"class","row lh28 H-1uc6v7i")},m(Ue,st){G(Ue,e,st),u(e,t),u(t,r),u(t,l),ne(s,t,null),u(e,o),u(e,a),u(a,c),u(c,p),u(e,d),u(e,h),u(h,_),u(_,g),u(h,P),ne(I,h,null),u(e,T),u(e,C),u(C,V),u(V,w),u(C,L),ne($,C,null),u(e,N),u(e,z),u(z,R),u(z,F),ne(U,z,null),u(e,K),u(e,Y),u(Y,ee),u(Y,Z),ne(ue,Y,null),u(e,ce),u(e,pe),u(pe,oe),u(pe,ke),u(e,Le),u(e,ge),u(ge,x),u(ge,le),ne(fe,ge,null),u(e,Se),u(e,Pe),u(Pe,Ee),u(Pe,Ie),ne(ve,Pe,null),u(e,de),u(e,se),u(se,_e),u(se,be),ne(Ve,se,null),u(e,Be),u(e,Fe),u(Fe,Ae),u(e,Ne),u(e,Ge),u(Ge,ye),Ke=!0,Qe||(ze=[Wt(b=Gt.call(null,_,{text:n[2](vt.OpenPrice)})),Wt(D=Gt.call(null,V,{text:n[2](vt.ClosePrice)}))],Qe=!0)},p(Ue,[st]){(!Ke||st&4)&&i!==(i=Ue[2](yt.Symbol)+"")&&W(r,i);const Oe={};st&2&&(Oe.active=Ue[1]==="symbol"),st&3&&(Oe.sortDirection=Ue[1]==="symbol"?Ue[0]:""),s.$set(Oe),(!Ke||st&4)&&f!==(f=Ue[2](yt.TotalSize)+"")&&W(p,f),(!Ke||st&4)&&v!==(v=Ue[2](yt.OpenPrice)+"")&&W(g,v),b&&Tt(b.update)&&st&4&&b.update.call(null,{text:Ue[2](vt.OpenPrice)});const it={};st&2&&(it.active=Ue[1]==="openPrice"),st&3&&(it.sortDirection=Ue[1]==="openPrice"?Ue[0]:""),I.$set(it),(!Ke||st&4)&&O!==(O=Ue[2](yt.ClosePrice)+"")&&W(w,O),D&&Tt(D.update)&&st&4&&D.update.call(null,{text:Ue[2](vt.ClosePrice)});const ct={};st&2&&(ct.active=Ue[1]==="closePrice"),st&3&&(ct.sortDirection=Ue[1]==="closePrice"?Ue[0]:""),$.$set(ct),(!Ke||st&4)&&H!==(H=Ue[2](yt.ClosedPNL)+"")&&W(R,H);const ft={};st&2&&(ft.active=Ue[1]==="closedPnl"),st&3&&(ft.sortDirection=Ue[1]==="closedPnl"?Ue[0]:""),U.$set(ft),(!Ke||st&4)&&X!==(X=Ue[2](yt.ExchangeFeePaid)+"")&&W(ee,X);const _t={};st&2&&(_t.active=Ue[1]==="exchangeFee"),st&3&&(_t.sortDirection=Ue[1]==="exchangeFee"?Ue[0]:""),ue.$set(_t),(!Ke||st&4)&&me!==(me=Ue[2](yt.ExchangeFeePaid)+"")&&W(oe,me),(!Ke||st&4)&&ae!==(ae=Ue[2](yt.FundingFeePaid)+"")&&W(x,ae);const Et={};st&2&&(Et.active=Ue[1]==="fundingFee"),st&3&&(Et.sortDirection=Ue[1]==="fundingFee"?Ue[0]:""),fe.$set(Et),(!Ke||st&4)&&Ce!==(Ce=Ue[2](yt.RealisedPNL)+"")&&W(Ee,Ce);const gt={};st&2&&(gt.active=Ue[1]==="realizedPnl"),st&3&&(gt.sortDirection=Ue[1]==="realizedPnl"?Ue[0]:""),ve.$set(gt),(!Ke||st&4)&&he!==(he=Ue[2](yt.ROI)+"")&&W(_e,he);const Dt={};st&2&&(Dt.active=Ue[1]==="Roi"),st&3&&(Dt.sortDirection=Ue[1]==="roi"?Ue[0]:""),Ve.$set(Dt),(!Ke||st&4)&&$e!==($e=Ue[2](yt.OpenedTime)+"")&&W(Ae,$e),(!Ke||st&4)&&Xe!==(Xe=Ue[2](yt.CloseTime)+"")&&W(ye,Xe)},i(Ue){Ke||(Q(s.$$.fragment,Ue),Q(I.$$.fragment,Ue),Q($.$$.fragment,Ue),Q(U.$$.fragment,Ue),Q(ue.$$.fragment,Ue),Q(fe.$$.fragment,Ue),Q(ve.$$.fragment,Ue),Q(Ve.$$.fragment,Ue),Ke=!0)},o(Ue){j(s.$$.fragment,Ue),j(I.$$.fragment,Ue),j($.$$.fragment,Ue),j(U.$$.fragment,Ue),j(ue.$$.fragment,Ue),j(fe.$$.fragment,Ue),j(ve.$$.fragment,Ue),j(Ve.$$.fragment,Ue),Ke=!1},d(Ue){Ue&&m(e),ie(s),ie(I),ie($),ie(U),ie(ue),ie(fe),ie(ve),ie(Ve),Qe=!1,jt(ze)}}}function uk(n,e,t){let i;J(n,dt,v=>t(2,i=v));let{sortDirection:r=""}=e,{sortKey:l=""}=e;function s(v){if(l===v){if(r==="up"){t(0,r="down");return}if(r==="down"){t(0,r="");return}if(r===""){t(0,r="up");return}}t(1,l=v),t(0,r="up")}const o=()=>s("symbol"),a=()=>s("openPrice"),c=()=>s("closePrice"),f=()=>s("closedPnl"),p=()=>s("exchangeFee"),d=()=>s("fundingFee"),h=()=>s("realizedPnl"),_=()=>s("roi");return n.$$set=v=>{"sortDirection"in v&&t(0,r=v.sortDirection),"sortKey"in v&&t(1,l=v.sortKey)},[r,l,i,s,o,a,c,f,p,d,h,_]}let pk=class extends tt{constructor(e){super(),nt(this,e,uk,fk,et,{sortDirection:0,sortKey:1})}};function dk(n){let e,t,i,r,l=n[0].pairName+"",s,o,a,c=n[3](He[n[0].type])+"",f,p,d,h=n[3](He.CurrencyMargin,{Currency:n[0].settleCurrency})+"",_,v,g,b=n[0].side==="Sell"?"-":"",P,I,T,C,V=n[0].openPrice+"",O,w,D,L=n[0].closePrice+"",$,N,z,H=n[0].closedPnl+"",R,F,U=n[0].settleCurrency+"",K,Y,X,ee=n[0].exchangeFee+"",Z,ue,ce=n[0].settleCurrency+"",pe,me,oe,ke=n[0].exchangePtFee+"",Le,ge,ae,x,le=n[0].fundingFee+"",fe,Se,Pe=n[0].settleCurrency+"",Ce,Ee,Ie,ve=n[0].realizedPnl+"",de,se,he=n[0].settleCurrency+"",_e,be,Ve,Be=n[0].roi+"",Fe,$e,Ae,Ne,Ge,Xe,ye=n[0].openedTime+"",Ke,Qe,ze,Ue=n[0].updatedTime+"",st,Oe,it;return{c(){e=y("div"),t=y("div"),i=y("div"),r=y("span"),s=B(l),o=q(),a=y("span"),f=B(c),p=q(),d=y("div"),_=B(h),v=q(),g=y("div"),P=B(b),I=B(n[1]),T=q(),C=y("div"),O=B(V),w=q(),D=y("div"),$=B(L),N=q(),z=y("div"),R=B(H),F=q(),K=B(U),Y=q(),X=y("div"),Z=B(ee),ue=q(),pe=B(ce),me=q(),oe=y("div"),Le=B(ke),ge=B(" PT"),ae=q(),x=y("div"),fe=B(le),Se=q(),Ce=B(Pe),Ee=q(),Ie=y("div"),de=B(ve),se=q(),_e=B(he),be=q(),Ve=y("div"),Fe=B(Be),$e=B("% "),Ae=y("i"),Ne=B(""),Ge=q(),Xe=y("div"),Ke=B(ye),Qe=q(),ze=y("div"),st=B(Ue),this.h()},l(ct){e=k(ct,"DIV",{class:!0});var ft=S(e);t=k(ft,"DIV",{class:!0});var _t=S(t);i=k(_t,"DIV",{class:!0});var Et=S(i);r=k(Et,"SPAN",{});var gt=S(r);s=A(gt,l),gt.forEach(m),o=M(Et),a=k(Et,"SPAN",{class:!0});var Dt=S(a);f=A(Dt,c),Dt.forEach(m),Et.forEach(m),p=M(_t),d=k(_t,"DIV",{class:!0});var It=S(d);_=A(It,h),It.forEach(m),_t.forEach(m),v=M(ft),g=k(ft,"DIV",{class:!0});var pt=S(g);P=A(pt,b),I=A(pt,n[1]),pt.forEach(m),T=M(ft),C=k(ft,"DIV",{class:!0});var mt=S(C);O=A(mt,V),mt.forEach(m),w=M(ft),D=k(ft,"DIV",{class:!0});var Nt=S(D);$=A(Nt,L),Nt.forEach(m),N=M(ft),z=k(ft,"DIV",{class:!0});var Rt=S(z);R=A(Rt,H),F=M(Rt),K=A(Rt,U),Rt.forEach(m),Y=M(ft),X=k(ft,"DIV",{class:!0});var je=S(X);Z=A(je,ee),ue=M(je),pe=A(je,ce),je.forEach(m),me=M(ft),oe=k(ft,"DIV",{class:!0});var lt=S(oe);Le=A(lt,ke),ge=A(lt," PT"),lt.forEach(m),ae=M(ft),x=k(ft,"DIV",{class:!0});var Yt=S(x);fe=A(Yt,le),Se=M(Yt),Ce=A(Yt,Pe),Yt.forEach(m),Ee=M(ft),Ie=k(ft,"DIV",{class:!0});var tn=S(Ie);de=A(tn,ve),se=M(tn),_e=A(tn,he),tn.forEach(m),be=M(ft),Ve=k(ft,"DIV",{class:!0});var Ze=S(Ve);Fe=A(Ze,Be),$e=A(Ze,"% "),Ae=k(Ze,"I",{class:!0});var St=S(Ae);Ne=A(St,""),St.forEach(m),Ze.forEach(m),Ge=M(ft),Xe=k(ft,"DIV",{class:!0});var kt=S(Xe);Ke=A(kt,ye),kt.forEach(m),Qe=M(ft),ze=k(ft,"DIV",{class:!0});var $t=S(ze);st=A($t,Ue),$t.forEach(m),ft.forEach(m),this.h()},h(){E(a,"class","ml4"),E(i,"class","lh20 T1"),E(d,"class","lh18 T2"),E(t,"class","symbol ps pr pl16 pv4 B1 cp H-y679si"),Te(t,"linear-gradient-symbol",n[2]-320<1200),E(g,"class","df aic H-y679si"),Te(g,"buy",n[0].side==="Buy"),Te(g,"sell",n[0].side==="Sell"),E(C,"class","df aic H-y679si"),E(D,"class","df aic H-y679si"),E(z,"class","df aic H-y679si"),E(X,"class","df aic H-y679si"),E(oe,"class","df aic H-y679si"),E(x,"class","df aic H-y679si"),E(Ie,"class","df aic H-y679si"),E(Ae,"class","iconfont ml2 f12 T2 cp H-y679si"),E(Ve,"class","df aic cp H-y679si"),E(Xe,"class","df aic pr16 H-y679si"),E(ze,"class","df aic jcfe pr16 H-y679si"),E(e,"class","history-list wrap fw2 T1 H-y679si")},m(ct,ft){G(ct,e,ft),u(e,t),u(t,i),u(i,r),u(r,s),u(i,o),u(i,a),u(a,f),u(t,p),u(t,d),u(d,_),u(e,v),u(e,g),u(g,P),u(g,I),u(e,T),u(e,C),u(C,O),u(e,w),u(e,D),u(D,$),u(e,N),u(e,z),u(z,R),u(z,F),u(z,K),u(e,Y),u(e,X),u(X,Z),u(X,ue),u(X,pe),u(e,me),u(e,oe),u(oe,Le),u(oe,ge),u(e,ae),u(e,x),u(x,fe),u(x,Se),u(x,Ce),u(e,Ee),u(e,Ie),u(Ie,de),u(Ie,se),u(Ie,_e),u(e,be),u(e,Ve),u(Ve,Fe),u(Ve,$e),u(Ve,Ae),u(Ae,Ne),u(e,Ge),u(e,Xe),u(Xe,Ke),u(e,Qe),u(e,ze),u(ze,st),Oe||(it=[We(t,"click",n[4]),We(Ve,"click",n[5])],Oe=!0)},p(ct,[ft]){ft&1&&l!==(l=ct[0].pairName+"")&&W(s,l),ft&9&&c!==(c=ct[3](He[ct[0].type])+"")&&W(f,c),ft&9&&h!==(h=ct[3](He.CurrencyMargin,{Currency:ct[0].settleCurrency})+"")&&W(_,h),ft&4&&Te(t,"linear-gradient-symbol",ct[2]-320<1200),ft&1&&b!==(b=ct[0].side==="Sell"?"-":"")&&W(P,b),ft&2&&W(I,ct[1]),ft&1&&Te(g,"buy",ct[0].side==="Buy"),ft&1&&Te(g,"sell",ct[0].side==="Sell"),ft&1&&V!==(V=ct[0].openPrice+"")&&W(O,V),ft&1&&L!==(L=ct[0].closePrice+"")&&W($,L),ft&1&&H!==(H=ct[0].closedPnl+"")&&W(R,H),ft&1&&U!==(U=ct[0].settleCurrency+"")&&W(K,U),ft&1&&ee!==(ee=ct[0].exchangeFee+"")&&W(Z,ee),ft&1&&ce!==(ce=ct[0].settleCurrency+"")&&W(pe,ce),ft&1&&ke!==(ke=ct[0].exchangePtFee+"")&&W(Le,ke),ft&1&&le!==(le=ct[0].fundingFee+"")&&W(fe,le),ft&1&&Pe!==(Pe=ct[0].settleCurrency+"")&&W(Ce,Pe),ft&1&&ve!==(ve=ct[0].realizedPnl+"")&&W(de,ve),ft&1&&he!==(he=ct[0].settleCurrency+"")&&W(_e,he),ft&1&&Be!==(Be=ct[0].roi+"")&&W(Fe,Be),ft&1&&ye!==(ye=ct[0].openedTime+"")&&W(Ke,ye),ft&1&&Ue!==(Ue=ct[0].updatedTime+"")&&W(st,Ue)},i:rt,o:rt,d(ct){ct&&m(e),Oe=!1,jt(it)}}}function mk(n,e,t){let i,r,l,s,o,a,c;J(n,zi,_=>t(6,l=_)),J(n,An,_=>t(7,s=_)),J(n,zn,_=>t(8,o=_)),J(n,Bi,_=>t(2,a=_)),J(n,dt,_=>t(3,c=_));let{item:f=null}=e;function p(_,v,g){const b=g&&g.type==="Perpetual"?_:v;return{[we.Cont]:g.closedSizeStrByCont,[we.Base]:g.closedSizeStrByValue,[we.Coin]:g.closedSizeStrByCoin}[b]}function d(){Pt.send("trade-pair","change",{type:"Perpetual",symbol:f.symbol})}function h(){const _={side:f.side,leverage:`${Math.abs(f.leverage)}`,openPrice:xe.floor(f.openPrice,r.pricePrecision),closePrice:xe.floor(f.closePrice,r.pricePrecision),pnl:f.realizedPnl,roi:f.roi+"%"};en.create(dd,{type:"close",contract:r,shareInfo:_})}return n.$$set=_=>{"item"in _&&t(0,f=_.item)},n.$$.update=()=>{n.$$.dirty&385&&t(1,i=p(o,s,f)),n.$$.dirty&65&&(r=l.get(f.symbol))},[f,i,a,c,d,h,l,s,o]}let hk=class extends tt{constructor(e){super(),nt(this,e,mk,dk,et,{item:0})}};function Yf(n,e,t){const i=n.slice();return i[9]=e[t],i[11]=t,i}function _k(n){let e,t=n[3](He.NoData)+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","no-data tc T3 H-8sg4cg")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&8&&t!==(t=r[3](He.NoData)+"")&&W(i,t)},i:rt,o:rt,d(r){r&&m(e)}}}function gk(n){let e=[],t=new Map,i,r,l=n[2];const s=o=>o[11];for(let o=0;o<l.length;o+=1){let a=Yf(n,l,o),c=s(a);t.set(c,e[o]=Jf(c,a))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();i=ut()},l(o){for(let a=0;a<e.length;a+=1)e[a].l(o);i=ut()},m(o,a){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,a);G(o,i,a),r=!0},p(o,a){a&4&&(l=o[2],ot(),e=Si(e,a,s,1,o,l,t,i.parentNode,lr,Jf,i,Yf),at())},i(o){if(!r){for(let a=0;a<l.length;a+=1)Q(e[a]);r=!0}},o(o){for(let a=0;a<e.length;a+=1)j(e[a]);r=!1},d(o){for(let a=0;a<e.length;a+=1)e[a].d(o);o&&m(i)}}}function Jf(n,e){let t,i,r;return i=new hk({props:{item:e[9]}}),{key:n,first:null,c(){t=ut(),te(i.$$.fragment),this.h()},l(l){t=ut(),re(i.$$.fragment,l),this.h()},h(){this.first=t},m(l,s){G(l,t,s),ne(i,l,s),r=!0},p(l,s){e=l;const o={};s&4&&(o.item=e[9]),i.$set(o)},i(l){r||(Q(i.$$.fragment,l),r=!0)},o(l){j(i.$$.fragment,l),r=!1},d(l){l&&m(t),ie(i,l)}}}function vk(n){let e,t,i,r,l,s,o,a,c;function f(g){n[6](g)}function p(g){n[7](g)}let d={};n[0]!==void 0&&(d.sortDirection=n[0]),n[1]!==void 0&&(d.sortKey=n[1]),i=new pk({props:d}),De.push(()=>qe(i,"sortDirection",f)),De.push(()=>qe(i,"sortKey",p));const h=[gk,_k],_=[];function v(g,b){return g[2].length>0?0:1}return o=v(n),a=_[o]=h[o](n),{c(){e=y("div"),t=y("div"),te(i.$$.fragment),s=q(),a.c(),this.h()},l(g){e=k(g,"DIV",{class:!0});var b=S(e);t=k(b,"DIV",{class:!0});var P=S(t);re(i.$$.fragment,P),s=M(P),a.l(P),P.forEach(m),b.forEach(m),this.h()},h(){E(t,"class","grid H-8sg4cg"),E(e,"class","wrap f12 H-8sg4cg")},m(g,b){G(g,e,b),u(e,t),ne(i,t,null),u(t,s),_[o].m(t,null),c=!0},p(g,[b]){const P={};!r&&b&1&&(r=!0,P.sortDirection=g[0],Me(()=>r=!1)),!l&&b&2&&(l=!0,P.sortKey=g[1],Me(()=>l=!1)),i.$set(P);let I=o;o=v(g),o===I?_[o].p(g,b):(ot(),j(_[I],1,1,()=>{_[I]=null}),at(),a=_[o],a?a.p(g,b):(a=_[o]=h[o](g),a.c()),Q(a,1),a.m(t,null))},i(g){c||(Q(i.$$.fragment,g),Q(a),c=!0)},o(g){j(i.$$.fragment,g),j(a),c=!1},d(g){g&&m(e),ie(i),_[o].d()}}}function bk(n,e,t){let i,r,l;J(n,hd,d=>t(4,i=d)),J(n,Yn,d=>t(5,r=d)),J(n,dt,d=>t(3,l=d));let s="",o="",a=[];Lt(()=>Yn.pipe(qn(Boolean)).subscribe(()=>_d()));function c(d,h,_,v){d||t(2,a=[]);const g=P=>(I,T)=>{const C=Number(I[P]),V=Number(T[P]),O=(isNaN(C)?0:C)-(isNaN(V)?0:V);return _==="up"?O:-O},b={symbol:(P,I)=>{const T=P.pairName.localeCompare(I.pairName);return _==="up"?T:-T},openPrice:g("openPrice"),closePrice:g("closePrice"),closedPnl:g("closedPnlMoney"),exchangeFee:g("exchangeFee"),fundingFee:g("fundingFee"),realizedPnl:g("realizedPnlMoney"),roi:g("roi"),time:g("updatedTimeNs")};t(2,a=h.sort(b[_?v:"time"]))}function f(d){s=d,t(0,s)}function p(d){o=d,t(1,o)}return n.$$.update=()=>{n.$$.dirty&51&&c(r,i,s,o)},[s,o,a,l,i,r,f,p]}let Ek=class extends tt{constructor(e){super(),nt(this,e,bk,vk,et,{})}};function yk(n){let e,t=n[1](n[0]?Tl.CancelConditionalOrders:Tl.CancelActiveOrders)+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ph16 pb20 T3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&3&&t!==(t=r[1](r[0]?Tl.CancelConditionalOrders:Tl.CancelActiveOrders)+"")&&W(i,t)},d(r){r&&m(e)}}}function kk(n){let e,t,i,r,l;return{c(){e=y("div"),t=y("i"),i=B(""),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);t=k(o,"I",{class:!0});var a=S(t);i=A(a,""),a.forEach(m),o.forEach(m),this.h()},h(){E(t,"class","iconfont cp T3"),E(e,"class","ph16 pt10 df jcfe b f16 T2"),E(e,"slot","header")},m(s,o){G(s,e,o),u(e,t),u(t,i),r||(l=We(t,"click",n[3]),r=!0)},p:rt,d(s){s&&m(e),r=!1,l()}}}function Pk(n){let e=n[1](He.No)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&2&&e!==(e=i[1](He.No)+"")&&W(t,e)},d(i){i&&m(t)}}}function Sk(n){let e=n[1](He.Yes)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&2&&e!==(e=i[1](He.Yes)+"")&&W(t,e)},d(i){i&&m(t)}}}function Ck(n){let e,t,i,r,l;return t=new Ht({props:{size:"small",$$slots:{default:[Pk]},$$scope:{ctx:n}}}),t.$on("click",n[2]),r=new Ht({props:{size:"small",type:"primary",$$slots:{default:[Sk]},$$scope:{ctx:n}}}),r.$on("click",n[4]),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);re(t.$$.fragment,o),i=M(o),re(r.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","footer df jcfe tr H-yslft9"),E(e,"slot","footer")},m(s,o){G(s,e,o),ne(t,e,null),u(e,i),ne(r,e,null),l=!0},p(s,o){const a={};o&130&&(a.$$scope={dirty:o,ctx:s}),t.$set(a);const c={};o&130&&(c.$$scope={dirty:o,ctx:s}),r.$set(c)},i(s){l||(Q(t.$$.fragment,s),Q(r.$$.fragment,s),l=!0)},o(s){j(t.$$.fragment,s),j(r.$$.fragment,s),l=!1},d(s){s&&m(e),ie(t),ie(r)}}}function Tk(n){let e,t;return e=new bn({props:{style:"min-width: 320px;",$$slots:{footer:[Ck],header:[kk],default:[yk]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&131&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function wk(n,e,t){let i;J(n,dt,f=>t(1,i=f));let{onConfirm:r}=e,{isConditional:l}=e;const s=Kt();function o(){s("close")}function a(){s("close")}async function c(){r(),s("close")}return n.$$set=f=>{"onConfirm"in f&&t(5,r=f.onConfirm),"isConditional"in f&&t(0,l=f.isConditional)},[l,i,o,a,c,r]}let gd=class extends tt{constructor(e){super(),nt(this,e,wk,Tk,et,{onConfirm:5,isConditional:0})}};function Ik(n){let e=n[2](bt.Action)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&4&&e!==(e=i[2](bt.Action)+"")&&W(t,e)},d(i){i&&m(t)}}}function Dk(n){let e,t=n[2](bt.CancelAll)+"",i,r,l;return{c(){e=y("button"),i=B(t),this.h()},l(s){e=k(s,"BUTTON",{class:!0});var o=S(e);i=A(o,t),o.forEach(m),this.h()},h(){E(e,"class","active-order-all-cancel dib ph16 lh22 sell cp H-1o82zqj")},m(s,o){G(s,e,o),u(e,i),r||(l=We(e,"click",n[5]),r=!0)},p(s,o){o&4&&t!==(t=s[2](bt.CancelAll)+"")&&W(i,t)},d(s){s&&m(e),r=!1,l()}}}function Vk(n){let e,t,i=n[2](bt.Symbol)+"",r,l,s,o,a,c=n[2](He.Size)+"",f,p,d,h=n[2](He.Direction)+"",_,v,g,b=n[2](bt.OrderPrice)+"",P,I,T,C,V,O=n[2](bt.FilledRemaining)+"",w,D,L,$=n[2](bt.OrderValue)+"",N,z,H,R=n[2](bt.TPSL)+"",F,U,K,Y=n[2](bt.FillPrice)+"",X,ee,Z,ue,ce,pe=n[2](bt.Type)+"",me,oe,ke,Le=n[2](bt.Status)+"",ge,ae,x,le=n[2](bt.Time)+"",fe,Se,Pe,Ce;s=new nn({props:{active:n[1]==="symbol",sortDirection:n[1]==="symbol"?n[0]:""}}),s.$on("sort",n[9]),T=new nn({props:{active:n[1]==="price",sortDirection:n[1]==="price"?n[0]:""}}),T.$on("sort",n[10]),Z=new nn({props:{active:n[1]==="fillPrice",sortDirection:n[1]==="fillPrice"?n[0]:""}}),Z.$on("sort",n[11]);function Ee(de,se){return de[4]==="Login"?Dk:Ik}let Ie=Ee(n),ve=Ie(n);return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),te(s.$$.fragment),o=q(),a=y("div"),f=B(c),p=q(),d=y("div"),_=B(h),v=q(),g=y("div"),P=B(b),I=q(),te(T.$$.fragment),C=q(),V=y("div"),w=B(O),D=q(),L=y("div"),N=B($),z=q(),H=y("div"),F=B(R),U=q(),K=y("div"),X=B(Y),ee=q(),te(Z.$$.fragment),ue=q(),ce=y("div"),me=B(pe),oe=q(),ke=y("div"),ge=B(Le),ae=q(),x=y("div"),fe=B(le),Se=q(),Pe=y("div"),ve.c(),this.h()},l(de){e=k(de,"DIV",{class:!0});var se=S(e);t=k(se,"DIV",{class:!0});var he=S(t);r=A(he,i),l=M(he),re(s.$$.fragment,he),he.forEach(m),o=M(se),a=k(se,"DIV",{class:!0});var _e=S(a);f=A(_e,c),_e.forEach(m),p=M(se),d=k(se,"DIV",{class:!0});var be=S(d);_=A(be,h),be.forEach(m),v=M(se),g=k(se,"DIV",{class:!0});var Ve=S(g);P=A(Ve,b),I=M(Ve),re(T.$$.fragment,Ve),Ve.forEach(m),C=M(se),V=k(se,"DIV",{class:!0});var Be=S(V);w=A(Be,O),Be.forEach(m),D=M(se),L=k(se,"DIV",{class:!0});var Fe=S(L);N=A(Fe,$),Fe.forEach(m),z=M(se),H=k(se,"DIV",{class:!0});var $e=S(H);F=A($e,R),$e.forEach(m),U=M(se),K=k(se,"DIV",{class:!0});var Ae=S(K);X=A(Ae,Y),ee=M(Ae),re(Z.$$.fragment,Ae),Ae.forEach(m),ue=M(se),ce=k(se,"DIV",{class:!0});var Ne=S(ce);me=A(Ne,pe),Ne.forEach(m),oe=M(se),ke=k(se,"DIV",{class:!0});var Ge=S(ke);ge=A(Ge,Le),Ge.forEach(m),ae=M(se),x=k(se,"DIV",{class:!0});var Xe=S(x);fe=A(Xe,le),Xe.forEach(m),Se=M(se),Pe=k(se,"DIV",{class:!0});var ye=S(Pe);ve.l(ye),ye.forEach(m),se.forEach(m),this.h()},h(){E(t,"class","cell pl16 H-1o82zqj"),E(a,"class","cell pr12 H-1o82zqj"),Te(a,"pl32",n[3]-320<1200),E(d,"class","cell H-1o82zqj"),E(g,"class","cell pr12 H-1o82zqj"),E(V,"class","cell H-1o82zqj"),E(L,"class","cell H-1o82zqj"),E(H,"class","cell H-1o82zqj"),E(K,"class","cell H-1o82zqj"),E(ce,"class","cell H-1o82zqj"),E(ke,"class","cell H-1o82zqj"),E(x,"class","cell pr16 H-1o82zqj"),E(Pe,"class","cancel ps df aic jcfe B1 H-1o82zqj"),E(e,"class","row lh28 H-1o82zqj")},m(de,se){G(de,e,se),u(e,t),u(t,r),u(t,l),ne(s,t,null),u(e,o),u(e,a),u(a,f),u(e,p),u(e,d),u(d,_),u(e,v),u(e,g),u(g,P),u(g,I),ne(T,g,null),u(e,C),u(e,V),u(V,w),u(e,D),u(e,L),u(L,N),u(e,z),u(e,H),u(H,F),u(e,U),u(e,K),u(K,X),u(K,ee),ne(Z,K,null),u(e,ue),u(e,ce),u(ce,me),u(e,oe),u(e,ke),u(ke,ge),u(e,ae),u(e,x),u(x,fe),u(e,Se),u(e,Pe),ve.m(Pe,null),Ce=!0},p(de,[se]){(!Ce||se&4)&&i!==(i=de[2](bt.Symbol)+"")&&W(r,i);const he={};se&2&&(he.active=de[1]==="symbol"),se&3&&(he.sortDirection=de[1]==="symbol"?de[0]:""),s.$set(he),(!Ce||se&4)&&c!==(c=de[2](He.Size)+"")&&W(f,c),(!Ce||se&8)&&Te(a,"pl32",de[3]-320<1200),(!Ce||se&4)&&h!==(h=de[2](He.Direction)+"")&&W(_,h),(!Ce||se&4)&&b!==(b=de[2](bt.OrderPrice)+"")&&W(P,b);const _e={};se&2&&(_e.active=de[1]==="price"),se&3&&(_e.sortDirection=de[1]==="price"?de[0]:""),T.$set(_e),(!Ce||se&4)&&O!==(O=de[2](bt.FilledRemaining)+"")&&W(w,O),(!Ce||se&4)&&$!==($=de[2](bt.OrderValue)+"")&&W(N,$),(!Ce||se&4)&&R!==(R=de[2](bt.TPSL)+"")&&W(F,R),(!Ce||se&4)&&Y!==(Y=de[2](bt.FillPrice)+"")&&W(X,Y);const be={};se&2&&(be.active=de[1]==="fillPrice"),se&3&&(be.sortDirection=de[1]==="fillPrice"?de[0]:""),Z.$set(be),(!Ce||se&4)&&pe!==(pe=de[2](bt.Type)+"")&&W(me,pe),(!Ce||se&4)&&Le!==(Le=de[2](bt.Status)+"")&&W(ge,Le),(!Ce||se&4)&&le!==(le=de[2](bt.Time)+"")&&W(fe,le),Ie===(Ie=Ee(de))&&ve?ve.p(de,se):(ve.d(1),ve=Ie(de),ve&&(ve.c(),ve.m(Pe,null)))},i(de){Ce||(Q(s.$$.fragment,de),Q(T.$$.fragment,de),Q(Z.$$.fragment,de),Ce=!0)},o(de){j(s.$$.fragment,de),j(T.$$.fragment,de),j(Z.$$.fragment,de),Ce=!1},d(de){de&&m(e),ie(s),ie(T),ie(Z),ve.d()}}}function Ok(n,e,t){let i,r,l,s,o;J(n,xn,b=>t(12,i=b)),J(n,mi,b=>t(13,r=b)),J(n,dt,b=>t(2,l=b)),J(n,Bi,b=>t(3,s=b)),J(n,yr,b=>t(4,o=b));let{symbol:a=""}=e,{ordersLen:c=0}=e,{sortDirection:f}=e,{sortKey:p}=e;function d(){if(c===0)return;const b=()=>wp(!1,r?a:"");if(i!=null&&i.cancelAllOrdersConfirm){en.create(gd,{isConditional:!1,onConfirm:b});return}b()}function h(b){if(p===b){if(f==="up"){t(0,f="down");return}if(f==="down"){t(0,f="");return}if(f===""){t(0,f="up");return}}t(1,p=b),t(0,f="up")}const _=()=>h("symbol"),v=()=>h("price"),g=()=>h("fillPrice");return n.$$set=b=>{"symbol"in b&&t(7,a=b.symbol),"ordersLen"in b&&t(8,c=b.ordersLen),"sortDirection"in b&&t(0,f=b.sortDirection),"sortKey"in b&&t(1,p=b.sortKey)},[f,p,l,s,o,d,h,a,c,_,v,g]}let Lk=class extends tt{constructor(e){super(),nt(this,e,Ok,Vk,et,{symbol:7,ordersLen:8,sortDirection:0,sortKey:1})}};function $k(n,e,t,i,r){const{orderAmendStopPriceWouldTrigger:l}=e;if(!l)return!1;const{symbol:s,trigger:o,stopDirection:a}=t;if(n.symbol!==s)return!1;const{closeEp:c,markPriceEp:f}=i;return o==="ByLastPrice"&&(a==="≥"&&c>=r||a==="≤"&&c<=r)||o==="ByMarkPrice"&&(a==="≥"&&f>=r||a==="≤"&&f<=r)}async function Zf(n,e,t){const{pricePrecision:i,priceScale:r}=n;return await en.wait(t,l=>({price:xe.floor(e,i,r),cancelAction(){l(!1)},confirmAction(){l(!0)}}))}function qk(n,e,t,i,r){const{orderAmendPriceWouldMatch:l}=n;if(!l)return!1;const{side:s,symbol:o}=i;if(e.symbol!==o)return!1;const{bid1Ep:a,ask1Ep:c}=t;return s==="Buy"&&r>=c||s==="Sell"&&r<=a}function Mk(n,e,t){const{side:i,timeInForce:r}=n;if(r==="PostOnly"){const{bid1Ep:l,ask1Ep:s}=e;if(i==="Buy"&&t>=s)return l;if(i==="Sell"&&t<=l)return s}return t}function Nk(n,e,t,i,r,l){const{type:s,contAmount:o,qtyFactor:a,maxOrderQty:c,contTickSizeEv:f,qtyScale:p,contPrecision:d,contractSize:h,contractUnderlyingAssets:_,qtyPrecision:v,tickSizeEv:g,qtyStepSize:b,valuePrecision:P,valueFactor:I,valueScale:T,contractSizePrecision:C,pricePrecision:V,contractSide:O}=i;if(s==="Perpetual"){const w=n===we.Cont?f:0,D=Math.pow(10,p-P);if(n===we.Cont)return{placeholder:`1${e(t.Cont)}=${o}`,maxQuantity:c*a,minQuantity:w,scale:p,factor:a,precision:d,tickSizeEx:f};if(n===we.Base){const L=Math.pow(10,p-V);return{maxQuantity:r,minQuantity:w,scale:p,factor:a,precision:O<0?V:P,tickSizeEx:O<0?L:D}}if(n===we.Coin){const L=Math.pow(10,p-C);return{placeholder:`${h} ${_.replace(" ","")} = 1 ${e(t.Cont)}`,maxQuantity:l,minQuantity:w,scale:p,factor:a,precision:O>0?C:P,tickSizeEx:O>0?L:D}}}if(s==="PerpetualV2"){if(n===we.Base)return{maxQuantity:r,minQuantity:g,scale:T,factor:I,precision:P,tickSizeEx:g};if(n===we.Coin)return{maxQuantity:l,minQuantity:b,scale:p,factor:a,precision:v,tickSizeEx:b}}}function vd(n,e,t,i,r,l){let s=Re(0);const o=Re(n.size);let a=[],c=[];if(t!=="ts"?(a=i[t].Partial,c=i[t].Entire):a=i[t].All,c.length===0){const v=a.reduce((g,b)=>e&&e.orderID===b.orderID?g:g.plus(b.orderQty),Re(0));s=o.minus(v)}const{ordType:f,stopPx:p,price:d}=e,h=["MarketIfTouched","Stop"].includes(f)?p:d,_=Number(Qt.convert(r,l,s.toNumber(),h));return _<0?0:_}function Hk(n){let e,t=n[2](Al.PleaseConfirmYour,{TriggerPrice:n[0]})+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","desc ph24 lh22 f14 T3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&5&&t!==(t=r[2](Al.PleaseConfirmYour,{TriggerPrice:r[0]})+"")&&W(i,t)},d(r){r&&m(e)}}}function Bk(n){let e,t,i=n[2](Al.OrderAmendMay)+"",r,l,s,o,a,c;return{c(){e=y("div"),t=y("span"),r=B(i),l=q(),s=y("i"),o=B(""),this.h()},l(f){e=k(f,"DIV",{class:!0,slot:!0});var p=S(e);t=k(p,"SPAN",{class:!0});var d=S(t);r=A(d,i),d.forEach(m),l=M(p),s=k(p,"I",{class:!0});var h=S(s);o=A(h,""),h.forEach(m),p.forEach(m),this.h()},h(){E(t,"class","b T2"),E(s,"class","iconfont cp T3"),E(e,"class","df aic jcsb p24 lh24 f16"),E(e,"slot","header")},m(f,p){G(f,e,p),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),a||(c=We(s,"click",n[4]),a=!0)},p(f,p){p&4&&i!==(i=f[2](Al.OrderAmendMay)+"")&&W(r,i)},d(f){f&&m(e),a=!1,c()}}}function Ak(n){let e,t=n[2](He.DontShowAgain)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ml8 T3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&4&&t!==(t=r[2](He.DontShowAgain)+"")&&W(i,t)},d(r){r&&m(e)}}}function zk(n){let e=n[2](He.Cancel)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&4&&e!==(e=i[2](He.Cancel)+"")&&W(t,e)},d(i){i&&m(t)}}}function Qk(n){let e=n[2](He.Confirm)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&4&&e!==(e=i[2](He.Confirm)+"")&&W(t,e)},d(i){i&&m(t)}}}function Rk(n){let e,t,i,r,l,s,o,a,c;function f(d){n[8](d)}let p={class:"usn ml40",$$slots:{default:[Ak]},$$scope:{ctx:n}};return n[1]!==void 0&&(p.checked=n[1]),t=new Pn({props:p}),De.push(()=>qe(t,"checked",f)),s=new Ht({props:{$$slots:{default:[zk]},$$scope:{ctx:n}}}),s.$on("click",n[3]),a=new Ht({props:{type:"primary",$$slots:{default:[Qk]},$$scope:{ctx:n}}}),a.$on("click",n[5]),{c(){e=y("div"),te(t.$$.fragment),r=q(),l=y("div"),te(s.$$.fragment),o=q(),te(a.$$.fragment),this.h()},l(d){e=k(d,"DIV",{class:!0,slot:!0});var h=S(e);re(t.$$.fragment,h),r=M(h),l=k(h,"DIV",{});var _=S(l);re(s.$$.fragment,_),o=M(_),re(a.$$.fragment,_),_.forEach(m),h.forEach(m),this.h()},h(){E(e,"class","p24 df aic jcsb mt24"),E(e,"slot","footer")},m(d,h){G(d,e,h),ne(t,e,null),u(e,r),u(e,l),ne(s,l,null),u(l,o),ne(a,l,null),c=!0},p(d,h){const _={};h&1028&&(_.$$scope={dirty:h,ctx:d}),!i&&h&2&&(i=!0,_.checked=d[1],Me(()=>i=!1)),t.$set(_);const v={};h&1028&&(v.$$scope={dirty:h,ctx:d}),s.$set(v);const g={};h&1028&&(g.$$scope={dirty:h,ctx:d}),a.$set(g)},i(d){c||(Q(t.$$.fragment,d),Q(s.$$.fragment,d),Q(a.$$.fragment,d),c=!0)},o(d){j(t.$$.fragment,d),j(s.$$.fragment,d),j(a.$$.fragment,d),c=!1},d(d){d&&m(e),ie(t),ie(s),ie(a)}}}function Fk(n){let e,t;return e=new bn({props:{style:"width: 640px; max-width: 640px;",$$slots:{footer:[Rk],header:[Bk],default:[Hk]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&1031&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function jk(n,e,t){let i;J(n,dt,h=>t(2,i=h));let{price:r="0"}=e,{cancelAction:l=null}=e,{confirmAction:s=null}=e;const o=Kt();let a=!1;function c(){l(),o("close")}function f(){l(),o("close")}function p(){s(),o("close"),a&&ar("orderAmendStopPriceWouldTrigger",!1).then()}function d(h){a=h,t(1,a)}return n.$$set=h=>{"price"in h&&t(0,r=h.price),"cancelAction"in h&&t(6,l=h.cancelAction),"confirmAction"in h&&t(7,s=h.confirmAction)},[r,a,i,c,f,p,l,s,d]}let Uk=class extends tt{constructor(e){super(),nt(this,e,jk,Fk,et,{price:0,cancelAction:6,confirmAction:7})}};function Wk(n){let e,t=n[1](Io.Avail)+"",i,r,l,s;return{c(){e=y("div"),i=B(t),r=B(": "),l=y("span"),s=B(n[0]),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=S(e);i=A(a,t),r=A(a,": "),l=k(a,"SPAN",{class:!0});var c=S(l);s=A(c,n[0]),c.forEach(m),a.forEach(m),this.h()},h(){E(l,"class","T1"),E(e,"class","mt8 f12 fw2 T2")},m(o,a){G(o,e,a),u(e,i),u(e,r),u(e,l),u(l,s)},p(o,[a]){a&2&&t!==(t=o[1](Io.Avail)+"")&&W(i,t),a&1&&W(s,o[0])},i:rt,o:rt,d(o){o&&m(e)}}}function Gk(n,e,t){let i,r,l;J(n,br,_=>t(7,i=_)),J(n,mp,_=>t(8,r=_)),J(n,dt,_=>t(1,l=_));let{curPositions:s=[]}=e,{curPosMode:o=Ct.OneWay}=e,{contract:a=null}=e,{qtyType:c}=e,{order:f=null}=e,p;function d(_,v,g){const b=g(a.symbol,_.posSide);return vd(_,f,v,b,a,c)}function h(_,v,g,b,P,I){if(!_||!g)return;const{side:T,posSide:C,orderQty:V,orderQtyStr:O,actionBy:w,ordType:D,stopPx:L,price:$}=_,z=Bn(P,g,b,T==="Buy"?"Sell":"Buy"),H=Ml(_),R=Nl(_),F=fl(_);if(w==="FromPosition"&&(H||R||F)){const X=Qt.getUnit(P,c),Z=d(z,H?"tp":R?"sl":"ts",I);t(0,p=Z>0?Z+" "+X:"PositionSize");return}const{type:U,settleCurrency:K}=P;if(U==="PerpetualV2"&&b===Ct.Hedge?T==="Buy"&&C==="Long"||T==="Sell"&&C==="Short":!0){const X=hp.findAccount(v,K);t(0,p=X?K==="USDT"?X.availableBalance4WU:X.availableBalanceWU:"-")}else{const X=["MarketIfTouched","Stop"].includes(D)?L:$,ee={[we.Cont]:z.sizeByContWU,[we.Base]:Qt.toValue(P,V,X),[we.Coin]:z.sizeByCoinWU};t(0,p=V===0?O:ee[c])}}return n.$$set=_=>{"curPositions"in _&&t(2,s=_.curPositions),"curPosMode"in _&&t(3,o=_.curPosMode),"contract"in _&&t(4,a=_.contract),"qtyType"in _&&t(5,c=_.qtyType),"order"in _&&t(6,f=_.order)},n.$$.update=()=>{n.$$.dirty&476&&h(f,r,s,o,a,i)},[p,l,s,o,a,c,f,i,r]}let Kk=class extends tt{constructor(e){super(),nt(this,e,Gk,Wk,et,{curPositions:2,curPosMode:3,contract:4,qtyType:5,order:6})}};const Gn={EditOrder:"ec5444",MarketConditional:"5b9130",LimitConditional:"d17533",LastPrice:"29a472",MarkPrice:"8ab739",TriggerBy:"ed9a62",Limit:"676afc",TriggerPrice:"605eef",OrderPrice:"09a229",Size:"cd6856"};function xf(n){let e,t,i,r=n[10](Gn.EditOrder)+"",l,s,o=n[5].pairName+"",a,c,f,p,d,h,_,v,g=n[10](Gn[n[3]?n[21]?"MarketConditional":"LimitConditional":"Limit"])+"",b,P,I,T,C,V,O,w,D,L,$,N,z,H=n[3]&&n[20]&&eu(n),R=!n[21]&&tu(n),F=n[2].orderQty>0&&nu(n),U=n[2].orderQty>0&&iu(n);return w=new Ht({props:{class:"cancel f1 fw2",$$slots:{default:[Xk]},$$scope:{ctx:n}}}),w.$on("click",n[23]),L=new Ht({props:{class:"confirm f1 fw2",type:"primary",loading:n[11],$$slots:{default:[Yk]},$$scope:{ctx:n}}}),L.$on("click",n[22]),{c(){e=y("div"),t=y("div"),i=y("span"),l=B(r),s=B(" - "),a=B(o),c=q(),f=y("div"),p=y("div"),d=y("span"),h=B(n[4]),_=q(),v=y("span"),b=B(g),P=q(),H&&H.c(),I=q(),R&&R.c(),T=q(),F&&F.c(),C=q(),U&&U.c(),V=q(),O=y("div"),te(w.$$.fragment),D=q(),te(L.$$.fragment),this.h()},l(K){e=k(K,"DIV",{class:!0,"data-popper-placement":!0,role:!0});var Y=S(e);t=k(Y,"DIV",{class:!0});var X=S(t);i=k(X,"SPAN",{class:!0});var ee=S(i);l=A(ee,r),s=A(ee," - "),a=A(ee,o),ee.forEach(m),X.forEach(m),c=M(Y),f=k(Y,"DIV",{class:!0});var Z=S(f);p=k(Z,"DIV",{class:!0});var ue=S(p);d=k(ue,"SPAN",{class:!0});var ce=S(d);h=A(ce,n[4]),ce.forEach(m),_=M(ue),v=k(ue,"SPAN",{class:!0});var pe=S(v);b=A(pe,g),pe.forEach(m),ue.forEach(m),P=M(Z),H&&H.l(Z),I=M(Z),R&&R.l(Z),T=M(Z),F&&F.l(Z),Z.forEach(m),C=M(Y),U&&U.l(Y),V=M(Y),O=k(Y,"DIV",{class:!0});var me=S(O);re(w.$$.fragment,me),D=M(me),re(L.$$.fragment,me),me.forEach(m),Y.forEach(m),this.h()},h(){E(i,"class","T1"),E(t,"class","title mt8 df aic jcsb b f14 T1 H-10xyaqx"),E(d,"class","H-10xyaqx"),Te(d,"sell",n[2].side==="Sell"),Te(d,"buy",n[2].side==="Buy"),E(v,"class","edit-order-type ml4 H-10xyaqx"),E(p,"class","label mt8 mb16 f12 T2 H-10xyaqx"),E(f,"class","body H-10xyaqx"),E(O,"class","btn df mt16 H-10xyaqx"),E(e,"class","wrap B2 br8 H-10xyaqx"),E(e,"data-popper-placement",Zk),E(e,"role","tooltip")},m(K,Y){G(K,e,Y),u(e,t),u(t,i),u(i,l),u(i,s),u(i,a),u(e,c),u(e,f),u(f,p),u(p,d),u(d,h),u(p,_),u(p,v),u(v,b),u(f,P),H&&H.m(f,null),u(f,I),R&&R.m(f,null),u(f,T),F&&F.m(f,null),u(e,C),U&&U.m(e,null),u(e,V),u(e,O),ne(w,O,null),u(O,D),ne(L,O,null),n[45](e),$=!0,N||(z=We(e,"mousedown",Zn(n[37])),N=!0)},p(K,Y){(!$||Y[0]&1024)&&r!==(r=K[10](Gn.EditOrder)+"")&&W(l,r),(!$||Y[0]&32)&&o!==(o=K[5].pairName+"")&&W(a,o),(!$||Y[0]&16)&&W(h,K[4]),(!$||Y[0]&4)&&Te(d,"sell",K[2].side==="Sell"),(!$||Y[0]&4)&&Te(d,"buy",K[2].side==="Buy"),(!$||Y[0]&2098184)&&g!==(g=K[10](Gn[K[3]?K[21]?"MarketConditional":"LimitConditional":"Limit"])+"")&&W(b,g),K[3]&&K[20]?H?(H.p(K,Y),Y[0]&1048584&&Q(H,1)):(H=eu(K),H.c(),Q(H,1),H.m(f,I)):H&&(ot(),j(H,1,1,()=>{H=null}),at()),K[21]?R&&(ot(),j(R,1,1,()=>{R=null}),at()):R?(R.p(K,Y),Y[0]&2097152&&Q(R,1)):(R=tu(K),R.c(),Q(R,1),R.m(f,T)),K[2].orderQty>0?F?(F.p(K,Y),Y[0]&4&&Q(F,1)):(F=nu(K),F.c(),Q(F,1),F.m(f,null)):F&&(ot(),j(F,1,1,()=>{F=null}),at()),K[2].orderQty>0?U?(U.p(K,Y),Y[0]&4&&Q(U,1)):(U=iu(K),U.c(),Q(U,1),U.m(e,V)):U&&(ot(),j(U,1,1,()=>{U=null}),at());const X={};Y[0]&1024|Y[2]&8&&(X.$$scope={dirty:Y,ctx:K}),w.$set(X);const ee={};Y[0]&2048&&(ee.loading=K[11]),Y[0]&1024|Y[2]&8&&(ee.$$scope={dirty:Y,ctx:K}),L.$set(ee)},i(K){$||(Q(H),Q(R),Q(F),Q(U),Q(w.$$.fragment,K),Q(L.$$.fragment,K),$=!0)},o(K){j(H),j(R),j(F),j(U),j(w.$$.fragment,K),j(L.$$.fragment,K),$=!1},d(K){K&&m(e),H&&H.d(),R&&R.d(),F&&F.d(),U&&U.d(),ie(w),ie(L),n[45](null),N=!1,z()}}}function eu(n){let e,t,i,r,l,s;const o=[{class:"trigger-price"},{label:n[10](Gn.TriggerPrice)+" ("+n[5].quoteCurrency+")"},{options:rn.createTriggerTypesOptions(n[10],Gn)},n[17],{unit:""}];function a(d){n[38](d)}function c(d){n[39](d)}function f(d){n[40](d)}let p={};for(let d=0;d<o.length;d+=1)p=pn(p,o[d]);return n[19]!==void 0&&(p.selectValue=n[19]),n[13]!==void 0&&(p.input=n[13]),n[15]!==void 0&&(p.priceEp=n[15]),t=new yn({props:p}),De.push(()=>qe(t,"selectValue",a)),De.push(()=>qe(t,"input",c)),De.push(()=>qe(t,"priceEp",f)),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=S(e);re(t.$$.fragment,h),h.forEach(m),this.h()},h(){E(e,"class","mb12")},m(d,h){G(d,e,h),ne(t,e,null),s=!0},p(d,h){const _=h[0]&132128?dn(o,[o[0],h[0]&1056&&{label:d[10](Gn.TriggerPrice)+" ("+d[5].quoteCurrency+")"},h[0]&1024&&{options:rn.createTriggerTypesOptions(d[10],Gn)},h[0]&131072&&mn(d[17]),o[4]]):{};!i&&h[0]&524288&&(i=!0,_.selectValue=d[19],Me(()=>i=!1)),!r&&h[0]&8192&&(r=!0,_.input=d[13],Me(()=>r=!1)),!l&&h[0]&32768&&(l=!0,_.priceEp=d[15],Me(()=>l=!1)),t.$set(_)},i(d){s||(Q(t.$$.fragment,d),s=!0)},o(d){j(t.$$.fragment,d),s=!1},d(d){d&&m(e),ie(t)}}}function tu(n){let e,t,i,r,l;const s=[{class:"order-price"},{label:n[10](Gn.OrderPrice)},n[17]];function o(f){n[41](f)}function a(f){n[42](f)}let c={};for(let f=0;f<s.length;f+=1)c=pn(c,s[f]);return n[12]!==void 0&&(c.input=n[12]),n[8]!==void 0&&(c.priceEp=n[8]),t=new yn({props:c}),De.push(()=>qe(t,"input",o)),De.push(()=>qe(t,"priceEp",a)),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=S(e);re(t.$$.fragment,p),p.forEach(m),this.h()},h(){E(e,"class","mb12")},m(f,p){G(f,e,p),ne(t,e,null),l=!0},p(f,p){const d=p[0]&132096?dn(s,[s[0],p[0]&1024&&{label:f[10](Gn.OrderPrice)},p[0]&131072&&mn(f[17])]):{};!i&&p[0]&4096&&(i=!0,d.input=f[12],Me(()=>i=!1)),!r&&p[0]&256&&(r=!0,d.priceEp=f[8],Me(()=>r=!1)),t.$set(d)},i(f){l||(Q(t.$$.fragment,f),l=!0)},o(f){j(t.$$.fragment,f),l=!1},d(f){f&&m(e),ie(t)}}}function nu(n){let e,t,i,r;const l=[{class:"order-quantity"},{label:n[10](Gn.Size)},{isInline:!1},{operation:!1},n[18]];function s(c){n[43](c)}function o(c){n[44](c)}let a={};for(let c=0;c<l.length;c+=1)a=pn(a,l[c]);return n[14]!==void 0&&(a.input=n[14]),n[16]!==void 0&&(a.quantity=n[16]),e=new Un({props:a}),De.push(()=>qe(e,"input",s)),De.push(()=>qe(e,"quantity",o)),{c(){te(e.$$.fragment)},l(c){re(e.$$.fragment,c)},m(c,f){ne(e,c,f),r=!0},p(c,f){const p=f[0]&263168?dn(l,[l[0],f[0]&1024&&{label:c[10](Gn.Size)},l[2],l[3],f[0]&262144&&mn(c[18])]):{};!t&&f[0]&16384&&(t=!0,p.input=c[14],Me(()=>t=!1)),!i&&f[0]&65536&&(i=!0,p.quantity=c[16],Me(()=>i=!1)),e.$set(p)},i(c){r||(Q(e.$$.fragment,c),r=!0)},o(c){j(e.$$.fragment,c),r=!1},d(c){ie(e,c)}}}function iu(n){let e,t;return e=new Kk({props:{order:n[2],contract:n[5],curPositions:n[6],curPosMode:n[7],qtyType:n[9]}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&4&&(l.order=i[2]),r[0]&32&&(l.contract=i[5]),r[0]&64&&(l.curPositions=i[6]),r[0]&128&&(l.curPosMode=i[7]),r[0]&512&&(l.qtyType=i[9]),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Xk(n){let e=n[10](He.Cancel)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[0]&1024&&e!==(e=i[10](He.Cancel)+"")&&W(t,e)},d(i){i&&m(t)}}}function Yk(n){let e=n[10](He.Confirm)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[0]&1024&&e!==(e=i[10](He.Confirm)+"")&&W(t,e)},d(i){i&&m(t)}}}function Jk(n){let e,t,i=n[1]&&xf(n);return{c(){i&&i.c(),e=ut()},l(r){i&&i.l(r),e=ut()},m(r,l){i&&i.m(r,l),G(r,e,l),t=!0},p(r,l){r[1]?i?(i.p(r,l),l[0]&2&&Q(i,1)):(i=xf(r),i.c(),Q(i,1),i.m(e.parentNode,e)):i&&(ot(),j(i,1,1,()=>{i=null}),at())},i(r){t||(Q(i),t=!0)},o(r){j(i),t=!1},d(r){i&&i.d(r),r&&m(e)}}}let Zk="top";function xk(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v,g;J(n,Ci,Ne=>t(48,o=Ne)),J(n,Xt,Ne=>t(49,a=Ne)),J(n,xn,Ne=>t(50,c=Ne)),J(n,dt,Ne=>t(10,f=Ne)),J(n,br,Ne=>t(31,p=Ne)),J(n,An,Ne=>t(32,d=Ne)),J(n,zn,Ne=>t(33,h=Ne)),J(n,Ai,Ne=>t(34,_=Ne)),J(n,ri,Ne=>t(35,v=Ne)),J(n,zi,Ne=>t(36,g=Ne));let{order:b=null}=e,{isConditionalOrder:P=!1}=e,{direction:I=""}=e,{modifyField:T="Size"}=e,{visible:C=!1}=e,{anchorNode:V=null}=e,{tooltipNode:O=null}=e,{item:w=null}=e,D=!1,L=!1,$=null,N=null,z=null,H,R,F=[],U=Ct.OneWay,K=0,Y=0,X=0,ee=null,Z=null,ue="ByLastPrice",ce,pe=Number.MAX_SAFE_INTEGER,me=Number.MAX_SAFE_INTEGER;Lt(()=>t(27,D=!0));function oe(Ne,Ge){!Ge||!Ne||ep(Ne,Ge,{placement:"top",modifiers:[{name:"offset",options:{offset:[0,6]}}]})}function ke(Ne,Ge){Ne&&setTimeout(()=>{Ge==="Size"&&z&&z.focus(),Ge==="Price"&&$&&$.focus(),Ge==="TriggerPrice"&&N&&N.focus()},0)}function Le(Ne,Ge){!Ne||!Ge||(H=Ge.get(Ne.symbol))}function ge(Ne,Ge){!Ne||!Ge||t(5,R=Ge.get(Ne.symbol))}function ae(Ne){if(!Ne)return;const{type:Ge,qtyFactor:Xe}=R,{activationPriceEp:ye,stopPxEp:Ke,orderQty:Qe,price:ze,ordType:Ue,stopPx:st}=Ne;t(15,K=s?ye:Ke),t(8,Y=Ne.priceEp),t(19,ue=Ne.trigger);let Oe=Qe;const it=["MarketIfTouched","Stop"].includes(Ue)?st:ze;Ge==="PerpetualV2"&&ce===we.Base&&(Oe=Qt.toValueQuantity(R,Qe,it)),Ge==="Perpetual"&&(ce===we.Base&&(Oe=Qt.toValueQuantity(R,Qe,it)),ce===we.Coin&&(Oe=Qt.toCoinQuantity(R,Qe,it))),t(16,X=Re(Oe).times(Xe).toNumber())}function x(Ne,Ge){t(6,F=Ne.filter(({symbol:ye})=>ye===Ge.symbol));const Xe=F.filter(({posMode:ye})=>!!ye).every(({posMode:ye})=>ye===Ct.Hedge);t(7,U=Xe?Ct.Hedge:Ct.OneWay)}async function le(){if(fe())return;t(11,L=!0);const Ne=await Se();t(11,L=!1),Ne&&de()}function fe(){const Ne=Number(b.displayQty)!==Number(b.orderQty)&&Number(b.displayQty)>0,Ge=Ee(X,Y||K,ce,R);if(Ne){const Xe=Re(b.displayQty).times(50).toNumber();if(Ge>Xe){const ye=f(Ye.TheNumberOfOrders);return ye&&Pt.send("toast","info",{message:ye}),!0}if(Ge<b.displayQty){const ye=f(Ye.MinOrderQuantity);return ye&&Pt.send("toast","info",{message:ye}),!0}}}function Se(){const{type:Ne,pricePrecision:Ge}=R,Xe={type:Ne},ye=Mk(b,o,Y),Ke=s?K+b.pegOffsetValueEp:K;if(Ne==="Perpetual"&&(Xe.priceEp=Y,Xe.orderQty=Ee(X,Y||K,ce,R),P&&(Xe.stopPxEp=Ke)),Ne==="PerpetualV2"&&(Xe.priceRp=xe.floor(ye,Ge),Xe.posSide=b.posSide,Xe.orderQtyRq=Ee(X,Y||K,ce,R),P&&(Xe.stopPxRp=xe.floor(Ke,Ge),Xe.triggerType=ue)),P){if(s)return Gi(b,Xe,{by:"active",goal:"replace_conditional"});if($k(a,c,b,H,Ke))return setTimeout(async()=>{if(await Zf(R,Y,Uk))return Gi(b,Xe,{by:"conditional",goal:"replace_conditional_protect"})}),Promise.resolve(!0)}else return qk(c,a,o,b,ye)?(setTimeout(async()=>{if(await Zf(R,Y,ld))return Gi(b,Xe,{by:"active",goal:"replace_limit"})}),Promise.resolve(!0)):Gi(b,Xe,{by:"active",goal:"replace_limit_protect"});return Gi(b,Xe,{by:"active",goal:"replace_inactivated"})}function Pe({quoteCurrency:Ne,tickSizeEp:Ge,pricePrecision:Xe,maxPriceEp:ye,priceFactor:Ke,priceScale:Qe}){t(17,ee={isInline:!1,operation:!1,unit:Ne,tickSizeEp:Ge,precision:Xe,maxPriceEp:ye,factor:Ke,scale:Qe})}function Ce(Ne,Ge,Xe,ye,Ke,Qe,ze){const Ue=Nk(Ne,Ge,Xe,ye,Ke,Qe);t(18,Z=Object.assign(Object.assign({},Ue),{unit:ze}))}function Ee(Ne,Ge,Xe,ye){const{type:Ke,qtyPrecision:Qe,qtyScale:ze,contPrecision:Ue,settleValuePrecision:st,valuePrecision:Oe,valueScale:it}=ye;let ct=0,ft=0;Ke==="Perpetual"&&(ct=Xe===we.Cont?Ue:st,ft=ze),Ke==="PerpetualV2"&&(ct=Xe===we.Base?Oe:Qe,ft=Xe===we.Base?it:ze);const _t=Number(xe.floor(Ne,ct,ft));return{[we.Cont]:_t,[we.Base]:Number(In(_t,Ge,ye)),[we.Coin]:Number(Dn(_t,ye,Ge))}[Xe]}function Ie(Ne,Ge,Xe){const ye=Xe(R.symbol,Ne.posSide);return vd(Ne,b,Ge,ye,R,ce)}function ve(Ne,Ge,Xe,ye,Ke,Qe){const{side:ze,posSide:Ue,orderQty:st,price:Oe,actionBy:it,ordType:ct,stopPx:ft}=Ne,_t=ze==="Buy"&&Ue==="Short"||ze==="Sell"&&Ue==="Long",gt=Bn(Ge,ye,Ke,ze==="Buy"?"Sell":"Buy"),Dt=Ml(Ne),It=Nl(Ne),pt=fl(Ne);if(it==="FromPosition"&&(Dt||It||pt)){const Nt=Ie(gt,Dt?"tp":It?"sl":"ts",Qe);t(29,me=t(28,pe=Re(Nt).times(Ge.qtyFactor).toNumber()));return}if(_t||it==="FromPosition"){const mt=["MarketIfTouched","Stop"].includes(ct)?ft:Oe;t(28,pe=Number(Qt.toValueQuantity(Ge,st,mt))),t(29,me=Number(gt.sizeByCoin||0))}else t(28,pe=li(Ge,Xe)),t(29,me=si(Ge))}function de(){t(1,C=!1)}function se(Ne){$i.call(this,n,Ne)}function he(Ne){ue=Ne,t(19,ue)}function _e(Ne){N=Ne,t(13,N)}function be(Ne){K=Ne,t(15,K)}function Ve(Ne){$=Ne,t(12,$)}function Be(Ne){Y=Ne,t(8,Y)}function Fe(Ne){z=Ne,t(14,z)}function $e(Ne){X=Ne,t(16,X)}function Ae(Ne){De[Ne?"unshift":"push"](()=>{O=Ne,t(0,O)})}return n.$$set=Ne=>{"order"in Ne&&t(2,b=Ne.order),"isConditionalOrder"in Ne&&t(3,P=Ne.isConditionalOrder),"direction"in Ne&&t(4,I=Ne.direction),"modifyField"in Ne&&t(24,T=Ne.modifyField),"visible"in Ne&&t(1,C=Ne.visible),"anchorNode"in Ne&&t(25,V=Ne.anchorNode),"tooltipNode"in Ne&&t(0,O=Ne.tooltipNode),"item"in Ne&&t(26,w=Ne.item)},n.$$.update=()=>{n.$$.dirty[0]&150994944&&ke(D,T),n.$$.dirty[0]&4|n.$$.dirty[1]&32&&ge(b,g),n.$$.dirty[0]&4|n.$$.dirty[1]&16&&Le(b,v),n.$$.dirty[0]&4|n.$$.dirty[1]&8&&x(_,b),n.$$.dirty[0]&32|n.$$.dirty[1]&6&&t(9,ce=R.type==="Perpetual"?h:d),n.$$.dirty[0]&544&&t(30,i=Qt.getUnit(R,ce)),n.$$.dirty[0]&4&&t(21,r=ii.isMarketOrder(b.ordType)),n.$$.dirty[0]&4&&t(20,l=["Inactive","Untriggered"].indexOf(b.ordStatus)>-1&&!As(b.pegPriceType)),n.$$.dirty[0]&4&&(s=ii.isActivation(b.ordStatus,b.pegPriceType)),n.$$.dirty[0]&33554433&&oe(V,O),n.$$.dirty[0]&484|n.$$.dirty[1]&1&&ve(b,R,Y,F,U,p),n.$$.dirty[0]&4&&ae(b),n.$$.dirty[0]&32&&Pe(R),n.$$.dirty[0]&1879049760&&Ce(ce,f,Gn,R,pe,me,i)},[O,C,b,P,I,R,F,U,Y,ce,f,L,$,N,z,K,X,ee,Z,ue,l,r,le,de,T,V,w,D,pe,me,i,p,d,h,_,v,g,se,he,_e,be,Ve,Be,Fe,$e,Ae]}let bd=class extends tt{constructor(e){super(),nt(this,e,xk,Jk,et,{order:2,isConditionalOrder:3,direction:4,modifyField:24,visible:1,anchorNode:25,tooltipNode:0,item:26},null,[-1,-1,-1])}get order(){return this.$$.ctx[2]}set order(e){this.$$set({order:e}),ni()}get isConditionalOrder(){return this.$$.ctx[3]}set isConditionalOrder(e){this.$$set({isConditionalOrder:e}),ni()}get direction(){return this.$$.ctx[4]}set direction(e){this.$$set({direction:e}),ni()}get modifyField(){return this.$$.ctx[24]}set modifyField(e){this.$$set({modifyField:e}),ni()}get visible(){return this.$$.ctx[1]}set visible(e){this.$$set({visible:e}),ni()}get anchorNode(){return this.$$.ctx[25]}set anchorNode(e){this.$$set({anchorNode:e}),ni()}get tooltipNode(){return this.$$.ctx[0]}set tooltipNode(e){this.$$set({tooltipNode:e}),ni()}get item(){return this.$$.ctx[26]}set item(e){this.$$set({item:e}),ni()}};function eP(n){let e,t,i,r,l,s,o,a,c=tr(n[2],n[1],n[7],He)+"",f,p,d,h=n[1].price+"",_,v,g,b,P,I,T,C,V=n[1].valueWU+"",O,w,D,L,$,N,z=n[1].fillPrice+"",H,R,F,U=n[1].ordType+"",K,Y,X,ee=n[1].ordStatus+"",Z,ue,ce,pe=n[1].actionTime+"",me,oe,ke;return{c(){e=y("div"),t=y("div"),i=B(n[0]),r=q(),l=y("div"),s=B(n[5]),o=q(),a=y("div"),f=B(c),p=q(),d=y("div"),_=B(h),v=q(),g=y("div"),b=B(n[4]),P=B("/"),I=B(n[3]),T=q(),C=y("div"),O=B(V),w=q(),D=y("div"),L=B(n[6]),$=q(),N=y("div"),H=B(z),R=q(),F=y("div"),K=B(U),Y=q(),X=y("div"),Z=B(ee),ue=q(),ce=y("div"),me=B(pe),oe=q(),ke=y("div"),this.h()},l(Le){e=k(Le,"DIV",{class:!0});var ge=S(e);t=k(ge,"DIV",{class:!0});var ae=S(t);i=A(ae,n[0]),ae.forEach(m),r=M(ge),l=k(ge,"DIV",{class:!0});var x=S(l);s=A(x,n[5]),x.forEach(m),o=M(ge),a=k(ge,"DIV",{class:!0});var le=S(a);f=A(le,c),le.forEach(m),p=M(ge),d=k(ge,"DIV",{class:!0});var fe=S(d);_=A(fe,h),fe.forEach(m),v=M(ge),g=k(ge,"DIV",{class:!0});var Se=S(g);b=A(Se,n[4]),P=A(Se,"/"),I=A(Se,n[3]),Se.forEach(m),T=M(ge),C=k(ge,"DIV",{class:!0});var Pe=S(C);O=A(Pe,V),Pe.forEach(m),w=M(ge),D=k(ge,"DIV",{class:!0});var Ce=S(D);L=A(Ce,n[6]),Ce.forEach(m),$=M(ge),N=k(ge,"DIV",{class:!0});var Ee=S(N);H=A(Ee,z),Ee.forEach(m),R=M(ge),F=k(ge,"DIV",{class:!0});var Ie=S(F);K=A(Ie,U),Ie.forEach(m),Y=M(ge),X=k(ge,"DIV",{class:!0});var ve=S(X);Z=A(ve,ee),ve.forEach(m),ue=M(ge),ce=k(ge,"DIV",{class:!0});var de=S(ce);me=A(de,pe),de.forEach(m),oe=M(ge),ke=k(ge,"DIV",{class:!0}),S(ke).forEach(m),ge.forEach(m),this.h()},h(){E(t,"class","pr pl16 H-13x2wah"),Te(t,"tp",n[0]==="TP"),Te(t,"sl",n[0]==="SL"),E(l,"class","tr H-13x2wah"),Te(l,"buy",n[1].side==="Buy"),Te(l,"sell",n[1].side==="Sell"),E(a,"class","tr H-13x2wah"),E(d,"class","tr H-13x2wah"),E(g,"class","tr H-13x2wah"),E(C,"class","tr H-13x2wah"),E(D,"class","tr H-13x2wah"),E(N,"class","tr H-13x2wah"),E(F,"class","tr H-13x2wah"),E(X,"class","tr H-13x2wah"),E(ce,"class","pr16 tr H-13x2wah"),E(ke,"class","tr H-13x2wah"),E(e,"class","wrap fw2 H-13x2wah")},m(Le,ge){G(Le,e,ge),u(e,t),u(t,i),u(e,r),u(e,l),u(l,s),u(e,o),u(e,a),u(a,f),u(e,p),u(e,d),u(d,_),u(e,v),u(e,g),u(g,b),u(g,P),u(g,I),u(e,T),u(e,C),u(C,O),u(e,w),u(e,D),u(D,L),u(e,$),u(e,N),u(N,H),u(e,R),u(e,F),u(F,K),u(e,Y),u(e,X),u(X,Z),u(e,ue),u(e,ce),u(ce,me),u(e,oe),u(e,ke)},p(Le,[ge]){ge&1&&W(i,Le[0]),ge&1&&Te(t,"tp",Le[0]==="TP"),ge&1&&Te(t,"sl",Le[0]==="SL"),ge&32&&W(s,Le[5]),ge&2&&Te(l,"buy",Le[1].side==="Buy"),ge&2&&Te(l,"sell",Le[1].side==="Sell"),ge&134&&c!==(c=tr(Le[2],Le[1],Le[7],He)+"")&&W(f,c),ge&2&&h!==(h=Le[1].price+"")&&W(_,h),ge&16&&W(b,Le[4]),ge&8&&W(I,Le[3]),ge&2&&V!==(V=Le[1].valueWU+"")&&W(O,V),ge&64&&W(L,Le[6]),ge&2&&z!==(z=Le[1].fillPrice+"")&&W(H,z),ge&2&&U!==(U=Le[1].ordType+"")&&W(K,U),ge&2&&ee!==(ee=Le[1].ordStatus+"")&&W(Z,ee),ge&2&&pe!==(pe=Le[1].actionTime+"")&&W(me,pe)},i:rt,o:rt,d(Le){Le&&m(e)}}}function tP(n,e){return n==="TP"?"-":e.stopPx}function nP(n,e,t){let i,r,l,s,o,a,c,f,p,d;J(n,Ri,P=>t(9,c=P)),J(n,An,P=>t(10,f=P)),J(n,zn,P=>t(11,p=P)),J(n,dt,P=>t(7,d=P));let{type:h=""}=e,{item:_={}}=e;function v(P,I){return{[we.Cont]:I.orderQtyByCont,[we.Base]:I.orderQtyByValue,[we.Coin]:I.orderQtyByCoin}[P]}function g(P,I){return{[we.Cont]:I.cumQtyByCont,[we.Base]:I.cumQtyByValue,[we.Coin]:I.cumQtyByCoin}[P]}function b(P,I){return{[we.Cont]:I.leavesQtyByCont,[we.Base]:I.leavesQtyByValue,[we.Coin]:I.leavesQtyByCoin}[P]}return n.$$set=P=>{"type"in P&&t(0,h=P.type),"item"in P&&t(1,_=P.item)},n.$$.update=()=>{n.$$.dirty&3&&t(6,i=tP(h,_)),n.$$.dirty&3074&&t(8,r=_&&_.type==="Perpetual"?p:f),n.$$.dirty&258&&t(5,l=v(r,_)),n.$$.dirty&258&&t(4,s=g(r,_)),n.$$.dirty&258&&t(3,o=b(r,_)),n.$$.dirty&514&&t(2,a=er.findContract(c,_.symbol))},[h,_,a,o,s,l,i,d,r,c,f,p]}let Ed=class extends tt{constructor(e){super(),nt(this,e,nP,eP,et,{type:0,item:1})}};function iP(n){let e,t,i,r=n[10](Je.LastPrice)+"",l,s,o,a,c,f,p=n[10](Je.MarkPrice)+"",d,h,_,v,g,b,P=n[10](Je.OrderPrice)+"",I,T,C,V=n[1].avgEntryPrice+"",O,w,D,L,$,N,z,H,R,F;function U(ee){n[14](ee)}let K={type:"TakeProfit",contract:n[2],market:n[3],source:n[0],targetPosition:n[1],order:n[4],closeMode:"Entire",availableSize:n[1].orderQty};n[6]!==void 0&&(K.form=n[6]),L=new nr({props:K}),De.push(()=>qe(L,"form",U));function Y(ee){n[15](ee)}let X={type:"StopLoss",contract:n[2],market:n[3],source:n[0],targetPosition:n[1],order:n[5],closeMode:"Entire",availableSize:n[1].orderQty};return n[7]!==void 0&&(X.form=n[7]),H=new nr({props:X}),De.push(()=>qe(H,"form",Y)),{c(){e=y("div"),t=y("div"),i=y("div"),l=B(r),s=B(": "),o=y("span"),a=B(n[9]),c=q(),f=y("div"),d=B(p),h=B(": "),_=y("span"),v=B(n[8]),g=q(),b=y("div"),I=B(P),T=B(": "),C=y("span"),O=B(V),w=q(),D=y("div"),te(L.$$.fragment),N=q(),z=y("div"),te(H.$$.fragment),this.h()},l(ee){e=k(ee,"DIV",{class:!0});var Z=S(e);t=k(Z,"DIV",{class:!0});var ue=S(t);i=k(ue,"DIV",{});var ce=S(i);l=A(ce,r),s=A(ce,": "),o=k(ce,"SPAN",{class:!0});var pe=S(o);a=A(pe,n[9]),pe.forEach(m),ce.forEach(m),c=M(ue),f=k(ue,"DIV",{});var me=S(f);d=A(me,p),h=A(me,": "),_=k(me,"SPAN",{class:!0});var oe=S(_);v=A(oe,n[8]),oe.forEach(m),me.forEach(m),ue.forEach(m),g=M(Z),b=k(Z,"DIV",{class:!0});var ke=S(b);I=A(ke,P),T=A(ke,": "),C=k(ke,"SPAN",{class:!0});var Le=S(C);O=A(Le,V),Le.forEach(m),ke.forEach(m),w=M(Z),D=k(Z,"DIV",{class:!0});var ge=S(D);re(L.$$.fragment,ge),ge.forEach(m),N=M(Z),z=k(Z,"DIV",{class:!0});var ae=S(z);re(H.$$.fragment,ae),ae.forEach(m),Z.forEach(m),this.h()},h(){E(o,"class","T1"),E(_,"class","T1"),E(t,"class","df jcsb T3"),E(C,"class","T1"),E(b,"class","mt10 T3"),E(D,"class","mt20"),E(z,"class","mt20"),E(e,"class","body H-1q8ajw9")},m(ee,Z){G(ee,e,Z),u(e,t),u(t,i),u(i,l),u(i,s),u(i,o),u(o,a),u(t,c),u(t,f),u(f,d),u(f,h),u(f,_),u(_,v),u(e,g),u(e,b),u(b,I),u(b,T),u(b,C),u(C,O),u(e,w),u(e,D),ne(L,D,null),u(e,N),u(e,z),ne(H,z,null),F=!0},p(ee,Z){(!F||Z&1024)&&r!==(r=ee[10](Je.LastPrice)+"")&&W(l,r),(!F||Z&512)&&W(a,ee[9]),(!F||Z&1024)&&p!==(p=ee[10](Je.MarkPrice)+"")&&W(d,p),(!F||Z&256)&&W(v,ee[8]),(!F||Z&1024)&&P!==(P=ee[10](Je.OrderPrice)+"")&&W(I,P),(!F||Z&2)&&V!==(V=ee[1].avgEntryPrice+"")&&W(O,V);const ue={};Z&4&&(ue.contract=ee[2]),Z&8&&(ue.market=ee[3]),Z&1&&(ue.source=ee[0]),Z&2&&(ue.targetPosition=ee[1]),Z&16&&(ue.order=ee[4]),Z&2&&(ue.availableSize=ee[1].orderQty),!$&&Z&64&&($=!0,ue.form=ee[6],Me(()=>$=!1)),L.$set(ue);const ce={};Z&4&&(ce.contract=ee[2]),Z&8&&(ce.market=ee[3]),Z&1&&(ce.source=ee[0]),Z&2&&(ce.targetPosition=ee[1]),Z&32&&(ce.order=ee[5]),Z&2&&(ce.availableSize=ee[1].orderQty),!R&&Z&128&&(R=!0,ce.form=ee[7],Me(()=>R=!1)),H.$set(ce)},i(ee){F||(Q(L.$$.fragment,ee),Q(H.$$.fragment,ee),F=!0)},o(ee){j(L.$$.fragment,ee),j(H.$$.fragment,ee),F=!1},d(ee){ee&&m(e),ie(L),ie(H)}}}function rP(n){let e,t,i=n[10](Je.TPSL2)+"",r,l,s=n[10](Je.Preset)+"",o,a,c,f,p,d;return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),o=B(s),a=q(),c=y("i"),f=B(""),this.h()},l(h){e=k(h,"DIV",{class:!0,slot:!0});var _=S(e);t=k(_,"DIV",{class:!0});var v=S(t);r=A(v,i),l=M(v),o=A(v,s),v.forEach(m),a=M(_),c=k(_,"I",{class:!0});var g=S(c);f=A(g,""),g.forEach(m),_.forEach(m),this.h()},h(){E(t,"class","df aic jcc wsn fw3"),E(c,"class","iconfont cp f18"),E(e,"class","tpsl-header p24 lh24 df jcsb f20 T1 H-1q8ajw9"),E(e,"slot","header")},m(h,_){G(h,e,_),u(e,t),u(t,r),u(t,l),u(t,o),u(e,a),u(e,c),u(c,f),p||(d=We(c,"click",n[11]),p=!0)},p(h,_){_&1024&&i!==(i=h[10](Je.TPSL2)+"")&&W(r,i),_&1024&&s!==(s=h[10](Je.Preset)+"")&&W(o,s)},d(h){h&&m(e),p=!1,d()}}}function lP(n){let e,t=n[10](He.Cancel)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","f16 fw3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&1024&&t!==(t=r[10](He.Cancel)+"")&&W(i,t)},d(r){r&&m(e)}}}function sP(n){let e,t=n[10](He.Confirm)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","f16 fw3")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&1024&&t!==(t=r[10](He.Confirm)+"")&&W(i,t)},d(r){r&&m(e)}}}function oP(n){let e,t,i,r,l;return t=new Ht({props:{$$slots:{default:[lP]},$$scope:{ctx:n}}}),t.$on("click",n[11]),r=new Ht({props:{type:"primary",$$slots:{default:[sP]},$$scope:{ctx:n}}}),r.$on("click",n[12]),{c(){e=y("div"),te(t.$$.fragment),i=q(),te(r.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,slot:!0});var o=S(e);re(t.$$.fragment,o),i=M(o),re(r.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","p24 tr"),E(e,"slot","footer")},m(s,o){G(s,e,o),ne(t,e,null),u(e,i),ne(r,e,null),l=!0},p(s,o){const a={};o&1049600&&(a.$$scope={dirty:o,ctx:s}),t.$set(a);const c={};o&1049600&&(c.$$scope={dirty:o,ctx:s}),r.$set(c)},i(s){l||(Q(t.$$.fragment,s),Q(r.$$.fragment,s),l=!0)},o(s){j(t.$$.fragment,s),j(r.$$.fragment,s),l=!1},d(s){s&&m(e),ie(t),ie(r)}}}function aP(n){let e,t;return e=new bn({props:{style:"width:520px;max-width:520px;",$$slots:{footer:[oP],header:[rP],default:[iP]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,[r]){const l={};r&1050623&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function cP(n,e,t){let i,r,l,s;J(n,dt,O=>t(10,l=O)),J(n,ri,O=>t(13,s=O));let{source:o}=e,{order:a=null}=e,{contract:c=null}=e;const f=Kt();let p=null,d=null,h=null,_=null,v=null;function g(O){if(!O)return;const{takeProfitEp:w=0,tpTrigger:D,stopLossEp:L=0,slTrigger:$,tpPxRp:N,slPxRp:z,tpTimeInForce:H,slTimeInForce:R}=O;t(4,p={ordType:Number(N)?"Limit":"Market",stopPxEp:w,priceEp:N,trigger:D,timeInForce:H,orderQty:O.size}),t(5,d={ordType:Number(z)?"Limit":"Market",stopPxEp:L,priceEp:z,trigger:$,timeInForce:R,orderQty:O.size})}function b(O,w){w&&t(3,h=w.get(O.symbol))}function P(){f("close")}async function I(){if(!T())return;const O=Object.assign({posSide:a.posSide,type:c.type},_?{takeProfitRp:_.stopPxEp,tpTrigger:_.triggerType,tpPxRp:_.priceEp,tpTimeInForce:_.timeInForce,tpOrderType:_.priceEp?"Limit":"Market",tpAction:"Replace"}:{},v?{stopLossRp:v.stopPxEp,slTrigger:v.triggerType,slPxRp:v.priceEp,slTimeInForce:v.timeInForce,slOrderType:v.priceEp?"Limit":"Market",slAction:"Replace"}:{},!_&&p.stopPxEp?{tpAction:"Cancel"}:{},!v&&d.stopPxEp?{slAction:"Cancel"}:{});await Gi(a,O,{by:"active",goal:"replace_tpsl"})&&f("close")}function T(){return _&&(_.stopPxEp===0||["LimitIfTouched","StopLimit"].includes(_.ordType)&&!_.priceEp)?(Pt.send("toast","error",{message:l(Je.IncorrectTakeProfit)}),!1):v&&(v.stopPxEp===0||["LimitIfTouched","StopLimit"].includes(v.ordType)&&!v.priceEp)?(Pt.send("toast","error",{message:l(Je.IncorrectStopLoss)}),!1):!0}function C(O){_=O,t(6,_)}function V(O){v=O,t(7,v)}return n.$$set=O=>{"source"in O&&t(0,o=O.source),"order"in O&&t(1,a=O.order),"contract"in O&&t(2,c=O.contract)},n.$$.update=()=>{n.$$.dirty&2&&g(a),n.$$.dirty&8196&&b(c,s),n.$$.dirty&8&&t(9,i=h?h.close:0),n.$$.dirty&8&&t(8,r=h?h.markPrice:0)},[o,a,c,h,p,d,_,v,r,i,l,P,I,s,C,V]}let fP=class extends tt{constructor(e){super(),nt(this,e,cP,aP,et,{source:0,order:1,contract:2})}};function ru(n){let e,t,i,r,l,s;return{c(){e=y("div"),t=y("img"),this.h()},l(o){e=k(o,"DIV",{class:!0,style:!0});var a=S(e);t=k(a,"IMG",{src:!0,height:!0}),a.forEach(m),this.h()},h(){hn(t.src,i="https://img.phemex.com/v1/06cf626c-28ad-447f-ae5a-9fbe72522dcf/iceberg.svg")||E(t,"src",i),E(t,"height","16"),E(e,"class","pr8"),Jt(e,"margin-top","-6px"),Jt(e,"display","block"),Jt(e,"height","16px")},m(o,a){G(o,e,a),u(e,t),l||(s=Wt(r=Gt.call(null,e,{text:n[2](bt.IcebergQty)+" : "+n[1]})),l=!0)},p(o,a){r&&Tt(r.update)&&a&6&&r.update.call(null,{text:o[2](bt.IcebergQty)+" : "+o[1]})},d(o){o&&m(e),l=!1,s()}}}function uP(n){let e=Number(n[0].orderQtyStr)!==Number(n[0].displayQty)&&Number(n[0].displayQty)>0,t,i=e&&ru(n);return{c(){i&&i.c(),t=ut()},l(r){i&&i.l(r),t=ut()},m(r,l){i&&i.m(r,l),G(r,t,l)},p(r,[l]){l&1&&(e=Number(r[0].orderQtyStr)!==Number(r[0].displayQty)&&Number(r[0].displayQty)>0),e?i?i.p(r,l):(i=ru(r),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:rt,o:rt,d(r){i&&i.d(r),r&&m(t)}}}function pP(n,e,t){let i,r;J(n,dt,a=>t(2,r=a));let{item:l=null}=e,{qtyType:s}=e;function o(a,c){return{[we.Cont]:c.icebergOrderQtyByCont,[we.Base]:c.icebergOrderQtyByValue,[we.Coin]:c.icebergOrderQtyByCoin}[a]}return n.$$set=a=>{"item"in a&&t(0,l=a.item),"qtyType"in a&&t(3,s=a.qtyType)},n.$$.update=()=>{n.$$.dirty&9&&t(1,i=o(s,l))},[l,i,r,s]}let yd=class extends tt{constructor(e){super(),nt(this,e,pP,uP,et,{item:0,qtyType:3})}};function dP(n){let e,t,i,r,l;return t=new yd({props:{item:n[0],qtyType:n[1]}}),{c(){e=y("div"),te(t.$$.fragment),i=q(),r=B(n[9]),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);re(t.$$.fragment,o),i=M(o),r=A(o,n[9]),o.forEach(m),this.h()},h(){E(e,"class","df aic H-1vypng0"),Te(e,"pl32",n[12]-320<1200),Te(e,"buy",n[0].side==="Buy"),Te(e,"sell",n[0].side==="Sell")},m(s,o){G(s,e,o),ne(t,e,null),u(e,i),u(e,r),l=!0},p(s,o){const a={};o[0]&1&&(a.item=s[0]),o[0]&2&&(a.qtyType=s[1]),t.$set(a),(!l||o[0]&512)&&W(r,s[9]),(!l||o[0]&4096)&&Te(e,"pl32",s[12]-320<1200),(!l||o[0]&1)&&Te(e,"buy",s[0].side==="Buy"),(!l||o[0]&1)&&Te(e,"sell",s[0].side==="Sell")},i(s){l||(Q(t.$$.fragment,s),l=!0)},o(s){j(t.$$.fragment,s),l=!1},d(s){s&&m(e),ie(t)}}}function mP(n){let e,t,i,r,l,s,o,a,c,f,p;return t=new yd({props:{item:n[0],qtyType:n[1]}}),{c(){e=y("div"),te(t.$$.fragment),i=q(),r=y("div"),l=B(n[9]),s=q(),o=y("i"),a=B(""),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=S(e);re(t.$$.fragment,h),i=M(h),r=k(h,"DIV",{class:!0});var _=S(r);l=A(_,n[9]),_.forEach(m),s=M(h),o=k(h,"I",{class:!0});var v=S(o);a=A(v,""),v.forEach(m),h.forEach(m),this.h()},h(){E(r,"class","editable H-1vypng0"),Te(r,"buy",n[0].side==="Buy"),Te(r,"sell",n[0].side==="Sell"),E(o,"class","iconfont ml4 pr12 f14 T2 cp H-1vypng0"),E(e,"class","active-quantity df aic cp H-1vypng0"),Te(e,"pl32",n[12]-320<1200)},m(d,h){G(d,e,h),ne(t,e,null),u(e,i),u(e,r),u(r,l),u(e,s),u(e,o),u(o,a),n[23](o),c=!0,f||(p=We(o,"mousedown",Zn(function(){Tt(n[14](n[0],n[5],"Size"))&&n[14](n[0],n[5],"Size").apply(this,arguments)})),f=!0)},p(d,h){n=d;const _={};h[0]&1&&(_.item=n[0]),h[0]&2&&(_.qtyType=n[1]),t.$set(_),(!c||h[0]&512)&&W(l,n[9]),(!c||h[0]&1)&&Te(r,"buy",n[0].side==="Buy"),(!c||h[0]&1)&&Te(r,"sell",n[0].side==="Sell"),(!c||h[0]&4096)&&Te(e,"pl32",n[12]-320<1200)},i(d){c||(Q(t.$$.fragment,d),c=!0)},o(d){j(t.$$.fragment,d),c=!1},d(d){d&&m(e),ie(t),n[23](null),f=!1,p()}}}function hP(n){let e,t=n[0].price+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","df aic H-1vypng0")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&1&&t!==(t=r[0].price+"")&&W(i,t)},d(r){r&&m(e)}}}function _P(n){let e,t,i=n[0].price+"",r,l,s,o,a,c;return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),s=y("i"),o=B(""),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=S(e);t=k(p,"DIV",{class:!0});var d=S(t);r=A(d,i),d.forEach(m),l=M(p),s=k(p,"I",{class:!0});var h=S(s);o=A(h,""),h.forEach(m),p.forEach(m),this.h()},h(){E(t,"class","editable H-1vypng0"),E(s,"class","iconfont ml4 pr12 f14 T2 cp H-1vypng0"),E(e,"class","active-order-price df aic cp H-1vypng0")},m(f,p){G(f,e,p),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),n[24](s),a||(c=We(s,"mousedown",Zn(function(){Tt(n[14](n[0],n[4],"Price"))&&n[14](n[0],n[4],"Price").apply(this,arguments)})),a=!0)},p(f,p){n=f,p[0]&1&&i!==(i=n[0].price+"")&&W(r,i)},d(f){f&&m(e),n[24](null),a=!1,c()}}}function gP(n){let e,t;return{c(){e=y("div"),t=B(n[10])},l(i){e=k(i,"DIV",{});var r=S(e);t=A(r,n[10]),r.forEach(m)},m(i,r){G(i,e,r),u(e,t)},p(i,r){r[0]&1024&&W(t,i[10])},d(i){i&&m(e)}}}function vP(n){let e,t,i,r,l,s,o,a;return{c(){e=y("div"),t=y("span"),i=B(n[10]),r=q(),l=y("i"),s=B(""),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=S(e);t=k(f,"SPAN",{});var p=S(t);i=A(p,n[10]),p.forEach(m),r=M(f),l=k(f,"I",{class:!0});var d=S(l);s=A(d,""),d.forEach(m),f.forEach(m),this.h()},h(){E(l,"class","iconfont ml4 pr12 f14 T2 cp H-1vypng0"),E(e,"class","editable cp H-1vypng0")},m(c,f){G(c,e,f),u(e,t),u(t,i),u(e,r),u(e,l),u(l,s),o||(a=We(e,"click",n[18]),o=!0)},p(c,f){f[0]&1024&&W(i,c[10])},d(c){c&&m(e),o=!1,a()}}}function bP(n){let e,t=n[2](bt.Cancel)+"",i,r,l;return{c(){e=y("button"),i=B(t),this.h()},l(s){e=k(s,"BUTTON",{class:!0});var o=S(e);i=A(o,t),o.forEach(m),this.h()},h(){E(e,"class","active-order-cancel ph16 cp H-1vypng0")},m(s,o){G(s,e,o),u(e,i),r||(l=We(e,"click",n[15]),r=!0)},p(s,o){o[0]&4&&t!==(t=s[2](bt.Cancel)+"")&&W(i,t)},d(s){s&&m(e),r=!1,l()}}}function EP(n){let e,t=n[2](bt.Remove)+"",i,r,l;return{c(){e=y("button"),i=B(t),this.h()},l(s){e=k(s,"BUTTON",{class:!0});var o=S(e);i=A(o,t),o.forEach(m),this.h()},h(){E(e,"class","ph16 cp H-1vypng0")},m(s,o){G(s,e,o),u(e,i),r||(l=We(e,"click",n[16]),r=!0)},p(s,o){o[0]&4&&t!==(t=s[2](bt.Remove)+"")&&W(i,t)},d(s){s&&m(e),r=!1,l()}}}function lu(n){let e,t;return e=new Ed({props:{type:"TP",item:n[0].tpOrder}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&1&&(l.item=i[0].tpOrder),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function su(n){let e,t;return e=new Ed({props:{type:"SL",item:n[0].slOrder}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&1&&(l.item=i[0].slOrder),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function yP(n){let e,t,i,r,l=n[13].pairName+"",s,o,a,c=n[2](He[n[13].type])+"",f,p,d,h=n[2](He.CurrencyMargin,{Currency:n[13].settleCurrency})+"",_,v,g,b,P,I,T,C,V,O,w,D,L,$,N,z,H=n[0].valueWU+"",R,F,U,K,Y,X=n[0].fillPrice+"",ee,Z,ue,ce=n[0].ordType+"",pe,me,oe,ke=n[0].ordStatus+"",Le,ge,ae,x=n[0].actionTime+"",le,fe,Se,Pe,Ce,Ee,Ie,ve,de;const se=[mP,dP],he=[];function _e(Qe,ze){return Qe[11]?0:1}b=_e(n),P=he[b]=se[b](n);function be(Qe,ze){return Qe[11]?_P:hP}let Ve=be(n),Be=Ve(n);function Fe(Qe,ze){return Qe[3]?vP:gP}let $e=Fe(n),Ae=$e(n);function Ne(Qe,ze){return Qe[0].removable?EP:bP}let Ge=Ne(n),Xe=Ge(n),ye=n[0].tpOrder&&lu(n),Ke=n[0].slOrder&&su(n);return{c(){e=y("div"),t=y("div"),i=y("div"),r=y("span"),s=B(l),o=q(),a=y("span"),f=B(c),p=q(),d=y("div"),_=B(h),g=q(),P.c(),I=q(),T=y("div"),C=B(n[6]),V=q(),Be.c(),O=q(),w=y("div"),D=B(n[8]),L=B("/"),$=B(n[7]),N=q(),z=y("div"),R=B(H),F=q(),U=y("div"),Ae.c(),K=q(),Y=y("div"),ee=B(X),Z=q(),ue=y("div"),pe=B(ce),me=q(),oe=y("div"),Le=B(ke),ge=q(),ae=y("div"),le=B(x),fe=q(),Se=y("div"),Xe.c(),Pe=q(),ye&&ye.c(),Ce=q(),Ke&&Ke.c(),Ee=ut(),this.h()},l(Qe){e=k(Qe,"DIV",{class:!0});var ze=S(e);t=k(ze,"DIV",{class:!0,"data-symbol":!0});var Ue=S(t);i=k(Ue,"DIV",{class:!0});var st=S(i);r=k(st,"SPAN",{});var Oe=S(r);s=A(Oe,l),Oe.forEach(m),o=M(st),a=k(st,"SPAN",{class:!0});var it=S(a);f=A(it,c),it.forEach(m),st.forEach(m),p=M(Ue),d=k(Ue,"DIV",{class:!0});var ct=S(d);_=A(ct,h),ct.forEach(m),Ue.forEach(m),g=M(ze),P.l(ze),I=M(ze),T=k(ze,"DIV",{class:!0});var ft=S(T);C=A(ft,n[6]),ft.forEach(m),V=M(ze),Be.l(ze),O=M(ze),w=k(ze,"DIV",{class:!0});var _t=S(w);D=A(_t,n[8]),L=A(_t,"/"),$=A(_t,n[7]),_t.forEach(m),N=M(ze),z=k(ze,"DIV",{class:!0});var Et=S(z);R=A(Et,H),Et.forEach(m),F=M(ze),U=k(ze,"DIV",{class:!0});var gt=S(U);Ae.l(gt),gt.forEach(m),K=M(ze),Y=k(ze,"DIV",{class:!0});var Dt=S(Y);ee=A(Dt,X),Dt.forEach(m),Z=M(ze),ue=k(ze,"DIV",{class:!0});var It=S(ue);pe=A(It,ce),It.forEach(m),me=M(ze),oe=k(ze,"DIV",{class:!0});var pt=S(oe);Le=A(pt,ke),pt.forEach(m),ge=M(ze),ae=k(ze,"DIV",{class:!0});var mt=S(ae);le=A(mt,x),mt.forEach(m),fe=M(ze),Se=k(ze,"DIV",{class:!0});var Nt=S(Se);Xe.l(Nt),Nt.forEach(m),ze.forEach(m),Pe=M(Qe),ye&&ye.l(Qe),Ce=M(Qe),Ke&&Ke.l(Qe),Ee=ut(),this.h()},h(){E(a,"class","ml4"),E(i,"class","lh20"),E(d,"class","lh20 T2"),E(t,"class","symbol ps pr pl16 pv4 B1 cp H-1vypng0"),E(t,"data-symbol",v=n[0].symbol),Te(t,"linear-gradient-symbol",n[12]-320<1200),E(T,"class","df aic H-1vypng0"),E(w,"class","df aic H-1vypng0"),E(z,"class","df aic H-1vypng0"),E(U,"class","tp-sl df aic H-1vypng0"),E(Y,"class","df aic H-1vypng0"),E(ue,"class","df aic H-1vypng0"),E(oe,"class","df aic H-1vypng0"),E(ae,"class","df aic pr16 H-1vypng0"),E(Se,"class","action ps pr df aic jcfe B1 H-1vypng0"),Te(Se,"linear-gradient-action",n[12]-320<1200),E(e,"class","history-list wrap fw2 T1 H-1vypng0")},m(Qe,ze){G(Qe,e,ze),u(e,t),u(t,i),u(i,r),u(r,s),u(i,o),u(i,a),u(a,f),u(t,p),u(t,d),u(d,_),u(e,g),he[b].m(e,null),u(e,I),u(e,T),u(T,C),u(e,V),Be.m(e,null),u(e,O),u(e,w),u(w,D),u(w,L),u(w,$),u(e,N),u(e,z),u(z,R),u(e,F),u(e,U),Ae.m(U,null),u(e,K),u(e,Y),u(Y,ee),u(e,Z),u(e,ue),u(ue,pe),u(e,me),u(e,oe),u(oe,Le),u(e,ge),u(e,ae),u(ae,le),u(e,fe),u(e,Se),Xe.m(Se,null),G(Qe,Pe,ze),ye&&ye.m(Qe,ze),G(Qe,Ce,ze),Ke&&Ke.m(Qe,ze),G(Qe,Ee,ze),Ie=!0,ve||(de=We(t,"click",n[17]),ve=!0)},p(Qe,ze){(!Ie||ze[0]&4)&&c!==(c=Qe[2](He[Qe[13].type])+"")&&W(f,c),(!Ie||ze[0]&4)&&h!==(h=Qe[2](He.CurrencyMargin,{Currency:Qe[13].settleCurrency})+"")&&W(_,h),(!Ie||ze[0]&1&&v!==(v=Qe[0].symbol))&&E(t,"data-symbol",v),(!Ie||ze[0]&4096)&&Te(t,"linear-gradient-symbol",Qe[12]-320<1200);let Ue=b;b=_e(Qe),b===Ue?he[b].p(Qe,ze):(ot(),j(he[Ue],1,1,()=>{he[Ue]=null}),at(),P=he[b],P?P.p(Qe,ze):(P=he[b]=se[b](Qe),P.c()),Q(P,1),P.m(e,I)),(!Ie||ze[0]&64)&&W(C,Qe[6]),Ve===(Ve=be(Qe))&&Be?Be.p(Qe,ze):(Be.d(1),Be=Ve(Qe),Be&&(Be.c(),Be.m(e,O))),(!Ie||ze[0]&256)&&W(D,Qe[8]),(!Ie||ze[0]&128)&&W($,Qe[7]),(!Ie||ze[0]&1)&&H!==(H=Qe[0].valueWU+"")&&W(R,H),$e===($e=Fe(Qe))&&Ae?Ae.p(Qe,ze):(Ae.d(1),Ae=$e(Qe),Ae&&(Ae.c(),Ae.m(U,null))),(!Ie||ze[0]&1)&&X!==(X=Qe[0].fillPrice+"")&&W(ee,X),(!Ie||ze[0]&1)&&ce!==(ce=Qe[0].ordType+"")&&W(pe,ce),(!Ie||ze[0]&1)&&ke!==(ke=Qe[0].ordStatus+"")&&W(Le,ke),(!Ie||ze[0]&1)&&x!==(x=Qe[0].actionTime+"")&&W(le,x),Ge===(Ge=Ne(Qe))&&Xe?Xe.p(Qe,ze):(Xe.d(1),Xe=Ge(Qe),Xe&&(Xe.c(),Xe.m(Se,null))),(!Ie||ze[0]&4096)&&Te(Se,"linear-gradient-action",Qe[12]-320<1200),Qe[0].tpOrder?ye?(ye.p(Qe,ze),ze[0]&1&&Q(ye,1)):(ye=lu(Qe),ye.c(),Q(ye,1),ye.m(Ce.parentNode,Ce)):ye&&(ot(),j(ye,1,1,()=>{ye=null}),at()),Qe[0].slOrder?Ke?(Ke.p(Qe,ze),ze[0]&1&&Q(Ke,1)):(Ke=su(Qe),Ke.c(),Q(Ke,1),Ke.m(Ee.parentNode,Ee)):Ke&&(ot(),j(Ke,1,1,()=>{Ke=null}),at())},i(Qe){Ie||(Q(P),Q(ye),Q(Ke),Ie=!0)},o(Qe){j(P),j(ye),j(Ke),Ie=!1},d(Qe){Qe&&m(e),he[b].d(),Be.d(),Ae.d(),Xe.d(),Qe&&m(Pe),ye&&ye.d(Qe),Qe&&m(Ce),Ke&&Ke.d(Qe),Qe&&m(Ee),ve=!1,de()}}}function kP(n,e){if(e.ordType==="Bracket"){const{tickSizeEp:t}=n;return[(e.side==="Buy"?"+":"-")+Math.floor(e.takeProfitEp/t),(e.side==="Buy"?"-":"+")+Math.floor(e.stopLossEp/t)+" Ticks"].join(" / ")}return[e.takeProfitEp>0?e.takeProfitPrice:"-",e.stopLossEp>0?e.stopLossPrice:"-"].join(" / ")}function PP(n){return n.ordType==="Bracket"?!1:["New","PartiallyFilled"].indexOf(n.ordStatus)>-1}function SP(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v,g;J(n,Hl,Z=>t(27,f=Z)),J(n,Ai,Z=>t(20,p=Z)),J(n,dt,Z=>t(2,d=Z)),J(n,An,Z=>t(21,h=Z)),J(n,zn,Z=>t(22,_=Z)),J(n,Ri,Z=>t(28,v=Z)),J(n,Bi,Z=>t(12,g=Z));let{item:b=null}=e;const P=er.findContract(v,b.symbol);let I=0,T=!1,C=[],V=Ct.OneWay,O,w;Lt(()=>{document.addEventListener("mousedown",ue=>{ue.stopPropagation(),z()});const Z=document.querySelectorAll('iframe[id^="tradingview_"]');if(Z.length>0){const ue=Z[0];ue&&ue.contentDocument&&(ue.contentDocument.onmousedown=function(ce){ce.stopPropagation(),z()})}});function D(Z,ue){return{[we.Cont]:ue.orderQtyByCont,[we.Base]:ue.orderQtyByValue,[we.Coin]:ue.orderQtyByCoin}[Z]}function L(Z,ue){return{[we.Cont]:ue.cumQtyByCont,[we.Base]:ue.cumQtyByValue,[we.Coin]:ue.cumQtyByCoin}[Z]}function $(Z,ue){return{[we.Cont]:ue.leavesQtyByCont,[we.Base]:ue.leavesQtyByValue,[we.Coin]:ue.leavesQtyByCoin}[Z]}function N(Z,ue,ce){return function(){z();let pe=document.getElementById("tooltip-holder");pe||(pe=document.createElement("div"),pe.setAttribute("id","tooltip-holder"),document.body.appendChild(pe));const me=new bd({target:pe,props:{anchorNode:ue,order:Z,modifyField:ce,direction:c}});me.$set({visible:!0}),Hl.next(me)}}function z(){f&&(f.$set({visible:!1}),f.$destroy())}function H(Z,ue){C=Z.filter(({symbol:pe})=>pe===ue.symbol);const ce=C.filter(({posMode:pe})=>!!pe).every(({posMode:pe})=>pe===Ct.Hedge);t(19,V=ce?Ct.Hedge:Ct.OneWay)}function R(Z,ue,ce){const{type:pe}=Z;if(pe==="Perpetual")return;const{side:me,posSide:oe,execInst:ke,ordStatus:Le}=ue,ge=["PartiallyFilled"].includes(Le),ae=me==="Buy"&&oe==="Long"||me==="Sell"&&oe==="Short",x=["ReduceOnly","CloseOnTrigger"].includes(ke);t(3,T=ce===Ct.Hedge?!ge&&ae:!x&&!ge)}function F(){const Z=Date.now();if(Z-I>1e3){const ue={type:P.type,by:"active",goal:"cancel_list"};Mi(b,ue),I=Z}}function U(){cl.next({type:"order-active-remove",orderID:b.orderID})}function K(){Pt.send("trade-pair","change",{type:"Perpetual",symbol:b.symbol})}function Y(){const{side:Z,priceEp:ue,price:ce,orderQty:pe}=b,me=Bn(P,C,V,Z),oe=Object.assign(Object.assign({},b),{avgEntryPriceEp:ue,avgEntryPrice:ce,size:pe,leverageEr:me.leverageEr});en.create(fP,{source:"order",contract:P,order:oe})}function X(Z){De[Z?"unshift":"push"](()=>{w=Z,t(5,w)})}function ee(Z){De[Z?"unshift":"push"](()=>{O=Z,t(4,O)})}return n.$$set=Z=>{"item"in Z&&t(0,b=Z.item)},n.$$.update=()=>{n.$$.dirty[0]&1&&t(11,i=PP(b)),n.$$.dirty[0]&1&&t(10,r=kP(P,b)),n.$$.dirty[0]&6291456&&t(1,l=P.type==="Perpetual"?_:h),n.$$.dirty[0]&3&&t(9,s=D(l,b)),n.$$.dirty[0]&3&&t(8,o=L(l,b)),n.$$.dirty[0]&3&&t(7,a=$(l,b)),n.$$.dirty[0]&5&&t(6,c=tr(P,b,d,He)),n.$$.dirty[0]&1048577&&H(p,b),n.$$.dirty[0]&524289&&R(P,b,V)},[b,l,d,T,O,w,c,a,o,s,r,i,g,P,N,F,U,K,Y,V,p,h,_,X,ee]}let CP=class extends tt{constructor(e){super(),nt(this,e,SP,yP,et,{item:0},null,[-1,-1])}};function ou(n,e,t){const i=n.slice();return i[11]=e[t],i}function TP(n){let e,t=n[4](He.NoData)+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","no-data tc T3 H-imomcr")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&16&&t!==(t=r[4](He.NoData)+"")&&W(i,t)},i:rt,o:rt,d(r){r&&m(e)}}}function wP(n){let e=[],t=new Map,i,r,l=n[3];const s=o=>o[11].orderID;for(let o=0;o<l.length;o+=1){let a=ou(n,l,o),c=s(a);t.set(c,e[o]=au(c,a))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();i=ut()},l(o){for(let a=0;a<e.length;a+=1)e[a].l(o);i=ut()},m(o,a){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,a);G(o,i,a),r=!0},p(o,a){a&8&&(l=o[3],ot(),e=Si(e,a,s,1,o,l,t,i.parentNode,lr,au,i,ou),at())},i(o){if(!r){for(let a=0;a<l.length;a+=1)Q(e[a]);r=!0}},o(o){for(let a=0;a<e.length;a+=1)j(e[a]);r=!1},d(o){for(let a=0;a<e.length;a+=1)e[a].d(o);o&&m(i)}}}function au(n,e){let t,i,r;return i=new CP({props:{item:e[11]}}),{key:n,first:null,c(){t=ut(),te(i.$$.fragment),this.h()},l(l){t=ut(),re(i.$$.fragment,l),this.h()},h(){this.first=t},m(l,s){G(l,t,s),ne(i,l,s),r=!0},p(l,s){e=l;const o={};s&8&&(o.item=e[11]),i.$set(o)},i(l){r||(Q(i.$$.fragment,l),r=!0)},o(l){j(i.$$.fragment,l),r=!1},d(l){l&&m(t),ie(i,l)}}}function IP(n){let e,t,i,r,l,s,o,a,c;function f(g){n[8](g)}function p(g){n[9](g)}let d={symbol:n[2].symbol,ordersLen:n[3].length};n[0]!==void 0&&(d.sortDirection=n[0]),n[1]!==void 0&&(d.sortKey=n[1]),i=new Lk({props:d}),De.push(()=>qe(i,"sortDirection",f)),De.push(()=>qe(i,"sortKey",p));const h=[wP,TP],_=[];function v(g,b){return g[3].length>0?0:1}return o=v(n),a=_[o]=h[o](n),{c(){e=y("div"),t=y("div"),te(i.$$.fragment),s=q(),a.c(),this.h()},l(g){e=k(g,"DIV",{class:!0});var b=S(e);t=k(b,"DIV",{class:!0});var P=S(t);re(i.$$.fragment,P),s=M(P),a.l(P),P.forEach(m),b.forEach(m),this.h()},h(){E(t,"class","grid H-imomcr"),E(e,"class","wrap f12 H-imomcr")},m(g,b){G(g,e,b),u(e,t),ne(i,t,null),u(t,s),_[o].m(t,null),c=!0},p(g,[b]){const P={};b&4&&(P.symbol=g[2].symbol),b&8&&(P.ordersLen=g[3].length),!r&&b&1&&(r=!0,P.sortDirection=g[0],Me(()=>r=!1)),!l&&b&2&&(l=!0,P.sortKey=g[1],Me(()=>l=!1)),i.$set(P);let I=o;o=v(g),o===I?_[o].p(g,b):(ot(),j(_[I],1,1,()=>{_[I]=null}),at(),a=_[o],a?a.p(g,b):(a=_[o]=h[o](g),a.c()),Q(a,1),a.m(t,null))},i(g){c||(Q(i.$$.fragment,g),Q(a),c=!0)},o(g){j(i.$$.fragment,g),j(a),c=!1},d(g){g&&m(e),ie(i),_[o].d()}}}function DP(n,e,t){let i,r,l,s,o;J(n,zi,_=>t(5,i=_)),J(n,Xt,_=>t(2,r=_)),J(n,mi,_=>t(6,l=_)),J(n,_l,_=>t(7,s=_)),J(n,dt,_=>t(4,o=_));let a=[],c="",f="";function p(_,v,g,b,P,I){const T=V=>(O,w)=>{const D=Number(O[V]),L=Number(w[V]),$=(isNaN(D)?0:D)-(isNaN(L)?0:L);return P==="up"?$:-$},C={symbol:(V,O)=>{const w=b.get(V.symbol),D=b.get(O.symbol),L=w.pairName.localeCompare(D.pairName);return P==="up"?L:-L},price:T("price"),fillPrice:T("fillPrice"),time:T("actionTimestamp")};t(3,a=_.filter(V=>v?V.symbol===g.symbol:V).sort(C[P?I:"time"]))}function d(_){c=_,t(0,c)}function h(_){f=_,t(1,f)}return n.$$.update=()=>{n.$$.dirty&231&&p(s,l,r,i,c,f)},[c,f,r,a,o,i,l,s,d,h]}let VP=class extends tt{constructor(e){super(),nt(this,e,DP,IP,et,{})}};function OP(n){let e=n[2](bt.Action)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&4&&e!==(e=i[2](bt.Action)+"")&&W(t,e)},d(i){i&&m(t)}}}function LP(n){let e,t=n[2](bt.CancelAll)+"",i,r,l;return{c(){e=y("button"),i=B(t),this.h()},l(s){e=k(s,"BUTTON",{class:!0});var o=S(e);i=A(o,t),o.forEach(m),this.h()},h(){E(e,"class","trigger-order-all-cancel dib ph16 lh22 sell cp H-1o82zqj")},m(s,o){G(s,e,o),u(e,i),r||(l=We(e,"click",n[4]),r=!0)},p(s,o){o&4&&t!==(t=s[2](bt.CancelAll)+"")&&W(i,t)},d(s){s&&m(e),r=!1,l()}}}function $P(n){let e,t,i=n[2](bt.Symbol)+"",r,l,s,o,a,c=n[2](He.Size)+"",f,p,d,h=n[2](He.Direction)+"",_,v,g,b=n[2](bt.OrderPrice)+"",P,I,T,C,V,O=n[2](bt.TriggerActivationPrice)+"",w,D,L,$=n[2](bt.TriggeringPriceDistance)+"",N,z,H,R=n[2](bt.Type)+"",F,U,K,Y=n[2](bt.Status)+"",X,ee,Z,ue=n[2](bt.Time)+"",ce,pe,me,oe;s=new nn({props:{active:n[1]==="symbol",sortDirection:n[1]==="symbol"?n[0]:""}}),s.$on("sort",n[8]),T=new nn({props:{active:n[1]==="price",sortDirection:n[1]==="price"?n[0]:""}}),T.$on("sort",n[9]);function ke(ae,x){return ae[3]==="Login"?LP:OP}let Le=ke(n),ge=Le(n);return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),te(s.$$.fragment),o=q(),a=y("div"),f=B(c),p=q(),d=y("div"),_=B(h),v=q(),g=y("div"),P=B(b),I=q(),te(T.$$.fragment),C=q(),V=y("div"),w=B(O),D=q(),L=y("div"),N=B($),z=q(),H=y("div"),F=B(R),U=q(),K=y("div"),X=B(Y),ee=q(),Z=y("div"),ce=B(ue),pe=q(),me=y("div"),ge.c(),this.h()},l(ae){e=k(ae,"DIV",{class:!0});var x=S(e);t=k(x,"DIV",{class:!0});var le=S(t);r=A(le,i),l=M(le),re(s.$$.fragment,le),le.forEach(m),o=M(x),a=k(x,"DIV",{class:!0});var fe=S(a);f=A(fe,c),fe.forEach(m),p=M(x),d=k(x,"DIV",{class:!0});var Se=S(d);_=A(Se,h),Se.forEach(m),v=M(x),g=k(x,"DIV",{class:!0});var Pe=S(g);P=A(Pe,b),I=M(Pe),re(T.$$.fragment,Pe),Pe.forEach(m),C=M(x),V=k(x,"DIV",{class:!0});var Ce=S(V);w=A(Ce,O),Ce.forEach(m),D=M(x),L=k(x,"DIV",{class:!0});var Ee=S(L);N=A(Ee,$),Ee.forEach(m),z=M(x),H=k(x,"DIV",{class:!0});var Ie=S(H);F=A(Ie,R),Ie.forEach(m),U=M(x),K=k(x,"DIV",{class:!0});var ve=S(K);X=A(ve,Y),ve.forEach(m),ee=M(x),Z=k(x,"DIV",{class:!0});var de=S(Z);ce=A(de,ue),de.forEach(m),pe=M(x),me=k(x,"DIV",{class:!0});var se=S(me);ge.l(se),se.forEach(m),x.forEach(m),this.h()},h(){E(t,"class","cell pl16 H-1o82zqj"),E(a,"class","cell H-1o82zqj"),E(d,"class","cell H-1o82zqj"),E(g,"class","cell H-1o82zqj"),E(V,"class","cell H-1o82zqj"),E(L,"class","cell H-1o82zqj"),E(H,"class","cell H-1o82zqj"),E(K,"class","cell H-1o82zqj"),E(Z,"class","cell pr16 H-1o82zqj"),E(me,"class","cancel ps df aic jcfe B1 T3 H-1o82zqj"),E(e,"class","row lh28 H-1o82zqj")},m(ae,x){G(ae,e,x),u(e,t),u(t,r),u(t,l),ne(s,t,null),u(e,o),u(e,a),u(a,f),u(e,p),u(e,d),u(d,_),u(e,v),u(e,g),u(g,P),u(g,I),ne(T,g,null),u(e,C),u(e,V),u(V,w),u(e,D),u(e,L),u(L,N),u(e,z),u(e,H),u(H,F),u(e,U),u(e,K),u(K,X),u(e,ee),u(e,Z),u(Z,ce),u(e,pe),u(e,me),ge.m(me,null),oe=!0},p(ae,[x]){(!oe||x&4)&&i!==(i=ae[2](bt.Symbol)+"")&&W(r,i);const le={};x&2&&(le.active=ae[1]==="symbol"),x&3&&(le.sortDirection=ae[1]==="symbol"?ae[0]:""),s.$set(le),(!oe||x&4)&&c!==(c=ae[2](He.Size)+"")&&W(f,c),(!oe||x&4)&&h!==(h=ae[2](He.Direction)+"")&&W(_,h),(!oe||x&4)&&b!==(b=ae[2](bt.OrderPrice)+"")&&W(P,b);const fe={};x&2&&(fe.active=ae[1]==="price"),x&3&&(fe.sortDirection=ae[1]==="price"?ae[0]:""),T.$set(fe),(!oe||x&4)&&O!==(O=ae[2](bt.TriggerActivationPrice)+"")&&W(w,O),(!oe||x&4)&&$!==($=ae[2](bt.TriggeringPriceDistance)+"")&&W(N,$),(!oe||x&4)&&R!==(R=ae[2](bt.Type)+"")&&W(F,R),(!oe||x&4)&&Y!==(Y=ae[2](bt.Status)+"")&&W(X,Y),(!oe||x&4)&&ue!==(ue=ae[2](bt.Time)+"")&&W(ce,ue),Le===(Le=ke(ae))&&ge?ge.p(ae,x):(ge.d(1),ge=Le(ae),ge&&(ge.c(),ge.m(me,null)))},i(ae){oe||(Q(s.$$.fragment,ae),Q(T.$$.fragment,ae),oe=!0)},o(ae){j(s.$$.fragment,ae),j(T.$$.fragment,ae),oe=!1},d(ae){ae&&m(e),ie(s),ie(T),ge.d()}}}function qP(n,e,t){let i,r,l,s;J(n,xn,v=>t(10,i=v)),J(n,mi,v=>t(11,r=v)),J(n,dt,v=>t(2,l=v)),J(n,yr,v=>t(3,s=v));let{symbol:o=""}=e,{ordersLen:a=0}=e,{sortDirection:c}=e,{sortKey:f}=e;function p(){if(a===0)return;const v=()=>wp(!0,r?o:"");if(i!=null&&i.cancelAllOrdersConfirm){en.create(gd,{isConditional:!0,onConfirm:v});return}v()}function d(v){if(f===v){if(c==="up"){t(0,c="down");return}if(c==="down"){t(0,c="");return}if(c===""){t(0,c="up");return}}t(1,f=v),t(0,c="up")}const h=()=>d("symbol"),_=()=>d("price");return n.$$set=v=>{"symbol"in v&&t(6,o=v.symbol),"ordersLen"in v&&t(7,a=v.ordersLen),"sortDirection"in v&&t(0,c=v.sortDirection),"sortKey"in v&&t(1,f=v.sortKey)},[c,f,l,s,p,d,o,a,h,_]}let MP=class extends tt{constructor(e){super(),nt(this,e,qP,$P,et,{symbol:6,ordersLen:7,sortDirection:0,sortKey:1})}};function cu(n){let e,t,i,r,l,s;return{c(){e=y("div"),t=y("img"),this.h()},l(o){e=k(o,"DIV",{class:!0,style:!0});var a=S(e);t=k(a,"IMG",{src:!0,height:!0}),a.forEach(m),this.h()},h(){hn(t.src,i="https://img.phemex.com/v1/06cf626c-28ad-447f-ae5a-9fbe72522dcf/iceberg.svg")||E(t,"src",i),E(t,"height","16"),E(e,"class","pr8"),Jt(e,"margin-top","-6px"),Jt(e,"display","block"),Jt(e,"height","16px")},m(o,a){G(o,e,a),u(e,t),l||(s=Wt(r=Gt.call(null,e,{text:n[2](bt.IcebergQty)+" : "+n[1]})),l=!0)},p(o,a){r&&Tt(r.update)&&a&6&&r.update.call(null,{text:o[2](bt.IcebergQty)+" : "+o[1]})},d(o){o&&m(e),l=!1,s()}}}function NP(n){let e=Number(n[0].orderQtyStr)!==Number(n[0].displayQty)&&Number(n[0].displayQty)>0,t,i=e&&cu(n);return{c(){i&&i.c(),t=ut()},l(r){i&&i.l(r),t=ut()},m(r,l){i&&i.m(r,l),G(r,t,l)},p(r,[l]){l&1&&(e=Number(r[0].orderQtyStr)!==Number(r[0].displayQty)&&Number(r[0].displayQty)>0),e?i?i.p(r,l):(i=cu(r),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:rt,o:rt,d(r){i&&i.d(r),r&&m(t)}}}function HP(n,e,t){let i,r;J(n,dt,a=>t(2,r=a));let{item:l=null}=e,{qtyType:s}=e;function o(a,c){return{[we.Cont]:c.icebergOrderQtyByCont,[we.Base]:c.icebergOrderQtyByValue,[we.Coin]:c.icebergOrderQtyByCoin}[a]}return n.$$set=a=>{"item"in a&&t(0,l=a.item),"qtyType"in a&&t(3,s=a.qtyType)},n.$$.update=()=>{n.$$.dirty&9&&t(1,i=o(s,l))},[l,i,r,s]}let kd=class extends tt{constructor(e){super(),nt(this,e,HP,NP,et,{item:0,qtyType:3})}};function BP(n){let e,t,i,r=n[0].orderQtyStr+"",l,s;return t=new kd({props:{item:n[0],qtyType:n[1]}}),{c(){e=y("div"),te(t.$$.fragment),i=q(),l=B(r),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=S(e);re(t.$$.fragment,a),i=M(a),l=A(a,r),a.forEach(m),this.h()},h(){E(e,"class","df aic H-1wgub6r")},m(o,a){G(o,e,a),ne(t,e,null),u(e,i),u(e,l),s=!0},p(o,a){const c={};a&1&&(c.item=o[0]),a&2&&(c.qtyType=o[1]),t.$set(c),(!s||a&1)&&r!==(r=o[0].orderQtyStr+"")&&W(l,r)},i(o){s||(Q(t.$$.fragment,o),s=!0)},o(o){j(t.$$.fragment,o),s=!1},d(o){o&&m(e),ie(t)}}}function AP(n){let e,t,i,r,l,s,o,a,c,f,p;return t=new kd({props:{item:n[0],qtyType:n[1]}}),{c(){e=y("div"),te(t.$$.fragment),i=q(),r=y("div"),l=B(n[9]),s=q(),o=y("i"),a=B(""),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=S(e);re(t.$$.fragment,h),i=M(h),r=k(h,"DIV",{class:!0});var _=S(r);l=A(_,n[9]),_.forEach(m),s=M(h),o=k(h,"I",{class:!0});var v=S(o);a=A(v,""),v.forEach(m),h.forEach(m),this.h()},h(){E(r,"class","editable H-1wgub6r"),Te(r,"buy",n[0].side==="Buy"),Te(r,"sell",n[0].side==="Sell"),E(o,"class","iconfont ml4 f14 cp T2 H-1wgub6r"),E(e,"class","conditional-quantity df aic H-1wgub6r")},m(d,h){G(d,e,h),ne(t,e,null),u(e,i),u(e,r),u(r,l),u(e,s),u(e,o),u(o,a),n[20](o),c=!0,f||(p=We(o,"mousedown",Zn(function(){Tt(n[16](n[0],n[5],"Size"))&&n[16](n[0],n[5],"Size").apply(this,arguments)})),f=!0)},p(d,h){n=d;const _={};h&1&&(_.item=n[0]),h&2&&(_.qtyType=n[1]),t.$set(_),(!c||h&512)&&W(l,n[9]),(!c||h&1)&&Te(r,"buy",n[0].side==="Buy"),(!c||h&1)&&Te(r,"sell",n[0].side==="Sell")},i(d){c||(Q(t.$$.fragment,d),c=!0)},o(d){j(t.$$.fragment,d),c=!1},d(d){d&&m(e),ie(t),n[20](null),f=!1,p()}}}function zP(n){let e,t,i=n[0].price+"",r,l,s,o,a,c;return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),s=y("i"),o=B(""),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=S(e);t=k(p,"DIV",{class:!0});var d=S(t);r=A(d,i),d.forEach(m),l=M(p),s=k(p,"I",{class:!0});var h=S(s);o=A(h,""),h.forEach(m),p.forEach(m),this.h()},h(){E(t,"class","editable H-1wgub6r"),E(s,"class","iconfont ml4 f14 cp T2 H-1wgub6r"),E(e,"class","conditional-order-price df aic H-1wgub6r")},m(f,p){G(f,e,p),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),n[21](s),a||(c=We(s,"mousedown",Zn(function(){Tt(n[16](n[0],n[6],"Price"))&&n[16](n[0],n[6],"Price").apply(this,arguments)})),a=!0)},p(f,p){n=f,p&1&&i!==(i=n[0].price+"")&&W(r,i)},d(f){f&&m(e),n[21](null),a=!1,c()}}}function QP(n){let e,t;return{c(){e=y("div"),t=B("Market"),this.h()},l(i){e=k(i,"DIV",{class:!0});var r=S(e);t=A(r,"Market"),r.forEach(m),this.h()},h(){E(e,"class","df aic H-1wgub6r")},m(i,r){G(i,e,r),u(e,t)},p:rt,d(i){i&&m(e)}}}function RP(n){let e,t=Ul(n[12],n[0],n[4])+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","df aic H-1wgub6r")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&17&&t!==(t=Ul(r[12],r[0],r[4])+"")&&W(i,t)},d(r){r&&m(e)}}}function FP(n){let e,t,i=Ul(n[12],n[0],n[4])+"",r,l,s,o,a,c;return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),s=y("i"),o=B(""),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=S(e);t=k(p,"DIV",{class:!0});var d=S(t);r=A(d,i),d.forEach(m),l=M(p),s=k(p,"I",{class:!0});var h=S(s);o=A(h,""),h.forEach(m),p.forEach(m),this.h()},h(){E(t,"class","editable H-1wgub6r"),E(s,"class","iconfont ml4 f14 cp T2 H-1wgub6r"),E(e,"class","position-trigger-price df aic H-1wgub6r")},m(f,p){G(f,e,p),u(e,t),u(t,r),u(e,l),u(e,s),u(s,o),n[22](s),a||(c=We(s,"mousedown",Zn(function(){Tt(n[16](n[0],n[7],"TriggerPrice"))&&n[16](n[0],n[7],"TriggerPrice").apply(this,arguments)})),a=!0)},p(f,p){n=f,p&17&&i!==(i=Ul(n[12],n[0],n[4])+"")&&W(r,i)},d(f){f&&m(e),n[22](null),a=!1,c()}}}function jP(n){let e,t=n[2](bt.Cancel)+"",i,r,l;return{c(){e=y("button"),i=B(t),this.h()},l(s){e=k(s,"BUTTON",{class:!0});var o=S(e);i=A(o,t),o.forEach(m),this.h()},h(){E(e,"class","trigger-order-cancel ph16 lh22 cp H-1wgub6r")},m(s,o){G(s,e,o),u(e,i),r||(l=We(e,"click",n[13]),r=!0)},p(s,o){o&4&&t!==(t=s[2](bt.Cancel)+"")&&W(i,t)},d(s){s&&m(e),r=!1,l()}}}function UP(n){let e,t=n[2](bt.Remove)+"",i,r,l;return{c(){e=y("button"),i=B(t),this.h()},l(s){e=k(s,"BUTTON",{class:!0});var o=S(e);i=A(o,t),o.forEach(m),this.h()},h(){E(e,"class","ph16 lh22 cp H-1wgub6r")},m(s,o){G(s,e,o),u(e,i),r||(l=We(e,"click",n[14]),r=!0)},p(s,o){o&4&&t!==(t=s[2](bt.Remove)+"")&&W(i,t)},d(s){s&&m(e),r=!1,l()}}}function WP(n){let e,t,i,r,l=n[12].pairName+"",s,o,a,c=n[2](He[n[12].type])+"",f,p,d,h=n[2](He.CurrencyMargin,{Currency:n[12].settleCurrency})+"",_,v,g,b,P,I,T,C,V,O,w,D,L=fu(n[12],n[3],n[0],n[4])+"",$,N,z,H=n[0].ordType+"",R,F,U,K=n[0].ordStatus+"",Y,X,ee,Z=n[0].actionTime+"",ue,ce,pe,me,oe,ke;const Le=[AP,BP],ge=[];function ae(de,se){return de[0].orderQty>0?0:1}g=ae(n),b=ge[g]=Le[g](n);function x(de,se){return de[11]?QP:zP}let fe=x(n)(n);function Se(de,se){return se&1&&(O=null),O==null&&(O=!!XP(de[0])),O?FP:RP}let Pe=Se(n,-1),Ce=Pe(n);function Ee(de,se){return de[0].removable?UP:jP}let Ie=Ee(n),ve=Ie(n);return{c(){e=y("div"),t=y("div"),i=y("div"),r=y("span"),s=B(l),o=q(),a=y("span"),f=B(c),p=q(),d=y("div"),_=B(h),v=q(),b.c(),P=q(),I=y("div"),T=B(n[8]),C=q(),fe.c(),V=q(),Ce.c(),w=q(),D=y("div"),$=B(L),N=q(),z=y("div"),R=B(H),F=q(),U=y("div"),Y=B(K),X=q(),ee=y("div"),ue=B(Z),ce=q(),pe=y("div"),ve.c(),this.h()},l(de){e=k(de,"DIV",{class:!0});var se=S(e);t=k(se,"DIV",{class:!0});var he=S(t);i=k(he,"DIV",{class:!0});var _e=S(i);r=k(_e,"SPAN",{});var be=S(r);s=A(be,l),be.forEach(m),o=M(_e),a=k(_e,"SPAN",{class:!0});var Ve=S(a);f=A(Ve,c),Ve.forEach(m),_e.forEach(m),p=M(he),d=k(he,"DIV",{class:!0});var Be=S(d);_=A(Be,h),Be.forEach(m),he.forEach(m),v=M(se),b.l(se),P=M(se),I=k(se,"DIV",{class:!0});var Fe=S(I);T=A(Fe,n[8]),Fe.forEach(m),C=M(se),fe.l(se),V=M(se),Ce.l(se),w=M(se),D=k(se,"DIV",{class:!0});var $e=S(D);$=A($e,L),$e.forEach(m),N=M(se),z=k(se,"DIV",{class:!0});var Ae=S(z);R=A(Ae,H),Ae.forEach(m),F=M(se),U=k(se,"DIV",{class:!0});var Ne=S(U);Y=A(Ne,K),Ne.forEach(m),X=M(se),ee=k(se,"DIV",{class:!0});var Ge=S(ee);ue=A(Ge,Z),Ge.forEach(m),ce=M(se),pe=k(se,"DIV",{class:!0});var Xe=S(pe);ve.l(Xe),Xe.forEach(m),se.forEach(m),this.h()},h(){E(a,"class","ml4"),E(i,"class","lh20"),E(d,"class","lh20 T2"),E(t,"class","symbol ps pr pl16 pv4 B1 cp H-1wgub6r"),Te(t,"linear-gradient-symbol",n[10]-320<1200),E(I,"class","df aic H-1wgub6r"),E(D,"class","df aic H-1wgub6r"),E(z,"class","df aic H-1wgub6r"),E(U,"class","df aic H-1wgub6r"),E(ee,"class","df aic pr16 H-1wgub6r"),E(pe,"class","action ps pr df aic jcfe B1 H-1wgub6r"),Te(pe,"linear-gradient-action",n[10]-320<1200),E(e,"class","history-list wrap fw2 T1 H-1wgub6r")},m(de,se){G(de,e,se),u(e,t),u(t,i),u(i,r),u(r,s),u(i,o),u(i,a),u(a,f),u(t,p),u(t,d),u(d,_),u(e,v),ge[g].m(e,null),u(e,P),u(e,I),u(I,T),u(e,C),fe.m(e,null),u(e,V),Ce.m(e,null),u(e,w),u(e,D),u(D,$),u(e,N),u(e,z),u(z,R),u(e,F),u(e,U),u(U,Y),u(e,X),u(e,ee),u(ee,ue),u(e,ce),u(e,pe),ve.m(pe,null),me=!0,oe||(ke=We(t,"click",n[15]),oe=!0)},p(de,[se]){(!me||se&4)&&c!==(c=de[2](He[de[12].type])+"")&&W(f,c),(!me||se&4)&&h!==(h=de[2](He.CurrencyMargin,{Currency:de[12].settleCurrency})+"")&&W(_,h),(!me||se&1024)&&Te(t,"linear-gradient-symbol",de[10]-320<1200);let he=g;g=ae(de),g===he?ge[g].p(de,se):(ot(),j(ge[he],1,1,()=>{ge[he]=null}),at(),b=ge[g],b?b.p(de,se):(b=ge[g]=Le[g](de),b.c()),Q(b,1),b.m(e,P)),(!me||se&256)&&W(T,de[8]),fe.p(de,se),Pe===(Pe=Se(de,se))&&Ce?Ce.p(de,se):(Ce.d(1),Ce=Pe(de),Ce&&(Ce.c(),Ce.m(e,w))),(!me||se&25)&&L!==(L=fu(de[12],de[3],de[0],de[4])+"")&&W($,L),(!me||se&1)&&H!==(H=de[0].ordType+"")&&W(R,H),(!me||se&1)&&K!==(K=de[0].ordStatus+"")&&W(Y,K),(!me||se&1)&&Z!==(Z=de[0].actionTime+"")&&W(ue,Z),Ie===(Ie=Ee(de))&&ve?ve.p(de,se):(ve.d(1),ve=Ie(de),ve&&(ve.c(),ve.m(pe,null))),(!me||se&1024)&&Te(pe,"linear-gradient-action",de[10]-320<1200)},i(de){me||(Q(b),me=!0)},o(de){j(b),me=!1},d(de){de&&m(e),ge[g].d(),fe.d(),Ce.d(),ve.d(),oe=!1,ke()}}}function ms(n,e){return xe.floor(Math.abs(e),n.pricePrecision,n.priceScale)}function fu(n,e,t,i){if(!e||!t)return"";const{trigger:r}=t;if(r==="ByLastPrice"){const{close:l,closeEp:s}=e;if(i){const a=ms(n,t.activationPriceEp-s);return`${l}(${a})`}const o=ms(n,t.stopPxEp-s);return`${l}(${o})`}if(r==="ByMarkPrice"){const{markPrice:l,markPriceEp:s}=e,o=ms(n,t.stopPxEp-s);return`${l}(${o})`}return""}function GP(n,e){return e?n.activationPrice:n.stopPx}function KP(n,e,t){if(t)return"";const{pegPriceType:i,pegOffsetProportion:r,pegOffsetValue:l}=e;return As(i)?["TrailingTakeProfitByProportionPeg","TrailingStopByProportionPeg"].includes(i)?`(${r} Trail)`:`(${l} Trail)`:""}function Ul(n,e,t){return`${e.stopDirection} ${GP(e,t)} (${e.triggerType}) ${KP(n,e,t)}`}function XP(n){return["Inactive","Untriggered"].indexOf(n.ordStatus)>-1&&!As(n.pegPriceType)}function YP(n,e,t){let i,r,l,s,o,a,c,f,p,d;J(n,Hl,U=>t(24,s=U)),J(n,dt,U=>t(2,o=U)),J(n,An,U=>t(17,a=U)),J(n,zn,U=>t(18,c=U)),J(n,ri,U=>t(19,f=U)),J(n,Ri,U=>t(25,p=U)),J(n,Bi,U=>t(10,d=U));let{item:h=null}=e;const _=ii.isMarketOrder(h.ordType),v=er.findContract(p,h.symbol);let g=null,b,P=0,I,T,C;Lt(()=>{document.addEventListener("mousedown",K=>{K.stopPropagation(),z()});const U=document.querySelectorAll('iframe[id^="tradingview_"]');if(U.length>0){const K=U[0];K&&K.contentDocument&&(K.contentDocument.onmousedown=function(Y){Y.stopPropagation(),z()})}});function V(U,K){return{[we.Cont]:K.orderQtyByCont,[we.Base]:K.orderQtyByValue,[we.Coin]:K.orderQtyByCoin}[U]}function O(U,K){if(U&&U.has(K.symbol)){t(3,g=U.get(K.symbol));return}t(3,g=null)}function w(){const U=Date.now();if(U-P>1e3){const K={type:v.type,by:"conditional",goal:"cancel_list"};Mi(h,K),P=U}}function D(){cl.next({type:"order-condition-remove",orderID:h.orderID})}function L(U){t(4,b=ii.isActivation(U.ordStatus,U.pegPriceType))}function $(){Pt.send("trade-pair","change",{type:"Perpetual",symbol:h.symbol})}function N(U,K,Y){return function(){z();let X=document.getElementById("tooltip-holder");X||(X=document.createElement("div"),X.setAttribute("id","tooltip-holder"),document.body.appendChild(X));const ee=new bd({target:X,props:{anchorNode:K,order:U,modifyField:Y,isConditionalOrder:!0,direction:l}});ee.$set({visible:!0}),Hl.next(ee)}}function z(){s&&(s.$set({visible:!1}),s.$destroy())}function H(U){De[U?"unshift":"push"](()=>{I=U,t(5,I)})}function R(U){De[U?"unshift":"push"](()=>{T=U,t(6,T)})}function F(U){De[U?"unshift":"push"](()=>{C=U,t(7,C)})}return n.$$set=U=>{"item"in U&&t(0,h=U.item)},n.$$.update=()=>{n.$$.dirty&524289&&O(f,h),n.$$.dirty&1&&L(h),n.$$.dirty&393216&&t(1,i=v.type==="Perpetual"?c:a),n.$$.dirty&3&&t(9,r=V(i,h)),n.$$.dirty&5&&t(8,l=tr(v,h,o,He))},[h,i,o,g,b,I,T,C,l,r,d,_,v,w,D,$,N,a,c,f,H,R,F]}let JP=class extends tt{constructor(e){super(),nt(this,e,YP,WP,et,{item:0})}};function uu(n,e,t){const i=n.slice();return i[11]=e[t],i}function ZP(n){let e,t=n[4](He.NoData)+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","no-data tc T3 H-1j6oxar")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&16&&t!==(t=r[4](He.NoData)+"")&&W(i,t)},i:rt,o:rt,d(r){r&&m(e)}}}function xP(n){let e=[],t=new Map,i,r,l=n[3];const s=o=>o[11].orderID;for(let o=0;o<l.length;o+=1){let a=uu(n,l,o),c=s(a);t.set(c,e[o]=pu(c,a))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();i=ut()},l(o){for(let a=0;a<e.length;a+=1)e[a].l(o);i=ut()},m(o,a){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,a);G(o,i,a),r=!0},p(o,a){a&8&&(l=o[3],ot(),e=Si(e,a,s,1,o,l,t,i.parentNode,lr,pu,i,uu),at())},i(o){if(!r){for(let a=0;a<l.length;a+=1)Q(e[a]);r=!0}},o(o){for(let a=0;a<e.length;a+=1)j(e[a]);r=!1},d(o){for(let a=0;a<e.length;a+=1)e[a].d(o);o&&m(i)}}}function pu(n,e){let t,i,r;return i=new JP({props:{item:e[11]}}),{key:n,first:null,c(){t=ut(),te(i.$$.fragment),this.h()},l(l){t=ut(),re(i.$$.fragment,l),this.h()},h(){this.first=t},m(l,s){G(l,t,s),ne(i,l,s),r=!0},p(l,s){e=l;const o={};s&8&&(o.item=e[11]),i.$set(o)},i(l){r||(Q(i.$$.fragment,l),r=!0)},o(l){j(i.$$.fragment,l),r=!1},d(l){l&&m(t),ie(i,l)}}}function e6(n){let e,t,i,r,l,s,o,a,c;function f(g){n[8](g)}function p(g){n[9](g)}let d={symbol:n[2].symbol,ordersLen:n[3].length};n[0]!==void 0&&(d.sortDirection=n[0]),n[1]!==void 0&&(d.sortKey=n[1]),i=new MP({props:d}),De.push(()=>qe(i,"sortDirection",f)),De.push(()=>qe(i,"sortKey",p));const h=[xP,ZP],_=[];function v(g,b){return g[3].length>0?0:1}return o=v(n),a=_[o]=h[o](n),{c(){e=y("div"),t=y("div"),te(i.$$.fragment),s=q(),a.c(),this.h()},l(g){e=k(g,"DIV",{class:!0});var b=S(e);t=k(b,"DIV",{class:!0});var P=S(t);re(i.$$.fragment,P),s=M(P),a.l(P),P.forEach(m),b.forEach(m),this.h()},h(){E(t,"class","grid H-1j6oxar"),E(e,"class","wrap f12 H-1j6oxar")},m(g,b){G(g,e,b),u(e,t),ne(i,t,null),u(t,s),_[o].m(t,null),c=!0},p(g,[b]){const P={};b&4&&(P.symbol=g[2].symbol),b&8&&(P.ordersLen=g[3].length),!r&&b&1&&(r=!0,P.sortDirection=g[0],Me(()=>r=!1)),!l&&b&2&&(l=!0,P.sortKey=g[1],Me(()=>l=!1)),i.$set(P);let I=o;o=v(g),o===I?_[o].p(g,b):(ot(),j(_[I],1,1,()=>{_[I]=null}),at(),a=_[o],a?a.p(g,b):(a=_[o]=h[o](g),a.c()),Q(a,1),a.m(t,null))},i(g){c||(Q(i.$$.fragment,g),Q(a),c=!0)},o(g){j(i.$$.fragment,g),j(a),c=!1},d(g){g&&m(e),ie(i),_[o].d()}}}function t6(n,e,t){let i,r,l,s,o;J(n,zi,_=>t(5,i=_)),J(n,Xt,_=>t(2,r=_)),J(n,mi,_=>t(6,l=_)),J(n,Bs,_=>t(7,s=_)),J(n,dt,_=>t(4,o=_));let a=[],c="",f="";function p(_,v,g,b,P,I){const T=V=>(O,w)=>{const D=Number(O[V]),L=Number(w[V]),$=(isNaN(D)?0:D)-(isNaN(L)?0:L);return P==="up"?$:-$},C={symbol:(V,O)=>{const w=b.get(V.symbol),D=b.get(O.symbol),L=w.pairName.localeCompare(D.pairName);return P==="up"?L:-L},price:T("price"),time:T("actionTimestamp")};t(3,a=_.filter(V=>v?V.symbol===g.symbol:V).sort(C[P?I:"time"]))}function d(_){c=_,t(0,c)}function h(_){f=_,t(1,f)}return n.$$.update=()=>{n.$$.dirty&231&&p(s,l,r,i,c,f)},[c,f,r,a,o,i,l,s,d,h]}let n6=class extends tt{constructor(e){super(),nt(this,e,t6,e6,et,{})}};function i6(n){let e,t,i=n[2](bt.Symbol)+"",r,l,s,o,a,c=n[2](bt.ExecSize)+"",f,p,d,h=n[2](He.Direction)+"",_,v,g,b=n[2](bt.ExecPrice)+"",P,I,T,C,V,O=n[2](yt.Size)+"",w,D,L,$=n[2](bt.OrderPrice)+"",N,z,H,R,F,U=n[2](bt.FeePaid)+"",K,Y,X,ee,Z,ue=n[2](bt.Type)+"",ce,pe,me,oe,ke,Le,ge=n[2](bt.Time)+"",ae,x;return s=new nn({props:{active:n[1]==="symbol",sortDirection:n[1]==="symbol"?n[0]:""}}),s.$on("sort",n[4]),T=new nn({props:{active:n[1]==="execPrice",sortDirection:n[1]==="execPrice"?n[0]:""}}),T.$on("sort",n[5]),H=new nn({props:{active:n[1]==="price",sortDirection:n[1]==="price"?n[0]:""}}),H.$on("sort",n[6]),X=new nn({props:{active:n[1]==="execFee",sortDirection:n[1]==="execFee"?n[0]:""}}),X.$on("sort",n[7]),{c(){e=y("div"),t=y("div"),r=B(i),l=q(),te(s.$$.fragment),o=q(),a=y("div"),f=B(c),p=q(),d=y("div"),_=B(h),v=q(),g=y("div"),P=B(b),I=q(),te(T.$$.fragment),C=q(),V=y("div"),w=B(O),D=q(),L=y("div"),N=B($),z=q(),te(H.$$.fragment),R=q(),F=y("div"),K=B(U),Y=q(),te(X.$$.fragment),ee=q(),Z=y("div"),ce=B(ue),pe=q(),me=y("div"),oe=B("ID"),ke=q(),Le=y("div"),ae=B(ge),this.h()},l(le){e=k(le,"DIV",{class:!0});var fe=S(e);t=k(fe,"DIV",{class:!0});var Se=S(t);r=A(Se,i),l=M(Se),re(s.$$.fragment,Se),Se.forEach(m),o=M(fe),a=k(fe,"DIV",{class:!0});var Pe=S(a);f=A(Pe,c),Pe.forEach(m),p=M(fe),d=k(fe,"DIV",{class:!0});var Ce=S(d);_=A(Ce,h),Ce.forEach(m),v=M(fe),g=k(fe,"DIV",{class:!0});var Ee=S(g);P=A(Ee,b),I=M(Ee),re(T.$$.fragment,Ee),Ee.forEach(m),C=M(fe),V=k(fe,"DIV",{class:!0});var Ie=S(V);w=A(Ie,O),Ie.forEach(m),D=M(fe),L=k(fe,"DIV",{class:!0});var ve=S(L);N=A(ve,$),z=M(ve),re(H.$$.fragment,ve),ve.forEach(m),R=M(fe),F=k(fe,"DIV",{class:!0});var de=S(F);K=A(de,U),Y=M(de),re(X.$$.fragment,de),de.forEach(m),ee=M(fe),Z=k(fe,"DIV",{class:!0});var se=S(Z);ce=A(se,ue),se.forEach(m),pe=M(fe),me=k(fe,"DIV",{class:!0});var he=S(me);oe=A(he,"ID"),he.forEach(m),ke=M(fe),Le=k(fe,"DIV",{class:!0});var _e=S(Le);ae=A(_e,ge),_e.forEach(m),fe.forEach(m),this.h()},h(){E(t,"class","cell pl16 H-mcou63"),E(a,"class","cell H-mcou63"),E(d,"class","cell H-mcou63"),E(g,"class","cell H-mcou63"),E(V,"class","cell H-mcou63"),E(L,"class","cell H-mcou63"),E(F,"class","cell H-mcou63"),E(Z,"class","cell H-mcou63"),E(me,"class","cell H-mcou63"),E(Le,"class","cell jcfe pr16 H-mcou63"),E(e,"class","row lh28 H-mcou63")},m(le,fe){G(le,e,fe),u(e,t),u(t,r),u(t,l),ne(s,t,null),u(e,o),u(e,a),u(a,f),u(e,p),u(e,d),u(d,_),u(e,v),u(e,g),u(g,P),u(g,I),ne(T,g,null),u(e,C),u(e,V),u(V,w),u(e,D),u(e,L),u(L,N),u(L,z),ne(H,L,null),u(e,R),u(e,F),u(F,K),u(F,Y),ne(X,F,null),u(e,ee),u(e,Z),u(Z,ce),u(e,pe),u(e,me),u(me,oe),u(e,ke),u(e,Le),u(Le,ae),x=!0},p(le,[fe]){(!x||fe&4)&&i!==(i=le[2](bt.Symbol)+"")&&W(r,i);const Se={};fe&2&&(Se.active=le[1]==="symbol"),fe&3&&(Se.sortDirection=le[1]==="symbol"?le[0]:""),s.$set(Se),(!x||fe&4)&&c!==(c=le[2](bt.ExecSize)+"")&&W(f,c),(!x||fe&4)&&h!==(h=le[2](He.Direction)+"")&&W(_,h),(!x||fe&4)&&b!==(b=le[2](bt.ExecPrice)+"")&&W(P,b);const Pe={};fe&2&&(Pe.active=le[1]==="execPrice"),fe&3&&(Pe.sortDirection=le[1]==="execPrice"?le[0]:""),T.$set(Pe),(!x||fe&4)&&O!==(O=le[2](yt.Size)+"")&&W(w,O),(!x||fe&4)&&$!==($=le[2](bt.OrderPrice)+"")&&W(N,$);const Ce={};fe&2&&(Ce.active=le[1]==="price"),fe&3&&(Ce.sortDirection=le[1]==="price"?le[0]:""),H.$set(Ce),(!x||fe&4)&&U!==(U=le[2](bt.FeePaid)+"")&&W(K,U);const Ee={};fe&2&&(Ee.active=le[1]==="execFee"),fe&3&&(Ee.sortDirection=le[1]==="execFee"?le[0]:""),X.$set(Ee),(!x||fe&4)&&ue!==(ue=le[2](bt.Type)+"")&&W(ce,ue),(!x||fe&4)&&ge!==(ge=le[2](bt.Time)+"")&&W(ae,ge)},i(le){x||(Q(s.$$.fragment,le),Q(T.$$.fragment,le),Q(H.$$.fragment,le),Q(X.$$.fragment,le),x=!0)},o(le){j(s.$$.fragment,le),j(T.$$.fragment,le),j(H.$$.fragment,le),j(X.$$.fragment,le),x=!1},d(le){le&&m(e),ie(s),ie(T),ie(H),ie(X)}}}function r6(n,e,t){let i;J(n,dt,p=>t(2,i=p));let{sortDirection:r}=e,{sortKey:l}=e;function s(p){if(l===p){if(r==="up"){t(0,r="down");return}if(r==="down"){t(0,r="");return}if(r===""){t(0,r="up");return}}t(1,l=p),t(0,r="up")}const o=()=>s("symbol"),a=()=>s("execPrice"),c=()=>s("price"),f=()=>s("execFee");return n.$$set=p=>{"sortDirection"in p&&t(0,r=p.sortDirection),"sortKey"in p&&t(1,l=p.sortKey)},[r,l,i,s,o,a,c,f]}let l6=class extends tt{constructor(e){super(),nt(this,e,r6,i6,et,{sortDirection:0,sortKey:1})}};function s6(n){let e=n[0].execPrice+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&1&&e!==(e=i[0].execPrice+"")&&W(t,e)},i:rt,o:rt,d(i){i&&m(t)}}}function o6(n){let e,t,i,r,l;return t=new Jl({props:{visible:n[1],theme:n[8],$$slots:{title:[c6],default:[a6]},$$scope:{ctx:n}}}),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);re(t.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","lh18 fw1 cp")},m(s,o){G(s,e,o),ne(t,e,null),i=!0,r||(l=[We(e,"mouseenter",n[12]),We(e,"mouseleave",n[12])],r=!0)},p(s,o){const a={};o&2&&(a.visible=s[1]),o&256&&(a.theme=s[8]),o&1048577&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){i||(Q(t.$$.fragment,s),i=!0)},o(s){j(t.$$.fragment,s),i=!1},d(s){s&&m(e),ie(t),r=!1,jt(l)}}}function a6(n){let e,t=n[0].price+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","tdud")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&1&&t!==(t=r[0].price+"")&&W(i,t)},d(r){r&&m(e)}}}function c6(n){let e,t=n[10](n[0])+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{slot:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"slot","title")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&1&&t!==(t=r[10](r[0])+"")&&W(i,t)},d(r){r&&m(e)}}}function f6(n){let e;return{c(){e=B(n[5])},l(t){e=A(t,n[5])},m(t,i){G(t,e,i)},p(t,i){i&32&&W(e,t[5])},i:rt,o:rt,d(t){t&&m(e)}}}function u6(n){let e,t,i,r,l;return t=new Jl({props:{visible:n[2],theme:n[8],$$slots:{title:[d6],default:[p6]},$$scope:{ctx:n}}}),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);re(t.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","lh18 fw1 cp")},m(s,o){G(s,e,o),ne(t,e,null),i=!0,r||(l=[We(e,"mouseenter",n[13]),We(e,"mouseleave",n[13])],r=!0)},p(s,o){const a={};o&4&&(a.visible=s[2]),o&256&&(a.theme=s[8]),o&1048609&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){i||(Q(t.$$.fragment,s),i=!0)},o(s){j(t.$$.fragment,s),i=!1},d(s){s&&m(e),ie(t),r=!1,jt(l)}}}function p6(n){let e,t;return{c(){e=y("span"),t=B(n[5]),this.h()},l(i){e=k(i,"SPAN",{class:!0});var r=S(e);t=A(r,n[5]),r.forEach(m),this.h()},h(){E(e,"class","tdud")},m(i,r){G(i,e,r),u(e,t)},p(i,r){r&32&&W(t,i[5])},d(i){i&&m(e)}}}function d6(n){let e,t=n[10](n[0])+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{slot:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"slot","title")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&1&&t!==(t=r[10](r[0])+"")&&W(i,t)},d(r){r&&m(e)}}}function m6(n){let e,t,i,r,l=n[9].pairName+"",s,o,a,c=n[6](He[n[9].type])+"",f,p,d,h=n[6](He.CurrencyMargin,{Currency:n[9].settleCurrency})+"",_,v,g,b,P,I,T=tr(n[9],n[0],n[6],He)+"",C,V,O,w,D,L,$,N,z,H,R,F,U,K,Y=n[0].execFee+"",X,ee,Z,ue=n[0].ordType+"",ce,pe,me,oe=n[0].execID+"",ke,Le,ge,ae=n[0].transactTime+"",x,le,fe,Se;const Pe=[o6,s6],Ce=[];function Ee(se,he){return se[0].ordType==="Liquidation"?0:1}w=Ee(n),D=Ce[w]=Pe[w](n);const Ie=[u6,f6],ve=[];function de(se,he){return se[0].ordType==="Liquidation"?0:1}return R=de(n),F=ve[R]=Ie[R](n),{c(){e=y("div"),t=y("div"),i=y("div"),r=y("span"),s=B(l),o=q(),a=y("span"),f=B(c),p=q(),d=y("div"),_=B(h),v=q(),g=y("div"),b=B(n[3]),P=q(),I=y("div"),C=B(T),V=q(),O=y("div"),D.c(),L=q(),$=y("div"),N=B(n[4]),z=q(),H=y("div"),F.c(),U=q(),K=y("div"),X=B(Y),ee=q(),Z=y("div"),ce=B(ue),pe=q(),me=y("div"),ke=B(oe),Le=q(),ge=y("div"),x=B(ae),this.h()},l(se){e=k(se,"DIV",{class:!0});var he=S(e);t=k(he,"DIV",{class:!0});var _e=S(t);i=k(_e,"DIV",{class:!0});var be=S(i);r=k(be,"SPAN",{});var Ve=S(r);s=A(Ve,l),Ve.forEach(m),o=M(be),a=k(be,"SPAN",{class:!0});var Be=S(a);f=A(Be,c),Be.forEach(m),be.forEach(m),p=M(_e),d=k(_e,"DIV",{class:!0});var Fe=S(d);_=A(Fe,h),Fe.forEach(m),_e.forEach(m),v=M(he),g=k(he,"DIV",{class:!0});var $e=S(g);b=A($e,n[3]),$e.forEach(m),P=M(he),I=k(he,"DIV",{class:!0});var Ae=S(I);C=A(Ae,T),Ae.forEach(m),V=M(he),O=k(he,"DIV",{class:!0});var Ne=S(O);D.l(Ne),Ne.forEach(m),L=M(he),$=k(he,"DIV",{class:!0});var Ge=S($);N=A(Ge,n[4]),Ge.forEach(m),z=M(he),H=k(he,"DIV",{class:!0});var Xe=S(H);F.l(Xe),Xe.forEach(m),U=M(he),K=k(he,"DIV",{class:!0});var ye=S(K);X=A(ye,Y),ye.forEach(m),ee=M(he),Z=k(he,"DIV",{class:!0});var Ke=S(Z);ce=A(Ke,ue),Ke.forEach(m),pe=M(he),me=k(he,"DIV",{class:!0});var Qe=S(me);ke=A(Qe,oe),Qe.forEach(m),Le=M(he),ge=k(he,"DIV",{class:!0});var ze=S(ge);x=A(ze,ae),ze.forEach(m),he.forEach(m),this.h()},h(){E(a,"class","ml4"),E(i,"class","lh20"),E(d,"class","lh20 T2"),E(t,"class","symbol ps pr pl16 pv4 B1 cp H-33tg7q"),Te(t,"linear-gradient-symbol",n[7]-320<1200),E(g,"class","df aic H-33tg7q"),Te(g,"buy",n[0].side==="Buy"),Te(g,"sell",n[0].side==="Sell"),E(I,"class","df aic H-33tg7q"),E(O,"class","df aic H-33tg7q"),E($,"class","df aic H-33tg7q"),Te($,"buy",n[0].side==="Buy"),Te($,"sell",n[0].side==="Sell"),E(H,"class","df aic H-33tg7q"),E(K,"class","df aic H-33tg7q"),E(Z,"class","df aic H-33tg7q"),E(me,"class","df aic H-33tg7q"),E(ge,"class","df aic jcfe pr16 H-33tg7q"),E(e,"class","history-list wrap fw2 T1 H-33tg7q")},m(se,he){G(se,e,he),u(e,t),u(t,i),u(i,r),u(r,s),u(i,o),u(i,a),u(a,f),u(t,p),u(t,d),u(d,_),u(e,v),u(e,g),u(g,b),u(e,P),u(e,I),u(I,C),u(e,V),u(e,O),Ce[w].m(O,null),u(e,L),u(e,$),u($,N),u(e,z),u(e,H),ve[R].m(H,null),u(e,U),u(e,K),u(K,X),u(e,ee),u(e,Z),u(Z,ce),u(e,pe),u(e,me),u(me,ke),u(e,Le),u(e,ge),u(ge,x),le=!0,fe||(Se=We(t,"click",n[11]),fe=!0)},p(se,[he]){(!le||he&64)&&c!==(c=se[6](He[se[9].type])+"")&&W(f,c),(!le||he&64)&&h!==(h=se[6](He.CurrencyMargin,{Currency:se[9].settleCurrency})+"")&&W(_,h),(!le||he&128)&&Te(t,"linear-gradient-symbol",se[7]-320<1200),(!le||he&8)&&W(b,se[3]),(!le||he&1)&&Te(g,"buy",se[0].side==="Buy"),(!le||he&1)&&Te(g,"sell",se[0].side==="Sell"),(!le||he&65)&&T!==(T=tr(se[9],se[0],se[6],He)+"")&&W(C,T);let _e=w;w=Ee(se),w===_e?Ce[w].p(se,he):(ot(),j(Ce[_e],1,1,()=>{Ce[_e]=null}),at(),D=Ce[w],D?D.p(se,he):(D=Ce[w]=Pe[w](se),D.c()),Q(D,1),D.m(O,null)),(!le||he&16)&&W(N,se[4]),(!le||he&1)&&Te($,"buy",se[0].side==="Buy"),(!le||he&1)&&Te($,"sell",se[0].side==="Sell");let be=R;R=de(se),R===be?ve[R].p(se,he):(ot(),j(ve[be],1,1,()=>{ve[be]=null}),at(),F=ve[R],F?F.p(se,he):(F=ve[R]=Ie[R](se),F.c()),Q(F,1),F.m(H,null)),(!le||he&1)&&Y!==(Y=se[0].execFee+"")&&W(X,Y),(!le||he&1)&&ue!==(ue=se[0].ordType+"")&&W(ce,ue),(!le||he&1)&&oe!==(oe=se[0].execID+"")&&W(ke,oe),(!le||he&1)&&ae!==(ae=se[0].transactTime+"")&&W(x,ae)},i(se){le||(Q(D),Q(F),le=!0)},o(se){j(D),j(F),le=!1},d(se){se&&m(e),Ce[w].d(),ve[R].d(),fe=!1,Se()}}}function h6(n,e,t){let i,r,l,s,o,a,c,f,p,d;J(n,dt,O=>t(6,o=O)),J(n,An,O=>t(15,a=O)),J(n,zn,O=>t(16,c=O)),J(n,Ri,O=>t(17,f=O)),J(n,Bi,O=>t(7,p=O)),J(n,Ur,O=>t(8,d=O));let{item:h=null}=e;const _=er.findContract(f,h.symbol);let v=!1,g=!1;function b(O,w){return{[we.Cont]:w.orderQtyByCont,[we.Base]:w.orderQtyByValue,[we.Coin]:w.orderQtyByCoin}[O]}function P(O,w){return{[we.Cont]:w.execQtyByCont,[we.Base]:w.execQtyByValue,[we.Coin]:w.execQtyByCoin}[O]}function I(O){return o(vt.WhenYour,{ExecQty:s,Symbol:O.symbol,Price:O.price,ExecPrice:O.execPrice})}function T(){Pt.send("trade-pair","change",{type:"Perpetual",symbol:h.symbol})}function C(){t(1,v=!v)}function V(){t(2,g=!g)}return n.$$set=O=>{"item"in O&&t(0,h=O.item)},n.$$.update=()=>{n.$$.dirty&1&&t(5,i=["Market","Stop","MarketIfTouched"].indexOf(h.ordType)>-1?"Market":h.price),n.$$.dirty&98304&&t(14,r=_.type==="Perpetual"?c:a),n.$$.dirty&16385&&t(4,l=b(r,h)),n.$$.dirty&16385&&t(3,s=P(r,h))},[h,v,g,s,l,i,o,p,d,_,I,T,C,V,r,a,c]}let _6=class extends tt{constructor(e){super(),nt(this,e,h6,m6,et,{item:0})}};function du(n,e,t){const i=n.slice();return i[11]=e[t],i}function g6(n){let e,t=n[3](He.NoData)+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","no-data tc T3 H-1j6oxar")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&8&&t!==(t=r[3](He.NoData)+"")&&W(i,t)},i:rt,o:rt,d(r){r&&m(e)}}}function v6(n){let e=[],t=new Map,i,r,l=n[2];const s=o=>o[11].execID;for(let o=0;o<l.length;o+=1){let a=du(n,l,o),c=s(a);t.set(c,e[o]=mu(c,a))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();i=ut()},l(o){for(let a=0;a<e.length;a+=1)e[a].l(o);i=ut()},m(o,a){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,a);G(o,i,a),r=!0},p(o,a){a&4&&(l=o[2],ot(),e=Si(e,a,s,1,o,l,t,i.parentNode,lr,mu,i,du),at())},i(o){if(!r){for(let a=0;a<l.length;a+=1)Q(e[a]);r=!0}},o(o){for(let a=0;a<e.length;a+=1)j(e[a]);r=!1},d(o){for(let a=0;a<e.length;a+=1)e[a].d(o);o&&m(i)}}}function mu(n,e){let t,i,r;return i=new _6({props:{item:e[11]}}),{key:n,first:null,c(){t=ut(),te(i.$$.fragment),this.h()},l(l){t=ut(),re(i.$$.fragment,l),this.h()},h(){this.first=t},m(l,s){G(l,t,s),ne(i,l,s),r=!0},p(l,s){e=l;const o={};s&4&&(o.item=e[11]),i.$set(o)},i(l){r||(Q(i.$$.fragment,l),r=!0)},o(l){j(i.$$.fragment,l),r=!1},d(l){l&&m(t),ie(i,l)}}}function b6(n){let e,t,i,r,l,s,o,a,c;function f(g){n[8](g)}function p(g){n[9](g)}let d={};n[0]!==void 0&&(d.sortDirection=n[0]),n[1]!==void 0&&(d.sortKey=n[1]),i=new l6({props:d}),De.push(()=>qe(i,"sortDirection",f)),De.push(()=>qe(i,"sortKey",p));const h=[v6,g6],_=[];function v(g,b){return g[2].length>0?0:1}return o=v(n),a=_[o]=h[o](n),{c(){e=y("div"),t=y("div"),te(i.$$.fragment),s=q(),a.c(),this.h()},l(g){e=k(g,"DIV",{class:!0});var b=S(e);t=k(b,"DIV",{class:!0});var P=S(t);re(i.$$.fragment,P),s=M(P),a.l(P),P.forEach(m),b.forEach(m),this.h()},h(){E(t,"class","grid H-1j6oxar"),E(e,"class","wrap f12 H-1j6oxar")},m(g,b){G(g,e,b),u(e,t),ne(i,t,null),u(t,s),_[o].m(t,null),c=!0},p(g,[b]){const P={};!r&&b&1&&(r=!0,P.sortDirection=g[0],Me(()=>r=!1)),!l&&b&2&&(l=!0,P.sortKey=g[1],Me(()=>l=!1)),i.$set(P);let I=o;o=v(g),o===I?_[o].p(g,b):(ot(),j(_[I],1,1,()=>{_[I]=null}),at(),a=_[o],a?a.p(g,b):(a=_[o]=h[o](g),a.c()),Q(a,1),a.m(t,null))},i(g){c||(Q(i.$$.fragment,g),Q(a),c=!0)},o(g){j(i.$$.fragment,g),j(a),c=!1},d(g){g&&m(e),ie(i),_[o].d()}}}function E6(n,e,t){let i,r,l,s,o;J(n,zi,_=>t(4,i=_)),J(n,Xt,_=>t(5,r=_)),J(n,mi,_=>t(6,l=_)),J(n,v1,_=>t(7,s=_)),J(n,dt,_=>t(3,o=_));let a,c="",f="";function p(_,v,g,b,P,I){const T=V=>(O,w)=>{const D=Number(O[V]),L=Number(w[V]),$=(isNaN(D)?0:D)-(isNaN(L)?0:L);return P==="up"?$:-$},C={symbol:(V,O)=>{const w=b.get(V.symbol),D=b.get(O.symbol),L=w.pairName.localeCompare(D.pairName);return P==="up"?L:-L},execPrice:T("execPrice"),price:T("price"),execFee:T("execFeeMoney"),time:T("transactTimestamp")};t(2,a=_.filter(V=>v?V.symbol===g.symbol:V).sort(C[P?I:"time"]))}function d(_){c=_,t(0,c)}function h(_){f=_,t(1,f)}return n.$$.update=()=>{n.$$.dirty&243&&p(s,l,r,i,c,f)},[c,f,a,o,i,r,l,s,d,h]}let y6=class extends tt{constructor(e){super(),nt(this,e,E6,b6,et,{})}};function hu(n,e,t){const i=n.slice();return i[15]=e[t],i}function _u(n){let e,t=n[15]+"",i,r,l;function s(){return n[12](n[15])}return{c(){e=y("li"),i=B(t),this.h()},l(o){e=k(o,"LI",{class:!0});var a=S(e);i=A(a,t),a.forEach(m),this.h()},h(){E(e,"class","H-1p2a920"),Te(e,"active",n[0]===n[15])},m(o,a){G(o,e,a),u(e,i),r||(l=We(e,"click",s),r=!0)},p(o,a){n=o,a&33&&Te(e,"active",n[0]===n[15])},d(o){o&&m(e),r=!1,l()}}}function k6(n){let e,t,i=n[4](bt.Symbol)+"",r,l,s,o,a,c=n[4](He.Size)+"",f,p,d,h=n[4](He.Direction)+"",_,v,g,b=n[4](bt.OrderPrice)+"",P,I,T,C,V,O=n[4](bt.FilledRemaining)+"",w,D,L,$=n[4](bt.FillPrice)+"",N,z,H,R,F,U=n[4](bt.TriggerPrice)+"",K,Y,X,ee,Z,ue=n[4](bt.Type)+"",ce,pe,me,oe,ke,Le=n[4](bt.Status)+"",ge,ae,x,le,fe,Se,Pe,Ce,Ee=n[4](bt.Time)+"",Ie,ve,de,se;s=new nn({props:{active:n[2]==="symbol",sortDirection:n[2]==="symbol"?n[1]:""}}),s.$on("sort",n[8]),T=new nn({props:{active:n[2]==="price",sortDirection:n[2]==="price"?n[1]:""}}),T.$on("sort",n[9]),H=new nn({props:{active:n[2]==="fillPrice",sortDirection:n[2]==="fillPrice"?n[1]:""}}),H.$on("sort",n[10]),X=new nn({props:{active:n[2]==="stopPx",sortDirection:n[2]==="stopPx"?n[1]:""}}),X.$on("sort",n[11]);let he=n[5],_e=[];for(let be=0;be<he.length;be+=1)_e[be]=_u(hu(n,he,be));return{c(){e=y("div"),t=y("div"),r=B(i),l=q(),te(s.$$.fragment),o=q(),a=y("div"),f=B(c),p=q(),d=y("div"),_=B(h),v=q(),g=y("div"),P=B(b),I=q(),te(T.$$.fragment),C=q(),V=y("div"),w=B(O),D=q(),L=y("div"),N=B($),z=q(),te(H.$$.fragment),R=q(),F=y("div"),K=B(U),Y=q(),te(X.$$.fragment),ee=q(),Z=y("div"),ce=B(ue),pe=q(),me=y("div"),oe=y("div"),ke=y("span"),ge=B(Le),ae=q(),x=y("i"),le=B(""),fe=q(),Se=y("ul");for(let be=0;be<_e.length;be+=1)_e[be].c();Pe=q(),Ce=y("div"),Ie=B(Ee),this.h()},l(be){e=k(be,"DIV",{class:!0});var Ve=S(e);t=k(Ve,"DIV",{class:!0});var Be=S(t);r=A(Be,i),l=M(Be),re(s.$$.fragment,Be),Be.forEach(m),o=M(Ve),a=k(Ve,"DIV",{class:!0});var Fe=S(a);f=A(Fe,c),Fe.forEach(m),p=M(Ve),d=k(Ve,"DIV",{class:!0});var $e=S(d);_=A($e,h),$e.forEach(m),v=M(Ve),g=k(Ve,"DIV",{class:!0});var Ae=S(g);P=A(Ae,b),I=M(Ae),re(T.$$.fragment,Ae),Ae.forEach(m),C=M(Ve),V=k(Ve,"DIV",{class:!0});var Ne=S(V);w=A(Ne,O),Ne.forEach(m),D=M(Ve),L=k(Ve,"DIV",{class:!0});var Ge=S(L);N=A(Ge,$),z=M(Ge),re(H.$$.fragment,Ge),Ge.forEach(m),R=M(Ve),F=k(Ve,"DIV",{class:!0});var Xe=S(F);K=A(Xe,U),Y=M(Xe),re(X.$$.fragment,Xe),Xe.forEach(m),ee=M(Ve),Z=k(Ve,"DIV",{class:!0});var ye=S(Z);ce=A(ye,ue),ye.forEach(m),pe=M(Ve),me=k(Ve,"DIV",{class:!0,style:!0});var Ke=S(me);oe=k(Ke,"DIV",{class:!0,style:!0});var Qe=S(oe);ke=k(Qe,"SPAN",{class:!0});var ze=S(ke);ge=A(ze,Le),ze.forEach(m),ae=M(Qe),x=k(Qe,"I",{class:!0});var Ue=S(x);le=A(Ue,""),Ue.forEach(m),fe=M(Qe),Se=k(Qe,"UL",{class:!0});var st=S(Se);for(let it=0;it<_e.length;it+=1)_e[it].l(st);st.forEach(m),Qe.forEach(m),Ke.forEach(m),Pe=M(Ve),Ce=k(Ve,"DIV",{class:!0});var Oe=S(Ce);Ie=A(Oe,Ee),Oe.forEach(m),Ve.forEach(m),this.h()},h(){E(t,"class","cell ps pl16 H-1p2a920"),E(a,"class","cell H-1p2a920"),E(d,"class","cell H-1p2a920"),E(g,"class","cell H-1p2a920"),E(V,"class","cell H-1p2a920"),E(L,"class","cell H-1p2a920"),E(F,"class","cell H-1p2a920"),E(Z,"class","cell H-1p2a920"),E(ke,"class","T3"),E(x,"class","iconfont arrow f12 T3 H-1p2a920"),Te(x,"animation",n[3]),E(Se,"class","dropdown pa br4 B3 ovh wsn T2 H-1p2a920"),Te(Se,"dropdown",n[3]),E(oe,"class","df aic pr lh30"),Jt(oe,"float","right"),E(me,"class","cell H-1p2a920"),Jt(me,"z-index","10"),E(Ce,"class","cell jcfe pr16 H-1p2a920"),E(e,"class","row lh28 H-1p2a920")},m(be,Ve){G(be,e,Ve),u(e,t),u(t,r),u(t,l),ne(s,t,null),u(e,o),u(e,a),u(a,f),u(e,p),u(e,d),u(d,_),u(e,v),u(e,g),u(g,P),u(g,I),ne(T,g,null),u(e,C),u(e,V),u(V,w),u(e,D),u(e,L),u(L,N),u(L,z),ne(H,L,null),u(e,R),u(e,F),u(F,K),u(F,Y),ne(X,F,null),u(e,ee),u(e,Z),u(Z,ce),u(e,pe),u(e,me),u(me,oe),u(oe,ke),u(ke,ge),u(oe,ae),u(oe,x),u(x,le),u(oe,fe),u(oe,Se);for(let Be=0;Be<_e.length;Be+=1)_e[Be]&&_e[Be].m(Se,null);u(e,Pe),u(e,Ce),u(Ce,Ie),ve=!0,de||(se=[We(me,"mouseenter",n[13]),We(me,"mouseleave",n[14])],de=!0)},p(be,[Ve]){(!ve||Ve&16)&&i!==(i=be[4](bt.Symbol)+"")&&W(r,i);const Be={};Ve&4&&(Be.active=be[2]==="symbol"),Ve&6&&(Be.sortDirection=be[2]==="symbol"?be[1]:""),s.$set(Be),(!ve||Ve&16)&&c!==(c=be[4](He.Size)+"")&&W(f,c),(!ve||Ve&16)&&h!==(h=be[4](He.Direction)+"")&&W(_,h),(!ve||Ve&16)&&b!==(b=be[4](bt.OrderPrice)+"")&&W(P,b);const Fe={};Ve&4&&(Fe.active=be[2]==="price"),Ve&6&&(Fe.sortDirection=be[2]==="price"?be[1]:""),T.$set(Fe),(!ve||Ve&16)&&O!==(O=be[4](bt.FilledRemaining)+"")&&W(w,O),(!ve||Ve&16)&&$!==($=be[4](bt.FillPrice)+"")&&W(N,$);const $e={};Ve&4&&($e.active=be[2]==="fillPrice"),Ve&6&&($e.sortDirection=be[2]==="fillPrice"?be[1]:""),H.$set($e),(!ve||Ve&16)&&U!==(U=be[4](bt.TriggerPrice)+"")&&W(K,U);const Ae={};if(Ve&4&&(Ae.active=be[2]==="stopPx"),Ve&6&&(Ae.sortDirection=be[2]==="stopPx"?be[1]:""),X.$set(Ae),(!ve||Ve&16)&&ue!==(ue=be[4](bt.Type)+"")&&W(ce,ue),(!ve||Ve&16)&&Le!==(Le=be[4](bt.Status)+"")&&W(ge,Le),(!ve||Ve&8)&&Te(x,"animation",be[3]),Ve&97){he=be[5];let Ne;for(Ne=0;Ne<he.length;Ne+=1){const Ge=hu(be,he,Ne);_e[Ne]?_e[Ne].p(Ge,Ve):(_e[Ne]=_u(Ge),_e[Ne].c(),_e[Ne].m(Se,null))}for(;Ne<_e.length;Ne+=1)_e[Ne].d(1);_e.length=he.length}(!ve||Ve&8)&&Te(Se,"dropdown",be[3]),(!ve||Ve&16)&&Ee!==(Ee=be[4](bt.Time)+"")&&W(Ie,Ee)},i(be){ve||(Q(s.$$.fragment,be),Q(T.$$.fragment,be),Q(H.$$.fragment,be),Q(X.$$.fragment,be),ve=!0)},o(be){j(s.$$.fragment,be),j(T.$$.fragment,be),j(H.$$.fragment,be),j(X.$$.fragment,be),ve=!1},d(be){be&&m(e),ie(s),ie(T),ie(H),ie(X),wn(_e,be),de=!1,jt(se)}}}function P6(n,e,t){let i;J(n,dt,P=>t(4,i=P));let{ordStatus:r="All"}=e,{sortDirection:l}=e,{sortKey:s}=e,o=!1;const a=["All","Filled","Deactivated","Rejected","Canceled"];function c(P){t(0,r=P),t(3,o=!1)}function f(P){if(s===P){if(l==="up"){t(1,l="down");return}if(l==="down"){t(1,l="");return}if(l===""){t(1,l="up");return}}t(2,s=P),t(1,l="up")}const p=()=>f("symbol"),d=()=>f("price"),h=()=>f("fillPrice"),_=()=>f("stopPx"),v=P=>c(P),g=()=>t(3,o=!0),b=()=>t(3,o=!1);return n.$$set=P=>{"ordStatus"in P&&t(0,r=P.ordStatus),"sortDirection"in P&&t(1,l=P.sortDirection),"sortKey"in P&&t(2,s=P.sortKey)},[r,l,s,o,i,a,c,f,p,d,h,_,v,g,b]}let S6=class extends tt{constructor(e){super(),nt(this,e,P6,k6,et,{ordStatus:0,sortDirection:1,sortKey:2})}};function C6(n){let e,t;return{c(){e=y("div"),t=B(n[3]),this.h()},l(i){e=k(i,"DIV",{class:!0});var r=S(e);t=A(r,n[3]),r.forEach(m),this.h()},h(){E(e,"class","df aic H-33tg7q")},m(i,r){G(i,e,r),u(e,t)},p(i,r){r&8&&W(t,i[3])},d(i){i&&m(e)}}}function T6(n){let e,t;return{c(){e=y("div"),t=B(n[3]),this.h()},l(i){e=k(i,"DIV",{class:!0});var r=S(e);t=A(r,n[3]),r.forEach(m),this.h()},h(){E(e,"class","df aic H-33tg7q"),Te(e,"buy",n[0].side==="Buy"),Te(e,"sell",n[0].side==="Sell")},m(i,r){G(i,e,r),u(e,t)},p(i,r){r&8&&W(t,i[3]),r&1&&Te(e,"buy",i[0].side==="Buy"),r&1&&Te(e,"sell",i[0].side==="Sell")},d(i){i&&m(e)}}}function w6(n){let e=n[0].price+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&1&&e!==(e=i[0].price+"")&&W(t,e)},i:rt,o:rt,d(i){i&&m(t)}}}function I6(n){let e,t,i,r,l;return t=new Jl({props:{visible:n[2],theme:n[8],$$slots:{title:[V6],default:[D6]},$$scope:{ctx:n}}}),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);re(t.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","lh18 fw1 cp")},m(s,o){G(s,e,o),ne(t,e,null),i=!0,r||(l=[We(e,"mouseenter",n[12]),We(e,"mouseleave",n[12])],r=!0)},p(s,o){const a={};o&4&&(a.visible=s[2]),o&256&&(a.theme=s[8]),o&2097153&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){i||(Q(t.$$.fragment,s),i=!0)},o(s){j(t.$$.fragment,s),i=!1},d(s){s&&m(e),ie(t),r=!1,jt(l)}}}function D6(n){let e,t=n[0].price+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","tdud")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&1&&t!==(t=r[0].price+"")&&W(i,t)},d(r){r&&m(e)}}}function V6(n){let e,t=n[10](n[0])+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{slot:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"slot","title")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&1&&t!==(t=r[10](r[0])+"")&&W(i,t)},d(r){r&&m(e)}}}function O6(n){let e=n[0].fillPrice+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r&1&&e!==(e=i[0].fillPrice+"")&&W(t,e)},i:rt,o:rt,d(i){i&&m(t)}}}function L6(n){let e,t,i,r,l;return t=new Jl({props:{visible:n[1],theme:n[8],$$slots:{title:[q6],default:[$6]},$$scope:{ctx:n}}}),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);re(t.$$.fragment,o),o.forEach(m),this.h()},h(){E(e,"class","lh18 fw1 cp")},m(s,o){G(s,e,o),ne(t,e,null),i=!0,r||(l=[We(e,"mouseenter",n[13]),We(e,"mouseleave",n[13])],r=!0)},p(s,o){const a={};o&2&&(a.visible=s[1]),o&256&&(a.theme=s[8]),o&2097153&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){i||(Q(t.$$.fragment,s),i=!0)},o(s){j(t.$$.fragment,s),i=!1},d(s){s&&m(e),ie(t),r=!1,jt(l)}}}function $6(n){let e,t=n[0].fillPrice+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","tdud")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&1&&t!==(t=r[0].fillPrice+"")&&W(i,t)},d(r){r&&m(e)}}}function q6(n){let e,t=n[10](n[0])+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{slot:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"slot","title")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&1&&t!==(t=r[10](r[0])+"")&&W(i,t)},d(r){r&&m(e)}}}function M6(n){let e,t,i,r,l=n[9].pairName+"",s,o,a,c=n[6](He[n[9].type])+"",f,p,d,h=n[6](He.CurrencyMargin,{Currency:n[9].settleCurrency})+"",_,v,g,b,P=tr(n[9],n[0],n[6],He)+"",I,T,C,V,O,w,D,L,$,N,z,H,R,F,U,K,Y=n[0].stopPx+"",X,ee,Z,ue=n[0].ordType+"",ce,pe,me,oe=n[0].ordStatus+"",ke,Le,ge,ae=n[0].transactTime+"",x,le,fe,Se;function Pe(be,Ve){return be[0].orderQty>0?T6:C6}let Ce=Pe(n),Ee=Ce(n);const Ie=[I6,w6],ve=[];function de(be,Ve){return be[0].ordType==="Liquidation"?0:1}V=de(n),O=ve[V]=Ie[V](n);const se=[L6,O6],he=[];function _e(be,Ve){return be[0].ordType==="Liquidation"?0:1}return R=_e(n),F=he[R]=se[R](n),{c(){e=y("div"),t=y("div"),i=y("div"),r=y("span"),s=B(l),o=q(),a=y("span"),f=B(c),p=q(),d=y("div"),_=B(h),v=q(),Ee.c(),g=q(),b=y("div"),I=B(P),T=q(),C=y("div"),O.c(),w=q(),D=y("div"),L=B(n[5]),$=B("/"),N=B(n[4]),z=q(),H=y("div"),F.c(),U=q(),K=y("div"),X=B(Y),ee=q(),Z=y("div"),ce=B(ue),pe=q(),me=y("div"),ke=B(oe),Le=q(),ge=y("div"),x=B(ae),this.h()},l(be){e=k(be,"DIV",{class:!0});var Ve=S(e);t=k(Ve,"DIV",{class:!0});var Be=S(t);i=k(Be,"DIV",{class:!0});var Fe=S(i);r=k(Fe,"SPAN",{});var $e=S(r);s=A($e,l),$e.forEach(m),o=M(Fe),a=k(Fe,"SPAN",{class:!0});var Ae=S(a);f=A(Ae,c),Ae.forEach(m),Fe.forEach(m),p=M(Be),d=k(Be,"DIV",{class:!0});var Ne=S(d);_=A(Ne,h),Ne.forEach(m),Be.forEach(m),v=M(Ve),Ee.l(Ve),g=M(Ve),b=k(Ve,"DIV",{class:!0});var Ge=S(b);I=A(Ge,P),Ge.forEach(m),T=M(Ve),C=k(Ve,"DIV",{class:!0});var Xe=S(C);O.l(Xe),Xe.forEach(m),w=M(Ve),D=k(Ve,"DIV",{class:!0});var ye=S(D);L=A(ye,n[5]),$=A(ye,"/"),N=A(ye,n[4]),ye.forEach(m),z=M(Ve),H=k(Ve,"DIV",{class:!0});var Ke=S(H);F.l(Ke),Ke.forEach(m),U=M(Ve),K=k(Ve,"DIV",{class:!0});var Qe=S(K);X=A(Qe,Y),Qe.forEach(m),ee=M(Ve),Z=k(Ve,"DIV",{class:!0});var ze=S(Z);ce=A(ze,ue),ze.forEach(m),pe=M(Ve),me=k(Ve,"DIV",{class:!0});var Ue=S(me);ke=A(Ue,oe),Ue.forEach(m),Le=M(Ve),ge=k(Ve,"DIV",{class:!0});var st=S(ge);x=A(st,ae),st.forEach(m),Ve.forEach(m),this.h()},h(){E(a,"class","ml4"),E(i,"class","lh20"),E(d,"class","lh20 T2"),E(t,"class","symbol ps pr pl16 pv4 B1 cp H-33tg7q"),Te(t,"linear-gradient-symbol",n[7]-320<1200),E(b,"class","df aic H-33tg7q"),E(C,"class","df aic H-33tg7q"),E(D,"class","df aic H-33tg7q"),E(H,"class","df aic H-33tg7q"),E(K,"class","df aic H-33tg7q"),E(Z,"class","df aic H-33tg7q"),E(me,"class","df aic H-33tg7q"),E(ge,"class","df aic jcfe pr16 H-33tg7q"),E(e,"class","history-list wrap fw2 T1 H-33tg7q")},m(be,Ve){G(be,e,Ve),u(e,t),u(t,i),u(i,r),u(r,s),u(i,o),u(i,a),u(a,f),u(t,p),u(t,d),u(d,_),u(e,v),Ee.m(e,null),u(e,g),u(e,b),u(b,I),u(e,T),u(e,C),ve[V].m(C,null),u(e,w),u(e,D),u(D,L),u(D,$),u(D,N),u(e,z),u(e,H),he[R].m(H,null),u(e,U),u(e,K),u(K,X),u(e,ee),u(e,Z),u(Z,ce),u(e,pe),u(e,me),u(me,ke),u(e,Le),u(e,ge),u(ge,x),le=!0,fe||(Se=We(t,"click",n[11]),fe=!0)},p(be,[Ve]){(!le||Ve&64)&&c!==(c=be[6](He[be[9].type])+"")&&W(f,c),(!le||Ve&64)&&h!==(h=be[6](He.CurrencyMargin,{Currency:be[9].settleCurrency})+"")&&W(_,h),(!le||Ve&128)&&Te(t,"linear-gradient-symbol",be[7]-320<1200),Ce===(Ce=Pe(be))&&Ee?Ee.p(be,Ve):(Ee.d(1),Ee=Ce(be),Ee&&(Ee.c(),Ee.m(e,g))),(!le||Ve&65)&&P!==(P=tr(be[9],be[0],be[6],He)+"")&&W(I,P);let Be=V;V=de(be),V===Be?ve[V].p(be,Ve):(ot(),j(ve[Be],1,1,()=>{ve[Be]=null}),at(),O=ve[V],O?O.p(be,Ve):(O=ve[V]=Ie[V](be),O.c()),Q(O,1),O.m(C,null)),(!le||Ve&32)&&W(L,be[5]),(!le||Ve&16)&&W(N,be[4]);let Fe=R;R=_e(be),R===Fe?he[R].p(be,Ve):(ot(),j(he[Fe],1,1,()=>{he[Fe]=null}),at(),F=he[R],F?F.p(be,Ve):(F=he[R]=se[R](be),F.c()),Q(F,1),F.m(H,null)),(!le||Ve&1)&&Y!==(Y=be[0].stopPx+"")&&W(X,Y),(!le||Ve&1)&&ue!==(ue=be[0].ordType+"")&&W(ce,ue),(!le||Ve&1)&&oe!==(oe=be[0].ordStatus+"")&&W(ke,oe),(!le||Ve&1)&&ae!==(ae=be[0].transactTime+"")&&W(x,ae)},i(be){le||(Q(O),Q(F),le=!0)},o(be){j(O),j(F),le=!1},d(be){be&&m(e),Ee.d(),ve[V].d(),he[R].d(),fe=!1,Se()}}}function N6(n,e,t){let i,r,l,s,o,a,c,f,p,d;J(n,dt,w=>t(6,o=w)),J(n,An,w=>t(15,a=w)),J(n,zn,w=>t(16,c=w)),J(n,Ri,w=>t(17,f=w)),J(n,Bi,w=>t(7,p=w)),J(n,Ur,w=>t(8,d=w));let{item:h=null}=e;const _=er.findContract(f,h.symbol);let v=!1,g=!1;function b(w,D){return{[we.Cont]:D.orderQtyStrByCont,[we.Base]:D.orderQtyStrByValue,[we.Coin]:D.orderQtyStrByCoin}[w]}function P(w,D){return{[we.Cont]:D.cumQtyByCont,[we.Base]:D.cumQtyByValue,[we.Coin]:D.cumQtyByCoin}[w]}function I(w,D){return{[we.Cont]:D.leavesQtyByCont,[we.Base]:D.leavesQtyByValue,[we.Coin]:D.leavesQtyByCoin}[w]}function T(w){return o(vt.WhenYour,{ExecQty:r,Symbol:w.symbol,Price:w.price,ExecPrice:w.execPrice})}function C(){Pt.send("trade-pair","change",{type:"Perpetual",symbol:h.symbol})}function V(){t(2,g=!g)}function O(){t(1,v=!v)}return n.$$set=w=>{"item"in w&&t(0,h=w.item)},n.$$.update=()=>{n.$$.dirty&98304&&t(14,i=_.type==="Perpetual"?c:a),n.$$.dirty&16385&&t(3,r=b(i,h)),n.$$.dirty&16385&&t(5,l=P(i,h)),n.$$.dirty&16385&&t(4,s=I(i,h))},[h,v,g,r,s,l,o,p,d,_,T,C,V,O,i,a,c]}let H6=class extends tt{constructor(e){super(),nt(this,e,N6,M6,et,{item:0})}};function gu(n,e,t){const i=n.slice();return i[13]=e[t],i}function B6(n){let e,t=n[4](He.NoData)+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","no-data tc T3 H-1j6oxar")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&16&&t!==(t=r[4](He.NoData)+"")&&W(i,t)},i:rt,o:rt,d(r){r&&m(e)}}}function A6(n){let e=[],t=new Map,i,r,l=n[3];const s=o=>o[13].orderID;for(let o=0;o<l.length;o+=1){let a=gu(n,l,o),c=s(a);t.set(c,e[o]=vu(c,a))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();i=ut()},l(o){for(let a=0;a<e.length;a+=1)e[a].l(o);i=ut()},m(o,a){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,a);G(o,i,a),r=!0},p(o,a){a&8&&(l=o[3],ot(),e=Si(e,a,s,1,o,l,t,i.parentNode,lr,vu,i,gu),at())},i(o){if(!r){for(let a=0;a<l.length;a+=1)Q(e[a]);r=!0}},o(o){for(let a=0;a<e.length;a+=1)j(e[a]);r=!1},d(o){for(let a=0;a<e.length;a+=1)e[a].d(o);o&&m(i)}}}function vu(n,e){let t,i,r;return i=new H6({props:{item:e[13]}}),{key:n,first:null,c(){t=ut(),te(i.$$.fragment),this.h()},l(l){t=ut(),re(i.$$.fragment,l),this.h()},h(){this.first=t},m(l,s){G(l,t,s),ne(i,l,s),r=!0},p(l,s){e=l;const o={};s&8&&(o.item=e[13]),i.$set(o)},i(l){r||(Q(i.$$.fragment,l),r=!0)},o(l){j(i.$$.fragment,l),r=!1},d(l){l&&m(t),ie(i,l)}}}function z6(n){let e,t,i,r,l,s,o,a,c,f;function p(P){n[9](P)}function d(P){n[10](P)}function h(P){n[11](P)}let _={};n[0]!==void 0&&(_.ordStatus=n[0]),n[1]!==void 0&&(_.sortDirection=n[1]),n[2]!==void 0&&(_.sortKey=n[2]),i=new S6({props:_}),De.push(()=>qe(i,"ordStatus",p)),De.push(()=>qe(i,"sortDirection",d)),De.push(()=>qe(i,"sortKey",h));const v=[A6,B6],g=[];function b(P,I){return P[3].length>0?0:1}return a=b(n),c=g[a]=v[a](n),{c(){e=y("div"),t=y("div"),te(i.$$.fragment),o=q(),c.c(),this.h()},l(P){e=k(P,"DIV",{class:!0});var I=S(e);t=k(I,"DIV",{class:!0});var T=S(t);re(i.$$.fragment,T),o=M(T),c.l(T),T.forEach(m),I.forEach(m),this.h()},h(){E(t,"class","grid H-1j6oxar"),E(e,"class","wrap f12 H-1j6oxar")},m(P,I){G(P,e,I),u(e,t),ne(i,t,null),u(t,o),g[a].m(t,null),f=!0},p(P,[I]){const T={};!r&&I&1&&(r=!0,T.ordStatus=P[0],Me(()=>r=!1)),!l&&I&2&&(l=!0,T.sortDirection=P[1],Me(()=>l=!1)),!s&&I&4&&(s=!0,T.sortKey=P[2],Me(()=>s=!1)),i.$set(T);let C=a;a=b(P),a===C?g[a].p(P,I):(ot(),j(g[C],1,1,()=>{g[C]=null}),at(),c=g[a],c?c.p(P,I):(c=g[a]=v[a](P),c.c()),Q(c,1),c.m(t,null))},i(P){f||(Q(i.$$.fragment,P),Q(c),f=!0)},o(P){j(i.$$.fragment,P),j(c),f=!1},d(P){P&&m(e),ie(i),g[a].d()}}}function Q6(n,e,t){let i,r,l,s,o;J(n,zi,g=>t(5,i=g)),J(n,Xt,g=>t(6,r=g)),J(n,mi,g=>t(7,l=g)),J(n,b1,g=>t(8,s=g)),J(n,dt,g=>t(4,o=g));let a,c="All",f="",p="";function d(g,b,P,I,T,C,V){const O=D=>(L,$)=>{const N=Number(L[D]),z=Number($[D]),H=(isNaN(N)?0:N)-(isNaN(z)?0:z);return C==="up"?H:-H},w={symbol:(D,L)=>{const $=I.get(D.symbol),N=I.get(L.symbol),z=$.pairName.localeCompare(N.pairName);return C==="up"?z:-z},price:O("priceEp"),stopPx:O("stopPxEp"),fillPrice:O("fillPrice"),time:O("transactTimestamp")};t(3,a=g.filter(D=>T==="All"||D.ordStatus===T).filter(D=>b?D.symbol===P.symbol:D).sort(w[C?V:"time"]))}function h(g){c=g,t(0,c)}function _(g){f=g,t(1,f)}function v(g){p=g,t(2,p)}return n.$$.update=()=>{n.$$.dirty&487&&d(s,l,r,i,c,f,p)},[c,f,p,a,o,i,r,l,s,h,_,v]}let R6=class extends tt{constructor(e){super(),nt(this,e,Q6,z6,et,{})}};function bu(n,e,t){const i=n.slice();return i[7]=e[t],i[9]=t,i}function Eu(n){let e,t,i=n[7].title+"",r,l,s,o;return{c(){e=y("li"),t=y("span"),r=B(i),l=q(),this.h()},l(a){e=k(a,"LI",{class:!0});var c=S(e);t=k(c,"SPAN",{class:!0});var f=S(t);r=A(f,i),f.forEach(m),l=M(c),c.forEach(m),this.h()},h(){E(t,"class","dib"),E(e,"class","ph12 fw2 H-oajok5"),Te(e,"special",n[9]===n[1])},m(a,c){G(a,e,c),u(e,t),u(t,r),u(e,l),s||(o=We(e,"click",function(){Tt(n[2](n[7],n[9]))&&n[2](n[7],n[9]).apply(this,arguments)}),s=!0)},p(a,c){n=a,c&1&&i!==(i=n[7].title+"")&&W(r,i),c&2&&Te(e,"special",n[9]===n[1])},d(a){a&&m(e),s=!1,o()}}}function yu(n){let e,t=n[7].isShow&&Eu(n);return{c(){t&&t.c(),e=ut()},l(i){t&&t.l(i),e=ut()},m(i,r){t&&t.m(i,r),G(i,e,r)},p(i,r){i[7].isShow?t?t.p(i,r):(t=Eu(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){t&&t.d(i),i&&m(e)}}}function F6(n){let e,t,i=n[0],r=[];for(let l=0;l<i.length;l+=1)r[l]=yu(bu(n,i,l));return{c(){e=y("div"),t=y("ul");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=k(l,"DIV",{class:!0});var s=S(e);t=k(s,"UL",{});var o=S(t);for(let a=0;a<r.length;a+=1)r[a].l(o);o.forEach(m),s.forEach(m),this.h()},h(){E(e,"class","wrap df B2 T2 br12 ovh H-oajok5")},m(l,s){G(l,e,s),u(e,t);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null)},p(l,[s]){if(s&7){i=l[0];let o;for(o=0;o<i.length;o+=1){const a=bu(l,i,o);r[o]?r[o].p(a,s):(r[o]=yu(a),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},i:rt,o:rt,d(l){l&&m(e),wn(r,l)}}}function j6(n,e,t){let i;J(n,dt,f=>t(5,i=f));let{kvCount:r=0}=e,{tabType:l=0}=e,s=[],o=0;function a(f,p){t(0,s=[{tab:Bt.OPEN_POSITIONS,title:f(xt.OpenPositions),isShow:p<1},{tab:Bt.CLOSED_POSITIONS,title:f(xt.ClosedPositions),isShow:p<2},{tab:Bt.ACTIVE_ORDERS,title:f(xt.ActiveOrders),isShow:p<3},{tab:Bt.CONDITIONAL_ORDERS,title:f(xt.ConditionalOrders),isShow:p<4},{tab:Bt.FILLS,title:f(xt.Fills),isShow:p<5},{tab:Bt.ORDER_HISTORY,title:f(xt.OrderHistory),isShow:p<6},{tab:Bt.TRADING_BOTS,title:f(xt.TradingBot),isShow:p<7}])}function c(f,p){return function(){if(t(3,l=f.tab),o===p){t(1,o=-1);return}t(1,o=p)}}return n.$$set=f=>{"kvCount"in f&&t(4,r=f.kvCount),"tabType"in f&&t(3,l=f.tabType)},n.$$.update=()=>{n.$$.dirty&48&&a(i,r)},[s,o,c,l,r,i]}let U6=class extends tt{constructor(e){super(),nt(this,e,j6,F6,et,{kvCount:4,tabType:3})}};function ku(n){let e,t;return e=new Kn({props:{class:"open-position",active:n[0]===Bt.OPEN_POSITIONS,$$slots:{default:[W6]},$$scope:{ctx:n}}}),e.$on("click",n[24]),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&1&&(l.active=i[0]===Bt.OPEN_POSITIONS),r[0]&8256|r[1]&256&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function W6(n){let e=n[13](xt.OpenPositions)+"",t,i;return{c(){t=B(e),i=B(n[6])},l(r){t=A(r,e),i=A(r,n[6])},m(r,l){G(r,t,l),G(r,i,l)},p(r,l){l[0]&8192&&e!==(e=r[13](xt.OpenPositions)+"")&&W(t,e),l[0]&64&&W(i,r[6])},d(r){r&&m(t),r&&m(i)}}}function Pu(n){let e,t;return e=new Kn({props:{class:"closed-position",active:n[0]===Bt.CLOSED_POSITIONS,$$slots:{default:[G6]},$$scope:{ctx:n}}}),e.$on("click",n[25]),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&1&&(l.active=i[0]===Bt.CLOSED_POSITIONS),r[0]&8192|r[1]&256&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function G6(n){let e=n[13](xt.ClosedPositions)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[0]&8192&&e!==(e=i[13](xt.ClosedPositions)+"")&&W(t,e)},d(i){i&&m(t)}}}function Su(n){let e,t;return e=new Kn({props:{class:"active-order",active:n[0]===Bt.ACTIVE_ORDERS,$$slots:{default:[K6]},$$scope:{ctx:n}}}),e.$on("click",n[26]),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&1&&(l.active=i[0]===Bt.ACTIVE_ORDERS),r[0]&9216|r[1]&256&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function K6(n){let e=n[13](xt.ActiveOrders)+"",t,i,r;return{c(){t=B(e),i=q(),r=B(n[10])},l(l){t=A(l,e),i=M(l),r=A(l,n[10])},m(l,s){G(l,t,s),G(l,i,s),G(l,r,s)},p(l,s){s[0]&8192&&e!==(e=l[13](xt.ActiveOrders)+"")&&W(t,e),s[0]&1024&&W(r,l[10])},d(l){l&&m(t),l&&m(i),l&&m(r)}}}function Cu(n){let e,t;return e=new Kn({props:{class:"conditional-order",active:n[0]===Bt.CONDITIONAL_ORDERS,$$slots:{default:[X6]},$$scope:{ctx:n}}}),e.$on("click",n[27]),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&1&&(l.active=i[0]===Bt.CONDITIONAL_ORDERS),r[0]&8704|r[1]&256&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function X6(n){let e=n[13](xt.ConditionalOrders)+"",t,i,r;return{c(){t=B(e),i=q(),r=B(n[9])},l(l){t=A(l,e),i=M(l),r=A(l,n[9])},m(l,s){G(l,t,s),G(l,i,s),G(l,r,s)},p(l,s){s[0]&8192&&e!==(e=l[13](xt.ConditionalOrders)+"")&&W(t,e),s[0]&512&&W(r,l[9])},d(l){l&&m(t),l&&m(i),l&&m(r)}}}function Tu(n){let e,t;return e=new Kn({props:{class:"fills",active:n[0]===Bt.FILLS,$$slots:{default:[Y6]},$$scope:{ctx:n}}}),e.$on("click",n[28]),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&1&&(l.active=i[0]===Bt.FILLS),r[0]&8192|r[1]&256&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Y6(n){let e=n[13](xt.Fills)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[0]&8192&&e!==(e=i[13](xt.Fills)+"")&&W(t,e)},d(i){i&&m(t)}}}function wu(n){let e,t;return e=new Kn({props:{class:"order-history",active:n[0]===Bt.ORDER_HISTORY,$$slots:{default:[J6]},$$scope:{ctx:n}}}),e.$on("click",n[29]),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&1&&(l.active=i[0]===Bt.ORDER_HISTORY),r[0]&8192|r[1]&256&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function J6(n){let e=n[13](xt.OrderHistory)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[0]&8192&&e!==(e=i[13](xt.OrderHistory)+"")&&W(t,e)},d(i){i&&m(t)}}}function Iu(n){let e,t;return e=new Kn({props:{class:"trading-bots",active:n[0]===Bt.TRADING_BOTS,$$slots:{default:[Z6]},$$scope:{ctx:n}}}),e.$on("click",n[30]),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r[0]&1&&(l.active=i[0]===Bt.TRADING_BOTS),r[0]&8192|r[1]&256&&(l.$$scope={dirty:r,ctx:i}),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Z6(n){let e=n[13](xt.TradingBot)+"",t;return{c(){t=B(e)},l(i){t=A(i,e)},m(i,r){G(i,t,r)},p(i,r){r[0]&8192&&e!==(e=i[13](xt.TradingBot)+"")&&W(t,e)},d(i){i&&m(t)}}}function Du(n){let e,t,i,r,l,s,o,a;function c(p){n[31](p)}let f={kvCount:n[8]};return n[0]!==void 0&&(f.tabType=n[0]),s=new U6({props:f}),De.push(()=>qe(s,"tabType",c)),{c(){e=y("span"),t=y("i"),i=B(""),r=q(),l=y("div"),te(s.$$.fragment),this.h()},l(p){e=k(p,"SPAN",{class:!0});var d=S(e);t=k(d,"I",{class:!0});var h=S(t);i=A(h,""),h.forEach(m),r=M(d),l=k(d,"DIV",{class:!0});var _=S(l);re(s.$$.fragment,_),_.forEach(m),d.forEach(m),this.h()},h(){E(t,"class","iconfont f12 fw1 T3"),E(l,"class","dropdown pa H-1nle596"),E(e,"class","menu pr ph10 cp H-1nle596")},m(p,d){G(p,e,d),u(e,t),u(t,i),u(e,r),u(e,l),ne(s,l,null),a=!0},p(p,d){const h={};d[0]&256&&(h.kvCount=p[8]),!o&&d[0]&1&&(o=!0,h.tabType=p[0],Me(()=>o=!1)),s.$set(h)},i(p){a||(Q(s.$$.fragment,p),a=!0)},o(p){j(s.$$.fragment,p),a=!1},d(p){p&&m(e),ie(s)}}}function x6(n){let e,t,i,r,l,s,o,a,c;function f(_){n[34](_)}let p={class:"f12 cp",$$slots:{default:[tS]},$$scope:{ctx:n}};n[12]!==void 0&&(p.checked=n[12]),i=new Pn({props:p}),De.push(()=>qe(i,"checked",f)),i.$on("change",n[18]);let d=n[1].length>0&&Vu(n),h=!n[17]&&nS(n);return{c(){e=y("div"),t=y("div"),te(i.$$.fragment),l=q(),d&&d.c(),s=q(),h&&h.c(),this.h()},l(_){e=k(_,"DIV",{class:!0});var v=S(e);t=k(v,"DIV",{class:!0});var g=S(t);re(i.$$.fragment,g),g.forEach(m),l=M(v),d&&d.l(v),s=M(v),h&&h.l(v),v.forEach(m),this.h()},h(){E(t,"class","currency-symbol df aic fw1 mr16 cp H-1nle596"),E(e,"class","df aic")},m(_,v){G(_,e,v),u(e,t),ne(i,t,null),u(e,l),d&&d.m(e,null),u(e,s),h&&h.m(e,null),o=!0,a||(c=We(e,"mousedown",dS),a=!0)},p(_,v){const g={};v[0]&8192|v[1]&256&&(g.$$scope={dirty:v,ctx:_}),!r&&v[0]&4096&&(r=!0,g.checked=_[12],Me(()=>r=!1)),i.$set(g),_[1].length>0?d?d.p(_,v):(d=Vu(_),d.c(),d.m(e,s)):d&&(d.d(1),d=null),_[17]||h.p(_,v)},i(_){o||(Q(i.$$.fragment,_),o=!0)},o(_){j(i.$$.fragment,_),o=!1},d(_){_&&m(e),ie(i),d&&d.d(),h&&h.d(),a=!1,c()}}}function eS(n){let e,t;return e=new Ry({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p:rt,i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function tS(n){let e,t=n[13](xt.ViewOnlyThe)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","pl8 fw1 f14 T3 cp")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l[0]&8192&&t!==(t=r[13](xt.ViewOnlyThe)+"")&&W(i,t)},d(r){r&&m(e)}}}function Vu(n){let e,t=n[13](xt.TotalPnl)+"",i,r,l,s=xe.delimit(n[11])+"",o,a;return{c(){e=y("div"),i=B(t),r=B(": "),l=y("span"),o=B(s),a=B(n[14]),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=S(e);i=A(f,t),r=A(f,": "),l=k(f,"SPAN",{});var p=S(l);o=A(p,s),a=A(p,n[14]),p.forEach(m),f.forEach(m),this.h()},h(){Te(l,"buy",n[11]>0),Te(l,"sell",n[11]<0),E(e,"class","mr16 f14 T3 fw1")},m(c,f){G(c,e,f),u(e,i),u(e,r),u(e,l),u(l,o),u(l,a)},p(c,f){f[0]&8192&&t!==(t=c[13](xt.TotalPnl)+"")&&W(i,t),f[0]&2048&&s!==(s=xe.delimit(c[11])+"")&&W(o,s),f[0]&16384&&W(a,c[14]),f[0]&2048&&Te(l,"buy",c[11]>0),f[0]&2048&&Te(l,"sell",c[11]<0)},d(c){c&&m(e)}}}function nS(n){let e,t,i,r,l,s=n[13](xt.PNLHistory)+"",o,a;return{c(){e=y("a"),t=y("i"),i=B(""),r=q(),l=y("span"),o=B(s),this.h()},l(c){e=k(c,"A",{href:!0,target:!0,class:!0});var f=S(e);t=k(f,"I",{class:!0});var p=S(t);i=A(p,""),p.forEach(m),r=M(f),l=k(f,"SPAN",{class:!0});var d=S(l);o=A(d,s),d.forEach(m),f.forEach(m),this.h()},h(){E(t,"class","iconfont f12"),E(l,"class","ml4 f14 fw1"),E(e,"href",a=n[15](cn.ASSETS_PNL_DETAILS)),E(e,"target","_blank"),E(e,"class","df fw1 mr16 usn T3 cp")},m(c,f){G(c,e,f),u(e,t),u(t,i),u(e,r),u(e,l),u(l,o)},p(c,f){f[0]&8192&&s!==(s=c[13](xt.PNLHistory)+"")&&W(o,s),f[0]&32768&&a!==(a=c[15](cn.ASSETS_PNL_DETAILS))&&E(e,"href",a)},d(c){c&&m(e)}}}function iS(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P=n[8]>0&&ku(n),I=n[8]>1&&Pu(n),T=n[8]>2&&Su(n),C=n[8]>3&&Cu(n),V=n[8]>4&&Tu(n),O=n[8]>5&&wu(n),w=n[8]>6&&n[2]&&Iu(n),D=n[8]<n[7]&&Du(n);const L=[eS,x6],$=[];function N(z,H){return z[0]===Bt.TRADING_BOTS?0:1}return h=N(n),_=$[h]=L[h](n),{c(){e=y("div"),t=y("div"),i=y("div"),r=y("div"),P&&P.c(),l=q(),I&&I.c(),s=q(),T&&T.c(),o=q(),C&&C.c(),a=q(),V&&V.c(),c=q(),O&&O.c(),f=q(),w&&w.c(),p=q(),D&&D.c(),d=q(),_.c(),this.h()},l(z){e=k(z,"DIV",{class:!0});var H=S(e);t=k(H,"DIV",{class:!0});var R=S(t);i=k(R,"DIV",{class:!0});var F=S(i);r=k(F,"DIV",{class:!0});var U=S(r);P&&P.l(U),l=M(U),I&&I.l(U),s=M(U),T&&T.l(U),o=M(U),C&&C.l(U),a=M(U),V&&V.l(U),c=M(U),O&&O.l(U),f=M(U),w&&w.l(U),p=M(U),D&&D.l(U),U.forEach(m),F.forEach(m),R.forEach(m),d=M(H),_.l(H),H.forEach(m),this.h()},h(){E(r,"class","df content T2 H-1nle596"),E(i,"class","dib"),E(t,"class","container f1 H-1nle596"),E(e,"class","df jcsb")},m(z,H){G(z,e,H),u(e,t),u(t,i),u(i,r),P&&P.m(r,null),u(r,l),I&&I.m(r,null),u(r,s),T&&T.m(r,null),u(r,o),C&&C.m(r,null),u(r,a),V&&V.m(r,null),u(r,c),O&&O.m(r,null),u(r,f),w&&w.m(r,null),u(r,p),D&&D.m(r,null),n[32](i),n[33](t),u(e,d),$[h].m(e,null),v=!0,g||(b=We(r,"mousedown",pS),g=!0)},p(z,H){z[8]>0?P?(P.p(z,H),H[0]&256&&Q(P,1)):(P=ku(z),P.c(),Q(P,1),P.m(r,l)):P&&(ot(),j(P,1,1,()=>{P=null}),at()),z[8]>1?I?(I.p(z,H),H[0]&256&&Q(I,1)):(I=Pu(z),I.c(),Q(I,1),I.m(r,s)):I&&(ot(),j(I,1,1,()=>{I=null}),at()),z[8]>2?T?(T.p(z,H),H[0]&256&&Q(T,1)):(T=Su(z),T.c(),Q(T,1),T.m(r,o)):T&&(ot(),j(T,1,1,()=>{T=null}),at()),z[8]>3?C?(C.p(z,H),H[0]&256&&Q(C,1)):(C=Cu(z),C.c(),Q(C,1),C.m(r,a)):C&&(ot(),j(C,1,1,()=>{C=null}),at()),z[8]>4?V?(V.p(z,H),H[0]&256&&Q(V,1)):(V=Tu(z),V.c(),Q(V,1),V.m(r,c)):V&&(ot(),j(V,1,1,()=>{V=null}),at()),z[8]>5?O?(O.p(z,H),H[0]&256&&Q(O,1)):(O=wu(z),O.c(),Q(O,1),O.m(r,f)):O&&(ot(),j(O,1,1,()=>{O=null}),at()),z[8]>6&&z[2]?w?(w.p(z,H),H[0]&260&&Q(w,1)):(w=Iu(z),w.c(),Q(w,1),w.m(r,p)):w&&(ot(),j(w,1,1,()=>{w=null}),at()),z[8]<z[7]?D?(D.p(z,H),H[0]&384&&Q(D,1)):(D=Du(z),D.c(),Q(D,1),D.m(r,null)):D&&(ot(),j(D,1,1,()=>{D=null}),at());let R=h;h=N(z),h===R?$[h].p(z,H):(ot(),j($[R],1,1,()=>{$[R]=null}),at(),_=$[h],_?_.p(z,H):(_=$[h]=L[h](z),_.c()),Q(_,1),_.m(e,null))},i(z){v||(Q(P),Q(I),Q(T),Q(C),Q(V),Q(O),Q(w),Q(D),Q(_),v=!0)},o(z){j(P),j(I),j(T),j(C),j(V),j(O),j(w),j(D),j(_),v=!1},d(z){z&&m(e),P&&P.d(),I&&I.d(),T&&T.d(),C&&C.d(),V&&V.d(),O&&O.d(),w&&w.d(),D&&D.d(),n[32](null),n[33](null),$[h].d(),g=!1,b()}}}function rS(n){let e,t,i;function r(s){n[35](s)}let l={scrollTop:n[5]};return n[6]!==void 0&&(l.posCount=n[6]),e=new ak({props:l}),De.push(()=>qe(e,"posCount",r)),{c(){te(e.$$.fragment)},l(s){re(e.$$.fragment,s)},m(s,o){ne(e,s,o),i=!0},p(s,o){const a={};o[0]&32&&(a.scrollTop=s[5]),!t&&o[0]&64&&(t=!0,a.posCount=s[6],Me(()=>t=!1)),e.$set(a)},i(s){i||(Q(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){ie(e,s)}}}function lS(n){let e,t;return e=new Ek({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function sS(n){let e,t;return e=new VP({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function oS(n){let e,t;return e=new n6({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function aS(n){let e,t;return e=new y6({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function cS(n){let e,t;return e=new R6({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function fS(n){let e,t;return e=new A1({props:{entryType:"Contract"}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p:rt,i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Ou(n){let e,t,i,r,l,s=n[13](xt.PleaseLoginTo)+"",o;return{c(){e=y("div"),t=y("div"),i=q(),r=y("div"),l=y("div"),o=B(s),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=S(e);t=k(c,"DIV",{class:!0}),S(t).forEach(m),i=M(c),r=k(c,"DIV",{class:!0});var f=S(r);l=k(f,"DIV",{class:!0});var p=S(l);o=A(p,s),p.forEach(m),f.forEach(m),c.forEach(m),this.h()},h(){E(t,"class","grid-layout-item-drager B1 H-1nle596"),E(l,"class","tc H-1nle596"),E(r,"class","mask f1 B1 H-1nle596"),E(e,"class","df fdc fill H-1nle596")},m(a,c){G(a,e,c),u(e,t),u(e,i),u(e,r),u(r,l),u(l,o)},p(a,c){c[0]&8192&&s!==(s=a[13](xt.PleaseLoginTo)+"")&&W(o,s)},d(a){a&&m(e)}}}function uS(n){let e,t,i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C;t=new _p({props:{class:"header",$$slots:{default:[iS]},$$scope:{ctx:n}}}),l=new gn({props:{active:n[0]===Bt.OPEN_POSITIONS,$$slots:{default:[rS]},$$scope:{ctx:n}}}),o=new gn({props:{active:n[0]===Bt.CLOSED_POSITIONS,$$slots:{default:[lS]},$$scope:{ctx:n}}}),c=new gn({props:{active:n[0]===Bt.ACTIVE_ORDERS,$$slots:{default:[sS]},$$scope:{ctx:n}}}),p=new gn({props:{active:n[0]===Bt.CONDITIONAL_ORDERS,$$slots:{default:[oS]},$$scope:{ctx:n}}}),h=new gn({props:{active:n[0]===Bt.FILLS,$$slots:{default:[aS]},$$scope:{ctx:n}}}),v=new gn({props:{active:n[0]===Bt.ORDER_HISTORY,$$slots:{default:[cS]},$$scope:{ctx:n}}}),b=new gn({props:{active:n[0]===Bt.TRADING_BOTS,$$slots:{default:[fS]},$$scope:{ctx:n}}});let V=n[16]!=="Login"&&Ou(n);return{c(){e=y("div"),te(t.$$.fragment),i=q(),r=y("div"),te(l.$$.fragment),s=q(),te(o.$$.fragment),a=q(),te(c.$$.fragment),f=q(),te(p.$$.fragment),d=q(),te(h.$$.fragment),_=q(),te(v.$$.fragment),g=q(),te(b.$$.fragment),P=q(),V&&V.c(),this.h()},l(O){e=k(O,"DIV",{class:!0});var w=S(e);re(t.$$.fragment,w),i=M(w),r=k(w,"DIV",{class:!0});var D=S(r);re(l.$$.fragment,D),s=M(D),re(o.$$.fragment,D),a=M(D),re(c.$$.fragment,D),f=M(D),re(p.$$.fragment,D),d=M(D),re(h.$$.fragment,D),_=M(D),re(v.$$.fragment,D),g=M(D),re(b.$$.fragment,D),D.forEach(m),P=M(w),V&&V.l(w),w.forEach(m),this.h()},h(){E(r,"class","body pr f1 df fdc h0 sv H-1nle596"),E(e,"class","wrap df fdc f1 pr pb8 ovh B1 H-1nle596")},m(O,w){G(O,e,w),ne(t,e,null),u(e,i),u(e,r),ne(l,r,null),u(r,s),ne(o,r,null),u(r,a),ne(c,r,null),u(r,f),ne(p,r,null),u(r,d),ne(h,r,null),u(r,_),ne(v,r,null),u(r,g),ne(b,r,null),u(e,P),V&&V.m(e,null),I=!0,T||(C=We(r,"scroll",n[19]),T=!0)},p(O,w){const D={};w[0]&65503|w[1]&256&&(D.$$scope={dirty:w,ctx:O}),t.$set(D);const L={};w[0]&1&&(L.active=O[0]===Bt.OPEN_POSITIONS),w[0]&96|w[1]&256&&(L.$$scope={dirty:w,ctx:O}),l.$set(L);const $={};w[0]&1&&($.active=O[0]===Bt.CLOSED_POSITIONS),w[1]&256&&($.$$scope={dirty:w,ctx:O}),o.$set($);const N={};w[0]&1&&(N.active=O[0]===Bt.ACTIVE_ORDERS),w[1]&256&&(N.$$scope={dirty:w,ctx:O}),c.$set(N);const z={};w[0]&1&&(z.active=O[0]===Bt.CONDITIONAL_ORDERS),w[1]&256&&(z.$$scope={dirty:w,ctx:O}),p.$set(z);const H={};w[0]&1&&(H.active=O[0]===Bt.FILLS),w[1]&256&&(H.$$scope={dirty:w,ctx:O}),h.$set(H);const R={};w[0]&1&&(R.active=O[0]===Bt.ORDER_HISTORY),w[1]&256&&(R.$$scope={dirty:w,ctx:O}),v.$set(R);const F={};w[0]&1&&(F.active=O[0]===Bt.TRADING_BOTS),w[1]&256&&(F.$$scope={dirty:w,ctx:O}),b.$set(F),O[16]!=="Login"?V?V.p(O,w):(V=Ou(O),V.c(),V.m(e,null)):V&&(V.d(1),V=null)},i(O){I||(Q(t.$$.fragment,O),Q(l.$$.fragment,O),Q(o.$$.fragment,O),Q(c.$$.fragment,O),Q(p.$$.fragment,O),Q(h.$$.fragment,O),Q(v.$$.fragment,O),Q(b.$$.fragment,O),I=!0)},o(O){j(t.$$.fragment,O),j(l.$$.fragment,O),j(o.$$.fragment,O),j(c.$$.fragment,O),j(p.$$.fragment,O),j(h.$$.fragment,O),j(v.$$.fragment,O),j(b.$$.fragment,O),I=!1},d(O){O&&m(e),ie(t),ie(l),ie(o),ie(c),ie(p),ie(h),ie(v),ie(b),V&&V.d(),T=!1,C()}}}function pS(n){n.stopPropagation()}function Lu(n){return n>0?`(${n})`:""}const dS=n=>n.stopPropagation();function mS(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v,g,b;J(n,qs,me=>t(36,a=me)),J(n,Bs,me=>t(20,c=me)),J(n,_l,me=>t(21,f=me)),J(n,Ai,me=>t(22,p=me)),J(n,mi,me=>t(23,d=me)),J(n,$s,me=>t(2,h=me)),J(n,dt,me=>t(13,_=me)),J(n,E1,me=>t(14,v=me)),J(n,Qi,me=>t(15,g=me)),J(n,yr,me=>t(16,b=me));let{tabType:P=Bt.OPEN_POSITIONS}=e;const I=xi.isMock();let T,C,V=0,O="",w=7,D=w;Lt(()=>{var me;if(!T||!C||!window.ResizeObserver)return;const oe=new ResizeObserver(L);oe.observe(T);const ke=op.parseUrl(a);ke.isStrategy&&(t(0,P=Bt.TRADING_BOTS),Po.next((me={contract_martin:"Martingale",contract_grid:"Grid",contract_signal:"Signal"}[ke.type])!==null&&me!==void 0?me:"Grid"));const Le=sl.pipe(zd()).subscribe(ge=>{ge!=="Home"&&(t(0,P=Bt.TRADING_BOTS),Po.next(ge))});return function(){oe.unobserve(T),oe.disconnect(),Le.unsubscribe()}});async function L(){if(!(!T||!C))for(t(8,D=w);D>0&&(await Wl(),!(C.clientWidth-T.clientWidth<=20));)t(8,D--,D)}function $(me){const oe=me.target.checked;mi.next(oe)}function N(me){t(5,V=me.target.scrollTop)}function z(me){return me.reduce((oe,ke)=>oe.plus((ke.unrealisedPnlByMarkPriceFiat||"0").replaceAll(/,/g,"")),Re(0)).toNumber()}const H=()=>t(0,P=Bt.OPEN_POSITIONS),R=()=>t(0,P=Bt.CLOSED_POSITIONS),F=()=>t(0,P=Bt.ACTIVE_ORDERS),U=()=>t(0,P=Bt.CONDITIONAL_ORDERS),K=()=>t(0,P=Bt.FILLS),Y=()=>t(0,P=Bt.ORDER_HISTORY),X=()=>t(0,P=Bt.TRADING_BOTS);function ee(me){P=me,t(0,P)}function Z(me){De[me?"unshift":"push"](()=>{C=me,t(4,C)})}function ue(me){De[me?"unshift":"push"](()=>{T=me,t(3,T)})}function ce(me){i=me,t(12,i),t(23,d)}function pe(me){O=me,t(6,O)}return n.$$set=me=>{"tabType"in me&&t(0,P=me.tabType)},n.$$.update=()=>{n.$$.dirty[0]&4&&t(7,w=h?7:6),n.$$.dirty[0]&8388608&&t(12,i=d),n.$$.dirty[0]&4194304&&t(1,r=(p||[]).filter(me=>me.size>0)),n.$$.dirty[0]&2&&t(11,l=z(r)),n.$$.dirty[0]&2097152&&t(10,s=Lu(f.length)),n.$$.dirty[0]&1048576&&t(9,o=Lu(c.length))},[P,r,h,T,C,V,O,w,D,o,s,l,i,_,v,g,b,I,$,N,c,f,p,d,H,R,F,U,K,Y,X,ee,Z,ue,ce,pe]}let hS=class extends tt{constructor(e){super(),nt(this,e,mS,uS,et,{tabType:0},null,[-1,-1])}};function _S(n){let e,t;return e=new Q1({props:{coin:n[0].settleCurrency,defaultTransferAccountType:Ir.ContractsAccount}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p(i,r){const l={};r&1&&(l.coin=i[0].settleCurrency),e.$set(l)},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function gS(n){let e,t;return e=new Ob({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function vS(n){let e,t,i;var r=n[2][n[5].id];function l(s){return{}}return r&&(e=go(r,l())),{c(){e&&te(e.$$.fragment),t=ut()},l(s){e&&re(e.$$.fragment,s),t=ut()},m(s,o){e&&ne(e,s,o),G(s,t,o),i=!0},p(s,o){if(o&32&&r!==(r=s[2][s[5].id])){if(e){ot();const a=e;j(a.$$.fragment,1,0,()=>{ie(a,1)}),at()}r?(e=go(r,l()),te(e.$$.fragment),Q(e.$$.fragment,1),ne(e,t.parentNode,t)):e=null}},i(s){i||(e&&Q(e.$$.fragment,s),i=!0)},o(s){e&&j(e.$$.fragment,s),i=!1},d(s){s&&m(t),e&&ie(e,s)}}}function bS(n){let e,t,i,r,l,s,o,a=!n[3]&&_S(n),c=!n[3]&&gS();return r=new mb({}),s=new z1({props:{placeOrderSide:n[1],$$slots:{default:[vS,({item:f})=>({5:f}),({item:f})=>f?32:0]},$$scope:{ctx:n}}}),{c(){e=y("div"),a&&a.c(),t=q(),c&&c.c(),i=q(),te(r.$$.fragment),l=q(),te(s.$$.fragment),this.h()},l(f){e=k(f,"DIV",{class:!0,style:!0});var p=S(e);a&&a.l(p),t=M(p),c&&c.l(p),i=M(p),re(r.$$.fragment,p),l=M(p),re(s.$$.fragment,p),p.forEach(m),this.h()},h(){E(e,"class","f1"),Jt(e,"overflow","hidden")},m(f,p){G(f,e,p),a&&a.m(e,null),u(e,t),c&&c.m(e,null),u(e,i),ne(r,e,null),u(e,l),ne(s,e,null),o=!0},p(f,[p]){f[3]||a.p(f,p);const d={};p&2&&(d.placeOrderSide=f[1]),p&96&&(d.$$scope={dirty:p,ctx:f}),s.$set(d)},i(f){o||(Q(a),Q(c),Q(r.$$.fragment,f),Q(s.$$.fragment,f),o=!0)},o(f){j(a),j(c),j(r.$$.fragment,f),j(s.$$.fragment,f),o=!1},d(f){f&&m(e),a&&a.d(),c&&c.d(),ie(r),ie(s)}}}function ES(n,e,t){let i,r,l;J(n,Xt,a=>t(4,r=a)),J(n,ml,a=>t(1,l=a));const s={ChartView:By,BookTradesView:fE,PositionOrderTabView:hS},o=xi.isMock();return n.$$.update=()=>{n.$$.dirty&16&&t(0,i=r)},[i,l,s,o,r]}let yS=class extends tt{constructor(e){super(),nt(this,e,ES,bS,et,{})}};const Pd=new jr,Sd=new jr,ro=new jr;let kS=0;const PS=DS(Sd,ro),Cd=Gl(cm,fm,Ps).pipe(qn(n=>xn.getValue().orderNotify||n.type==="error"),Cn(VS),Qd()),SS=Cd.pipe(Cn(n=>function(e){return[...e,n]})),CS=Cd.pipe(tp(2e3),xu(PS),qn(([n,e])=>e.indexOf(n.id)<0),Cn(([n])=>n.id)),TS=ro.pipe(tp(1e3)),wS=Gl(CS,TS,Pd).pipe(Cn(n=>function(e){return e.filter(t=>t.id!==n)})),IS=Gl(SS,wS).pipe(np((n,e)=>e(n),[]),Fr([]));function DS(n,e){return Gl(n.pipe(Cn(t=>function(i){return i.indexOf(t)<0?[...i,t]:i})),e.pipe(Cn(t=>function(i){return i.filter(r=>r!==t)}))).pipe(np((t,i)=>i(t),[]),Fr([]))}function VS(n){const e=kS++,{type:t="info",title:i,content:r}=n;return{id:e,type:t,title:i,content:r}}function $u(n,e,t){const i=n.slice();return i[6]=e[t],i}function OS(n){let e,t;return{c(){e=y("i"),t=B(""),this.h()},l(i){e=k(i,"I",{class:!0});var r=S(e);t=A(r,""),r.forEach(m),this.h()},h(){E(e,"class","iconfont type BLUE H-kuwbno")},m(i,r){G(i,e,r),u(e,t)},d(i){i&&m(e)}}}function LS(n){let e,t;return{c(){e=y("i"),t=B(""),this.h()},l(i){e=k(i,"I",{class:!0,style:!0});var r=S(e);t=A(r,""),r.forEach(m),this.h()},h(){E(e,"class","iconfont type H-kuwbno"),Jt(e,"color","#ff6666")},m(i,r){G(i,e,r),u(e,t)},d(i){i&&m(e)}}}function $S(n){let e,t;return{c(){e=y("i"),t=B(""),this.h()},l(i){e=k(i,"I",{class:!0,style:!0});var r=S(e);t=A(r,""),r.forEach(m),this.h()},h(){E(e,"class","iconfont type H-kuwbno"),Jt(e,"color","#ebaf1a")},m(i,r){G(i,e,r),u(e,t)},d(i){i&&m(e)}}}function qS(n){let e,t;return{c(){e=y("i"),t=B(""),this.h()},l(i){e=k(i,"I",{class:!0});var r=S(e);t=A(r,""),r.forEach(m),this.h()},h(){E(e,"class","iconfont type BLUE H-kuwbno")},m(i,r){G(i,e,r),u(e,t)},d(i){i&&m(e)}}}function MS(n){let e,t;return{c(){e=y("i"),t=B(""),this.h()},l(i){e=k(i,"I",{class:!0});var r=S(e);t=A(r,""),r.forEach(m),this.h()},h(){E(e,"class","iconfont type BLUE H-kuwbno")},m(i,r){G(i,e,r),u(e,t)},d(i){i&&m(e)}}}function qu(n){let e,t=n[6].content+"",i;return{c(){e=y("div"),i=B(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","content lh22 f14 T3 H-kuwbno")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&2&&t!==(t=r[6].content+"")&&W(i,t)},d(r){r&&m(e)}}}function Mu(n){let e,t,i,r;function l(o){n[5](o)}let s={class:"df aic jcfe lh24 f14 T2",$$slots:{default:[NS]},$$scope:{ctx:n}};return n[0]!==void 0&&(s.checked=n[0]),t=new Pn({props:s}),De.push(()=>qe(t,"checked",l)),t.$on("change",n[4]),{c(){e=y("div"),te(t.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=S(e);re(t.$$.fragment,a),a.forEach(m),this.h()},h(){E(e,"class","tr")},m(o,a){G(o,e,a),ne(t,e,null),r=!0},p(o,a){const c={};a&517&&(c.$$scope={dirty:a,ctx:o}),!i&&a&1&&(i=!0,c.checked=o[0],Me(()=>i=!1)),t.$set(c)},i(o){r||(Q(t.$$.fragment,o),r=!0)},o(o){j(t.$$.fragment,o),r=!1},d(o){o&&m(e),ie(t)}}}function NS(n){let e,t=n[2](He.DontShowAgain)+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ml4 T3 H-kuwbno"),Te(e,"checked",n[0])},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&4&&t!==(t=r[2](He.DontShowAgain)+"")&&W(i,t),l&1&&Te(e,"checked",r[0])},d(r){r&&m(e)}}}function Nu(n,e){let t,i,r,l,s,o,a=e[6].title+"",c,f,p,d,h,_,v,g,b,P,I,T,C;function V($,N){return $[6].type==="info"?MS:$[6].type==="success"?qS:$[6].type==="warning"?$S:$[6].type==="error"?LS:OS}let O=V(e),w=O(e),D=e[6].content&&qu(e),L=e[6].type!=="error"&&Mu(e);return{key:n,first:null,c(){t=y("div"),i=y("div"),w.c(),r=q(),l=y("div"),s=y("div"),o=y("div"),c=B(a),f=q(),p=y("div"),d=y("i"),h=B(""),_=q(),D&&D.c(),v=q(),L&&L.c(),g=q(),this.h()},l($){t=k($,"DIV",{class:!0});var N=S(t);i=k(N,"DIV",{class:!0});var z=S(i);w.l(z),r=M(z),l=k(z,"DIV",{class:!0});var H=S(l);s=k(H,"DIV",{class:!0});var R=S(s);o=k(R,"DIV",{class:!0});var F=S(o);c=A(F,a),F.forEach(m),f=M(R),p=k(R,"DIV",{class:!0});var U=S(p);d=k(U,"I",{class:!0});var K=S(d);h=A(K,""),K.forEach(m),U.forEach(m),R.forEach(m),_=M(H),D&&D.l(H),H.forEach(m),z.forEach(m),v=M(N),L&&L.l(N),g=M(N),N.forEach(m),this.h()},h(){E(o,"class","title lh24 f1 f16 T2 H-kuwbno"),E(d,"class","iconfont T3"),E(p,"class","close cp H-kuwbno"),E(s,"class","df"),E(l,"class","f1"),E(i,"class","df"),E(t,"class","item p16 B3 H-kuwbno"),this.first=t},m($,N){G($,t,N),u(t,i),w.m(i,null),u(i,r),u(i,l),u(l,s),u(s,o),u(o,c),u(s,f),u(s,p),u(p,d),u(d,h),u(l,_),D&&D.m(l,null),u(t,v),L&&L.m(t,null),u(t,g),I=!0,T||(C=[We(p,"click",function(){Tt(Hu(e[6].id))&&Hu(e[6].id).apply(this,arguments)}),We(t,"mouseenter",function(){Tt(Bu(e[6].id))&&Bu(e[6].id).apply(this,arguments)}),We(t,"mouseleave",function(){Tt(Au(e[6].id))&&Au(e[6].id).apply(this,arguments)})],T=!0)},p($,N){e=$,O!==(O=V(e))&&(w.d(1),w=O(e),w&&(w.c(),w.m(i,r))),(!I||N&2)&&a!==(a=e[6].title+"")&&W(c,a),e[6].content?D?D.p(e,N):(D=qu(e),D.c(),D.m(l,null)):D&&(D.d(1),D=null),e[6].type!=="error"?L?(L.p(e,N),N&2&&Q(L,1)):(L=Mu(e),L.c(),Q(L,1),L.m(t,g)):L&&(ot(),j(L,1,1,()=>{L=null}),at())},i($){I||(Q(L),jn(()=>{I&&(P&&P.end(1),b=Ts(t,Yu,e[3]),b.start())}),I=!0)},o($){j(L),b&&b.invalidate(),P=ws(t,Ol,{}),I=!1},d($){$&&m(t),w.d(),D&&D.d(),L&&L.d(),$&&P&&P.end(),T=!1,jt(C)}}}function HS(n){let e,t=[],i=new Map,r,l=n[1];const s=o=>o[6].id;for(let o=0;o<l.length;o+=1){let a=$u(n,l,o),c=s(a);i.set(c,t[o]=Nu(c,a))}return{c(){e=y("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=k(o,"DIV",{class:!0});var a=S(e);for(let c=0;c<t.length;c+=1)t[c].l(a);a.forEach(m),this.h()},h(){E(e,"class","wrap df fdc H-kuwbno")},m(o,a){G(o,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,[a]){a&23&&(l=o[1],ot(),t=Si(t,a,s,1,o,l,i,e,lr,Nu,null,$u),at())},i(o){if(!r){for(let a=0;a<l.length;a+=1)Q(t[a]);r=!0}},o(o){for(let a=0;a<t.length;a+=1)j(t[a]);r=!1},d(o){o&&m(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Hu(n){return function(){Pd.next(n)}}function Bu(n){return function(){Sd.next(n)}}function Au(n){return function(){ro.next(n)}}function BS(n,e,t){let i,r;J(n,IS,c=>t(1,i=c)),J(n,dt,c=>t(2,r=c));const l={x:384,duration:300};let s=!1;function o(c){ar("orderNotify",!c.target.checked).then()}function a(c){s=c,t(0,s)}return[s,i,r,l,o,a]}let AS=class extends tt{constructor(e){super(),nt(this,e,BS,HS,et,{})}};const Td=new Jn([]),wd=new Jn(0),zu="CONTRACT_ANNOUNCEMENT",Qu={read(){return JSON.parse(localStorage.getItem(zu))||{lastTime:0}},checkLastTime(){const n=this.read();return new Date().valueOf()-n.lastTime>24*3600*1e3},updateLastTime(){const n=this.read();localStorage.setItem(zu,JSON.stringify({...n,lastTime:new Date().valueOf()}))}};gr([dp,yr]).pipe(qn(([,n])=>n!=="Init"),Rd(([n,e])=>zS(up.getLanguageKey(n),e)),qn(Boolean)).subscribe(({rows:n,total:e})=>{Td.next(n),wd.next(e)});async function zS(n,e){let t={itemKey:"contract_announcement",lang:n};e==="Logout"&&(t.device=y1());const{data:i,error:r}=await(e==="Login"?Vo.contentViewLogin(t):Vo.contentVieLogout(t));return i||(r&&Pt.send("toast","error",r),null)}function Ru(n,e,t){const i=n.slice();return i[21]=e[t],i[23]=t,i}const QS=n=>({item:n&32}),Fu=n=>({item:n[21],index:n[23]});function RS(n){let e,t=n[21]+"",i,r;return{c(){e=y("span"),i=B(t),r=q()},l(l){e=k(l,"SPAN",{});var s=S(e);i=A(s,t),s.forEach(m),r=M(l)},m(l,s){G(l,e,s),u(e,i),G(l,r,s)},p(l,s){s&32&&t!==(t=l[21]+"")&&W(i,t)},d(l){l&&m(e),l&&m(r)}}}function ju(n){let e;const t=n[14].item,i=Br(t,n,n[13],Fu),r=i||RS(n);return{c(){r&&r.c()},l(l){r&&r.l(l)},m(l,s){r&&r.m(l,s),e=!0},p(l,s){i?i.p&&(!e||s&8224)&&Ar(i,t,l,l[13],e?Qr(t,l[13],s,QS):zr(l[13]),Fu):r&&r.p&&(!e||s&32)&&r.p(l,e?s:-1)},i(l){e||(Q(r,l),e=!0)},o(l){j(r,l),e=!1},d(l){r&&r.d(l)}}}function FS(n){let e,t,i,r,l,s,o,a=n[5],c=[];for(let p=0;p<a.length;p+=1)c[p]=ju(Ru(n,a,p));const f=p=>j(c[p],1,1,()=>{c[p]=null});return{c(){e=y("div"),t=y("div");for(let p=0;p<c.length;p+=1)c[p].c();this.h()},l(p){e=k(p,"DIV",{class:!0,style:!0});var d=S(e);t=k(d,"DIV",{class:!0,style:!0});var h=S(t);for(let _=0;_<c.length;_+=1)c[_].l(h);h.forEach(m),d.forEach(m),this.h()},h(){E(t,"class","source"),E(t,"style",i=`${n[4]}transform: translateY(-${(n[2]-1)*n[1]}px);${n[3]}`),E(e,"class",r="wrap "+n[0]+" H-1sognfx"),E(e,"style",n[4])},m(p,d){G(p,e,d),u(e,t);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(t,null);l=!0,s||(o=[We(e,"mouseenter",n[6]),We(e,"mouseleave",n[7])],s=!0)},p(p,[d]){if(d&8224){a=p[5];let h;for(h=0;h<a.length;h+=1){const _=Ru(p,a,h);c[h]?(c[h].p(_,d),Q(c[h],1)):(c[h]=ju(_),c[h].c(),Q(c[h],1),c[h].m(t,null))}for(ot(),h=a.length;h<c.length;h+=1)f(h);at()}(!l||d&30&&i!==(i=`${p[4]}transform: translateY(-${(p[2]-1)*p[1]}px);${p[3]}`))&&E(t,"style",i),(!l||d&1&&r!==(r="wrap "+p[0]+" H-1sognfx"))&&E(e,"class",r),(!l||d&16)&&E(e,"style",p[4])},i(p){if(!l){for(let d=0;d<a.length;d+=1)Q(c[d]);l=!0}},o(p){c=c.filter(Boolean);for(let d=0;d<c.length;d+=1)j(c[d]);l=!1},d(p){p&&m(e),wn(c,p),s=!1,jt(o)}}}function jS(n,e,t){let i,r,l,s,{$$slots:o={},$$scope:a}=e,{class:c=""}=e,{itemSize:f=36}=e,{transitionDuration:p=300}=e,{autoTime:d=5e3}=e,{source:h=[]}=e,_=1,v=!1,g=!1,b=null;Lt(()=>{P(),p>d&&(console.warn("'autoTime' needs to be greater than 'transitionDuration'"),t(8,d=p+100))});function P(){i<=1||(b&&window.clearTimeout(b),b=setTimeout(()=>{t(2,_=_+1)},d))}function I(){setTimeout(async()=>{t(11,v=!1),g&&(await Wl(),t(2,_=_-i))},p)}async function T(w){if(g){g=!1;return}t(11,v=!0),w>i&&(g=!0),P()}function C(){t(11,v=!1),window.clearTimeout(b)}function V(){C()}function O(){P()}return n.$$set=w=>{"class"in w&&t(0,c=w.class),"itemSize"in w&&t(1,f=w.itemSize),"transitionDuration"in w&&t(9,p=w.transitionDuration),"autoTime"in w&&t(8,d=w.autoTime),"source"in w&&t(10,h=w.source),"$$scope"in w&&t(13,a=w.$$scope)},n.$$.update=()=>{n.$$.dirty&1024&&t(12,i=h.length),n.$$.dirty&5120&&t(5,r=i>0?[...h,h[0]]:[]),n.$$.dirty&2&&t(4,l=`height: ${f}px;`),n.$$.dirty&4&&T(_),n.$$.dirty&2048&&v&&I(),n.$$.dirty&2560&&t(3,s=v?`transition: all ${p}ms ease-in;`:"")},[c,f,_,s,l,r,V,O,d,p,h,v,i,a,o]}let Id=class extends tt{constructor(e){super(),nt(this,e,jS,FS,et,{class:0,itemSize:1,transitionDuration:9,autoTime:8,source:10})}};function Uu(n){let e,t,i,r,l,s,o,a,c,f,p;return l=new Id({props:{class:"f1 ml8 lh18 f14",itemSize:36,source:n[2],$$slots:{item:[GS,({item:d})=>({6:d}),({item:d})=>d?64:0]},$$scope:{ctx:n}}}),{c(){e=y("div"),t=y("img"),r=q(),te(l.$$.fragment),s=q(),o=y("i"),a=B(""),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=S(e);t=k(h,"IMG",{class:!0,width:!0,height:!0,src:!0,alt:!0}),r=M(h),re(l.$$.fragment,h),s=M(h),o=k(h,"I",{class:!0});var _=S(o);a=A(_,""),_.forEach(m),h.forEach(m),this.h()},h(){E(t,"class","db"),E(t,"width","18"),E(t,"height","18"),hn(t.src,i=n[3])||E(t,"src",i),E(t,"alt","announcement"),E(o,"class","close iconfont ml8 f16 cp H-1jbp4lk"),E(e,"class","wrap df aic jcsb ooo ph16 B1 H-1jbp4lk")},m(d,h){G(d,e,h),u(e,t),u(e,r),ne(l,e,null),u(e,s),u(e,o),u(o,a),c=!0,f||(p=We(o,"click",n[4]),f=!0)},p(d,h){const _={};h&4&&(_.source=d[2]),h&192&&(_.$$scope={dirty:h,ctx:d}),l.$set(_)},i(d){c||(Q(l.$$.fragment,d),c=!0)},o(d){j(l.$$.fragment,d),c=!1},d(d){d&&m(e),ie(l),f=!1,p()}}}function US(n){let e,t=n[6].detail.title+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ooo mr8 TW")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&64&&t!==(t=r[6].detail.title+"")&&W(i,t)},d(r){r&&m(e)}}}function WS(n){let e,t=n[6].detail.title+"",i,r,l,s,o,a,c;return{c(){e=y("a"),i=B(t),l=q(),s=y("span"),o=B(">"),this.h()},l(f){e=k(f,"A",{class:!0,href:!0});var p=S(e);i=A(p,t),p.forEach(m),l=M(f),s=k(f,"SPAN",{class:!0});var d=S(s);o=A(d,">"),d.forEach(m),this.h()},h(){E(e,"class","title ooo mr8 H-1jbp4lk"),E(e,"href",r=n[6].detail.webLink),E(s,"class","arrow H-1jbp4lk")},m(f,p){G(f,e,p),u(e,i),G(f,l,p),G(f,s,p),u(s,o),a||(c=We(e,"click",function(){Tt(n[5](n[6].detail.title))&&n[5](n[6].detail.title).apply(this,arguments)}),a=!0)},p(f,p){n=f,p&64&&t!==(t=n[6].detail.title+"")&&W(i,t),p&64&&r!==(r=n[6].detail.webLink)&&E(e,"href",r)},d(f){f&&m(e),f&&m(l),f&&m(s),a=!1,c()}}}function GS(n){let e;function t(l,s){return l[6].detail.webLink?WS:US}let i=t(n),r=i(n);return{c(){e=y("div"),r.c(),this.h()},l(l){e=k(l,"DIV",{class:!0,slot:!0});var s=S(e);r.l(s),s.forEach(m),this.h()},h(){E(e,"class","item df aic H-1jbp4lk"),E(e,"slot","item")},m(l,s){G(l,e,s),r.m(e,null)},p(l,s){i===(i=t(l))&&r?r.p(l,s):(r.d(1),r=i(l),r&&(r.c(),r.m(e,null)))},d(l){l&&m(e),r.d()}}}function KS(n){let e,t,i=n[0]&&n[1]>0&&Uu(n);return{c(){i&&i.c(),e=ut()},l(r){i&&i.l(r),e=ut()},m(r,l){i&&i.m(r,l),G(r,e,l),t=!0},p(r,[l]){r[0]&&r[1]>0?i?(i.p(r,l),l&3&&Q(i,1)):(i=Uu(r),i.c(),Q(i,1),i.m(e.parentNode,e)):i&&(ot(),j(i,1,1,()=>{i=null}),at())},i(r){t||(Q(i),t=!0)},o(r){j(i),t=!1},d(r){i&&i.d(r),r&&m(e)}}}function XS(n,e,t){let i,r;J(n,wd,c=>t(1,i=c)),J(n,Td,c=>t(2,r=c));const l=hl.STATIC_URL+"/pubimg/9a036dfa2fcf85fdeade95aa85898ae2734b217a48c5cec41d6e53b7d8f9bb80.png";let s=!1;Lt(()=>{t(0,s=Qu.checkLastTime())});function o(){Qu.updateLastTime(),t(0,s=!1)}function a(c){return function(){pi.track("web_click",{$screen_name:"Trade/Contract",$element_content:"announcement_"+c})}}return[s,i,r,l,o,a]}let YS=class extends tt{constructor(e){super(),nt(this,e,XS,KS,et,{})}};function JS(n){let e,t=n[5].detail.title+"",i;return{c(){e=y("span"),i=B(t),this.h()},l(r){e=k(r,"SPAN",{class:!0});var l=S(e);i=A(l,t),l.forEach(m),this.h()},h(){E(e,"class","ooo mr8 TW")},m(r,l){G(r,e,l),u(e,i)},p(r,l){l&32&&t!==(t=r[5].detail.title+"")&&W(i,t)},d(r){r&&m(e)}}}function ZS(n){let e,t=n[5].detail.title+"",i,r,l,s,o,a,c;return{c(){e=y("a"),i=B(t),l=q(),s=y("span"),o=B(">"),this.h()},l(f){e=k(f,"A",{class:!0,href:!0});var p=S(e);i=A(p,t),p.forEach(m),l=M(f),s=k(f,"SPAN",{class:!0});var d=S(s);o=A(d,">"),d.forEach(m),this.h()},h(){E(e,"class","title ooo mr8 H-yyu7ek"),E(e,"href",r=n[5].detail.webLink),E(s,"class","arrow H-yyu7ek")},m(f,p){G(f,e,p),u(e,i),G(f,l,p),G(f,s,p),u(s,o),a||(c=We(e,"click",function(){Tt(n[2](n[5].detail.title))&&n[2](n[5].detail.title).apply(this,arguments)}),a=!0)},p(f,p){n=f,p&32&&t!==(t=n[5].detail.title+"")&&W(i,t),p&32&&r!==(r=n[5].detail.webLink)&&E(e,"href",r)},d(f){f&&m(e),f&&m(l),f&&m(s),a=!1,c()}}}function xS(n){let e;function t(l,s){return l[5].detail.webLink?ZS:JS}let i=t(n),r=i(n);return{c(){e=y("div"),r.c(),this.h()},l(l){e=k(l,"DIV",{class:!0,slot:!0});var s=S(e);r.l(s),s.forEach(m),this.h()},h(){E(e,"class","item df aic H-yyu7ek"),E(e,"slot","item")},m(l,s){G(l,e,s),r.m(e,null)},p(l,s){i===(i=t(l))&&r?r.p(l,s):(r.d(1),r=i(l),r&&(r.c(),r.m(e,null)))},d(l){l&&m(e),r.d()}}}function eC(n){let e,t,i,r,l,s;return l=new Id({props:{class:"f1 ml8 lh18 f14",itemSize:36,source:n[0],$$slots:{item:[xS,({item:o})=>({5:o}),({item:o})=>o?32:0]},$$scope:{ctx:n}}}),{c(){e=y("div"),t=y("img"),r=q(),te(l.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=S(e);t=k(a,"IMG",{class:!0,width:!0,height:!0,src:!0,alt:!0}),r=M(a),re(l.$$.fragment,a),a.forEach(m),this.h()},h(){E(t,"class","db"),E(t,"width","18"),E(t,"height","18"),hn(t.src,i=n[1])||E(t,"src",i),E(t,"alt","announcement"),E(e,"class","wrap df aic jcsb ooo ph16 B1 H-yyu7ek")},m(o,a){G(o,e,a),u(e,t),u(e,r),ne(l,e,null),s=!0},p(o,[a]){const c={};a&1&&(c.source=o[0]),a&96&&(c.$$scope={dirty:a,ctx:o}),l.$set(c)},i(o){s||(Q(l.$$.fragment,o),s=!0)},o(o){j(l.$$.fragment,o),s=!1},d(o){o&&m(e),ie(l)}}}function tC(n,e,t){let i;J(n,dt,a=>t(3,i=a));const r=hl.IMG_URL+"/v1/bea44072/notify.png";let l=[];function s(a){t(0,l=[{detail:{title:a(Vt.NoteThat)}}])}function o(a){return function(){pi.track("web_click",{$screen_name:"Trade/Contract",$element_content:"announcement_"+a})}}return n.$$.update=()=>{n.$$.dirty&8&&s(i)},[l,r,o,i]}let nC=class extends tt{constructor(e){super(),nt(this,e,tC,eC,et,{})}};function iC(n){let e,t,i,r;const l=[{class:"amount f1 f12 lh20"},{operation:!1},{placeholder:n[3](zt.InputQuantity)},n[13],{height:"20"}];function s(c){n[34](c)}function o(c){n[35](c)}let a={};for(let c=0;c<l.length;c+=1)a=pn(a,l[c]);return n[2]!==void 0&&(a.valueEx=n[2]),n[11]!==void 0&&(a.input=n[11]),e=new Pr({props:a}),De.push(()=>qe(e,"valueEx",s)),De.push(()=>qe(e,"input",o)),{c(){te(e.$$.fragment)},l(c){re(e.$$.fragment,c)},m(c,f){ne(e,c,f),r=!0},p(c,f){const p=f[0]&8200?dn(l,[l[0],l[1],f[0]&8&&{placeholder:c[3](zt.InputQuantity)},f[0]&8192&&mn(c[13]),l[4]]):{};!t&&f[0]&4&&(t=!0,p.valueEx=c[2],Me(()=>t=!1)),!i&&f[0]&2048&&(i=!0,p.input=c[11],Me(()=>i=!1)),e.$set(p)},i(c){r||(Q(e.$$.fragment,c),r=!0)},o(c){j(e.$$.fragment,c),r=!1},d(c){ie(e,c)}}}function rC(n){let e,t,i,r,l;return{c(){e=y("div"),t=B(n[0]),i=B("%"),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=S(e);t=A(o,n[0]),i=A(o,"%"),o.forEach(m),this.h()},h(){E(e,"class","tc lh22 f12 cp")},m(s,o){G(s,e,o),u(e,t),u(e,i),r||(l=We(e,"click",n[17]),r=!0)},p(s,o){o[0]&1&&W(t,s[0])},i:rt,o:rt,d(s){s&&m(e),r=!1,l()}}}function lC(n){let e,t,i,r,l,s,o,a,c,f=n[3](zt.MarketBuy)+"",p,d,h,_,v,g,b,P=n[3](zt.Amount)+"",I,T,C,V,O,w,D,L=n[3](zt.MarketSell)+"",$,N,z,H,R,F,U,K,Y,X,ee,Z=n[14].buy+"",ue,ce,pe,me,oe,ke,Le=n[14].sell+"",ge,ae,x,le,fe;const Se=[rC,iC],Pe=[];function Ce(ve,de){return ve[1]?0:1}C=Ce(n),V=Pe[C]=Se[C](n);function Ee(ve){n[37](ve)}let Ie={options:n[15]};return n[0]!==void 0&&(Ie.percent=n[0]),pe=new vp({props:Ie}),De.push(()=>qe(pe,"percent",Ee)),pe.$on("change",n[38]),{c(){e=y("div"),t=y("div"),i=y("div"),r=y("i"),l=B(""),s=q(),o=y("div"),a=y("div"),c=y("div"),p=B(f),d=q(),h=y("div"),_=B(n[9]),v=q(),g=y("div"),b=y("div"),I=B(P),T=q(),V.c(),O=q(),w=y("div"),D=y("div"),$=B(L),N=q(),z=y("div"),H=B(n[8]),R=q(),F=y("div"),U=y("i"),K=B(""),Y=q(),X=y("div"),ee=y("div"),ue=B(Z),ce=q(),te(pe.$$.fragment),oe=q(),ke=y("div"),ge=B(Le),this.h()},l(ve){e=k(ve,"DIV",{class:!0});var de=S(e);t=k(de,"DIV",{class:!0});var se=S(t);i=k(se,"DIV",{class:!0});var he=S(i);r=k(he,"I",{class:!0});var _e=S(r);l=A(_e,""),_e.forEach(m),he.forEach(m),s=M(se),o=k(se,"DIV",{class:!0});var be=S(o);a=k(be,"DIV",{class:!0});var Ve=S(a);c=k(Ve,"DIV",{});var Be=S(c);p=A(Be,f),Be.forEach(m),d=M(Ve),h=k(Ve,"DIV",{class:!0});var Fe=S(h);_=A(Fe,n[9]),Fe.forEach(m),Ve.forEach(m),v=M(be),g=k(be,"DIV",{class:!0});var $e=S(g);b=k($e,"DIV",{class:!0});var Ae=S(b);I=A(Ae,P),Ae.forEach(m),T=M($e),V.l($e),$e.forEach(m),O=M(be),w=k(be,"DIV",{class:!0});var Ne=S(w);D=k(Ne,"DIV",{});var Ge=S(D);$=A(Ge,L),Ge.forEach(m),N=M(Ne),z=k(Ne,"DIV",{class:!0});var Xe=S(z);H=A(Xe,n[8]),Xe.forEach(m),Ne.forEach(m),be.forEach(m),R=M(se),F=k(se,"DIV",{class:!0});var ye=S(F);U=k(ye,"I",{class:!0});var Ke=S(U);K=A(Ke,""),Ke.forEach(m),ye.forEach(m),se.forEach(m),Y=M(de),X=k(de,"DIV",{class:!0});var Qe=S(X);ee=k(Qe,"DIV",{class:!0});var ze=S(ee);ue=A(ze,Z),ze.forEach(m),ce=M(Qe),re(pe.$$.fragment,Qe),oe=M(Qe),ke=k(Qe,"DIV",{class:!0});var Ue=S(ke);ge=A(Ue,Le),Ue.forEach(m),Qe.forEach(m),de.forEach(m),this.h()},h(){E(r,"class","iconfont f12"),E(i,"class","drag-btn df aic jcc H-v8204l"),E(h,"class","mt4"),E(a,"class","btn buy-btn df fdc jcc tc ph8 H-v8204l"),Te(a,"pen",n[12]),E(b,"class","title f12 tc"),E(g,"class","main-box f1 df fdc H-v8204l"),E(z,"class","mt4"),E(w,"class","btn sell-btn df fdc jcc tc ph8 H-v8204l"),Te(w,"pen",n[12]),E(o,"class","main df aic f1 H-v8204l"),E(U,"class","iconfont f12"),E(F,"class","close cp tc H-v8204l"),E(t,"class","container df aic br4 f1 H-v8204l"),E(ee,"class","buy mr8"),E(ke,"class","sell ml8"),E(X,"class","percentage-box df aic jcc f12 B2 tc H-v8204l"),Te(X,"dn",!n[10]),E(e,"class","wrap pa usn T2 H-v8204l"),jn(()=>n[41].call(e))},m(ve,de){G(ve,e,de),u(e,t),u(t,i),u(i,r),u(r,l),n[33](i),u(t,s),u(t,o),u(o,a),u(a,c),u(c,p),u(a,d),u(a,h),u(h,_),u(o,v),u(o,g),u(g,b),u(b,I),u(g,T),Pe[C].m(g,null),u(o,O),u(o,w),u(w,D),u(D,$),u(w,N),u(w,z),u(z,H),u(t,R),u(t,F),u(F,U),u(U,K),u(e,Y),u(e,X),u(X,ee),u(ee,ue),u(X,ce),ne(pe,X,null),u(X,oe),u(X,ke),u(ke,ge),n[40](e),ae=hi(e,n[41].bind(e)),x=!0,le||(fe=[We(a,"click",n[18]("Buy")),We(g,"mouseenter",n[36]),We(w,"click",n[18]("Sell")),We(F,"click",n[16]),We(X,"mouseleave",n[39]),We(e,"mouseleave",n[42])],le=!0)},p(ve,de){(!x||de[0]&8)&&f!==(f=ve[3](zt.MarketBuy)+"")&&W(p,f),(!x||de[0]&512)&&W(_,ve[9]),(!x||de[0]&4096)&&Te(a,"pen",ve[12]),(!x||de[0]&8)&&P!==(P=ve[3](zt.Amount)+"")&&W(I,P);let se=C;C=Ce(ve),C===se?Pe[C].p(ve,de):(ot(),j(Pe[se],1,1,()=>{Pe[se]=null}),at(),V=Pe[C],V?V.p(ve,de):(V=Pe[C]=Se[C](ve),V.c()),Q(V,1),V.m(g,null)),(!x||de[0]&8)&&L!==(L=ve[3](zt.MarketSell)+"")&&W($,L),(!x||de[0]&256)&&W(H,ve[8]),(!x||de[0]&4096)&&Te(w,"pen",ve[12]),(!x||de[0]&16384)&&Z!==(Z=ve[14].buy+"")&&W(ue,Z);const he={};!me&&de[0]&1&&(me=!0,he.percent=ve[0],Me(()=>me=!1)),pe.$set(he),(!x||de[0]&16384)&&Le!==(Le=ve[14].sell+"")&&W(ge,Le),(!x||de[0]&1024)&&Te(X,"dn",!ve[10])},i(ve){x||(Q(V),Q(pe.$$.fragment,ve),x=!0)},o(ve){j(V),j(pe.$$.fragment,ve),x=!1},d(ve){ve&&m(e),n[33](null),Pe[C].d(),ie(pe),n[40](null),ae(),le=!1,jt(fe)}}}function sC(n,e,t){let i,r,l,s,o,a,c,f,p,d,h,_,v,g,b,P,I,T,C;J(n,Xt,_e=>t(23,o=_e)),J(n,_n,_e=>t(24,a=_e)),J(n,kn,_e=>t(25,c=_e)),J(n,dt,_e=>t(3,f=_e)),J(n,an,_e=>t(26,p=_e)),J(n,Sn,_e=>t(27,d=_e)),J(n,Hi,_e=>t(28,h=_e)),J(n,Vr,_e=>t(29,_=_e)),J(n,qs,_e=>t(30,v=_e)),J(n,cp,_e=>t(45,g=_e)),J(n,ml,_e=>t(46,b=_e)),J(n,rp,_e=>t(47,P=_e)),J(n,Bi,_e=>t(48,I=_e)),J(n,Ci,_e=>t(31,T=_e)),J(n,Er,_e=>t(32,C=_e));const V=Kt();let O=vn.readContractStorage().quickPlaceMarketOrder,w=!0,D=!1,L,$,N=0,z=0,H="0.00",R="0.00",F=[25,50,75,100],U=0,K=!1,Y=!1,X=null,ee=0,Z=!1,ue={},ce={buy:"-",sell:"-"};Lt(()=>{L&&t(5,$.onmousedown=function({button:_e,pageX:be,pageY:Ve,clientX:Be,clientY:Fe}){if(vs.next(!0),_e===2)return;const $e=(be||Be)+document.documentElement.scrollLeft,Ae=(Ve||Fe)+document.documentElement.scrollTop,Ne=$e-L.offsetLeft,Ge=Ae-L.offsetTop;document.onmousemove=function({pageX:Xe,pageY:ye,clientX:Ke,clientY:Qe}){D=!0;const ze=(Xe||Ke)+document.documentElement.scrollLeft,Ue=(ye||Qe)+document.documentElement.scrollTop,{x:st,y:Oe}=F1(ze,Ne,Ue,Ge,I,P,N,z);t(4,L.style.left=st+"px",L),t(4,L.style.top=Oe+"px",L),vn.updateContractStorage({quickPlaceMarketOrder:{x:st,y:Oe}})}},$),document.onmouseup=function(){document.onmousemove=null,vs.next(!1)}}),Lt(()=>{if(L){if(w){w=!1;const{x:_e,y:be}=R1(I,P,b,g);t(4,L.style.left=_e+"px",L),t(4,L.style.top=be+"px",L)}O&&!D&&(t(4,L.style.left=O.x+"px",L),t(4,L.style.top=O.y+"px",L),D=!1)}});function pe(_e,be){const{priceScale:Ve,pricePrecision:Be}=be,{ask1Ep:Fe,bid1Ep:$e}=_e;t(8,H=xe.delimit(xe.floor(Fe,Be,Ve))),t(9,R=xe.delimit(xe.floor($e,Be,Ve)))}function me(){Vr.next(Object.assign(Object.assign({},_),{quickPlaceMarketOrder:!1})),k1.next(),V("close")}async function oe(){t(0,U=0),t(1,Y=!1),t(10,K=!1),await Wl(),X&&X.focus()}function ke(_e,be,Ve,Be){const{type:Fe,qtyPrecision:$e,qtyScale:Ae,contPrecision:Ne,settleValuePrecision:Ge,valuePrecision:Xe,valueScale:ye}=Be;let Ke=0,Qe=0;Fe==="Perpetual"&&(Ke=be===we.Cont?Ne:Ge,Qe=Ae),Fe==="PerpetualV2"&&(Ke=be===we.Base?Xe:$e,Qe=be===we.Base?ye:Ae);const ze=Number(xe.floor(_e,Ke,Qe));if(be===we.Cont)return ze;if(be===we.Base)return Number(In(ze,Ve,Be));if(be===we.Coin)return Number(Dn(ze,Be,Ve))}function Le(_e){return async function(){const{type:be,symbol:Ve,pricePrecision:Be}=o,{buyQty:Fe,sellQty:$e}=hr(o,h,d,c,a,i),Ae=x(Fe,U,o,p),Ne=x($e,U,o,p),Ge=ke(Y?Ae:ee,p,i,o),Xe=ke(Y?Ne:ee,p,i,o),ye=_e==="Buy"?Ge:Xe;if(ye<=0){Pt.send("toast","info",{message:f(Ye.QtyError)});return}const Ke={type:be,side:_e,symbol:Ve,ordType:"Market",actionBy:"FromOrderPlacement",timeInForce:"ImmediateOrCancel"};be==="Perpetual"&&Object.assign(Ke,{orderQty:ye,priceEp:i}),be==="PerpetualV2"&&Object.assign(Ke,{orderQtyRq:String(ye),priceRp:xe.floor(i,Be),posSide:kr(c,a,_e)}),t(12,Z=!0),await fr(Ke,{by:"tv",goal:"create_market"}),t(12,Z=!1)}}function ge(_e){const{factor:be,maxQuantity:Ve,minQuantity:Be,precision:Fe,scale:$e,tickSizeEx:Ae}=_e;t(13,ue={factor:be,precision:Fe,scale:$e,tickSizeEx:Ae,maxEx:Ve,minEx:Be})}function ae(_e,be,Ve,Be,Fe,$e,Ae,Ne,Ge,Xe,ye){const{buyQty:Ke,sellQty:Qe}=hr(_e,Ve,Be,Fe,$e,Ae),ze=x(Ke,be,_e,Ne),Ue=x(Qe,be,_e,Ne),{precision:st,scale:Oe}=ue,it=xe.floor(Xe?ze:ye,st,Oe),ct=xe.floor(Xe?Ue:ye,st,Oe),{settleCurrency:ft,contractUnderlyingAssets:_t}=_e,gt={[we.Cont]:Ge(Ye.Cont),[we.Base]:ft,[we.Coin]:_t}[Ne]||"-";t(14,ce={buy:it+" "+gt,sell:ct+" "+gt})}function x(_e,be,Ve,Be){const{contractSize:Fe,qtyFactor:$e,qtyPrecision:Ae,valuePrecision:Ne}=Ve,Ge=Re(_e).times(be).div(100).times($e);if(Be===we.Cont)return Oi(Ge);if(Be===we.Base){const Xe=_r(i,o);return Oi(Re(Ge).times(Xe),Ne)}return Be===we.Coin?Oi(Re(Ge).times(Fe),Ae):0}function le(_e,be){be&&(!_e||!_e.quickPlaceMarketOrder||!be.isPerpetual)&&V("close")}function fe(_e){De[_e?"unshift":"push"](()=>{$=_e,t(5,$)})}function Se(_e){ee=_e,t(2,ee)}function Pe(_e){X=_e,t(11,X)}const Ce=()=>t(10,K=!0);function Ee(_e){U=_e,t(0,U)}const Ie=()=>t(1,Y=!0),ve=()=>t(10,K=!1);function de(_e){De[_e?"unshift":"push"](()=>{L=_e,t(4,L)})}function se(){N=this.offsetWidth,z=this.offsetHeight,t(6,N),t(7,z)}const he=()=>t(10,K=!1);return n.$$.update=()=>{n.$$.dirty[1]&2&&t(19,i=C?C.closeEp:0),n.$$.dirty[0]&8388608|n.$$.dirty[1]&1&&pe(T,o),n.$$.dirty[0]&8912896&&t(22,r=li(o,i)),n.$$.dirty[0]&8388608&&t(21,l=si(o)),n.$$.dirty[0]&81788936&&t(20,s=ei(p,f,zt,o,r,l)),n.$$.dirty[0]&1048576&&ge(s),n.$$.dirty[0]&529006607&&ae(o,U,h,d,c,a,i,p,f,Y,ee),n.$$.dirty[0]&1610612736&&le(_,v)},[U,Y,ee,f,L,$,N,z,H,R,K,X,Z,ue,ce,F,me,oe,Le,i,s,l,r,o,a,c,p,d,h,_,v,T,C,fe,Se,Pe,Ce,Ee,Ie,ve,de,se,he]}let oC=class extends tt{constructor(e){super(),nt(this,e,sC,lC,et,{},null,[-1,-1])}};function aC(n){let e,t,i,r,l,s,o,a;const c=[uC,fC],f=[];function p(d,h){return d[5]?0:1}return e=p(n),t=f[e]=c[e](n),l=new Av({}),o=new yS({}),{c(){t.c(),i=q(),r=y("div"),te(l.$$.fragment),s=q(),te(o.$$.fragment),this.h()},l(d){t.l(d),i=M(d),r=k(d,"DIV",{class:!0,id:!0});var h=S(r);re(l.$$.fragment,h),s=M(h),re(o.$$.fragment,h),h.forEach(m),this.h()},h(){E(r,"class","df ais H-5i5uz6"),E(r,"id","body"),Te(r,"fdrr",n[3]===bi.Right)},m(d,h){f[e].m(d,h),G(d,i,h),G(d,r,h),ne(l,r,null),u(r,s),ne(o,r,null),a=!0},p(d,h){(!a||h&8)&&Te(r,"fdrr",d[3]===bi.Right)},i(d){a||(Q(t),Q(l.$$.fragment,d),Q(o.$$.fragment,d),a=!0)},o(d){j(t),j(l.$$.fragment,d),j(o.$$.fragment,d),a=!1},d(d){f[e].d(d),d&&m(i),d&&m(r),ie(l),ie(o)}}}function cC(n){let e=n[2].quickPlaceLimitOrder,t,i,r=Wu();return{c(){r.c(),t=ut()},l(l){r.l(l),t=ut()},m(l,s){r.m(l,s),G(l,t,s),i=!0},p(l,s){s&4&&et(e,e=l[2].quickPlaceLimitOrder)?(ot(),j(r,1,1,rt),at(),r=Wu(),r.c(),Q(r,1),r.m(t.parentNode,t)):r.p(l,s)},i(l){i||(Q(r),i=!0)},o(l){j(r),i=!1},d(l){l&&m(t),r.d(l)}}}function fC(n){let e,t;return e=new YS({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function uC(n){let e,t;return e=new nC({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Wu(n){let e,t;return e=new sd({}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p:rt,i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Gu(n){let e,t;return e=new mr({props:{component:j1}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p:rt,i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Ku(n){var s;let e,t,i,r;e=new mr({props:{component:AS}});let l=n[0]&&((s=n[2])==null?void 0:s.quickPlaceMarketOrder)&&Xu();return{c(){te(e.$$.fragment),t=q(),l&&l.c(),i=ut()},l(o){re(e.$$.fragment,o),t=M(o),l&&l.l(o),i=ut()},m(o,a){ne(e,o,a),G(o,t,a),l&&l.m(o,a),G(o,i,a),r=!0},p(o,a){var c;o[0]&&((c=o[2])!=null&&c.quickPlaceMarketOrder)?l?(l.p(o,a),a&5&&Q(l,1)):(l=Xu(),l.c(),Q(l,1),l.m(i.parentNode,i)):l&&(ot(),j(l,1,1,()=>{l=null}),at())},i(o){r||(Q(e.$$.fragment,o),Q(l),r=!0)},o(o){j(e.$$.fragment,o),j(l),r=!1},d(o){ie(e,o),o&&m(t),l&&l.d(o),o&&m(i)}}}function Xu(n){let e,t;return e=new mr({props:{component:oC}}),{c(){te(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,r){ne(e,i,r),t=!0},p:rt,i(i){t||(Q(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function pC(n){let e,t,i,r,l,s;const o=[cC,aC],a=[];function c(d,h){return d[1]?0:1}e=c(n),t=a[e]=o[e](n);let f=n[0]&&Gu(),p=n[4]==="Login"&&Ku(n);return{c(){t.c(),i=q(),f&&f.c(),r=q(),p&&p.c(),l=ut()},l(d){t.l(d),i=M(d),f&&f.l(d),r=M(d),p&&p.l(d),l=ut()},m(d,h){a[e].m(d,h),G(d,i,h),f&&f.m(d,h),G(d,r,h),p&&p.m(d,h),G(d,l,h),s=!0},p(d,[h]){let _=e;e=c(d),e===_?a[e].p(d,h):(ot(),j(a[_],1,1,()=>{a[_]=null}),at(),t=a[e],t?t.p(d,h):(t=a[e]=o[e](d),t.c()),Q(t,1),t.m(i.parentNode,i)),d[0]?f?(f.p(d,h),h&1&&Q(f,1)):(f=Gu(),f.c(),Q(f,1),f.m(r.parentNode,r)):f&&(ot(),j(f,1,1,()=>{f=null}),at()),d[4]==="Login"?p?(p.p(d,h),h&16&&Q(p,1)):(p=Ku(d),p.c(),Q(p,1),p.m(l.parentNode,l)):p&&(ot(),j(p,1,1,()=>{p=null}),at())},i(d){s||(Q(t),Q(f),Q(p),s=!0)},o(d){j(t),j(f),j(p),s=!1},d(d){a[e].d(d),d&&m(i),f&&f.d(d),d&&m(r),p&&p.d(d),d&&m(l)}}}function dC(n,e,t){let i,r,l,s,o;J(n,Ms,f=>t(6,i=f)),J(n,pp,f=>t(1,r=f)),J(n,Vr,f=>t(2,l=f)),J(n,ml,f=>t(3,s=f)),J(n,yr,f=>t(4,o=f));const a=xi.isMock();let c=!1;return Lt(()=>t(0,c=!0)),Lt(()=>{vn.readContractStorage().riskEngineMode&&i.visible&&en.create(xp)}),[c,r,l,s,o,a]}class mC extends tt{constructor(e){super(),nt(this,e,dC,pC,et,{})}}const d5=mC;export{d5 as view};
//# sourceMappingURL=chunk-e70aa050.js.map

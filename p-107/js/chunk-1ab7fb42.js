import{h as o,A as i,c as l,a as b,b as f,d as u,ba as R,bb as v,bc as A,m as r,au as g,f as D,U as w,u as L,b0 as O,bd as B,N as x,ap as k,aG as K,be as N,al as U,b7 as F,bf as M}from"./chunk-19a327d5.js";import{S as T,a as c,B as n,f as V,m as p,s as H}from"./app-a93d0564.js";const W=`${T.STATIC_URL}/pubimg/`,d={NoDeposit:1,NoKYC2FA:2,DoneDepositBasicKYC2FA:3,DoneDepositAllKYC2FA:4},E=7,m={PERSON:"1cef61092b5aeef00a0b9376c8ee0df5da8a25226d05e9556f08983aa538ab5c.png",ENTERPRISE:"af7a038a01ca0139f370bfe015ce322e4790124d942e0fe5c87a40b5cf6d4695.png",SELECT_ICONS:"1dfe018378784719c7a05b73116ac18acfee1c10f2b39be27c6b3939afc83739.png",HEAD_ICON:"2aad766a3c142394bb50c4e4895b7fff7a1f2ffbac6189f080763edac5da6e54.png",HEAD_SM:"5f920de86c57f47078af077f3e2ac6bce2c8b1257906bab9d02c28e5c0839e61.png",ID_ICON:"5df31405ecc75ba78e4c61192b2c0754cf68beb33de6f77aa3747c0dc9ed75f6.png",FACIAL:"ea8e8035a81c31ddfd867f661368a28a381a9cf957b34bcf910dd490f3191705.png"};Object.keys(m).forEach(e=>m[e]=[W,m[e]].join(""));const P={getShareTimes(){return o.get(i.SHARE_TIMES,{})},getShareList(){return o.get(i.SHARE_HISTORY_LIST,{})},share(e){return o.post(i.SHARE,{query:e})},receiveList(e){return o.get(i.RECEIVE_LIST,{query:e})},receive(e){return o.post(i.RECEIVE,{params:e})},completeTask(){return o.post(i.COMPLETE_TASK,{})}},Y=new c,q=new n([]);new n([]);const $=new n([]),y=new n([]);l([Y,v]).pipe(b(u),V(([,e])=>e!=="Init"),f(([e,t])=>j(e,t))).subscribe(e=>q.next(e));async function j(e,t){const{data:a,error:s}=await(t==="Login"?A.contentViewLogin(e):A.contentViewLogout(e));return a?a.rows:(s&&r.send("toast","error",s),[])}u.subscribe(async()=>{const{data:e}=await R.getHotSpotsAndContracts();$.next(e.spot),y.next(e.contract)});const G=new n({autoRenew:!1,autoRenewType:"",endTime:new Date,membershipLevel:"",rights:[],valid:!1}),Q=new n({availableQuantity:0,totalQuantity:0}),X=new c,z=new c,J=new c,Z=new c,C=new n([]),ee=new n({}),te=new n(null),ae=new c,se=new n([]),ne=new c,re=new n([]),Ae=l([C,x,k]).pipe(p(([e,t,a])=>{if(!e.some(s=>s.taskId===10&&s.status===200))return d.NoDeposit;if(t.totp){if(a.advanceKycStatus==="Verified")return d.DoneDepositAllKYC2FA;if(a.basicKycStatus==="Verified")return d.DoneDepositBasicKYC2FA}return d.NoKYC2FA})),Te=l([K,$]).pipe(p(([e,t])=>t.map(a=>e.find(s=>s.symbol===a)).filter(Boolean).slice(0,E),g())),Ee=l([N,y]).pipe(p(([e,t])=>t.map(a=>e.find(s=>s.symbol===a)).filter(Boolean).slice(0,E),g())),$e=z.pipe(f(()=>L.getFavoriteList()),p(({data:e})=>((e==null?void 0:e.rows)??[]).map(({symbol:t})=>t)),H([])),ye=J.pipe(f(e=>w.queryUseAssets(e)),p(({data:e})=>e&&e.assetsTrendList.map(t=>({x:U.formatUTCMonthDay(t.timestamp-1),y:t.valuation*1}))),g()),oe={remainAmount:0,usedAmount:0,limitAmount:0,targetLimit:0};D.subscribe(()=>{I(),h(),fe(),be()});X.pipe(b(u),f(()=>ce())).subscribe(e=>ee.next(e));Z.pipe(b(u),f(()=>ie())).subscribe(e=>C.next(e));ae.pipe(f(()=>ue())).subscribe(e=>se.next(e));r.subscribe("reload-base-membership","action",()=>{I()});r.subscribe("reload-share-time","action",()=>{h()});async function I(){const{data:e,error:t}=await w.getBaseMembershipInfo();e&&G.next(e),t&&r.send("toast","error",t)}async function h(){const{data:e,error:t}=await P.getShareTimes();e&&Q.next(e),t&&r.send("toast","error",t)}async function ie(){const{data:e,error:t}=await w.getTasksList();if(e)return e.rows;t&&r.send("toast","error",t)}async function ce(){const{data:e,error:t}=await w.getFeeRate();if(e)return e;t&&r.send("toast","error",t)}async function fe(){const{data:e,error:t}=await L.bigClientSelf();e&&te.next(e),t&&r.send("toast","error",t)}async function ue(){const{data:e,error:t}=await L.getAvatarList();if(e)return e.rows;t&&r.send("toast","error",t)}async function Ce(){const{data:e,error:t}=await M.getWithdrawKycLimit();return e?ne.next(e):(t&&r.send("toast","error",t),oe)}async function be(){const e={itemKey:"banner",location:14,lang:O(F)},{data:t}=await B.getOperationBannersLogin(e);t&&re.next(t.rows.map(({detail:a})=>({img:`${T.STATIC_URL}${a.webimg}`,url:a.webLink})))}const _={getWelcomeConfig(){return o.get(i.BONUS_WELCOME_CONFIG,{})},getTaskList(e){return o.get(i.BONUS_TASK_LIST,{query:e})},async postPrivilegeLottery(e){var S;const{data:t,error:a}=await o.post(i.BONUS_PRIVILEGE_LOTTERY,{params:e});if(a)return{rows:null,error:a};const s=await o.get(i.BONUS_PRIVILEGE_DETAILS,{query:{channel:"WEB",scene:"WELCOME_BONUS",list:t.privilegeIdList}});return{rows:(S=s==null?void 0:s.data)==null?void 0:S.rows,error:s==null?void 0:s.error}}},pe=new c,de=new n({expiredDays:null,awardText:null});pe.pipe(b(u),f(()=>le())).subscribe(e=>de.next(e));async function le(){const{data:e,error:t}=await _.getWelcomeConfig();return e||(t&&r.send("toast","error",t),{expiredDays:null,awardText:null})}const we=new c,me=new n({taskList:null});we.pipe(b(u),f(e=>ge(e))).subscribe(e=>me.next(e));async function ge(e){const{data:t,error:a}=await _.getTaskList(e);return t||(a&&r.send("toast","error",a),{taskList:null})}export{E as H,m as K,d as U,se as a,ye as b,J as c,z as d,Te as e,$e as f,Z as g,Ee as h,Ce as i,ae as l,we as q,re as r,me as t,Ae as u,ne as w};
//# sourceMappingURL=chunk-1ab7fb42.js.map
